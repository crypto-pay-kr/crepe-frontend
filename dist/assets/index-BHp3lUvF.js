var HD=Object.defineProperty;var iN=n=>{throw TypeError(n)};var WD=(n,e,t)=>e in n?HD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Me=(n,e,t)=>WD(n,typeof e!="symbol"?e+"":e,t),Uv=(n,e,t)=>e.has(n)||iN("Cannot "+t);var f=(n,e,t)=>(Uv(n,e,"read from private field"),t?t.call(n):e.get(n)),I=(n,e,t)=>e.has(n)?iN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,s)=>(Uv(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),_=(n,e,t)=>(Uv(n,e,"access private method"),t);var ln=(n,e,t,s)=>({set _(r){T(n,e,r,t)},get _(){return f(n,e,s)}});function GD(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const o=Object.getOwnPropertyDescriptor(s,r);o&&Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Ey(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zv={exports:{}},Kh={},Hv={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function KD(){if(oN)return Ge;oN=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function C($,Z,he){this.props=$,this.context=Z,this.refs=b,this.updater=he||v}C.prototype.isReactComponent={},C.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},C.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function E(){}E.prototype=C.prototype;function N($,Z,he){this.props=$,this.context=Z,this.refs=b,this.updater=he||v}var k=N.prototype=new E;k.constructor=N,w(k,C.prototype),k.isPureReactComponent=!0;var P=Array.isArray,R=Object.prototype.hasOwnProperty,M={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function F($,Z,he){var ve,Ee={},ye=null,se=null;if(Z!=null)for(ve in Z.ref!==void 0&&(se=Z.ref),Z.key!==void 0&&(ye=""+Z.key),Z)R.call(Z,ve)&&!O.hasOwnProperty(ve)&&(Ee[ve]=Z[ve]);var me=arguments.length-2;if(me===1)Ee.children=he;else if(1<me){for(var Ne=Array(me),ce=0;ce<me;ce++)Ne[ce]=arguments[ce+2];Ee.children=Ne}if($&&$.defaultProps)for(ve in me=$.defaultProps,me)Ee[ve]===void 0&&(Ee[ve]=me[ve]);return{$$typeof:n,type:$,key:ye,ref:se,props:Ee,_owner:M.current}}function D($,Z){return{$$typeof:n,type:$.type,key:Z,ref:$.ref,props:$.props,_owner:$._owner}}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function K($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(he){return Z[he]})}var X=/\/+/g;function ee($,Z){return typeof $=="object"&&$!==null&&$.key!=null?K(""+$.key):Z.toString(36)}function J($,Z,he,ve,Ee){var ye=typeof $;(ye==="undefined"||ye==="boolean")&&($=null);var se=!1;if($===null)se=!0;else switch(ye){case"string":case"number":se=!0;break;case"object":switch($.$$typeof){case n:case e:se=!0}}if(se)return se=$,Ee=Ee(se),$=ve===""?"."+ee(se,0):ve,P(Ee)?(he="",$!=null&&(he=$.replace(X,"$&/")+"/"),J(Ee,Z,he,"",function(ce){return ce})):Ee!=null&&(U(Ee)&&(Ee=D(Ee,he+(!Ee.key||se&&se.key===Ee.key?"":(""+Ee.key).replace(X,"$&/")+"/")+$)),Z.push(Ee)),1;if(se=0,ve=ve===""?".":ve+":",P($))for(var me=0;me<$.length;me++){ye=$[me];var Ne=ve+ee(ye,me);se+=J(ye,Z,he,Ne,Ee)}else if(Ne=x($),typeof Ne=="function")for($=Ne.call($),me=0;!(ye=$.next()).done;)ye=ye.value,Ne=ve+ee(ye,me++),se+=J(ye,Z,he,Ne,Ee);else if(ye==="object")throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return se}function ae($,Z,he){if($==null)return $;var ve=[],Ee=0;return J($,ve,"","",function(ye){return Z.call(he,ye,Ee++)}),ve}function Y($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(he){($._status===0||$._status===-1)&&($._status=1,$._result=he)},function(he){($._status===0||$._status===-1)&&($._status=2,$._result=he)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var G={current:null},z={transition:null},te={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:z,ReactCurrentOwner:M};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:ae,forEach:function($,Z,he){ae($,function(){Z.apply(this,arguments)},he)},count:function($){var Z=0;return ae($,function(){Z++}),Z},toArray:function($){return ae($,function(Z){return Z})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ge.Component=C,Ge.Fragment=t,Ge.Profiler=r,Ge.PureComponent=N,Ge.StrictMode=s,Ge.Suspense=d,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Ge.act=ne,Ge.cloneElement=function($,Z,he){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ve=w({},$.props),Ee=$.key,ye=$.ref,se=$._owner;if(Z!=null){if(Z.ref!==void 0&&(ye=Z.ref,se=M.current),Z.key!==void 0&&(Ee=""+Z.key),$.type&&$.type.defaultProps)var me=$.type.defaultProps;for(Ne in Z)R.call(Z,Ne)&&!O.hasOwnProperty(Ne)&&(ve[Ne]=Z[Ne]===void 0&&me!==void 0?me[Ne]:Z[Ne])}var Ne=arguments.length-2;if(Ne===1)ve.children=he;else if(1<Ne){me=Array(Ne);for(var ce=0;ce<Ne;ce++)me[ce]=arguments[ce+2];ve.children=me}return{$$typeof:n,type:$.type,key:Ee,ref:ye,props:ve,_owner:se}},Ge.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Ge.createElement=F,Ge.createFactory=function($){var Z=F.bind(null,$);return Z.type=$,Z},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function($){return{$$typeof:u,render:$}},Ge.isValidElement=U,Ge.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:Y}},Ge.memo=function($,Z){return{$$typeof:h,type:$,compare:Z===void 0?null:Z}},Ge.startTransition=function($){var Z=z.transition;z.transition={};try{$()}finally{z.transition=Z}},Ge.unstable_act=ne,Ge.useCallback=function($,Z){return G.current.useCallback($,Z)},Ge.useContext=function($){return G.current.useContext($)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function($){return G.current.useDeferredValue($)},Ge.useEffect=function($,Z){return G.current.useEffect($,Z)},Ge.useId=function(){return G.current.useId()},Ge.useImperativeHandle=function($,Z,he){return G.current.useImperativeHandle($,Z,he)},Ge.useInsertionEffect=function($,Z){return G.current.useInsertionEffect($,Z)},Ge.useLayoutEffect=function($,Z){return G.current.useLayoutEffect($,Z)},Ge.useMemo=function($,Z){return G.current.useMemo($,Z)},Ge.useReducer=function($,Z,he){return G.current.useReducer($,Z,he)},Ge.useRef=function($){return G.current.useRef($)},Ge.useState=function($){return G.current.useState($)},Ge.useSyncExternalStore=function($,Z,he){return G.current.useSyncExternalStore($,Z,he)},Ge.useTransition=function(){return G.current.useTransition()},Ge.version="18.3.1",Ge}var aN;function BS(){return aN||(aN=1,Hv.exports=KD()),Hv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function qD(){if(lN)return Kh;lN=1;var n=BS(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},x=null,v=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)s.call(d,m)&&!o.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:x,ref:v,props:g,_owner:r.current}}return Kh.Fragment=t,Kh.jsx=a,Kh.jsxs=a,Kh}var cN;function XD(){return cN||(cN=1,zv.exports=qD()),zv.exports}var c=XD(),A=BS();const ps=Ey(A),ST=GD({__proto__:null,default:ps},[A]);var Lg={},Wv={exports:{}},os={},Gv={exports:{}},Kv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function YD(){return uN||(uN=1,function(n){function e(z,te){var ne=z.length;z.push(te);e:for(;0<ne;){var $=ne-1>>>1,Z=z[$];if(0<r(Z,te))z[$]=te,z[ne]=Z,ne=$;else break e}}function t(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var te=z[0],ne=z.pop();if(ne!==te){z[0]=ne;e:for(var $=0,Z=z.length,he=Z>>>1;$<he;){var ve=2*($+1)-1,Ee=z[ve],ye=ve+1,se=z[ye];if(0>r(Ee,ne))ye<Z&&0>r(se,Ee)?(z[$]=se,z[ye]=ne,$=ye):(z[$]=Ee,z[ve]=ne,$=ve);else if(ye<Z&&0>r(se,ne))z[$]=se,z[ye]=ne,$=ye;else break e}}return te}function r(z,te){var ne=z.sortIndex-te.sortIndex;return ne!==0?ne:z.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,x=3,v=!1,w=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(z){for(var te=t(h);te!==null;){if(te.callback===null)s(h);else if(te.startTime<=z)s(h),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(h)}}function P(z){if(b=!1,k(z),!w)if(t(d)!==null)w=!0,Y(R);else{var te=t(h);te!==null&&G(P,te.startTime-z)}}function R(z,te){w=!1,b&&(b=!1,E(F),F=-1),v=!0;var ne=x;try{for(k(te),g=t(d);g!==null&&(!(g.expirationTime>te)||z&&!K());){var $=g.callback;if(typeof $=="function"){g.callback=null,x=g.priorityLevel;var Z=$(g.expirationTime<=te);te=n.unstable_now(),typeof Z=="function"?g.callback=Z:g===t(d)&&s(d),k(te)}else s(d);g=t(d)}if(g!==null)var he=!0;else{var ve=t(h);ve!==null&&G(P,ve.startTime-te),he=!1}return he}finally{g=null,x=ne,v=!1}}var M=!1,O=null,F=-1,D=5,U=-1;function K(){return!(n.unstable_now()-U<D)}function X(){if(O!==null){var z=n.unstable_now();U=z;var te=!0;try{te=O(!0,z)}finally{te?ee():(M=!1,O=null)}}else M=!1}var ee;if(typeof N=="function")ee=function(){N(X)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=X,ee=function(){ae.postMessage(null)}}else ee=function(){C(X,0)};function Y(z){O=z,M||(M=!0,ee())}function G(z,te){F=C(function(){z(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,Y(R))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(z){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var ne=x;x=te;try{return z()}finally{x=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,te){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=x;x=z;try{return te()}finally{x=ne}},n.unstable_scheduleCallback=function(z,te,ne){var $=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?$+ne:$):ne=$,z){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,z={id:m++,callback:te,priorityLevel:z,startTime:ne,expirationTime:Z,sortIndex:-1},ne>$?(z.sortIndex=ne,e(h,z),t(d)===null&&z===t(h)&&(b?(E(F),F=-1):b=!0,G(P,ne-$))):(z.sortIndex=Z,e(d,z),w||v||(w=!0,Y(R))),z},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(z){var te=x;return function(){var ne=x;x=te;try{return z.apply(this,arguments)}finally{x=ne}}}}(Kv)),Kv}var dN;function QD(){return dN||(dN=1,Gv.exports=YD()),Gv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN;function JD(){if(hN)return os;hN=1;var n=BS(),e=QD();function t(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,r={};function o(i,l){a(i,l),a(i+"Capture",l)}function a(i,l){for(r[i]=l,i=0;i<l.length;i++)s.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function x(i){return d.call(g,i)?!0:d.call(m,i)?!1:h.test(i)?g[i]=!0:(m[i]=!0,!1)}function v(i,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,l,p,y){if(l===null||typeof l>"u"||v(i,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(i,l,p,y,S,j,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=i,this.type=l,this.sanitizeURL=j,this.removeEmptyString=L}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];C[l]=new b(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function N(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(E,N);C[l]=new b(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(E,N);C[l]=new b(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(E,N);C[l]=new b(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,l,p,y){var S=C.hasOwnProperty(l)?C[l]:null;(S!==null?S.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,p,S,y)&&(p=null),y||S===null?x(l)&&(p===null?i.removeAttribute(l):i.setAttribute(l,""+p)):S.mustUseProperty?i[S.propertyName]=p===null?S.type===3?!1:"":p:(l=S.attributeName,y=S.attributeNamespace,p===null?i.removeAttribute(l):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,y?i.setAttributeNS(y,l,p):i.setAttribute(l,p))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),M=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),K=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),z=Symbol.iterator;function te(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Object.assign,$;function Z(i){if($===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+i}var he=!1;function ve(i,l){if(!i||he)return"";he=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Q){var y=Q}Reflect.construct(i,[],l)}else{try{l.call()}catch(Q){y=Q}i.call(l.prototype)}else{try{throw Error()}catch(Q){y=Q}i()}}catch(Q){if(Q&&y&&typeof Q.stack=="string"){for(var S=Q.stack.split(`
`),j=y.stack.split(`
`),L=S.length-1,B=j.length-1;1<=L&&0<=B&&S[L]!==j[B];)B--;for(;1<=L&&0<=B;L--,B--)if(S[L]!==j[B]){if(L!==1||B!==1)do if(L--,B--,0>B||S[L]!==j[B]){var V=`
`+S[L].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=L&&0<=B);break}}}finally{he=!1,Error.prepareStackTrace=p}return(i=i?i.displayName||i.name:"")?Z(i):""}function Ee(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=ve(i.type,!1),i;case 11:return i=ve(i.type.render,!1),i;case 1:return i=ve(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case M:return"Portal";case D:return"Profiler";case F:return"StrictMode";case ee:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case K:return(i.displayName||"Context")+".Consumer";case U:return(i._context.displayName||"Context")+".Provider";case X:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ae:return l=i.displayName||null,l!==null?l:ye(i.type)||"Memo";case Y:l=i._payload,i=i._init;try{return ye(i(l))}catch{}}return null}function se(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(l);case 8:return l===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function me(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ce(i){var l=Ne(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),y=""+i[l];if(!i.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,j=p.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return S.call(this)},set:function(L){y=""+L,j.call(this,L)}}),Object.defineProperty(i,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Fe(i){i._valueTracker||(i._valueTracker=ce(i))}function He(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return i&&(y=Ne(i)?i.checked?"true":"false":i.value),i=y,i!==p?(l.setValue(i),!0):!1}function Re(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function qe(i,l){var p=l.checked;return ne({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??i._wrapperState.initialChecked})}function ft(i,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=me(l.value!=null?l.value:p),i._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Xe(i,l){l=l.checked,l!=null&&k(i,"checked",l,!1)}function qt(i,l){Xe(i,l);var p=me(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&i.value===""||i.value!=p)&&(i.value=""+p):i.value!==""+p&&(i.value=""+p);else if(y==="submit"||y==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?vs(i,l.type,p):l.hasOwnProperty("defaultValue")&&vs(i,l.type,me(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function es(i,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,p||l===i.value||(i.value=l),i.defaultValue=l}p=i.name,p!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,p!==""&&(i.name=p)}function vs(i,l,p){(l!=="number"||Re(i.ownerDocument)!==i)&&(p==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+p&&(i.defaultValue=""+p))}var Vr=Array.isArray;function $n(i,l,p,y){if(i=i.options,l){l={};for(var S=0;S<p.length;S++)l["$"+p[S]]=!0;for(p=0;p<i.length;p++)S=l.hasOwnProperty("$"+i[p].value),i[p].selected!==S&&(i[p].selected=S),S&&y&&(i[p].defaultSelected=!0)}else{for(p=""+me(p),l=null,S=0;S<i.length;S++){if(i[S].value===p){i[S].selected=!0,y&&(i[S].defaultSelected=!0);return}l!==null||i[S].disabled||(l=i[S])}l!==null&&(l.selected=!0)}}function Ka(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Fc(i,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(Vr(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}i._wrapperState={initialValue:me(p)}}function Bc(i,l){var p=me(l.value),y=me(l.defaultValue);p!=null&&(p=""+p,p!==i.value&&(i.value=p),l.defaultValue==null&&i.defaultValue!==p&&(i.defaultValue=p)),y!=null&&(i.defaultValue=""+y)}function $c(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Vc(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $s(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Vc(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Vs,Ur=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,S){MSApp.execUnsafeLocalFunction(function(){return i(l,p,y,S)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Vs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function fe(i,l){if(l){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===3){p.nodeValue=l;return}}i.textContent=l}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(i){zr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),Xt[l]=Xt[i]})});function Cm(i,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Xt.hasOwnProperty(i)&&Xt[i]?(""+l).trim():l+"px"}function wA(i,l){i=i.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,S=Cm(p,l[p],y);p==="float"&&(p="cssFloat"),y?i.setProperty(p,S):i[p]=S}}var XI=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e0(i,l){if(l){if(XI[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function t0(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=null;function s0(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var r0=null,Uc=null,zc=null;function SA(i){if(i=Rh(i)){if(typeof r0!="function")throw Error(t(280));var l=i.stateNode;l&&(l=qm(l),r0(i.stateNode,i.type,l))}}function AA(i){Uc?zc?zc.push(i):zc=[i]:Uc=i}function EA(){if(Uc){var i=Uc,l=zc;if(zc=Uc=null,SA(i),l)for(i=0;i<l.length;i++)SA(l[i])}}function CA(i,l){return i(l)}function NA(){}var i0=!1;function jA(i,l,p){if(i0)return i(l,p);i0=!0;try{return CA(i,l,p)}finally{i0=!1,(Uc!==null||zc!==null)&&(NA(),EA())}}function dh(i,l){var p=i.stateNode;if(p===null)return null;var y=qm(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var o0=!1;if(u)try{var hh={};Object.defineProperty(hh,"passive",{get:function(){o0=!0}}),window.addEventListener("test",hh,hh),window.removeEventListener("test",hh,hh)}catch{o0=!1}function YI(i,l,p,y,S,j,L,B,V){var Q=Array.prototype.slice.call(arguments,3);try{l.apply(p,Q)}catch(ie){this.onError(ie)}}var fh=!1,Nm=null,jm=!1,a0=null,QI={onError:function(i){fh=!0,Nm=i}};function JI(i,l,p,y,S,j,L,B,V){fh=!1,Nm=null,YI.apply(QI,arguments)}function ZI(i,l,p,y,S,j,L,B,V){if(JI.apply(this,arguments),fh){if(fh){var Q=Nm;fh=!1,Nm=null}else throw Error(t(198));jm||(jm=!0,a0=Q)}}function qa(i){var l=i,p=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(p=l.return),i=l.return;while(i)}return l.tag===3?p:null}function kA(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function TA(i){if(qa(i)!==i)throw Error(t(188))}function eM(i){var l=i.alternate;if(!l){if(l=qa(i),l===null)throw Error(t(188));return l!==i?null:i}for(var p=i,y=l;;){var S=p.return;if(S===null)break;var j=S.alternate;if(j===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===j.child){for(j=S.child;j;){if(j===p)return TA(S),i;if(j===y)return TA(S),l;j=j.sibling}throw Error(t(188))}if(p.return!==y.return)p=S,y=j;else{for(var L=!1,B=S.child;B;){if(B===p){L=!0,p=S,y=j;break}if(B===y){L=!0,y=S,p=j;break}B=B.sibling}if(!L){for(B=j.child;B;){if(B===p){L=!0,p=j,y=S;break}if(B===y){L=!0,y=j,p=S;break}B=B.sibling}if(!L)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?i:l}function PA(i){return i=eM(i),i!==null?_A(i):null}function _A(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=_A(i);if(l!==null)return l;i=i.sibling}return null}var RA=e.unstable_scheduleCallback,LA=e.unstable_cancelCallback,tM=e.unstable_shouldYield,nM=e.unstable_requestPaint,Ot=e.unstable_now,sM=e.unstable_getCurrentPriorityLevel,l0=e.unstable_ImmediatePriority,IA=e.unstable_UserBlockingPriority,km=e.unstable_NormalPriority,rM=e.unstable_LowPriority,MA=e.unstable_IdlePriority,Tm=null,Hr=null;function iM(i){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(Tm,i,void 0,(i.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:lM,oM=Math.log,aM=Math.LN2;function lM(i){return i>>>=0,i===0?32:31-(oM(i)/aM|0)|0}var Pm=64,_m=4194304;function ph(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Rm(i,l){var p=i.pendingLanes;if(p===0)return 0;var y=0,S=i.suspendedLanes,j=i.pingedLanes,L=p&268435455;if(L!==0){var B=L&~S;B!==0?y=ph(B):(j&=L,j!==0&&(y=ph(j)))}else L=p&~S,L!==0?y=ph(L):j!==0&&(y=ph(j));if(y===0)return 0;if(l!==0&&l!==y&&(l&S)===0&&(S=y&-y,j=l&-l,S>=j||S===16&&(j&4194240)!==0))return l;if((y&4)!==0&&(y|=p&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=y;0<l;)p=31-cr(l),S=1<<p,y|=i[p],l&=~S;return y}function cM(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uM(i,l){for(var p=i.suspendedLanes,y=i.pingedLanes,S=i.expirationTimes,j=i.pendingLanes;0<j;){var L=31-cr(j),B=1<<L,V=S[L];V===-1?((B&p)===0||(B&y)!==0)&&(S[L]=cM(B,l)):V<=l&&(i.expiredLanes|=B),j&=~B}}function c0(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function DA(){var i=Pm;return Pm<<=1,(Pm&4194240)===0&&(Pm=64),i}function u0(i){for(var l=[],p=0;31>p;p++)l.push(i);return l}function mh(i,l,p){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-cr(l),i[l]=p}function dM(i,l){var p=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var y=i.eventTimes;for(i=i.expirationTimes;0<p;){var S=31-cr(p),j=1<<S;l[S]=0,y[S]=-1,i[S]=-1,p&=~j}}function d0(i,l){var p=i.entangledLanes|=l;for(i=i.entanglements;p;){var y=31-cr(p),S=1<<y;S&l|i[y]&l&&(i[y]|=l),p&=~S}}var ot=0;function OA(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var FA,h0,BA,$A,VA,f0=!1,Lm=[],Ao=null,Eo=null,Co=null,gh=new Map,xh=new Map,No=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UA(i,l){switch(i){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":gh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(l.pointerId)}}function yh(i,l,p,y,S,j){return i===null||i.nativeEvent!==j?(i={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:j,targetContainers:[S]},l!==null&&(l=Rh(l),l!==null&&h0(l)),i):(i.eventSystemFlags|=y,l=i.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),i)}function fM(i,l,p,y,S){switch(l){case"focusin":return Ao=yh(Ao,i,l,p,y,S),!0;case"dragenter":return Eo=yh(Eo,i,l,p,y,S),!0;case"mouseover":return Co=yh(Co,i,l,p,y,S),!0;case"pointerover":var j=S.pointerId;return gh.set(j,yh(gh.get(j)||null,i,l,p,y,S)),!0;case"gotpointercapture":return j=S.pointerId,xh.set(j,yh(xh.get(j)||null,i,l,p,y,S)),!0}return!1}function zA(i){var l=Xa(i.target);if(l!==null){var p=qa(l);if(p!==null){if(l=p.tag,l===13){if(l=kA(p),l!==null){i.blockedOn=l,VA(i.priority,function(){BA(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){i.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Im(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var p=m0(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(p===null){p=i.nativeEvent;var y=new p.constructor(p.type,p);n0=y,p.target.dispatchEvent(y),n0=null}else return l=Rh(p),l!==null&&h0(l),i.blockedOn=p,!1;l.shift()}return!0}function HA(i,l,p){Im(i)&&p.delete(l)}function pM(){f0=!1,Ao!==null&&Im(Ao)&&(Ao=null),Eo!==null&&Im(Eo)&&(Eo=null),Co!==null&&Im(Co)&&(Co=null),gh.forEach(HA),xh.forEach(HA)}function vh(i,l){i.blockedOn===l&&(i.blockedOn=null,f0||(f0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pM)))}function bh(i){function l(S){return vh(S,i)}if(0<Lm.length){vh(Lm[0],i);for(var p=1;p<Lm.length;p++){var y=Lm[p];y.blockedOn===i&&(y.blockedOn=null)}}for(Ao!==null&&vh(Ao,i),Eo!==null&&vh(Eo,i),Co!==null&&vh(Co,i),gh.forEach(l),xh.forEach(l),p=0;p<No.length;p++)y=No[p],y.blockedOn===i&&(y.blockedOn=null);for(;0<No.length&&(p=No[0],p.blockedOn===null);)zA(p),p.blockedOn===null&&No.shift()}var Hc=P.ReactCurrentBatchConfig,Mm=!0;function mM(i,l,p,y){var S=ot,j=Hc.transition;Hc.transition=null;try{ot=1,p0(i,l,p,y)}finally{ot=S,Hc.transition=j}}function gM(i,l,p,y){var S=ot,j=Hc.transition;Hc.transition=null;try{ot=4,p0(i,l,p,y)}finally{ot=S,Hc.transition=j}}function p0(i,l,p,y){if(Mm){var S=m0(i,l,p,y);if(S===null)R0(i,l,y,Dm,p),UA(i,y);else if(fM(S,i,l,p,y))y.stopPropagation();else if(UA(i,y),l&4&&-1<hM.indexOf(i)){for(;S!==null;){var j=Rh(S);if(j!==null&&FA(j),j=m0(i,l,p,y),j===null&&R0(i,l,y,Dm,p),j===S)break;S=j}S!==null&&y.stopPropagation()}else R0(i,l,y,null,p)}}var Dm=null;function m0(i,l,p,y){if(Dm=null,i=s0(y),i=Xa(i),i!==null)if(l=qa(i),l===null)i=null;else if(p=l.tag,p===13){if(i=kA(l),i!==null)return i;i=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Dm=i,null}function WA(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sM()){case l0:return 1;case IA:return 4;case km:case rM:return 16;case MA:return 536870912;default:return 16}default:return 16}}var jo=null,g0=null,Om=null;function GA(){if(Om)return Om;var i,l=g0,p=l.length,y,S="value"in jo?jo.value:jo.textContent,j=S.length;for(i=0;i<p&&l[i]===S[i];i++);var L=p-i;for(y=1;y<=L&&l[p-y]===S[j-y];y++);return Om=S.slice(i,1<y?1-y:void 0)}function Fm(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Bm(){return!0}function KA(){return!1}function bs(i){function l(p,y,S,j,L){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=j,this.target=L,this.currentTarget=null;for(var B in i)i.hasOwnProperty(B)&&(p=i[B],this[B]=p?p(j):j[B]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Bm:KA,this.isPropagationStopped=KA,this}return ne(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Bm)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Bm)},persist:function(){},isPersistent:Bm}),l}var Wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x0=bs(Wc),wh=ne({},Wc,{view:0,detail:0}),xM=bs(wh),y0,v0,Sh,$m=ne({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w0,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Sh&&(Sh&&i.type==="mousemove"?(y0=i.screenX-Sh.screenX,v0=i.screenY-Sh.screenY):v0=y0=0,Sh=i),y0)},movementY:function(i){return"movementY"in i?i.movementY:v0}}),qA=bs($m),yM=ne({},$m,{dataTransfer:0}),vM=bs(yM),bM=ne({},wh,{relatedTarget:0}),b0=bs(bM),wM=ne({},Wc,{animationName:0,elapsedTime:0,pseudoElement:0}),SM=bs(wM),AM=ne({},Wc,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),EM=bs(AM),CM=ne({},Wc,{data:0}),XA=bs(CM),NM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TM(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=kM[i])?!!l[i]:!1}function w0(){return TM}var PM=ne({},wh,{key:function(i){if(i.key){var l=NM[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Fm(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?jM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w0,charCode:function(i){return i.type==="keypress"?Fm(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fm(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_M=bs(PM),RM=ne({},$m,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YA=bs(RM),LM=ne({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w0}),IM=bs(LM),MM=ne({},Wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),DM=bs(MM),OM=ne({},$m,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),FM=bs(OM),BM=[9,13,27,32],S0=u&&"CompositionEvent"in window,Ah=null;u&&"documentMode"in document&&(Ah=document.documentMode);var $M=u&&"TextEvent"in window&&!Ah,QA=u&&(!S0||Ah&&8<Ah&&11>=Ah),JA=" ",ZA=!1;function eE(i,l){switch(i){case"keyup":return BM.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gc=!1;function VM(i,l){switch(i){case"compositionend":return tE(l);case"keypress":return l.which!==32?null:(ZA=!0,JA);case"textInput":return i=l.data,i===JA&&ZA?null:i;default:return null}}function UM(i,l){if(Gc)return i==="compositionend"||!S0&&eE(i,l)?(i=GA(),Om=g0=jo=null,Gc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return QA&&l.locale!=="ko"?null:l.data;default:return null}}var zM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nE(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!zM[i.type]:l==="textarea"}function sE(i,l,p,y){AA(y),l=Wm(l,"onChange"),0<l.length&&(p=new x0("onChange","change",null,p,y),i.push({event:p,listeners:l}))}var Eh=null,Ch=null;function HM(i){wE(i,0)}function Vm(i){var l=Qc(i);if(He(l))return i}function WM(i,l){if(i==="change")return l}var rE=!1;if(u){var A0;if(u){var E0="oninput"in document;if(!E0){var iE=document.createElement("div");iE.setAttribute("oninput","return;"),E0=typeof iE.oninput=="function"}A0=E0}else A0=!1;rE=A0&&(!document.documentMode||9<document.documentMode)}function oE(){Eh&&(Eh.detachEvent("onpropertychange",aE),Ch=Eh=null)}function aE(i){if(i.propertyName==="value"&&Vm(Ch)){var l=[];sE(l,Ch,i,s0(i)),jA(HM,l)}}function GM(i,l,p){i==="focusin"?(oE(),Eh=l,Ch=p,Eh.attachEvent("onpropertychange",aE)):i==="focusout"&&oE()}function KM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vm(Ch)}function qM(i,l){if(i==="click")return Vm(l)}function XM(i,l){if(i==="input"||i==="change")return Vm(l)}function YM(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ur=typeof Object.is=="function"?Object.is:YM;function Nh(i,l){if(ur(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var p=Object.keys(i),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!d.call(l,S)||!ur(i[S],l[S]))return!1}return!0}function lE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cE(i,l){var p=lE(i);i=0;for(var y;p;){if(p.nodeType===3){if(y=i+p.textContent.length,i<=l&&y>=l)return{node:p,offset:l-i};i=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=lE(p)}}function uE(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?uE(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function dE(){for(var i=window,l=Re();l instanceof i.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)i=l.contentWindow;else break;l=Re(i.document)}return l}function C0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function QM(i){var l=dE(),p=i.focusedElem,y=i.selectionRange;if(l!==p&&p&&p.ownerDocument&&uE(p.ownerDocument.documentElement,p)){if(y!==null&&C0(p)){if(l=y.start,i=y.end,i===void 0&&(i=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(i,p.value.length);else if(i=(l=p.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var S=p.textContent.length,j=Math.min(y.start,S);y=y.end===void 0?j:Math.min(y.end,S),!i.extend&&j>y&&(S=y,y=j,j=S),S=cE(p,j);var L=cE(p,y);S&&L&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==L.node||i.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),i.removeAllRanges(),j>y?(i.addRange(l),i.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),i.addRange(l)))}}for(l=[],i=p;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)i=l[p],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var JM=u&&"documentMode"in document&&11>=document.documentMode,Kc=null,N0=null,jh=null,j0=!1;function hE(i,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;j0||Kc==null||Kc!==Re(y)||(y=Kc,"selectionStart"in y&&C0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),jh&&Nh(jh,y)||(jh=y,y=Wm(N0,"onSelect"),0<y.length&&(l=new x0("onSelect","select",null,l,p),i.push({event:l,listeners:y}),l.target=Kc)))}function Um(i,l){var p={};return p[i.toLowerCase()]=l.toLowerCase(),p["Webkit"+i]="webkit"+l,p["Moz"+i]="moz"+l,p}var qc={animationend:Um("Animation","AnimationEnd"),animationiteration:Um("Animation","AnimationIteration"),animationstart:Um("Animation","AnimationStart"),transitionend:Um("Transition","TransitionEnd")},k0={},fE={};u&&(fE=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function zm(i){if(k0[i])return k0[i];if(!qc[i])return i;var l=qc[i],p;for(p in l)if(l.hasOwnProperty(p)&&p in fE)return k0[i]=l[p];return i}var pE=zm("animationend"),mE=zm("animationiteration"),gE=zm("animationstart"),xE=zm("transitionend"),yE=new Map,vE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(i,l){yE.set(i,l),o(l,[i])}for(var T0=0;T0<vE.length;T0++){var P0=vE[T0],ZM=P0.toLowerCase(),eD=P0[0].toUpperCase()+P0.slice(1);ko(ZM,"on"+eD)}ko(pE,"onAnimationEnd"),ko(mE,"onAnimationIteration"),ko(gE,"onAnimationStart"),ko("dblclick","onDoubleClick"),ko("focusin","onFocus"),ko("focusout","onBlur"),ko(xE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tD=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function bE(i,l,p){var y=i.type||"unknown-event";i.currentTarget=p,ZI(y,l,void 0,i),i.currentTarget=null}function wE(i,l){l=(l&4)!==0;for(var p=0;p<i.length;p++){var y=i[p],S=y.event;y=y.listeners;e:{var j=void 0;if(l)for(var L=y.length-1;0<=L;L--){var B=y[L],V=B.instance,Q=B.currentTarget;if(B=B.listener,V!==j&&S.isPropagationStopped())break e;bE(S,B,Q),j=V}else for(L=0;L<y.length;L++){if(B=y[L],V=B.instance,Q=B.currentTarget,B=B.listener,V!==j&&S.isPropagationStopped())break e;bE(S,B,Q),j=V}}}if(jm)throw i=a0,jm=!1,a0=null,i}function xt(i,l){var p=l[F0];p===void 0&&(p=l[F0]=new Set);var y=i+"__bubble";p.has(y)||(SE(l,i,2,!1),p.add(y))}function _0(i,l,p){var y=0;l&&(y|=4),SE(p,i,y,l)}var Hm="_reactListening"+Math.random().toString(36).slice(2);function Th(i){if(!i[Hm]){i[Hm]=!0,s.forEach(function(p){p!=="selectionchange"&&(tD.has(p)||_0(p,!1,i),_0(p,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Hm]||(l[Hm]=!0,_0("selectionchange",!1,l))}}function SE(i,l,p,y){switch(WA(l)){case 1:var S=mM;break;case 4:S=gM;break;default:S=p0}p=S.bind(null,l,p,i),S=void 0,!o0||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?i.addEventListener(l,p,{capture:!0,passive:S}):i.addEventListener(l,p,!0):S!==void 0?i.addEventListener(l,p,{passive:S}):i.addEventListener(l,p,!1)}function R0(i,l,p,y,S){var j=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var B=y.stateNode.containerInfo;if(B===S||B.nodeType===8&&B.parentNode===S)break;if(L===4)for(L=y.return;L!==null;){var V=L.tag;if((V===3||V===4)&&(V=L.stateNode.containerInfo,V===S||V.nodeType===8&&V.parentNode===S))return;L=L.return}for(;B!==null;){if(L=Xa(B),L===null)return;if(V=L.tag,V===5||V===6){y=j=L;continue e}B=B.parentNode}}y=y.return}jA(function(){var Q=j,ie=s0(p),oe=[];e:{var re=yE.get(i);if(re!==void 0){var pe=x0,be=i;switch(i){case"keypress":if(Fm(p)===0)break e;case"keydown":case"keyup":pe=_M;break;case"focusin":be="focus",pe=b0;break;case"focusout":be="blur",pe=b0;break;case"beforeblur":case"afterblur":pe=b0;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=qA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=vM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=IM;break;case pE:case mE:case gE:pe=SM;break;case xE:pe=DM;break;case"scroll":pe=xM;break;case"wheel":pe=FM;break;case"copy":case"cut":case"paste":pe=EM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=YA}var we=(l&4)!==0,Ft=!we&&i==="scroll",W=we?re!==null?re+"Capture":null:re;we=[];for(var H=Q,q;H!==null;){q=H;var le=q.stateNode;if(q.tag===5&&le!==null&&(q=le,W!==null&&(le=dh(H,W),le!=null&&we.push(Ph(H,le,q)))),Ft)break;H=H.return}0<we.length&&(re=new pe(re,be,null,p,ie),oe.push({event:re,listeners:we}))}}if((l&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",re&&p!==n0&&(be=p.relatedTarget||p.fromElement)&&(Xa(be)||be[Ai]))break e;if((pe||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,pe?(be=p.relatedTarget||p.toElement,pe=Q,be=be?Xa(be):null,be!==null&&(Ft=qa(be),be!==Ft||be.tag!==5&&be.tag!==6)&&(be=null)):(pe=null,be=Q),pe!==be)){if(we=qA,le="onMouseLeave",W="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(we=YA,le="onPointerLeave",W="onPointerEnter",H="pointer"),Ft=pe==null?re:Qc(pe),q=be==null?re:Qc(be),re=new we(le,H+"leave",pe,p,ie),re.target=Ft,re.relatedTarget=q,le=null,Xa(ie)===Q&&(we=new we(W,H+"enter",be,p,ie),we.target=q,we.relatedTarget=Ft,le=we),Ft=le,pe&&be)t:{for(we=pe,W=be,H=0,q=we;q;q=Xc(q))H++;for(q=0,le=W;le;le=Xc(le))q++;for(;0<H-q;)we=Xc(we),H--;for(;0<q-H;)W=Xc(W),q--;for(;H--;){if(we===W||W!==null&&we===W.alternate)break t;we=Xc(we),W=Xc(W)}we=null}else we=null;pe!==null&&AE(oe,re,pe,we,!1),be!==null&&Ft!==null&&AE(oe,Ft,be,we,!0)}}e:{if(re=Q?Qc(Q):window,pe=re.nodeName&&re.nodeName.toLowerCase(),pe==="select"||pe==="input"&&re.type==="file")var Se=WM;else if(nE(re))if(rE)Se=XM;else{Se=KM;var Te=GM}else(pe=re.nodeName)&&pe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Se=qM);if(Se&&(Se=Se(i,Q))){sE(oe,Se,p,ie);break e}Te&&Te(i,re,Q),i==="focusout"&&(Te=re._wrapperState)&&Te.controlled&&re.type==="number"&&vs(re,"number",re.value)}switch(Te=Q?Qc(Q):window,i){case"focusin":(nE(Te)||Te.contentEditable==="true")&&(Kc=Te,N0=Q,jh=null);break;case"focusout":jh=N0=Kc=null;break;case"mousedown":j0=!0;break;case"contextmenu":case"mouseup":case"dragend":j0=!1,hE(oe,p,ie);break;case"selectionchange":if(JM)break;case"keydown":case"keyup":hE(oe,p,ie)}var Pe;if(S0)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Gc?eE(i,p)&&(Le="onCompositionEnd"):i==="keydown"&&p.keyCode===229&&(Le="onCompositionStart");Le&&(QA&&p.locale!=="ko"&&(Gc||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Gc&&(Pe=GA()):(jo=ie,g0="value"in jo?jo.value:jo.textContent,Gc=!0)),Te=Wm(Q,Le),0<Te.length&&(Le=new XA(Le,i,null,p,ie),oe.push({event:Le,listeners:Te}),Pe?Le.data=Pe:(Pe=tE(p),Pe!==null&&(Le.data=Pe)))),(Pe=$M?VM(i,p):UM(i,p))&&(Q=Wm(Q,"onBeforeInput"),0<Q.length&&(ie=new XA("onBeforeInput","beforeinput",null,p,ie),oe.push({event:ie,listeners:Q}),ie.data=Pe))}wE(oe,l)})}function Ph(i,l,p){return{instance:i,listener:l,currentTarget:p}}function Wm(i,l){for(var p=l+"Capture",y=[];i!==null;){var S=i,j=S.stateNode;S.tag===5&&j!==null&&(S=j,j=dh(i,p),j!=null&&y.unshift(Ph(i,j,S)),j=dh(i,l),j!=null&&y.push(Ph(i,j,S))),i=i.return}return y}function Xc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function AE(i,l,p,y,S){for(var j=l._reactName,L=[];p!==null&&p!==y;){var B=p,V=B.alternate,Q=B.stateNode;if(V!==null&&V===y)break;B.tag===5&&Q!==null&&(B=Q,S?(V=dh(p,j),V!=null&&L.unshift(Ph(p,V,B))):S||(V=dh(p,j),V!=null&&L.push(Ph(p,V,B)))),p=p.return}L.length!==0&&i.push({event:l,listeners:L})}var nD=/\r\n?/g,sD=/\u0000|\uFFFD/g;function EE(i){return(typeof i=="string"?i:""+i).replace(nD,`
`).replace(sD,"")}function Gm(i,l,p){if(l=EE(l),EE(i)!==l&&p)throw Error(t(425))}function Km(){}var L0=null,I0=null;function M0(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var D0=typeof setTimeout=="function"?setTimeout:void 0,rD=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,iD=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(i){return CE.resolve(null).then(i).catch(oD)}:D0;function oD(i){setTimeout(function(){throw i})}function O0(i,l){var p=l,y=0;do{var S=p.nextSibling;if(i.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(y===0){i.removeChild(S),bh(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=S}while(p);bh(l)}function To(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function NE(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var p=i.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return i;l--}else p==="/$"&&l++}i=i.previousSibling}return null}var Yc=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Yc,_h="__reactProps$"+Yc,Ai="__reactContainer$"+Yc,F0="__reactEvents$"+Yc,aD="__reactListeners$"+Yc,lD="__reactHandles$"+Yc;function Xa(i){var l=i[Wr];if(l)return l;for(var p=i.parentNode;p;){if(l=p[Ai]||p[Wr]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(i=NE(i);i!==null;){if(p=i[Wr])return p;i=NE(i)}return l}i=p,p=i.parentNode}return null}function Rh(i){return i=i[Wr]||i[Ai],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Qc(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function qm(i){return i[_h]||null}var B0=[],Jc=-1;function Po(i){return{current:i}}function yt(i){0>Jc||(i.current=B0[Jc],B0[Jc]=null,Jc--)}function mt(i,l){Jc++,B0[Jc]=i.current,i.current=l}var _o={},Cn=Po(_o),ts=Po(!1),Ya=_o;function Zc(i,l){var p=i.type.contextTypes;if(!p)return _o;var y=i.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var S={},j;for(j in p)S[j]=l[j];return y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=S),S}function ns(i){return i=i.childContextTypes,i!=null}function Xm(){yt(ts),yt(Cn)}function jE(i,l,p){if(Cn.current!==_o)throw Error(t(168));mt(Cn,l),mt(ts,p)}function kE(i,l,p){var y=i.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in l))throw Error(t(108,se(i)||"Unknown",S));return ne({},p,y)}function Ym(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||_o,Ya=Cn.current,mt(Cn,i),mt(ts,ts.current),!0}function TE(i,l,p){var y=i.stateNode;if(!y)throw Error(t(169));p?(i=kE(i,l,Ya),y.__reactInternalMemoizedMergedChildContext=i,yt(ts),yt(Cn),mt(Cn,i)):yt(ts),mt(ts,p)}var Ei=null,Qm=!1,$0=!1;function PE(i){Ei===null?Ei=[i]:Ei.push(i)}function cD(i){Qm=!0,PE(i)}function Ro(){if(!$0&&Ei!==null){$0=!0;var i=0,l=ot;try{var p=Ei;for(ot=1;i<p.length;i++){var y=p[i];do y=y(!0);while(y!==null)}Ei=null,Qm=!1}catch(S){throw Ei!==null&&(Ei=Ei.slice(i+1)),RA(l0,Ro),S}finally{ot=l,$0=!1}}return null}var eu=[],tu=0,Jm=null,Zm=0,Us=[],zs=0,Qa=null,Ci=1,Ni="";function Ja(i,l){eu[tu++]=Zm,eu[tu++]=Jm,Jm=i,Zm=l}function _E(i,l,p){Us[zs++]=Ci,Us[zs++]=Ni,Us[zs++]=Qa,Qa=i;var y=Ci;i=Ni;var S=32-cr(y)-1;y&=~(1<<S),p+=1;var j=32-cr(l)+S;if(30<j){var L=S-S%5;j=(y&(1<<L)-1).toString(32),y>>=L,S-=L,Ci=1<<32-cr(l)+S|p<<S|y,Ni=j+i}else Ci=1<<j|p<<S|y,Ni=i}function V0(i){i.return!==null&&(Ja(i,1),_E(i,1,0))}function U0(i){for(;i===Jm;)Jm=eu[--tu],eu[tu]=null,Zm=eu[--tu],eu[tu]=null;for(;i===Qa;)Qa=Us[--zs],Us[zs]=null,Ni=Us[--zs],Us[zs]=null,Ci=Us[--zs],Us[zs]=null}var ws=null,Ss=null,St=!1,dr=null;function RE(i,l){var p=Ks(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=i,l=i.deletions,l===null?(i.deletions=[p],i.flags|=16):l.push(p)}function LE(i,l){switch(i.tag){case 5:var p=i.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,ws=i,Ss=To(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,ws=i,Ss=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=Qa!==null?{id:Ci,overflow:Ni}:null,i.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Ks(18,null,null,0),p.stateNode=l,p.return=i,i.child=p,ws=i,Ss=null,!0):!1;default:return!1}}function z0(i){return(i.mode&1)!==0&&(i.flags&128)===0}function H0(i){if(St){var l=Ss;if(l){var p=l;if(!LE(i,l)){if(z0(i))throw Error(t(418));l=To(p.nextSibling);var y=ws;l&&LE(i,l)?RE(y,p):(i.flags=i.flags&-4097|2,St=!1,ws=i)}}else{if(z0(i))throw Error(t(418));i.flags=i.flags&-4097|2,St=!1,ws=i}}}function IE(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ws=i}function eg(i){if(i!==ws)return!1;if(!St)return IE(i),St=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!M0(i.type,i.memoizedProps)),l&&(l=Ss)){if(z0(i))throw ME(),Error(t(418));for(;l;)RE(i,l),l=To(l.nextSibling)}if(IE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var p=i.data;if(p==="/$"){if(l===0){Ss=To(i.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}i=i.nextSibling}Ss=null}}else Ss=ws?To(i.stateNode.nextSibling):null;return!0}function ME(){for(var i=Ss;i;)i=To(i.nextSibling)}function nu(){Ss=ws=null,St=!1}function W0(i){dr===null?dr=[i]:dr.push(i)}var uD=P.ReactCurrentBatchConfig;function Lh(i,l,p){if(i=p.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,i));var S=y,j=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===j?l.ref:(l=function(L){var B=S.refs;L===null?delete B[j]:B[j]=L},l._stringRef=j,l)}if(typeof i!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,i))}return i}function tg(i,l){throw i=Object.prototype.toString.call(l),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function DE(i){var l=i._init;return l(i._payload)}function OE(i){function l(W,H){if(i){var q=W.deletions;q===null?(W.deletions=[H],W.flags|=16):q.push(H)}}function p(W,H){if(!i)return null;for(;H!==null;)l(W,H),H=H.sibling;return null}function y(W,H){for(W=new Map;H!==null;)H.key!==null?W.set(H.key,H):W.set(H.index,H),H=H.sibling;return W}function S(W,H){return W=$o(W,H),W.index=0,W.sibling=null,W}function j(W,H,q){return W.index=q,i?(q=W.alternate,q!==null?(q=q.index,q<H?(W.flags|=2,H):q):(W.flags|=2,H)):(W.flags|=1048576,H)}function L(W){return i&&W.alternate===null&&(W.flags|=2),W}function B(W,H,q,le){return H===null||H.tag!==6?(H=Dv(q,W.mode,le),H.return=W,H):(H=S(H,q),H.return=W,H)}function V(W,H,q,le){var Se=q.type;return Se===O?ie(W,H,q.props.children,le,q.key):H!==null&&(H.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Y&&DE(Se)===H.type)?(le=S(H,q.props),le.ref=Lh(W,H,q),le.return=W,le):(le=Cg(q.type,q.key,q.props,null,W.mode,le),le.ref=Lh(W,H,q),le.return=W,le)}function Q(W,H,q,le){return H===null||H.tag!==4||H.stateNode.containerInfo!==q.containerInfo||H.stateNode.implementation!==q.implementation?(H=Ov(q,W.mode,le),H.return=W,H):(H=S(H,q.children||[]),H.return=W,H)}function ie(W,H,q,le,Se){return H===null||H.tag!==7?(H=ol(q,W.mode,le,Se),H.return=W,H):(H=S(H,q),H.return=W,H)}function oe(W,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Dv(""+H,W.mode,q),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return q=Cg(H.type,H.key,H.props,null,W.mode,q),q.ref=Lh(W,null,H),q.return=W,q;case M:return H=Ov(H,W.mode,q),H.return=W,H;case Y:var le=H._init;return oe(W,le(H._payload),q)}if(Vr(H)||te(H))return H=ol(H,W.mode,q,null),H.return=W,H;tg(W,H)}return null}function re(W,H,q,le){var Se=H!==null?H.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Se!==null?null:B(W,H,""+q,le);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return q.key===Se?V(W,H,q,le):null;case M:return q.key===Se?Q(W,H,q,le):null;case Y:return Se=q._init,re(W,H,Se(q._payload),le)}if(Vr(q)||te(q))return Se!==null?null:ie(W,H,q,le,null);tg(W,q)}return null}function pe(W,H,q,le,Se){if(typeof le=="string"&&le!==""||typeof le=="number")return W=W.get(q)||null,B(H,W,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case R:return W=W.get(le.key===null?q:le.key)||null,V(H,W,le,Se);case M:return W=W.get(le.key===null?q:le.key)||null,Q(H,W,le,Se);case Y:var Te=le._init;return pe(W,H,q,Te(le._payload),Se)}if(Vr(le)||te(le))return W=W.get(q)||null,ie(H,W,le,Se,null);tg(H,le)}return null}function be(W,H,q,le){for(var Se=null,Te=null,Pe=H,Le=H=0,an=null;Pe!==null&&Le<q.length;Le++){Pe.index>Le?(an=Pe,Pe=null):an=Pe.sibling;var tt=re(W,Pe,q[Le],le);if(tt===null){Pe===null&&(Pe=an);break}i&&Pe&&tt.alternate===null&&l(W,Pe),H=j(tt,H,Le),Te===null?Se=tt:Te.sibling=tt,Te=tt,Pe=an}if(Le===q.length)return p(W,Pe),St&&Ja(W,Le),Se;if(Pe===null){for(;Le<q.length;Le++)Pe=oe(W,q[Le],le),Pe!==null&&(H=j(Pe,H,Le),Te===null?Se=Pe:Te.sibling=Pe,Te=Pe);return St&&Ja(W,Le),Se}for(Pe=y(W,Pe);Le<q.length;Le++)an=pe(Pe,W,Le,q[Le],le),an!==null&&(i&&an.alternate!==null&&Pe.delete(an.key===null?Le:an.key),H=j(an,H,Le),Te===null?Se=an:Te.sibling=an,Te=an);return i&&Pe.forEach(function(Vo){return l(W,Vo)}),St&&Ja(W,Le),Se}function we(W,H,q,le){var Se=te(q);if(typeof Se!="function")throw Error(t(150));if(q=Se.call(q),q==null)throw Error(t(151));for(var Te=Se=null,Pe=H,Le=H=0,an=null,tt=q.next();Pe!==null&&!tt.done;Le++,tt=q.next()){Pe.index>Le?(an=Pe,Pe=null):an=Pe.sibling;var Vo=re(W,Pe,tt.value,le);if(Vo===null){Pe===null&&(Pe=an);break}i&&Pe&&Vo.alternate===null&&l(W,Pe),H=j(Vo,H,Le),Te===null?Se=Vo:Te.sibling=Vo,Te=Vo,Pe=an}if(tt.done)return p(W,Pe),St&&Ja(W,Le),Se;if(Pe===null){for(;!tt.done;Le++,tt=q.next())tt=oe(W,tt.value,le),tt!==null&&(H=j(tt,H,Le),Te===null?Se=tt:Te.sibling=tt,Te=tt);return St&&Ja(W,Le),Se}for(Pe=y(W,Pe);!tt.done;Le++,tt=q.next())tt=pe(Pe,W,Le,tt.value,le),tt!==null&&(i&&tt.alternate!==null&&Pe.delete(tt.key===null?Le:tt.key),H=j(tt,H,Le),Te===null?Se=tt:Te.sibling=tt,Te=tt);return i&&Pe.forEach(function(zD){return l(W,zD)}),St&&Ja(W,Le),Se}function Ft(W,H,q,le){if(typeof q=="object"&&q!==null&&q.type===O&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case R:e:{for(var Se=q.key,Te=H;Te!==null;){if(Te.key===Se){if(Se=q.type,Se===O){if(Te.tag===7){p(W,Te.sibling),H=S(Te,q.props.children),H.return=W,W=H;break e}}else if(Te.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Y&&DE(Se)===Te.type){p(W,Te.sibling),H=S(Te,q.props),H.ref=Lh(W,Te,q),H.return=W,W=H;break e}p(W,Te);break}else l(W,Te);Te=Te.sibling}q.type===O?(H=ol(q.props.children,W.mode,le,q.key),H.return=W,W=H):(le=Cg(q.type,q.key,q.props,null,W.mode,le),le.ref=Lh(W,H,q),le.return=W,W=le)}return L(W);case M:e:{for(Te=q.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===q.containerInfo&&H.stateNode.implementation===q.implementation){p(W,H.sibling),H=S(H,q.children||[]),H.return=W,W=H;break e}else{p(W,H);break}else l(W,H);H=H.sibling}H=Ov(q,W.mode,le),H.return=W,W=H}return L(W);case Y:return Te=q._init,Ft(W,H,Te(q._payload),le)}if(Vr(q))return be(W,H,q,le);if(te(q))return we(W,H,q,le);tg(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,H!==null&&H.tag===6?(p(W,H.sibling),H=S(H,q),H.return=W,W=H):(p(W,H),H=Dv(q,W.mode,le),H.return=W,W=H),L(W)):p(W,H)}return Ft}var su=OE(!0),FE=OE(!1),ng=Po(null),sg=null,ru=null,G0=null;function K0(){G0=ru=sg=null}function q0(i){var l=ng.current;yt(ng),i._currentValue=l}function X0(i,l,p){for(;i!==null;){var y=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),i===p)break;i=i.return}}function iu(i,l){sg=i,G0=ru=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(ss=!0),i.firstContext=null)}function Hs(i){var l=i._currentValue;if(G0!==i)if(i={context:i,memoizedValue:l,next:null},ru===null){if(sg===null)throw Error(t(308));ru=i,sg.dependencies={lanes:0,firstContext:i}}else ru=ru.next=i;return l}var Za=null;function Y0(i){Za===null?Za=[i]:Za.push(i)}function BE(i,l,p,y){var S=l.interleaved;return S===null?(p.next=p,Y0(l)):(p.next=S.next,S.next=p),l.interleaved=p,ji(i,y)}function ji(i,l){i.lanes|=l;var p=i.alternate;for(p!==null&&(p.lanes|=l),p=i,i=i.return;i!==null;)i.childLanes|=l,p=i.alternate,p!==null&&(p.childLanes|=l),p=i,i=i.return;return p.tag===3?p.stateNode:null}var Lo=!1;function Q0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $E(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ki(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Io(i,l,p){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,(Ze&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,ji(i,p)}return S=y.interleaved,S===null?(l.next=l,Y0(y)):(l.next=S.next,S.next=l),y.interleaved=l,ji(i,p)}function rg(i,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var y=l.lanes;y&=i.pendingLanes,p|=y,l.lanes=p,d0(i,p)}}function VE(i,l){var p=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,j=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};j===null?S=j=L:j=j.next=L,p=p.next}while(p!==null);j===null?S=j=l:j=j.next=l}else S=j=l;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:j,shared:y.shared,effects:y.effects},i.updateQueue=p;return}i=p.lastBaseUpdate,i===null?p.firstBaseUpdate=l:i.next=l,p.lastBaseUpdate=l}function ig(i,l,p,y){var S=i.updateQueue;Lo=!1;var j=S.firstBaseUpdate,L=S.lastBaseUpdate,B=S.shared.pending;if(B!==null){S.shared.pending=null;var V=B,Q=V.next;V.next=null,L===null?j=Q:L.next=Q,L=V;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,B=ie.lastBaseUpdate,B!==L&&(B===null?ie.firstBaseUpdate=Q:B.next=Q,ie.lastBaseUpdate=V))}if(j!==null){var oe=S.baseState;L=0,ie=Q=V=null,B=j;do{var re=B.lane,pe=B.eventTime;if((y&re)===re){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var be=i,we=B;switch(re=l,pe=p,we.tag){case 1:if(be=we.payload,typeof be=="function"){oe=be.call(pe,oe,re);break e}oe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=we.payload,re=typeof be=="function"?be.call(pe,oe,re):be,re==null)break e;oe=ne({},oe,re);break e;case 2:Lo=!0}}B.callback!==null&&B.lane!==0&&(i.flags|=64,re=S.effects,re===null?S.effects=[B]:re.push(B))}else pe={eventTime:pe,lane:re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ie===null?(Q=ie=pe,V=oe):ie=ie.next=pe,L|=re;if(B=B.next,B===null){if(B=S.shared.pending,B===null)break;re=B,B=re.next,re.next=null,S.lastBaseUpdate=re,S.shared.pending=null}}while(!0);if(ie===null&&(V=oe),S.baseState=V,S.firstBaseUpdate=Q,S.lastBaseUpdate=ie,l=S.shared.interleaved,l!==null){S=l;do L|=S.lane,S=S.next;while(S!==l)}else j===null&&(S.shared.lanes=0);nl|=L,i.lanes=L,i.memoizedState=oe}}function UE(i,l,p){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var y=i[l],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var Ih={},Gr=Po(Ih),Mh=Po(Ih),Dh=Po(Ih);function el(i){if(i===Ih)throw Error(t(174));return i}function J0(i,l){switch(mt(Dh,l),mt(Mh,i),mt(Gr,Ih),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:$s(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=$s(l,i)}yt(Gr),mt(Gr,l)}function ou(){yt(Gr),yt(Mh),yt(Dh)}function zE(i){el(Dh.current);var l=el(Gr.current),p=$s(l,i.type);l!==p&&(mt(Mh,i),mt(Gr,p))}function Z0(i){Mh.current===i&&(yt(Gr),yt(Mh))}var Ct=Po(0);function og(i){for(var l=i;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ev=[];function tv(){for(var i=0;i<ev.length;i++)ev[i]._workInProgressVersionPrimary=null;ev.length=0}var ag=P.ReactCurrentDispatcher,nv=P.ReactCurrentBatchConfig,tl=0,Nt=null,Yt=null,rn=null,lg=!1,Oh=!1,Fh=0,dD=0;function Nn(){throw Error(t(321))}function sv(i,l){if(l===null)return!1;for(var p=0;p<l.length&&p<i.length;p++)if(!ur(i[p],l[p]))return!1;return!0}function rv(i,l,p,y,S,j){if(tl=j,Nt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ag.current=i===null||i.memoizedState===null?mD:gD,i=p(y,S),Oh){j=0;do{if(Oh=!1,Fh=0,25<=j)throw Error(t(301));j+=1,rn=Yt=null,l.updateQueue=null,ag.current=xD,i=p(y,S)}while(Oh)}if(ag.current=dg,l=Yt!==null&&Yt.next!==null,tl=0,rn=Yt=Nt=null,lg=!1,l)throw Error(t(300));return i}function iv(){var i=Fh!==0;return Fh=0,i}function Kr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Nt.memoizedState=rn=i:rn=rn.next=i,rn}function Ws(){if(Yt===null){var i=Nt.alternate;i=i!==null?i.memoizedState:null}else i=Yt.next;var l=rn===null?Nt.memoizedState:rn.next;if(l!==null)rn=l,Yt=i;else{if(i===null)throw Error(t(310));Yt=i,i={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},rn===null?Nt.memoizedState=rn=i:rn=rn.next=i}return rn}function Bh(i,l){return typeof l=="function"?l(i):l}function ov(i){var l=Ws(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=i;var y=Yt,S=y.baseQueue,j=p.pending;if(j!==null){if(S!==null){var L=S.next;S.next=j.next,j.next=L}y.baseQueue=S=j,p.pending=null}if(S!==null){j=S.next,y=y.baseState;var B=L=null,V=null,Q=j;do{var ie=Q.lane;if((tl&ie)===ie)V!==null&&(V=V.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),y=Q.hasEagerState?Q.eagerState:i(y,Q.action);else{var oe={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};V===null?(B=V=oe,L=y):V=V.next=oe,Nt.lanes|=ie,nl|=ie}Q=Q.next}while(Q!==null&&Q!==j);V===null?L=y:V.next=B,ur(y,l.memoizedState)||(ss=!0),l.memoizedState=y,l.baseState=L,l.baseQueue=V,p.lastRenderedState=y}if(i=p.interleaved,i!==null){S=i;do j=S.lane,Nt.lanes|=j,nl|=j,S=S.next;while(S!==i)}else S===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function av(i){var l=Ws(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=i;var y=p.dispatch,S=p.pending,j=l.memoizedState;if(S!==null){p.pending=null;var L=S=S.next;do j=i(j,L.action),L=L.next;while(L!==S);ur(j,l.memoizedState)||(ss=!0),l.memoizedState=j,l.baseQueue===null&&(l.baseState=j),p.lastRenderedState=j}return[j,y]}function HE(){}function WE(i,l){var p=Nt,y=Ws(),S=l(),j=!ur(y.memoizedState,S);if(j&&(y.memoizedState=S,ss=!0),y=y.queue,lv(qE.bind(null,p,y,i),[i]),y.getSnapshot!==l||j||rn!==null&&rn.memoizedState.tag&1){if(p.flags|=2048,$h(9,KE.bind(null,p,y,S,l),void 0,null),on===null)throw Error(t(349));(tl&30)!==0||GE(p,l,S)}return S}function GE(i,l,p){i.flags|=16384,i={getSnapshot:l,value:p},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.stores=[i]):(p=l.stores,p===null?l.stores=[i]:p.push(i))}function KE(i,l,p,y){l.value=p,l.getSnapshot=y,XE(l)&&YE(i)}function qE(i,l,p){return p(function(){XE(l)&&YE(i)})}function XE(i){var l=i.getSnapshot;i=i.value;try{var p=l();return!ur(i,p)}catch{return!0}}function YE(i){var l=ji(i,1);l!==null&&mr(l,i,1,-1)}function QE(i){var l=Kr();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:i},l.queue=i,i=i.dispatch=pD.bind(null,Nt,i),[l.memoizedState,i]}function $h(i,l,p,y){return i={tag:i,create:l,destroy:p,deps:y,next:null},l=Nt.updateQueue,l===null?(l={lastEffect:null,stores:null},Nt.updateQueue=l,l.lastEffect=i.next=i):(p=l.lastEffect,p===null?l.lastEffect=i.next=i:(y=p.next,p.next=i,i.next=y,l.lastEffect=i)),i}function JE(){return Ws().memoizedState}function cg(i,l,p,y){var S=Kr();Nt.flags|=i,S.memoizedState=$h(1|l,p,void 0,y===void 0?null:y)}function ug(i,l,p,y){var S=Ws();y=y===void 0?null:y;var j=void 0;if(Yt!==null){var L=Yt.memoizedState;if(j=L.destroy,y!==null&&sv(y,L.deps)){S.memoizedState=$h(l,p,j,y);return}}Nt.flags|=i,S.memoizedState=$h(1|l,p,j,y)}function ZE(i,l){return cg(8390656,8,i,l)}function lv(i,l){return ug(2048,8,i,l)}function eC(i,l){return ug(4,2,i,l)}function tC(i,l){return ug(4,4,i,l)}function nC(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function sC(i,l,p){return p=p!=null?p.concat([i]):null,ug(4,4,nC.bind(null,l,i),p)}function cv(){}function rC(i,l){var p=Ws();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&sv(l,y[1])?y[0]:(p.memoizedState=[i,l],i)}function iC(i,l){var p=Ws();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&sv(l,y[1])?y[0]:(i=i(),p.memoizedState=[i,l],i)}function oC(i,l,p){return(tl&21)===0?(i.baseState&&(i.baseState=!1,ss=!0),i.memoizedState=p):(ur(p,l)||(p=DA(),Nt.lanes|=p,nl|=p,i.baseState=!0),l)}function hD(i,l){var p=ot;ot=p!==0&&4>p?p:4,i(!0);var y=nv.transition;nv.transition={};try{i(!1),l()}finally{ot=p,nv.transition=y}}function aC(){return Ws().memoizedState}function fD(i,l,p){var y=Fo(i);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},lC(i))cC(l,p);else if(p=BE(i,l,p,y),p!==null){var S=Un();mr(p,i,y,S),uC(p,l,y)}}function pD(i,l,p){var y=Fo(i),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(lC(i))cC(l,S);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=l.lastRenderedReducer,j!==null))try{var L=l.lastRenderedState,B=j(L,p);if(S.hasEagerState=!0,S.eagerState=B,ur(B,L)){var V=l.interleaved;V===null?(S.next=S,Y0(l)):(S.next=V.next,V.next=S),l.interleaved=S;return}}catch{}finally{}p=BE(i,l,S,y),p!==null&&(S=Un(),mr(p,i,y,S),uC(p,l,y))}}function lC(i){var l=i.alternate;return i===Nt||l!==null&&l===Nt}function cC(i,l){Oh=lg=!0;var p=i.pending;p===null?l.next=l:(l.next=p.next,p.next=l),i.pending=l}function uC(i,l,p){if((p&4194240)!==0){var y=l.lanes;y&=i.pendingLanes,p|=y,l.lanes=p,d0(i,p)}}var dg={readContext:Hs,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},mD={readContext:Hs,useCallback:function(i,l){return Kr().memoizedState=[i,l===void 0?null:l],i},useContext:Hs,useEffect:ZE,useImperativeHandle:function(i,l,p){return p=p!=null?p.concat([i]):null,cg(4194308,4,nC.bind(null,l,i),p)},useLayoutEffect:function(i,l){return cg(4194308,4,i,l)},useInsertionEffect:function(i,l){return cg(4,2,i,l)},useMemo:function(i,l){var p=Kr();return l=l===void 0?null:l,i=i(),p.memoizedState=[i,l],i},useReducer:function(i,l,p){var y=Kr();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},y.queue=i,i=i.dispatch=fD.bind(null,Nt,i),[y.memoizedState,i]},useRef:function(i){var l=Kr();return i={current:i},l.memoizedState=i},useState:QE,useDebugValue:cv,useDeferredValue:function(i){return Kr().memoizedState=i},useTransition:function(){var i=QE(!1),l=i[0];return i=hD.bind(null,i[1]),Kr().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,p){var y=Nt,S=Kr();if(St){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),on===null)throw Error(t(349));(tl&30)!==0||GE(y,l,p)}S.memoizedState=p;var j={value:p,getSnapshot:l};return S.queue=j,ZE(qE.bind(null,y,j,i),[i]),y.flags|=2048,$h(9,KE.bind(null,y,j,p,l),void 0,null),p},useId:function(){var i=Kr(),l=on.identifierPrefix;if(St){var p=Ni,y=Ci;p=(y&~(1<<32-cr(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=Fh++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=dD++,l=":"+l+"r"+p.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},gD={readContext:Hs,useCallback:rC,useContext:Hs,useEffect:lv,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:ov,useRef:JE,useState:function(){return ov(Bh)},useDebugValue:cv,useDeferredValue:function(i){var l=Ws();return oC(l,Yt.memoizedState,i)},useTransition:function(){var i=ov(Bh)[0],l=Ws().memoizedState;return[i,l]},useMutableSource:HE,useSyncExternalStore:WE,useId:aC,unstable_isNewReconciler:!1},xD={readContext:Hs,useCallback:rC,useContext:Hs,useEffect:lv,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:av,useRef:JE,useState:function(){return av(Bh)},useDebugValue:cv,useDeferredValue:function(i){var l=Ws();return Yt===null?l.memoizedState=i:oC(l,Yt.memoizedState,i)},useTransition:function(){var i=av(Bh)[0],l=Ws().memoizedState;return[i,l]},useMutableSource:HE,useSyncExternalStore:WE,useId:aC,unstable_isNewReconciler:!1};function hr(i,l){if(i&&i.defaultProps){l=ne({},l),i=i.defaultProps;for(var p in i)l[p]===void 0&&(l[p]=i[p]);return l}return l}function uv(i,l,p,y){l=i.memoizedState,p=p(y,l),p=p==null?l:ne({},l,p),i.memoizedState=p,i.lanes===0&&(i.updateQueue.baseState=p)}var hg={isMounted:function(i){return(i=i._reactInternals)?qa(i)===i:!1},enqueueSetState:function(i,l,p){i=i._reactInternals;var y=Un(),S=Fo(i),j=ki(y,S);j.payload=l,p!=null&&(j.callback=p),l=Io(i,j,S),l!==null&&(mr(l,i,S,y),rg(l,i,S))},enqueueReplaceState:function(i,l,p){i=i._reactInternals;var y=Un(),S=Fo(i),j=ki(y,S);j.tag=1,j.payload=l,p!=null&&(j.callback=p),l=Io(i,j,S),l!==null&&(mr(l,i,S,y),rg(l,i,S))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var p=Un(),y=Fo(i),S=ki(p,y);S.tag=2,l!=null&&(S.callback=l),l=Io(i,S,y),l!==null&&(mr(l,i,y,p),rg(l,i,y))}};function dC(i,l,p,y,S,j,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,j,L):l.prototype&&l.prototype.isPureReactComponent?!Nh(p,y)||!Nh(S,j):!0}function hC(i,l,p){var y=!1,S=_o,j=l.contextType;return typeof j=="object"&&j!==null?j=Hs(j):(S=ns(l)?Ya:Cn.current,y=l.contextTypes,j=(y=y!=null)?Zc(i,S):_o),l=new l(p,j),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=hg,i.stateNode=l,l._reactInternals=i,y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=j),l}function fC(i,l,p,y){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==i&&hg.enqueueReplaceState(l,l.state,null)}function dv(i,l,p,y){var S=i.stateNode;S.props=p,S.state=i.memoizedState,S.refs={},Q0(i);var j=l.contextType;typeof j=="object"&&j!==null?S.context=Hs(j):(j=ns(l)?Ya:Cn.current,S.context=Zc(i,j)),S.state=i.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(uv(i,l,j,p),S.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&hg.enqueueReplaceState(S,S.state,null),ig(i,p,S,y),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function au(i,l){try{var p="",y=l;do p+=Ee(y),y=y.return;while(y);var S=p}catch(j){S=`
Error generating stack: `+j.message+`
`+j.stack}return{value:i,source:l,stack:S,digest:null}}function hv(i,l,p){return{value:i,source:null,stack:p??null,digest:l??null}}function fv(i,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var yD=typeof WeakMap=="function"?WeakMap:Map;function pC(i,l,p){p=ki(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){vg||(vg=!0,kv=y),fv(i,l)},p}function mC(i,l,p){p=ki(-1,p),p.tag=3;var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var S=l.value;p.payload=function(){return y(S)},p.callback=function(){fv(i,l)}}var j=i.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(p.callback=function(){fv(i,l),typeof y!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),p}function gC(i,l,p){var y=i.pingCache;if(y===null){y=i.pingCache=new yD;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(p)||(S.add(p),i=RD.bind(null,i,l,p),l.then(i,i))}function xC(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function yC(i,l,p,y,S){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=ki(-1,1),l.tag=2,Io(p,l,1))),p.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var vD=P.ReactCurrentOwner,ss=!1;function Vn(i,l,p,y){l.child=i===null?FE(l,null,p,y):su(l,i.child,p,y)}function vC(i,l,p,y,S){p=p.render;var j=l.ref;return iu(l,S),y=rv(i,l,p,y,j,S),p=iv(),i!==null&&!ss?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~S,Ti(i,l,S)):(St&&p&&V0(l),l.flags|=1,Vn(i,l,y,S),l.child)}function bC(i,l,p,y,S){if(i===null){var j=p.type;return typeof j=="function"&&!Mv(j)&&j.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=j,wC(i,l,j,y,S)):(i=Cg(p.type,null,y,l,l.mode,S),i.ref=l.ref,i.return=l,l.child=i)}if(j=i.child,(i.lanes&S)===0){var L=j.memoizedProps;if(p=p.compare,p=p!==null?p:Nh,p(L,y)&&i.ref===l.ref)return Ti(i,l,S)}return l.flags|=1,i=$o(j,y),i.ref=l.ref,i.return=l,l.child=i}function wC(i,l,p,y,S){if(i!==null){var j=i.memoizedProps;if(Nh(j,y)&&i.ref===l.ref)if(ss=!1,l.pendingProps=y=j,(i.lanes&S)!==0)(i.flags&131072)!==0&&(ss=!0);else return l.lanes=i.lanes,Ti(i,l,S)}return pv(i,l,p,y,S)}function SC(i,l,p){var y=l.pendingProps,S=y.children,j=i!==null?i.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(cu,As),As|=p;else{if((p&1073741824)===0)return i=j!==null?j.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,mt(cu,As),As|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=j!==null?j.baseLanes:p,mt(cu,As),As|=y}else j!==null?(y=j.baseLanes|p,l.memoizedState=null):y=p,mt(cu,As),As|=y;return Vn(i,l,S,p),l.child}function AC(i,l){var p=l.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function pv(i,l,p,y,S){var j=ns(p)?Ya:Cn.current;return j=Zc(l,j),iu(l,S),p=rv(i,l,p,y,j,S),y=iv(),i!==null&&!ss?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~S,Ti(i,l,S)):(St&&y&&V0(l),l.flags|=1,Vn(i,l,p,S),l.child)}function EC(i,l,p,y,S){if(ns(p)){var j=!0;Ym(l)}else j=!1;if(iu(l,S),l.stateNode===null)pg(i,l),hC(l,p,y),dv(l,p,y,S),y=!0;else if(i===null){var L=l.stateNode,B=l.memoizedProps;L.props=B;var V=L.context,Q=p.contextType;typeof Q=="object"&&Q!==null?Q=Hs(Q):(Q=ns(p)?Ya:Cn.current,Q=Zc(l,Q));var ie=p.getDerivedStateFromProps,oe=typeof ie=="function"||typeof L.getSnapshotBeforeUpdate=="function";oe||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(B!==y||V!==Q)&&fC(l,L,y,Q),Lo=!1;var re=l.memoizedState;L.state=re,ig(l,y,L,S),V=l.memoizedState,B!==y||re!==V||ts.current||Lo?(typeof ie=="function"&&(uv(l,p,ie,y),V=l.memoizedState),(B=Lo||dC(l,p,B,y,re,V,Q))?(oe||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=V),L.props=y,L.state=V,L.context=Q,y=B):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{L=l.stateNode,$E(i,l),B=l.memoizedProps,Q=l.type===l.elementType?B:hr(l.type,B),L.props=Q,oe=l.pendingProps,re=L.context,V=p.contextType,typeof V=="object"&&V!==null?V=Hs(V):(V=ns(p)?Ya:Cn.current,V=Zc(l,V));var pe=p.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(B!==oe||re!==V)&&fC(l,L,y,V),Lo=!1,re=l.memoizedState,L.state=re,ig(l,y,L,S);var be=l.memoizedState;B!==oe||re!==be||ts.current||Lo?(typeof pe=="function"&&(uv(l,p,pe,y),be=l.memoizedState),(Q=Lo||dC(l,p,Q,y,re,be,V)||!1)?(ie||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,be,V),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,be,V)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||B===i.memoizedProps&&re===i.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&re===i.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=be),L.props=y,L.state=be,L.context=V,y=Q):(typeof L.componentDidUpdate!="function"||B===i.memoizedProps&&re===i.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&re===i.memoizedState||(l.flags|=1024),y=!1)}return mv(i,l,p,y,j,S)}function mv(i,l,p,y,S,j){AC(i,l);var L=(l.flags&128)!==0;if(!y&&!L)return S&&TE(l,p,!1),Ti(i,l,j);y=l.stateNode,vD.current=l;var B=L&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,i!==null&&L?(l.child=su(l,i.child,null,j),l.child=su(l,null,B,j)):Vn(i,l,B,j),l.memoizedState=y.state,S&&TE(l,p,!0),l.child}function CC(i){var l=i.stateNode;l.pendingContext?jE(i,l.pendingContext,l.pendingContext!==l.context):l.context&&jE(i,l.context,!1),J0(i,l.containerInfo)}function NC(i,l,p,y,S){return nu(),W0(S),l.flags|=256,Vn(i,l,p,y),l.child}var gv={dehydrated:null,treeContext:null,retryLane:0};function xv(i){return{baseLanes:i,cachePool:null,transitions:null}}function jC(i,l,p){var y=l.pendingProps,S=Ct.current,j=!1,L=(l.flags&128)!==0,B;if((B=L)||(B=i!==null&&i.memoizedState===null?!1:(S&2)!==0),B?(j=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),mt(Ct,S&1),i===null)return H0(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=y.children,i=y.fallback,j?(y=l.mode,j=l.child,L={mode:"hidden",children:L},(y&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=L):j=Ng(L,y,0,null),i=ol(i,y,p,null),j.return=l,i.return=l,j.sibling=i,l.child=j,l.child.memoizedState=xv(p),l.memoizedState=gv,i):yv(l,L));if(S=i.memoizedState,S!==null&&(B=S.dehydrated,B!==null))return bD(i,l,L,y,B,S,p);if(j){j=y.fallback,L=l.mode,S=i.child,B=S.sibling;var V={mode:"hidden",children:y.children};return(L&1)===0&&l.child!==S?(y=l.child,y.childLanes=0,y.pendingProps=V,l.deletions=null):(y=$o(S,V),y.subtreeFlags=S.subtreeFlags&14680064),B!==null?j=$o(B,j):(j=ol(j,L,p,null),j.flags|=2),j.return=l,y.return=l,y.sibling=j,l.child=y,y=j,j=l.child,L=i.child.memoizedState,L=L===null?xv(p):{baseLanes:L.baseLanes|p,cachePool:null,transitions:L.transitions},j.memoizedState=L,j.childLanes=i.childLanes&~p,l.memoizedState=gv,y}return j=i.child,i=j.sibling,y=$o(j,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=p),y.return=l,y.sibling=null,i!==null&&(p=l.deletions,p===null?(l.deletions=[i],l.flags|=16):p.push(i)),l.child=y,l.memoizedState=null,y}function yv(i,l){return l=Ng({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function fg(i,l,p,y){return y!==null&&W0(y),su(l,i.child,null,p),i=yv(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function bD(i,l,p,y,S,j,L){if(p)return l.flags&256?(l.flags&=-257,y=hv(Error(t(422))),fg(i,l,L,y)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(j=y.fallback,S=l.mode,y=Ng({mode:"visible",children:y.children},S,0,null),j=ol(j,S,L,null),j.flags|=2,y.return=l,j.return=l,y.sibling=j,l.child=y,(l.mode&1)!==0&&su(l,i.child,null,L),l.child.memoizedState=xv(L),l.memoizedState=gv,j);if((l.mode&1)===0)return fg(i,l,L,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var B=y.dgst;return y=B,j=Error(t(419)),y=hv(j,y,void 0),fg(i,l,L,y)}if(B=(L&i.childLanes)!==0,ss||B){if(y=on,y!==null){switch(L&-L){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|L))!==0?0:S,S!==0&&S!==j.retryLane&&(j.retryLane=S,ji(i,S),mr(y,i,S,-1))}return Iv(),y=hv(Error(t(421))),fg(i,l,L,y)}return S.data==="$?"?(l.flags|=128,l.child=i.child,l=LD.bind(null,i),S._reactRetry=l,null):(i=j.treeContext,Ss=To(S.nextSibling),ws=l,St=!0,dr=null,i!==null&&(Us[zs++]=Ci,Us[zs++]=Ni,Us[zs++]=Qa,Ci=i.id,Ni=i.overflow,Qa=l),l=yv(l,y.children),l.flags|=4096,l)}function kC(i,l,p){i.lanes|=l;var y=i.alternate;y!==null&&(y.lanes|=l),X0(i.return,l,p)}function vv(i,l,p,y,S){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=y,j.tail=p,j.tailMode=S)}function TC(i,l,p){var y=l.pendingProps,S=y.revealOrder,j=y.tail;if(Vn(i,l,y.children,p),y=Ct.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&kC(i,p,l);else if(i.tag===19)kC(i,p,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}y&=1}if(mt(Ct,y),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(p=l.child,S=null;p!==null;)i=p.alternate,i!==null&&og(i)===null&&(S=p),p=p.sibling;p=S,p===null?(S=l.child,l.child=null):(S=p.sibling,p.sibling=null),vv(l,!1,S,p,j);break;case"backwards":for(p=null,S=l.child,l.child=null;S!==null;){if(i=S.alternate,i!==null&&og(i)===null){l.child=S;break}i=S.sibling,S.sibling=p,p=S,S=i}vv(l,!0,p,null,j);break;case"together":vv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function pg(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Ti(i,l,p){if(i!==null&&(l.dependencies=i.dependencies),nl|=l.lanes,(p&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(t(153));if(l.child!==null){for(i=l.child,p=$o(i,i.pendingProps),l.child=p,p.return=l;i.sibling!==null;)i=i.sibling,p=p.sibling=$o(i,i.pendingProps),p.return=l;p.sibling=null}return l.child}function wD(i,l,p){switch(l.tag){case 3:CC(l),nu();break;case 5:zE(l);break;case 1:ns(l.type)&&Ym(l);break;case 4:J0(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,S=l.memoizedProps.value;mt(ng,y._currentValue),y._currentValue=S;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(mt(Ct,Ct.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?jC(i,l,p):(mt(Ct,Ct.current&1),i=Ti(i,l,p),i!==null?i.sibling:null);mt(Ct,Ct.current&1);break;case 19:if(y=(p&l.childLanes)!==0,(i.flags&128)!==0){if(y)return TC(i,l,p);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),mt(Ct,Ct.current),y)break;return null;case 22:case 23:return l.lanes=0,SC(i,l,p)}return Ti(i,l,p)}var PC,bv,_C,RC;PC=function(i,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},bv=function(){},_C=function(i,l,p,y){var S=i.memoizedProps;if(S!==y){i=l.stateNode,el(Gr.current);var j=null;switch(p){case"input":S=qe(i,S),y=qe(i,y),j=[];break;case"select":S=ne({},S,{value:void 0}),y=ne({},y,{value:void 0}),j=[];break;case"textarea":S=Ka(i,S),y=Ka(i,y),j=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(i.onclick=Km)}e0(p,y);var L;p=null;for(Q in S)if(!y.hasOwnProperty(Q)&&S.hasOwnProperty(Q)&&S[Q]!=null)if(Q==="style"){var B=S[Q];for(L in B)B.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(r.hasOwnProperty(Q)?j||(j=[]):(j=j||[]).push(Q,null));for(Q in y){var V=y[Q];if(B=S!=null?S[Q]:void 0,y.hasOwnProperty(Q)&&V!==B&&(V!=null||B!=null))if(Q==="style")if(B){for(L in B)!B.hasOwnProperty(L)||V&&V.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in V)V.hasOwnProperty(L)&&B[L]!==V[L]&&(p||(p={}),p[L]=V[L])}else p||(j||(j=[]),j.push(Q,p)),p=V;else Q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,B=B?B.__html:void 0,V!=null&&B!==V&&(j=j||[]).push(Q,V)):Q==="children"?typeof V!="string"&&typeof V!="number"||(j=j||[]).push(Q,""+V):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(r.hasOwnProperty(Q)?(V!=null&&Q==="onScroll"&&xt("scroll",i),j||B===V||(j=[])):(j=j||[]).push(Q,V))}p&&(j=j||[]).push("style",p);var Q=j;(l.updateQueue=Q)&&(l.flags|=4)}},RC=function(i,l,p,y){p!==y&&(l.flags|=4)};function Vh(i,l){if(!St)switch(i.tailMode){case"hidden":l=i.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?i.tail=null:p.sibling=null;break;case"collapsed":p=i.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function jn(i){var l=i.alternate!==null&&i.alternate.child===i.child,p=0,y=0;if(l)for(var S=i.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=y,i.childLanes=p,l}function SD(i,l,p){var y=l.pendingProps;switch(U0(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(l),null;case 1:return ns(l.type)&&Xm(),jn(l),null;case 3:return y=l.stateNode,ou(),yt(ts),yt(Cn),tv(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(i===null||i.child===null)&&(eg(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dr!==null&&(_v(dr),dr=null))),bv(i,l),jn(l),null;case 5:Z0(l);var S=el(Dh.current);if(p=l.type,i!==null&&l.stateNode!=null)_C(i,l,p,y,S),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return jn(l),null}if(i=el(Gr.current),eg(l)){y=l.stateNode,p=l.type;var j=l.memoizedProps;switch(y[Wr]=l,y[_h]=j,i=(l.mode&1)!==0,p){case"dialog":xt("cancel",y),xt("close",y);break;case"iframe":case"object":case"embed":xt("load",y);break;case"video":case"audio":for(S=0;S<kh.length;S++)xt(kh[S],y);break;case"source":xt("error",y);break;case"img":case"image":case"link":xt("error",y),xt("load",y);break;case"details":xt("toggle",y);break;case"input":ft(y,j),xt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!j.multiple},xt("invalid",y);break;case"textarea":Fc(y,j),xt("invalid",y)}e0(p,j),S=null;for(var L in j)if(j.hasOwnProperty(L)){var B=j[L];L==="children"?typeof B=="string"?y.textContent!==B&&(j.suppressHydrationWarning!==!0&&Gm(y.textContent,B,i),S=["children",B]):typeof B=="number"&&y.textContent!==""+B&&(j.suppressHydrationWarning!==!0&&Gm(y.textContent,B,i),S=["children",""+B]):r.hasOwnProperty(L)&&B!=null&&L==="onScroll"&&xt("scroll",y)}switch(p){case"input":Fe(y),es(y,j,!0);break;case"textarea":Fe(y),$c(y);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(y.onclick=Km)}y=S,l.updateQueue=y,y!==null&&(l.flags|=4)}else{L=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Vc(p)),i==="http://www.w3.org/1999/xhtml"?p==="script"?(i=L.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof y.is=="string"?i=L.createElement(p,{is:y.is}):(i=L.createElement(p),p==="select"&&(L=i,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):i=L.createElementNS(i,p),i[Wr]=l,i[_h]=y,PC(i,l,!1,!1),l.stateNode=i;e:{switch(L=t0(p,y),p){case"dialog":xt("cancel",i),xt("close",i),S=y;break;case"iframe":case"object":case"embed":xt("load",i),S=y;break;case"video":case"audio":for(S=0;S<kh.length;S++)xt(kh[S],i);S=y;break;case"source":xt("error",i),S=y;break;case"img":case"image":case"link":xt("error",i),xt("load",i),S=y;break;case"details":xt("toggle",i),S=y;break;case"input":ft(i,y),S=qe(i,y),xt("invalid",i);break;case"option":S=y;break;case"select":i._wrapperState={wasMultiple:!!y.multiple},S=ne({},y,{value:void 0}),xt("invalid",i);break;case"textarea":Fc(i,y),S=Ka(i,y),xt("invalid",i);break;default:S=y}e0(p,S),B=S;for(j in B)if(B.hasOwnProperty(j)){var V=B[j];j==="style"?wA(i,V):j==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ur(i,V)):j==="children"?typeof V=="string"?(p!=="textarea"||V!=="")&&fe(i,V):typeof V=="number"&&fe(i,""+V):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?V!=null&&j==="onScroll"&&xt("scroll",i):V!=null&&k(i,j,V,L))}switch(p){case"input":Fe(i),es(i,y,!1);break;case"textarea":Fe(i),$c(i);break;case"option":y.value!=null&&i.setAttribute("value",""+me(y.value));break;case"select":i.multiple=!!y.multiple,j=y.value,j!=null?$n(i,!!y.multiple,j,!1):y.defaultValue!=null&&$n(i,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Km)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return jn(l),null;case 6:if(i&&l.stateNode!=null)RC(i,l,i.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=el(Dh.current),el(Gr.current),eg(l)){if(y=l.stateNode,p=l.memoizedProps,y[Wr]=l,(j=y.nodeValue!==p)&&(i=ws,i!==null))switch(i.tag){case 3:Gm(y.nodeValue,p,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gm(y.nodeValue,p,(i.mode&1)!==0)}j&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Wr]=l,l.stateNode=y}return jn(l),null;case 13:if(yt(Ct),y=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(St&&Ss!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ME(),nu(),l.flags|=98560,j=!1;else if(j=eg(l),y!==null&&y.dehydrated!==null){if(i===null){if(!j)throw Error(t(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[Wr]=l}else nu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;jn(l),j=!1}else dr!==null&&(_v(dr),dr=null),j=!0;if(!j)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(y=y!==null,y!==(i!==null&&i.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(Ct.current&1)!==0?Qt===0&&(Qt=3):Iv())),l.updateQueue!==null&&(l.flags|=4),jn(l),null);case 4:return ou(),bv(i,l),i===null&&Th(l.stateNode.containerInfo),jn(l),null;case 10:return q0(l.type._context),jn(l),null;case 17:return ns(l.type)&&Xm(),jn(l),null;case 19:if(yt(Ct),j=l.memoizedState,j===null)return jn(l),null;if(y=(l.flags&128)!==0,L=j.rendering,L===null)if(y)Vh(j,!1);else{if(Qt!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(L=og(i),L!==null){for(l.flags|=128,Vh(j,!1),y=L.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)j=p,i=y,j.flags&=14680066,L=j.alternate,L===null?(j.childLanes=0,j.lanes=i,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=L.childLanes,j.lanes=L.lanes,j.child=L.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=L.memoizedProps,j.memoizedState=L.memoizedState,j.updateQueue=L.updateQueue,j.type=L.type,i=L.dependencies,j.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),p=p.sibling;return mt(Ct,Ct.current&1|2),l.child}i=i.sibling}j.tail!==null&&Ot()>uu&&(l.flags|=128,y=!0,Vh(j,!1),l.lanes=4194304)}else{if(!y)if(i=og(L),i!==null){if(l.flags|=128,y=!0,p=i.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),Vh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!L.alternate&&!St)return jn(l),null}else 2*Ot()-j.renderingStartTime>uu&&p!==1073741824&&(l.flags|=128,y=!0,Vh(j,!1),l.lanes=4194304);j.isBackwards?(L.sibling=l.child,l.child=L):(p=j.last,p!==null?p.sibling=L:l.child=L,j.last=L)}return j.tail!==null?(l=j.tail,j.rendering=l,j.tail=l.sibling,j.renderingStartTime=Ot(),l.sibling=null,p=Ct.current,mt(Ct,y?p&1|2:p&1),l):(jn(l),null);case 22:case 23:return Lv(),y=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(As&1073741824)!==0&&(jn(l),l.subtreeFlags&6&&(l.flags|=8192)):jn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function AD(i,l){switch(U0(l),l.tag){case 1:return ns(l.type)&&Xm(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return ou(),yt(ts),yt(Cn),tv(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Z0(l),null;case 13:if(yt(Ct),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(t(340));nu()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return yt(Ct),null;case 4:return ou(),null;case 10:return q0(l.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var mg=!1,kn=!1,ED=typeof WeakSet=="function"?WeakSet:Set,xe=null;function lu(i,l){var p=i.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Rt(i,l,y)}else p.current=null}function wv(i,l,p){try{p()}catch(y){Rt(i,l,y)}}var LC=!1;function CD(i,l){if(L0=Mm,i=dE(),C0(i)){if("selectionStart"in i)var p={start:i.selectionStart,end:i.selectionEnd};else e:{p=(p=i.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,j=y.focusNode;y=y.focusOffset;try{p.nodeType,j.nodeType}catch{p=null;break e}var L=0,B=-1,V=-1,Q=0,ie=0,oe=i,re=null;t:for(;;){for(var pe;oe!==p||S!==0&&oe.nodeType!==3||(B=L+S),oe!==j||y!==0&&oe.nodeType!==3||(V=L+y),oe.nodeType===3&&(L+=oe.nodeValue.length),(pe=oe.firstChild)!==null;)re=oe,oe=pe;for(;;){if(oe===i)break t;if(re===p&&++Q===S&&(B=L),re===j&&++ie===y&&(V=L),(pe=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=pe}p=B===-1||V===-1?null:{start:B,end:V}}else p=null}p=p||{start:0,end:0}}else p=null;for(I0={focusedElem:i,selectionRange:p},Mm=!1,xe=l;xe!==null;)if(l=xe,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,xe=i;else for(;xe!==null;){l=xe;try{var be=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var we=be.memoizedProps,Ft=be.memoizedState,W=l.stateNode,H=W.getSnapshotBeforeUpdate(l.elementType===l.type?we:hr(l.type,we),Ft);W.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var q=l.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Rt(l,l.return,le)}if(i=l.sibling,i!==null){i.return=l.return,xe=i;break}xe=l.return}return be=LC,LC=!1,be}function Uh(i,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&i)===i){var j=S.destroy;S.destroy=void 0,j!==void 0&&wv(l,p,j)}S=S.next}while(S!==y)}}function gg(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&i)===i){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}function Sv(i){var l=i.ref;if(l!==null){var p=i.stateNode;switch(i.tag){case 5:i=p;break;default:i=p}typeof l=="function"?l(i):l.current=i}}function IC(i){var l=i.alternate;l!==null&&(i.alternate=null,IC(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Wr],delete l[_h],delete l[F0],delete l[aD],delete l[lD])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function MC(i){return i.tag===5||i.tag===3||i.tag===4}function DC(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||MC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Av(i,l,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(i,l):p.insertBefore(i,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(i,p)):(l=p,l.appendChild(i)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Km));else if(y!==4&&(i=i.child,i!==null))for(Av(i,l,p),i=i.sibling;i!==null;)Av(i,l,p),i=i.sibling}function Ev(i,l,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,l?p.insertBefore(i,l):p.appendChild(i);else if(y!==4&&(i=i.child,i!==null))for(Ev(i,l,p),i=i.sibling;i!==null;)Ev(i,l,p),i=i.sibling}var mn=null,fr=!1;function Mo(i,l,p){for(p=p.child;p!==null;)OC(i,l,p),p=p.sibling}function OC(i,l,p){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(Tm,p)}catch{}switch(p.tag){case 5:kn||lu(p,l);case 6:var y=mn,S=fr;mn=null,Mo(i,l,p),mn=y,fr=S,mn!==null&&(fr?(i=mn,p=p.stateNode,i.nodeType===8?i.parentNode.removeChild(p):i.removeChild(p)):mn.removeChild(p.stateNode));break;case 18:mn!==null&&(fr?(i=mn,p=p.stateNode,i.nodeType===8?O0(i.parentNode,p):i.nodeType===1&&O0(i,p),bh(i)):O0(mn,p.stateNode));break;case 4:y=mn,S=fr,mn=p.stateNode.containerInfo,fr=!0,Mo(i,l,p),mn=y,fr=S;break;case 0:case 11:case 14:case 15:if(!kn&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var j=S,L=j.destroy;j=j.tag,L!==void 0&&((j&2)!==0||(j&4)!==0)&&wv(p,l,L),S=S.next}while(S!==y)}Mo(i,l,p);break;case 1:if(!kn&&(lu(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(B){Rt(p,l,B)}Mo(i,l,p);break;case 21:Mo(i,l,p);break;case 22:p.mode&1?(kn=(y=kn)||p.memoizedState!==null,Mo(i,l,p),kn=y):Mo(i,l,p);break;default:Mo(i,l,p)}}function FC(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new ED),l.forEach(function(y){var S=ID.bind(null,i,y);p.has(y)||(p.add(y),y.then(S,S))})}}function pr(i,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var j=i,L=l,B=L;e:for(;B!==null;){switch(B.tag){case 5:mn=B.stateNode,fr=!1;break e;case 3:mn=B.stateNode.containerInfo,fr=!0;break e;case 4:mn=B.stateNode.containerInfo,fr=!0;break e}B=B.return}if(mn===null)throw Error(t(160));OC(j,L,S),mn=null,fr=!1;var V=S.alternate;V!==null&&(V.return=null),S.return=null}catch(Q){Rt(S,l,Q)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)BC(l,i),l=l.sibling}function BC(i,l){var p=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(pr(l,i),qr(i),y&4){try{Uh(3,i,i.return),gg(3,i)}catch(we){Rt(i,i.return,we)}try{Uh(5,i,i.return)}catch(we){Rt(i,i.return,we)}}break;case 1:pr(l,i),qr(i),y&512&&p!==null&&lu(p,p.return);break;case 5:if(pr(l,i),qr(i),y&512&&p!==null&&lu(p,p.return),i.flags&32){var S=i.stateNode;try{fe(S,"")}catch(we){Rt(i,i.return,we)}}if(y&4&&(S=i.stateNode,S!=null)){var j=i.memoizedProps,L=p!==null?p.memoizedProps:j,B=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{B==="input"&&j.type==="radio"&&j.name!=null&&Xe(S,j),t0(B,L);var Q=t0(B,j);for(L=0;L<V.length;L+=2){var ie=V[L],oe=V[L+1];ie==="style"?wA(S,oe):ie==="dangerouslySetInnerHTML"?Ur(S,oe):ie==="children"?fe(S,oe):k(S,ie,oe,Q)}switch(B){case"input":qt(S,j);break;case"textarea":Bc(S,j);break;case"select":var re=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!j.multiple;var pe=j.value;pe!=null?$n(S,!!j.multiple,pe,!1):re!==!!j.multiple&&(j.defaultValue!=null?$n(S,!!j.multiple,j.defaultValue,!0):$n(S,!!j.multiple,j.multiple?[]:"",!1))}S[_h]=j}catch(we){Rt(i,i.return,we)}}break;case 6:if(pr(l,i),qr(i),y&4){if(i.stateNode===null)throw Error(t(162));S=i.stateNode,j=i.memoizedProps;try{S.nodeValue=j}catch(we){Rt(i,i.return,we)}}break;case 3:if(pr(l,i),qr(i),y&4&&p!==null&&p.memoizedState.isDehydrated)try{bh(l.containerInfo)}catch(we){Rt(i,i.return,we)}break;case 4:pr(l,i),qr(i);break;case 13:pr(l,i),qr(i),S=i.child,S.flags&8192&&(j=S.memoizedState!==null,S.stateNode.isHidden=j,!j||S.alternate!==null&&S.alternate.memoizedState!==null||(jv=Ot())),y&4&&FC(i);break;case 22:if(ie=p!==null&&p.memoizedState!==null,i.mode&1?(kn=(Q=kn)||ie,pr(l,i),kn=Q):pr(l,i),qr(i),y&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!ie&&(i.mode&1)!==0)for(xe=i,ie=i.child;ie!==null;){for(oe=xe=ie;xe!==null;){switch(re=xe,pe=re.child,re.tag){case 0:case 11:case 14:case 15:Uh(4,re,re.return);break;case 1:lu(re,re.return);var be=re.stateNode;if(typeof be.componentWillUnmount=="function"){y=re,p=re.return;try{l=y,be.props=l.memoizedProps,be.state=l.memoizedState,be.componentWillUnmount()}catch(we){Rt(y,p,we)}}break;case 5:lu(re,re.return);break;case 22:if(re.memoizedState!==null){UC(oe);continue}}pe!==null?(pe.return=re,xe=pe):UC(oe)}ie=ie.sibling}e:for(ie=null,oe=i;;){if(oe.tag===5){if(ie===null){ie=oe;try{S=oe.stateNode,Q?(j=S.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(B=oe.stateNode,V=oe.memoizedProps.style,L=V!=null&&V.hasOwnProperty("display")?V.display:null,B.style.display=Cm("display",L))}catch(we){Rt(i,i.return,we)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(we){Rt(i,i.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:pr(l,i),qr(i),y&4&&FC(i);break;case 21:break;default:pr(l,i),qr(i)}}function qr(i){var l=i.flags;if(l&2){try{e:{for(var p=i.return;p!==null;){if(MC(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(fe(S,""),y.flags&=-33);var j=DC(i);Ev(i,j,S);break;case 3:case 4:var L=y.stateNode.containerInfo,B=DC(i);Av(i,B,L);break;default:throw Error(t(161))}}catch(V){Rt(i,i.return,V)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function ND(i,l,p){xe=i,$C(i)}function $C(i,l,p){for(var y=(i.mode&1)!==0;xe!==null;){var S=xe,j=S.child;if(S.tag===22&&y){var L=S.memoizedState!==null||mg;if(!L){var B=S.alternate,V=B!==null&&B.memoizedState!==null||kn;B=mg;var Q=kn;if(mg=L,(kn=V)&&!Q)for(xe=S;xe!==null;)L=xe,V=L.child,L.tag===22&&L.memoizedState!==null?zC(S):V!==null?(V.return=L,xe=V):zC(S);for(;j!==null;)xe=j,$C(j),j=j.sibling;xe=S,mg=B,kn=Q}VC(i)}else(S.subtreeFlags&8772)!==0&&j!==null?(j.return=S,xe=j):VC(i)}}function VC(i){for(;xe!==null;){var l=xe;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:kn||gg(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!kn)if(p===null)y.componentDidMount();else{var S=l.elementType===l.type?p.memoizedProps:hr(l.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var j=l.updateQueue;j!==null&&UE(l,j,y);break;case 3:var L=l.updateQueue;if(L!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}UE(l,L,p)}break;case 5:var B=l.stateNode;if(p===null&&l.flags&4){p=B;var V=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&p.focus();break;case"img":V.src&&(p.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Q=l.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&bh(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kn||l.flags&512&&Sv(l)}catch(re){Rt(l,l.return,re)}}if(l===i){xe=null;break}if(p=l.sibling,p!==null){p.return=l.return,xe=p;break}xe=l.return}}function UC(i){for(;xe!==null;){var l=xe;if(l===i){xe=null;break}var p=l.sibling;if(p!==null){p.return=l.return,xe=p;break}xe=l.return}}function zC(i){for(;xe!==null;){var l=xe;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{gg(4,l)}catch(V){Rt(l,p,V)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var S=l.return;try{y.componentDidMount()}catch(V){Rt(l,S,V)}}var j=l.return;try{Sv(l)}catch(V){Rt(l,j,V)}break;case 5:var L=l.return;try{Sv(l)}catch(V){Rt(l,L,V)}}}catch(V){Rt(l,l.return,V)}if(l===i){xe=null;break}var B=l.sibling;if(B!==null){B.return=l.return,xe=B;break}xe=l.return}}var jD=Math.ceil,xg=P.ReactCurrentDispatcher,Cv=P.ReactCurrentOwner,Gs=P.ReactCurrentBatchConfig,Ze=0,on=null,zt=null,gn=0,As=0,cu=Po(0),Qt=0,zh=null,nl=0,yg=0,Nv=0,Hh=null,rs=null,jv=0,uu=1/0,Pi=null,vg=!1,kv=null,Do=null,bg=!1,Oo=null,wg=0,Wh=0,Tv=null,Sg=-1,Ag=0;function Un(){return(Ze&6)!==0?Ot():Sg!==-1?Sg:Sg=Ot()}function Fo(i){return(i.mode&1)===0?1:(Ze&2)!==0&&gn!==0?gn&-gn:uD.transition!==null?(Ag===0&&(Ag=DA()),Ag):(i=ot,i!==0||(i=window.event,i=i===void 0?16:WA(i.type)),i)}function mr(i,l,p,y){if(50<Wh)throw Wh=0,Tv=null,Error(t(185));mh(i,p,y),((Ze&2)===0||i!==on)&&(i===on&&((Ze&2)===0&&(yg|=p),Qt===4&&Bo(i,gn)),is(i,y),p===1&&Ze===0&&(l.mode&1)===0&&(uu=Ot()+500,Qm&&Ro()))}function is(i,l){var p=i.callbackNode;uM(i,l);var y=Rm(i,i===on?gn:0);if(y===0)p!==null&&LA(p),i.callbackNode=null,i.callbackPriority=0;else if(l=y&-y,i.callbackPriority!==l){if(p!=null&&LA(p),l===1)i.tag===0?cD(WC.bind(null,i)):PE(WC.bind(null,i)),iD(function(){(Ze&6)===0&&Ro()}),p=null;else{switch(OA(y)){case 1:p=l0;break;case 4:p=IA;break;case 16:p=km;break;case 536870912:p=MA;break;default:p=km}p=ZC(p,HC.bind(null,i))}i.callbackPriority=l,i.callbackNode=p}}function HC(i,l){if(Sg=-1,Ag=0,(Ze&6)!==0)throw Error(t(327));var p=i.callbackNode;if(du()&&i.callbackNode!==p)return null;var y=Rm(i,i===on?gn:0);if(y===0)return null;if((y&30)!==0||(y&i.expiredLanes)!==0||l)l=Eg(i,y);else{l=y;var S=Ze;Ze|=2;var j=KC();(on!==i||gn!==l)&&(Pi=null,uu=Ot()+500,rl(i,l));do try{PD();break}catch(B){GC(i,B)}while(!0);K0(),xg.current=j,Ze=S,zt!==null?l=0:(on=null,gn=0,l=Qt)}if(l!==0){if(l===2&&(S=c0(i),S!==0&&(y=S,l=Pv(i,S))),l===1)throw p=zh,rl(i,0),Bo(i,y),is(i,Ot()),p;if(l===6)Bo(i,y);else{if(S=i.current.alternate,(y&30)===0&&!kD(S)&&(l=Eg(i,y),l===2&&(j=c0(i),j!==0&&(y=j,l=Pv(i,j))),l===1))throw p=zh,rl(i,0),Bo(i,y),is(i,Ot()),p;switch(i.finishedWork=S,i.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:il(i,rs,Pi);break;case 3:if(Bo(i,y),(y&130023424)===y&&(l=jv+500-Ot(),10<l)){if(Rm(i,0)!==0)break;if(S=i.suspendedLanes,(S&y)!==y){Un(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=D0(il.bind(null,i,rs,Pi),l);break}il(i,rs,Pi);break;case 4:if(Bo(i,y),(y&4194240)===y)break;for(l=i.eventTimes,S=-1;0<y;){var L=31-cr(y);j=1<<L,L=l[L],L>S&&(S=L),y&=~j}if(y=S,y=Ot()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*jD(y/1960))-y,10<y){i.timeoutHandle=D0(il.bind(null,i,rs,Pi),y);break}il(i,rs,Pi);break;case 5:il(i,rs,Pi);break;default:throw Error(t(329))}}}return is(i,Ot()),i.callbackNode===p?HC.bind(null,i):null}function Pv(i,l){var p=Hh;return i.current.memoizedState.isDehydrated&&(rl(i,l).flags|=256),i=Eg(i,l),i!==2&&(l=rs,rs=p,l!==null&&_v(l)),i}function _v(i){rs===null?rs=i:rs.push.apply(rs,i)}function kD(i){for(var l=i;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],j=S.getSnapshot;S=S.value;try{if(!ur(j(),S))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Bo(i,l){for(l&=~Nv,l&=~yg,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var p=31-cr(l),y=1<<p;i[p]=-1,l&=~y}}function WC(i){if((Ze&6)!==0)throw Error(t(327));du();var l=Rm(i,0);if((l&1)===0)return is(i,Ot()),null;var p=Eg(i,l);if(i.tag!==0&&p===2){var y=c0(i);y!==0&&(l=y,p=Pv(i,y))}if(p===1)throw p=zh,rl(i,0),Bo(i,l),is(i,Ot()),p;if(p===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,il(i,rs,Pi),is(i,Ot()),null}function Rv(i,l){var p=Ze;Ze|=1;try{return i(l)}finally{Ze=p,Ze===0&&(uu=Ot()+500,Qm&&Ro())}}function sl(i){Oo!==null&&Oo.tag===0&&(Ze&6)===0&&du();var l=Ze;Ze|=1;var p=Gs.transition,y=ot;try{if(Gs.transition=null,ot=1,i)return i()}finally{ot=y,Gs.transition=p,Ze=l,(Ze&6)===0&&Ro()}}function Lv(){As=cu.current,yt(cu)}function rl(i,l){i.finishedWork=null,i.finishedLanes=0;var p=i.timeoutHandle;if(p!==-1&&(i.timeoutHandle=-1,rD(p)),zt!==null)for(p=zt.return;p!==null;){var y=p;switch(U0(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Xm();break;case 3:ou(),yt(ts),yt(Cn),tv();break;case 5:Z0(y);break;case 4:ou();break;case 13:yt(Ct);break;case 19:yt(Ct);break;case 10:q0(y.type._context);break;case 22:case 23:Lv()}p=p.return}if(on=i,zt=i=$o(i.current,null),gn=As=l,Qt=0,zh=null,Nv=yg=nl=0,rs=Hh=null,Za!==null){for(l=0;l<Za.length;l++)if(p=Za[l],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,j=p.pending;if(j!==null){var L=j.next;j.next=S,y.next=L}p.pending=y}Za=null}return i}function GC(i,l){do{var p=zt;try{if(K0(),ag.current=dg,lg){for(var y=Nt.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}lg=!1}if(tl=0,rn=Yt=Nt=null,Oh=!1,Fh=0,Cv.current=null,p===null||p.return===null){Qt=1,zh=l,zt=null;break}e:{var j=i,L=p.return,B=p,V=l;if(l=gn,B.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Q=V,ie=B,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=xC(L);if(pe!==null){pe.flags&=-257,yC(pe,L,B,j,l),pe.mode&1&&gC(j,Q,l),l=pe,V=Q;var be=l.updateQueue;if(be===null){var we=new Set;we.add(V),l.updateQueue=we}else be.add(V);break e}else{if((l&1)===0){gC(j,Q,l),Iv();break e}V=Error(t(426))}}else if(St&&B.mode&1){var Ft=xC(L);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),yC(Ft,L,B,j,l),W0(au(V,B));break e}}j=V=au(V,B),Qt!==4&&(Qt=2),Hh===null?Hh=[j]:Hh.push(j),j=L;do{switch(j.tag){case 3:j.flags|=65536,l&=-l,j.lanes|=l;var W=pC(j,V,l);VE(j,W);break e;case 1:B=V;var H=j.type,q=j.stateNode;if((j.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Do===null||!Do.has(q)))){j.flags|=65536,l&=-l,j.lanes|=l;var le=mC(j,B,l);VE(j,le);break e}}j=j.return}while(j!==null)}XC(p)}catch(Se){l=Se,zt===p&&p!==null&&(zt=p=p.return);continue}break}while(!0)}function KC(){var i=xg.current;return xg.current=dg,i===null?dg:i}function Iv(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),on===null||(nl&268435455)===0&&(yg&268435455)===0||Bo(on,gn)}function Eg(i,l){var p=Ze;Ze|=2;var y=KC();(on!==i||gn!==l)&&(Pi=null,rl(i,l));do try{TD();break}catch(S){GC(i,S)}while(!0);if(K0(),Ze=p,xg.current=y,zt!==null)throw Error(t(261));return on=null,gn=0,Qt}function TD(){for(;zt!==null;)qC(zt)}function PD(){for(;zt!==null&&!tM();)qC(zt)}function qC(i){var l=JC(i.alternate,i,As);i.memoizedProps=i.pendingProps,l===null?XC(i):zt=l,Cv.current=null}function XC(i){var l=i;do{var p=l.alternate;if(i=l.return,(l.flags&32768)===0){if(p=SD(p,l,As),p!==null){zt=p;return}}else{if(p=AD(p,l),p!==null){p.flags&=32767,zt=p;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Qt=6,zt=null;return}}if(l=l.sibling,l!==null){zt=l;return}zt=l=i}while(l!==null);Qt===0&&(Qt=5)}function il(i,l,p){var y=ot,S=Gs.transition;try{Gs.transition=null,ot=1,_D(i,l,p,y)}finally{Gs.transition=S,ot=y}return null}function _D(i,l,p,y){do du();while(Oo!==null);if((Ze&6)!==0)throw Error(t(327));p=i.finishedWork;var S=i.finishedLanes;if(p===null)return null;if(i.finishedWork=null,i.finishedLanes=0,p===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var j=p.lanes|p.childLanes;if(dM(i,j),i===on&&(zt=on=null,gn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||bg||(bg=!0,ZC(km,function(){return du(),null})),j=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||j){j=Gs.transition,Gs.transition=null;var L=ot;ot=1;var B=Ze;Ze|=4,Cv.current=null,CD(i,p),BC(p,i),QM(I0),Mm=!!L0,I0=L0=null,i.current=p,ND(p),nM(),Ze=B,ot=L,Gs.transition=j}else i.current=p;if(bg&&(bg=!1,Oo=i,wg=S),j=i.pendingLanes,j===0&&(Do=null),iM(p.stateNode),is(i,Ot()),l!==null)for(y=i.onRecoverableError,p=0;p<l.length;p++)S=l[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(vg)throw vg=!1,i=kv,kv=null,i;return(wg&1)!==0&&i.tag!==0&&du(),j=i.pendingLanes,(j&1)!==0?i===Tv?Wh++:(Wh=0,Tv=i):Wh=0,Ro(),null}function du(){if(Oo!==null){var i=OA(wg),l=Gs.transition,p=ot;try{if(Gs.transition=null,ot=16>i?16:i,Oo===null)var y=!1;else{if(i=Oo,Oo=null,wg=0,(Ze&6)!==0)throw Error(t(331));var S=Ze;for(Ze|=4,xe=i.current;xe!==null;){var j=xe,L=j.child;if((xe.flags&16)!==0){var B=j.deletions;if(B!==null){for(var V=0;V<B.length;V++){var Q=B[V];for(xe=Q;xe!==null;){var ie=xe;switch(ie.tag){case 0:case 11:case 15:Uh(8,ie,j)}var oe=ie.child;if(oe!==null)oe.return=ie,xe=oe;else for(;xe!==null;){ie=xe;var re=ie.sibling,pe=ie.return;if(IC(ie),ie===Q){xe=null;break}if(re!==null){re.return=pe,xe=re;break}xe=pe}}}var be=j.alternate;if(be!==null){var we=be.child;if(we!==null){be.child=null;do{var Ft=we.sibling;we.sibling=null,we=Ft}while(we!==null)}}xe=j}}if((j.subtreeFlags&2064)!==0&&L!==null)L.return=j,xe=L;else e:for(;xe!==null;){if(j=xe,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Uh(9,j,j.return)}var W=j.sibling;if(W!==null){W.return=j.return,xe=W;break e}xe=j.return}}var H=i.current;for(xe=H;xe!==null;){L=xe;var q=L.child;if((L.subtreeFlags&2064)!==0&&q!==null)q.return=L,xe=q;else e:for(L=H;xe!==null;){if(B=xe,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:gg(9,B)}}catch(Se){Rt(B,B.return,Se)}if(B===L){xe=null;break e}var le=B.sibling;if(le!==null){le.return=B.return,xe=le;break e}xe=B.return}}if(Ze=S,Ro(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(Tm,i)}catch{}y=!0}return y}finally{ot=p,Gs.transition=l}}return!1}function YC(i,l,p){l=au(p,l),l=pC(i,l,1),i=Io(i,l,1),l=Un(),i!==null&&(mh(i,1,l),is(i,l))}function Rt(i,l,p){if(i.tag===3)YC(i,i,p);else for(;l!==null;){if(l.tag===3){YC(l,i,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Do===null||!Do.has(y))){i=au(p,i),i=mC(l,i,1),l=Io(l,i,1),i=Un(),l!==null&&(mh(l,1,i),is(l,i));break}}l=l.return}}function RD(i,l,p){var y=i.pingCache;y!==null&&y.delete(l),l=Un(),i.pingedLanes|=i.suspendedLanes&p,on===i&&(gn&p)===p&&(Qt===4||Qt===3&&(gn&130023424)===gn&&500>Ot()-jv?rl(i,0):Nv|=p),is(i,l)}function QC(i,l){l===0&&((i.mode&1)===0?l=1:(l=_m,_m<<=1,(_m&130023424)===0&&(_m=4194304)));var p=Un();i=ji(i,l),i!==null&&(mh(i,l,p),is(i,p))}function LD(i){var l=i.memoizedState,p=0;l!==null&&(p=l.retryLane),QC(i,p)}function ID(i,l){var p=0;switch(i.tag){case 13:var y=i.stateNode,S=i.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=i.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),QC(i,p)}var JC;JC=function(i,l,p){if(i!==null)if(i.memoizedProps!==l.pendingProps||ts.current)ss=!0;else{if((i.lanes&p)===0&&(l.flags&128)===0)return ss=!1,wD(i,l,p);ss=(i.flags&131072)!==0}else ss=!1,St&&(l.flags&1048576)!==0&&_E(l,Zm,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;pg(i,l),i=l.pendingProps;var S=Zc(l,Cn.current);iu(l,p),S=rv(null,l,y,i,S,p);var j=iv();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ns(y)?(j=!0,Ym(l)):j=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Q0(l),S.updater=hg,l.stateNode=S,S._reactInternals=l,dv(l,y,i,p),l=mv(null,l,y,!0,j,p)):(l.tag=0,St&&j&&V0(l),Vn(null,l,S,p),l=l.child),l;case 16:y=l.elementType;e:{switch(pg(i,l),i=l.pendingProps,S=y._init,y=S(y._payload),l.type=y,S=l.tag=DD(y),i=hr(y,i),S){case 0:l=pv(null,l,y,i,p);break e;case 1:l=EC(null,l,y,i,p);break e;case 11:l=vC(null,l,y,i,p);break e;case 14:l=bC(null,l,y,hr(y.type,i),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:hr(y,S),pv(i,l,y,S,p);case 1:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:hr(y,S),EC(i,l,y,S,p);case 3:e:{if(CC(l),i===null)throw Error(t(387));y=l.pendingProps,j=l.memoizedState,S=j.element,$E(i,l),ig(l,y,null,p);var L=l.memoizedState;if(y=L.element,j.isDehydrated)if(j={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=j,l.memoizedState=j,l.flags&256){S=au(Error(t(423)),l),l=NC(i,l,y,p,S);break e}else if(y!==S){S=au(Error(t(424)),l),l=NC(i,l,y,p,S);break e}else for(Ss=To(l.stateNode.containerInfo.firstChild),ws=l,St=!0,dr=null,p=FE(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(nu(),y===S){l=Ti(i,l,p);break e}Vn(i,l,y,p)}l=l.child}return l;case 5:return zE(l),i===null&&H0(l),y=l.type,S=l.pendingProps,j=i!==null?i.memoizedProps:null,L=S.children,M0(y,S)?L=null:j!==null&&M0(y,j)&&(l.flags|=32),AC(i,l),Vn(i,l,L,p),l.child;case 6:return i===null&&H0(l),null;case 13:return jC(i,l,p);case 4:return J0(l,l.stateNode.containerInfo),y=l.pendingProps,i===null?l.child=su(l,null,y,p):Vn(i,l,y,p),l.child;case 11:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:hr(y,S),vC(i,l,y,S,p);case 7:return Vn(i,l,l.pendingProps,p),l.child;case 8:return Vn(i,l,l.pendingProps.children,p),l.child;case 12:return Vn(i,l,l.pendingProps.children,p),l.child;case 10:e:{if(y=l.type._context,S=l.pendingProps,j=l.memoizedProps,L=S.value,mt(ng,y._currentValue),y._currentValue=L,j!==null)if(ur(j.value,L)){if(j.children===S.children&&!ts.current){l=Ti(i,l,p);break e}}else for(j=l.child,j!==null&&(j.return=l);j!==null;){var B=j.dependencies;if(B!==null){L=j.child;for(var V=B.firstContext;V!==null;){if(V.context===y){if(j.tag===1){V=ki(-1,p&-p),V.tag=2;var Q=j.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?V.next=V:(V.next=ie.next,ie.next=V),Q.pending=V}}j.lanes|=p,V=j.alternate,V!==null&&(V.lanes|=p),X0(j.return,p,l),B.lanes|=p;break}V=V.next}}else if(j.tag===10)L=j.type===l.type?null:j.child;else if(j.tag===18){if(L=j.return,L===null)throw Error(t(341));L.lanes|=p,B=L.alternate,B!==null&&(B.lanes|=p),X0(L,p,l),L=j.sibling}else L=j.child;if(L!==null)L.return=j;else for(L=j;L!==null;){if(L===l){L=null;break}if(j=L.sibling,j!==null){j.return=L.return,L=j;break}L=L.return}j=L}Vn(i,l,S.children,p),l=l.child}return l;case 9:return S=l.type,y=l.pendingProps.children,iu(l,p),S=Hs(S),y=y(S),l.flags|=1,Vn(i,l,y,p),l.child;case 14:return y=l.type,S=hr(y,l.pendingProps),S=hr(y.type,S),bC(i,l,y,S,p);case 15:return wC(i,l,l.type,l.pendingProps,p);case 17:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:hr(y,S),pg(i,l),l.tag=1,ns(y)?(i=!0,Ym(l)):i=!1,iu(l,p),hC(l,y,S),dv(l,y,S,p),mv(null,l,y,!0,i,p);case 19:return TC(i,l,p);case 22:return SC(i,l,p)}throw Error(t(156,l.tag))};function ZC(i,l){return RA(i,l)}function MD(i,l,p,y){this.tag=i,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(i,l,p,y){return new MD(i,l,p,y)}function Mv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function DD(i){if(typeof i=="function")return Mv(i)?1:0;if(i!=null){if(i=i.$$typeof,i===X)return 11;if(i===ae)return 14}return 2}function $o(i,l){var p=i.alternate;return p===null?(p=Ks(i.tag,l,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p.alternate=i,i.alternate=p):(p.pendingProps=l,p.type=i.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=i.flags&14680064,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue,l=i.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p}function Cg(i,l,p,y,S,j){var L=2;if(y=i,typeof i=="function")Mv(i)&&(L=1);else if(typeof i=="string")L=5;else e:switch(i){case O:return ol(p.children,S,j,l);case F:L=8,S|=8;break;case D:return i=Ks(12,p,l,S|2),i.elementType=D,i.lanes=j,i;case ee:return i=Ks(13,p,l,S),i.elementType=ee,i.lanes=j,i;case J:return i=Ks(19,p,l,S),i.elementType=J,i.lanes=j,i;case G:return Ng(p,S,j,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:L=10;break e;case K:L=9;break e;case X:L=11;break e;case ae:L=14;break e;case Y:L=16,y=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return l=Ks(L,p,l,S),l.elementType=i,l.type=y,l.lanes=j,l}function ol(i,l,p,y){return i=Ks(7,i,y,l),i.lanes=p,i}function Ng(i,l,p,y){return i=Ks(22,i,y,l),i.elementType=G,i.lanes=p,i.stateNode={isHidden:!1},i}function Dv(i,l,p){return i=Ks(6,i,null,l),i.lanes=p,i}function Ov(i,l,p){return l=Ks(4,i.children!==null?i.children:[],i.key,l),l.lanes=p,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function OD(i,l,p,y,S){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u0(0),this.expirationTimes=u0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u0(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Fv(i,l,p,y,S,j,L,B,V){return i=new OD(i,l,p,B,V),l===1?(l=1,j===!0&&(l|=8)):l=0,j=Ks(3,null,null,l),i.current=j,j.stateNode=i,j.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q0(j),i}function FD(i,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:y==null?null:""+y,children:i,containerInfo:l,implementation:p}}function eN(i){if(!i)return _o;i=i._reactInternals;e:{if(qa(i)!==i||i.tag!==1)throw Error(t(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ns(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(i.tag===1){var p=i.type;if(ns(p))return kE(i,p,l)}return l}function tN(i,l,p,y,S,j,L,B,V){return i=Fv(p,y,!0,i,S,j,L,B,V),i.context=eN(null),p=i.current,y=Un(),S=Fo(p),j=ki(y,S),j.callback=l??null,Io(p,j,S),i.current.lanes=S,mh(i,S,y),is(i,y),i}function jg(i,l,p,y){var S=l.current,j=Un(),L=Fo(S);return p=eN(p),l.context===null?l.context=p:l.pendingContext=p,l=ki(j,L),l.payload={element:i},y=y===void 0?null:y,y!==null&&(l.callback=y),i=Io(S,l,L),i!==null&&(mr(i,S,L,j),rg(i,S,L)),L}function kg(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function nN(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var p=i.retryLane;i.retryLane=p!==0&&p<l?p:l}}function Bv(i,l){nN(i,l),(i=i.alternate)&&nN(i,l)}function BD(){return null}var sN=typeof reportError=="function"?reportError:function(i){console.error(i)};function $v(i){this._internalRoot=i}Tg.prototype.render=$v.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(t(409));jg(i,l,null,null)},Tg.prototype.unmount=$v.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;sl(function(){jg(null,i,null,null)}),l[Ai]=null}};function Tg(i){this._internalRoot=i}Tg.prototype.unstable_scheduleHydration=function(i){if(i){var l=$A();i={blockedOn:null,target:i,priority:l};for(var p=0;p<No.length&&l!==0&&l<No[p].priority;p++);No.splice(p,0,i),p===0&&zA(i)}};function Vv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Pg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function rN(){}function $D(i,l,p,y,S){if(S){if(typeof y=="function"){var j=y;y=function(){var Q=kg(L);j.call(Q)}}var L=tN(l,y,i,0,null,!1,!1,"",rN);return i._reactRootContainer=L,i[Ai]=L.current,Th(i.nodeType===8?i.parentNode:i),sl(),L}for(;S=i.lastChild;)i.removeChild(S);if(typeof y=="function"){var B=y;y=function(){var Q=kg(V);B.call(Q)}}var V=Fv(i,0,!1,null,null,!1,!1,"",rN);return i._reactRootContainer=V,i[Ai]=V.current,Th(i.nodeType===8?i.parentNode:i),sl(function(){jg(l,V,p,y)}),V}function _g(i,l,p,y,S){var j=p._reactRootContainer;if(j){var L=j;if(typeof S=="function"){var B=S;S=function(){var V=kg(L);B.call(V)}}jg(l,L,i,S)}else L=$D(p,l,i,S,y);return kg(L)}FA=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var p=ph(l.pendingLanes);p!==0&&(d0(l,p|1),is(l,Ot()),(Ze&6)===0&&(uu=Ot()+500,Ro()))}break;case 13:sl(function(){var y=ji(i,1);if(y!==null){var S=Un();mr(y,i,1,S)}}),Bv(i,1)}},h0=function(i){if(i.tag===13){var l=ji(i,134217728);if(l!==null){var p=Un();mr(l,i,134217728,p)}Bv(i,134217728)}},BA=function(i){if(i.tag===13){var l=Fo(i),p=ji(i,l);if(p!==null){var y=Un();mr(p,i,l,y)}Bv(i,l)}},$A=function(){return ot},VA=function(i,l){var p=ot;try{return ot=i,l()}finally{ot=p}},r0=function(i,l,p){switch(l){case"input":if(qt(i,p),l=p.name,p.type==="radio"&&l!=null){for(p=i;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==i&&y.form===i.form){var S=qm(y);if(!S)throw Error(t(90));He(y),qt(y,S)}}}break;case"textarea":Bc(i,p);break;case"select":l=p.value,l!=null&&$n(i,!!p.multiple,l,!1)}},CA=Rv,NA=sl;var VD={usingClientEntryPoint:!1,Events:[Rh,Qc,qm,AA,EA,Rv]},Gh={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UD={bundleType:Gh.bundleType,version:Gh.version,rendererPackageName:Gh.rendererPackageName,rendererConfig:Gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=PA(i),i===null?null:i.stateNode},findFiberByHostInstance:Gh.findFiberByHostInstance||BD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{Tm=Rg.inject(UD),Hr=Rg}catch{}}return os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VD,os.createPortal=function(i,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(l))throw Error(t(200));return FD(i,l,null,p)},os.createRoot=function(i,l){if(!Vv(i))throw Error(t(299));var p=!1,y="",S=sN;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Fv(i,1,!1,null,null,p,!1,y,S),i[Ai]=l.current,Th(i.nodeType===8?i.parentNode:i),new $v(l)},os.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=PA(l),i=i===null?null:i.stateNode,i},os.flushSync=function(i){return sl(i)},os.hydrate=function(i,l,p){if(!Pg(l))throw Error(t(200));return _g(null,i,l,!0,p)},os.hydrateRoot=function(i,l,p){if(!Vv(i))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,S=!1,j="",L=sN;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(j=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),l=tN(l,null,i,1,p??null,S,!1,j,L),i[Ai]=l.current,Th(i),y)for(i=0;i<y.length;i++)p=y[i],S=p._getVersion,S=S(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,S]:l.mutableSourceEagerHydrationData.push(p,S);return new Tg(l)},os.render=function(i,l,p){if(!Pg(l))throw Error(t(200));return _g(null,i,l,!1,p)},os.unmountComponentAtNode=function(i){if(!Pg(i))throw Error(t(40));return i._reactRootContainer?(sl(function(){_g(null,null,i,!1,function(){i._reactRootContainer=null,i[Ai]=null})}),!0):!1},os.unstable_batchedUpdates=Rv,os.unstable_renderSubtreeIntoContainer=function(i,l,p,y){if(!Pg(p))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return _g(i,l,p,!1,y)},os.version="18.3.1-next-f1338f8080-20240426",os}var fN;function AT(){if(fN)return Wv.exports;fN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wv.exports=JD(),Wv.exports}var pN;function ZD(){if(pN)return Lg;pN=1;var n=AT();return Lg.createRoot=n.createRoot,Lg.hydrateRoot=n.hydrateRoot,Lg}var eO=ZD();const tO=Ey(eO);var cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ac=typeof window>"u"||"Deno"in globalThis;function sr(){}function nO(n,e){return typeof n=="function"?n(e):n}function Tb(n){return typeof n=="number"&&n>=0&&n!==1/0}function ET(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Pu(n,e){return typeof n=="function"?n(e):n}function Mr(n,e){return typeof n=="function"?n(e):n}function mN(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:o,queryKey:a,stale:u}=n;if(a){if(s){if(e.queryHash!==$S(a,e.options))return!1}else if(!Rf(e.queryKey,a))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||r&&r!==e.state.fetchStatus||o&&!o(e))}function gN(n,e){const{exact:t,status:s,predicate:r,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(_f(e.options.mutationKey)!==_f(o))return!1}else if(!Rf(e.options.mutationKey,o))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function $S(n,e){return((e==null?void 0:e.queryKeyHashFn)||_f)(n)}function _f(n){return JSON.stringify(n,(e,t)=>_b(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function Rf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Rf(n[t],e[t])):!1}function CT(n,e){if(n===e)return n;const t=xN(n)&&xN(e);if(t||_b(n)&&_b(e)){const s=t?n:Object.keys(n),r=s.length,o=t?e:Object.keys(e),a=o.length,u=t?[]:{};let d=0;for(let h=0;h<a;h++){const m=t?h:o[h];(!t&&s.includes(m)||t)&&n[m]===void 0&&e[m]===void 0?(u[m]=void 0,d++):(u[m]=CT(n[m],e[m]),u[m]===n[m]&&n[m]!==void 0&&d++)}return r===a&&d===r?n:u}return e}function Pb(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function xN(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _b(n){if(!yN(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!yN(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function yN(n){return Object.prototype.toString.call(n)==="[object Object]"}function sO(n){return new Promise(e=>{setTimeout(e,n)})}function Rb(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?CT(n,e):e}function rO(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function iO(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var VS=Symbol();function NT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===VS?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var yl,Yo,Fu,dT,oO=(dT=class extends cm{constructor(){super();I(this,yl);I(this,Yo);I(this,Fu);T(this,Fu,e=>{if(!Ac&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){f(this,Yo)||this.setEventListener(f(this,Fu))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,Yo))==null||e.call(this),T(this,Yo,void 0))}setEventListener(e){var t;T(this,Fu,e),(t=f(this,Yo))==null||t.call(this),T(this,Yo,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){f(this,yl)!==e&&(T(this,yl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof f(this,yl)=="boolean"?f(this,yl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yl=new WeakMap,Yo=new WeakMap,Fu=new WeakMap,dT),US=new oO,Bu,Qo,$u,hT,aO=(hT=class extends cm{constructor(){super();I(this,Bu,!0);I(this,Qo);I(this,$u);T(this,$u,e=>{if(!Ac&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){f(this,Qo)||this.setEventListener(f(this,$u))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,Qo))==null||e.call(this),T(this,Qo,void 0))}setEventListener(e){var t;T(this,$u,e),(t=f(this,Qo))==null||t.call(this),T(this,Qo,e(this.setOnline.bind(this)))}setOnline(e){f(this,Bu)!==e&&(T(this,Bu,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return f(this,Bu)}},Bu=new WeakMap,Qo=new WeakMap,$u=new WeakMap,hT),Fx=new aO;function Lb(){let n,e;const t=new Promise((r,o)=>{n=r,e=o});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}function lO(n){return Math.min(1e3*2**n,3e4)}function jT(n){return(n??"online")==="online"?Fx.isOnline():!0}var kT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function qv(n){return n instanceof kT}function TT(n){let e=!1,t=0,s=!1,r;const o=Lb(),a=b=>{var C;s||(x(new kT(b)),(C=n.abort)==null||C.call(n))},u=()=>{e=!0},d=()=>{e=!1},h=()=>US.isFocused()&&(n.networkMode==="always"||Fx.isOnline())&&n.canRun(),m=()=>jT(n.networkMode)&&n.canRun(),g=b=>{var C;s||(s=!0,(C=n.onSuccess)==null||C.call(n,b),r==null||r(),o.resolve(b))},x=b=>{var C;s||(s=!0,(C=n.onError)==null||C.call(n,b),r==null||r(),o.reject(b))},v=()=>new Promise(b=>{var C;r=E=>{(s||h())&&b(E)},(C=n.onPause)==null||C.call(n)}).then(()=>{var b;r=void 0,s||(b=n.onContinue)==null||b.call(n)}),w=()=>{if(s)return;let b;const C=t===0?n.initialPromise:void 0;try{b=C??n.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(g).catch(E=>{var M;if(s)return;const N=n.retry??(Ac?0:3),k=n.retryDelay??lO,P=typeof k=="function"?k(t,E):k,R=N===!0||typeof N=="number"&&t<N||typeof N=="function"&&N(t,E);if(e||!R){x(E);return}t++,(M=n.onFail)==null||M.call(n,t,E),sO(P).then(()=>h()?void 0:v()).then(()=>{e?x(E):w()})})};return{promise:o,cancel:a,continue:()=>(r==null||r(),o),cancelRetry:u,continueRetry:d,canStart:m,start:()=>(m()?w():v().then(w),o)}}var cO=n=>setTimeout(n,0);function uO(){let n=[],e=0,t=u=>{u()},s=u=>{u()},r=cO;const o=u=>{e?n.push(u):r(()=>{t(u)})},a=()=>{const u=n;n=[],u.length&&r(()=>{s(()=>{u.forEach(d=>{t(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},batchCalls:u=>(...d)=>{o(()=>{u(...d)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{r=u}}}var Sn=uO(),vl,fT,PT=(fT=class{constructor(){I(this,vl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tb(this.gcTime)&&T(this,vl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ac?1/0:5*60*1e3))}clearGcTimeout(){f(this,vl)&&(clearTimeout(f(this,vl)),T(this,vl,void 0))}},vl=new WeakMap,fT),Vu,Uu,Qs,bl,_n,Hf,wl,br,Ii,pT,dO=(pT=class extends PT{constructor(e){super();I(this,br);I(this,Vu);I(this,Uu);I(this,Qs);I(this,bl);I(this,_n);I(this,Hf);I(this,wl);T(this,wl,!1),T(this,Hf,e.defaultOptions),this.setOptions(e.options),this.observers=[],T(this,bl,e.client),T(this,Qs,f(this,bl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,T(this,Vu,hO(this.options)),this.state=e.state??f(this,Vu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=f(this,_n))==null?void 0:e.promise}setOptions(e){this.options={...f(this,Hf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&f(this,Qs).remove(this)}setData(e,t){const s=Rb(this.state.data,e,this.options);return _(this,br,Ii).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){_(this,br,Ii).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=f(this,_n))==null?void 0:s.promise;return(r=f(this,_n))==null||r.cancel(e),t?t.then(sr).catch(sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(f(this,Vu))}isActive(){return this.observers.some(e=>Mr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===VS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!ET(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=f(this,_n))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=f(this,_n))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),f(this,Qs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(f(this,_n)&&(f(this,wl)?f(this,_n).cancel({revert:!0}):f(this,_n).cancelRetry()),this.scheduleGc()),f(this,Qs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_(this,br,Ii).call(this,{type:"invalidate"})}fetch(e,t){var d,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(f(this,_n))return f(this,_n).continueRetry(),f(this,_n).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(x=>x.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,r=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(T(this,wl,!0),s.signal)})},o=()=>{const g=NT(this.options,t),x={client:f(this,bl),queryKey:this.queryKey,meta:this.meta};return r(x),T(this,wl,!1),this.options.persister?this.options.persister(g,x,this):g(x)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:f(this,bl),state:this.state,fetchFn:o};r(a),(d=this.options.behavior)==null||d.onFetch(a,this),T(this,Uu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&_(this,br,Ii).call(this,{type:"fetch",meta:(m=a.fetchOptions)==null?void 0:m.meta});const u=g=>{var x,v,w,b;qv(g)&&g.silent||_(this,br,Ii).call(this,{type:"error",error:g}),qv(g)||((v=(x=f(this,Qs).config).onError)==null||v.call(x,g,this),(b=(w=f(this,Qs).config).onSettled)==null||b.call(w,this.state.data,g,this)),this.scheduleGc()};return T(this,_n,TT({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var x,v,w,b;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(C){u(C);return}(v=(x=f(this,Qs).config).onSuccess)==null||v.call(x,g,this),(b=(w=f(this,Qs).config).onSettled)==null||b.call(w,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,x)=>{_(this,br,Ii).call(this,{type:"failed",failureCount:g,error:x})},onPause:()=>{_(this,br,Ii).call(this,{type:"pause"})},onContinue:()=>{_(this,br,Ii).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),f(this,_n).start()}},Vu=new WeakMap,Uu=new WeakMap,Qs=new WeakMap,bl=new WeakMap,_n=new WeakMap,Hf=new WeakMap,wl=new WeakMap,br=new WeakSet,Ii=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,..._T(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return qv(r)&&r.revert&&f(this,Uu)?{...f(this,Uu),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Sn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),f(this,Qs).notify({query:this,type:"updated",action:e})})},pT);function _T(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function hO(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Yr,mT,fO=(mT=class extends cm{constructor(e={}){super();I(this,Yr);this.config=e,T(this,Yr,new Map)}build(e,t,s){const r=t.queryKey,o=t.queryHash??$S(r,t);let a=this.get(o);return a||(a=new dO({client:e,queryKey:r,queryHash:o,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){f(this,Yr).has(e.queryHash)||(f(this,Yr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=f(this,Yr).get(e.queryHash);t&&(e.destroy(),t===e&&f(this,Yr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return f(this,Yr).get(e)}getAll(){return[...f(this,Yr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>mN(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>mN(e,s)):t}notify(e){Sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yr=new WeakMap,mT),Qr,Wn,Sl,Jr,Ho,gT,pO=(gT=class extends PT{constructor(e){super();I(this,Jr);I(this,Qr);I(this,Wn);I(this,Sl);this.mutationId=e.mutationId,T(this,Wn,e.mutationCache),T(this,Qr,[]),this.state=e.state||mO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){f(this,Qr).includes(e)||(f(this,Qr).push(e),this.clearGcTimeout(),f(this,Wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){T(this,Qr,f(this,Qr).filter(t=>t!==e)),this.scheduleGc(),f(this,Wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){f(this,Qr).length||(this.state.status==="pending"?this.scheduleGc():f(this,Wn).remove(this))}continue(){var e;return((e=f(this,Sl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,u,d,h,m,g,x,v,w,b,C,E,N,k,P,R,M,O,F;const t=()=>{_(this,Jr,Ho).call(this,{type:"continue"})};T(this,Sl,TT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,U)=>{_(this,Jr,Ho).call(this,{type:"failed",failureCount:D,error:U})},onPause:()=>{_(this,Jr,Ho).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>f(this,Wn).canRun(this)}));const s=this.state.status==="pending",r=!f(this,Sl).canStart();try{if(s)t();else{_(this,Jr,Ho).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(o=f(this,Wn).config).onMutate)==null?void 0:a.call(o,e,this));const U=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,e));U!==this.state.context&&_(this,Jr,Ho).call(this,{type:"pending",context:U,variables:e,isPaused:r})}const D=await f(this,Sl).start();return await((m=(h=f(this,Wn).config).onSuccess)==null?void 0:m.call(h,D,e,this.state.context,this)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,D,e,this.state.context)),await((w=(v=f(this,Wn).config).onSettled)==null?void 0:w.call(v,D,null,this.state.variables,this.state.context,this)),await((C=(b=this.options).onSettled)==null?void 0:C.call(b,D,null,e,this.state.context)),_(this,Jr,Ho).call(this,{type:"success",data:D}),D}catch(D){try{throw await((N=(E=f(this,Wn).config).onError)==null?void 0:N.call(E,D,e,this.state.context,this)),await((P=(k=this.options).onError)==null?void 0:P.call(k,D,e,this.state.context)),await((M=(R=f(this,Wn).config).onSettled)==null?void 0:M.call(R,void 0,D,this.state.variables,this.state.context,this)),await((F=(O=this.options).onSettled)==null?void 0:F.call(O,void 0,D,e,this.state.context)),D}finally{_(this,Jr,Ho).call(this,{type:"error",error:D})}}finally{f(this,Wn).runNext(this)}}},Qr=new WeakMap,Wn=new WeakMap,Sl=new WeakMap,Jr=new WeakSet,Ho=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Sn.batch(()=>{f(this,Qr).forEach(s=>{s.onMutationUpdate(e)}),f(this,Wn).notify({mutation:this,type:"updated",action:e})})},gT);function mO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fi,wr,Wf,xT,gO=(xT=class extends cm{constructor(e={}){super();I(this,Fi);I(this,wr);I(this,Wf);this.config=e,T(this,Fi,new Set),T(this,wr,new Map),T(this,Wf,0)}build(e,t,s){const r=new pO({mutationCache:this,mutationId:++ln(this,Wf)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){f(this,Fi).add(e);const t=Ig(e);if(typeof t=="string"){const s=f(this,wr).get(t);s?s.push(e):f(this,wr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(f(this,Fi).delete(e)){const t=Ig(e);if(typeof t=="string"){const s=f(this,wr).get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&f(this,wr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ig(e);if(typeof t=="string"){const s=f(this,wr).get(t),r=s==null?void 0:s.find(o=>o.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const t=Ig(e);if(typeof t=="string"){const r=(s=f(this,wr).get(t))==null?void 0:s.find(o=>o!==e&&o.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sn.batch(()=>{f(this,Fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),f(this,Fi).clear(),f(this,wr).clear()})}getAll(){return Array.from(f(this,Fi))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>gN(t,s))}findAll(e={}){return this.getAll().filter(t=>gN(e,t))}notify(e){Sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Sn.batch(()=>Promise.all(e.map(t=>t.continue().catch(sr))))}},Fi=new WeakMap,wr=new WeakMap,Wf=new WeakMap,xT);function Ig(n){var e;return(e=n.options.scope)==null?void 0:e.id}function Bx(n){return{onFetch:(e,t)=>{var m,g,x,v,w;const s=e.options,r=(x=(g=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:x.direction,o=((v=e.state.data)==null?void 0:v.pages)||[],a=((w=e.state.data)==null?void 0:w.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let b=!1;const C=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},E=NT(e.options,e.fetchOptions),N=async(k,P,R)=>{if(b)return Promise.reject();if(P==null&&k.pages.length)return Promise.resolve(k);const M={client:e.client,queryKey:e.queryKey,pageParam:P,direction:R?"backward":"forward",meta:e.options.meta};C(M);const O=await E(M),{maxPages:F}=e.options,D=R?iO:rO;return{pages:D(k.pages,O,F),pageParams:D(k.pageParams,P,F)}};if(r&&o.length){const k=r==="backward",P=k?RT:Ib,R={pages:o,pageParams:a},M=P(s,R);u=await N(R,M,k)}else{const k=n??o.length;do{const P=d===0?a[0]??s.initialPageParam:Ib(s,u);if(d>0&&P==null)break;u=await N(u,P),d++}while(d<k)}return u};e.options.persister?e.fetchFn=()=>{var b,C;return(C=(b=e.options).persister)==null?void 0:C.call(b,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function Ib(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function RT(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}function xO(n,e){return e?Ib(n,e)!=null:!1}function yO(n,e){return!e||!n.getPreviousPageParam?!1:RT(n,e)!=null}var Lt,Jo,Zo,zu,Hu,ea,Wu,Gu,yT,vO=(yT=class{constructor(n={}){I(this,Lt);I(this,Jo);I(this,Zo);I(this,zu);I(this,Hu);I(this,ea);I(this,Wu);I(this,Gu);T(this,Lt,n.queryCache||new fO),T(this,Jo,n.mutationCache||new gO),T(this,Zo,n.defaultOptions||{}),T(this,zu,new Map),T(this,Hu,new Map),T(this,ea,0)}mount(){ln(this,ea)._++,f(this,ea)===1&&(T(this,Wu,US.subscribe(async n=>{n&&(await this.resumePausedMutations(),f(this,Lt).onFocus())})),T(this,Gu,Fx.subscribe(async n=>{n&&(await this.resumePausedMutations(),f(this,Lt).onOnline())})))}unmount(){var n,e;ln(this,ea)._--,f(this,ea)===0&&((n=f(this,Wu))==null||n.call(this),T(this,Wu,void 0),(e=f(this,Gu))==null||e.call(this),T(this,Gu,void 0))}isFetching(n){return f(this,Lt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return f(this,Jo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=f(this,Lt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=f(this,Lt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Pu(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return f(this,Lt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=f(this,Lt).get(s.queryHash),o=r==null?void 0:r.state.data,a=nO(e,o);if(a!==void 0)return f(this,Lt).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Sn.batch(()=>f(this,Lt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=f(this,Lt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=f(this,Lt);Sn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=f(this,Lt);return Sn.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=Sn.batch(()=>f(this,Lt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(sr).catch(sr)}invalidateQueries(n,e={}){return Sn.batch(()=>(f(this,Lt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=Sn.batch(()=>f(this,Lt).findAll(n).filter(r=>!r.isDisabled()).map(r=>{let o=r.fetch(void 0,t);return t.throwOnError||(o=o.catch(sr)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(sr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=f(this,Lt).build(this,e);return t.isStaleByTime(Pu(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(sr).catch(sr)}fetchInfiniteQuery(n){return n.behavior=Bx(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(sr).catch(sr)}ensureInfiniteQueryData(n){return n.behavior=Bx(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Fx.isOnline()?f(this,Jo).resumePausedMutations():Promise.resolve()}getQueryCache(){return f(this,Lt)}getMutationCache(){return f(this,Jo)}getDefaultOptions(){return f(this,Zo)}setDefaultOptions(n){T(this,Zo,n)}setQueryDefaults(n,e){f(this,zu).set(_f(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...f(this,zu).values()],t={};return e.forEach(s=>{Rf(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){f(this,Hu).set(_f(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...f(this,Hu).values()],t={};return e.forEach(s=>{Rf(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...f(this,Zo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=$S(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===VS&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...f(this,Zo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){f(this,Lt).clear(),f(this,Jo).clear()}},Lt=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,zu=new WeakMap,Hu=new WeakMap,ea=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,yT),cs,Qe,Gf,Gn,Al,Ku,ta,na,Kf,qu,Xu,El,Cl,sa,Yu,it,nf,Mb,Db,Ob,Fb,Bb,$b,Vb,LT,vT,bO=(vT=class extends cm{constructor(e,t){super();I(this,it);I(this,cs);I(this,Qe);I(this,Gf);I(this,Gn);I(this,Al);I(this,Ku);I(this,ta);I(this,na);I(this,Kf);I(this,qu);I(this,Xu);I(this,El);I(this,Cl);I(this,sa);I(this,Yu,new Set);this.options=t,T(this,cs,e),T(this,na,null),T(this,ta,Lb()),this.options.experimental_prefetchInRender||f(this,ta).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(f(this,Qe).addObserver(this),vN(f(this,Qe),this.options)?_(this,it,nf).call(this):this.updateResult(),_(this,it,Fb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ub(f(this,Qe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ub(f(this,Qe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_(this,it,Bb).call(this),_(this,it,$b).call(this),f(this,Qe).removeObserver(this)}setOptions(e){const t=this.options,s=f(this,Qe);if(this.options=f(this,cs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Mr(this.options.enabled,f(this,Qe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_(this,it,Vb).call(this),f(this,Qe).setOptions(this.options),t._defaulted&&!Pb(this.options,t)&&f(this,cs).getQueryCache().notify({type:"observerOptionsUpdated",query:f(this,Qe),observer:this});const r=this.hasListeners();r&&bN(f(this,Qe),s,this.options,t)&&_(this,it,nf).call(this),this.updateResult(),r&&(f(this,Qe)!==s||Mr(this.options.enabled,f(this,Qe))!==Mr(t.enabled,f(this,Qe))||Pu(this.options.staleTime,f(this,Qe))!==Pu(t.staleTime,f(this,Qe)))&&_(this,it,Mb).call(this);const o=_(this,it,Db).call(this);r&&(f(this,Qe)!==s||Mr(this.options.enabled,f(this,Qe))!==Mr(t.enabled,f(this,Qe))||o!==f(this,sa))&&_(this,it,Ob).call(this,o)}getOptimisticResult(e){const t=f(this,cs).getQueryCache().build(f(this,cs),e),s=this.createResult(t,e);return SO(this,s)&&(T(this,Gn,s),T(this,Ku,this.options),T(this,Al,f(this,Qe).state)),s}getCurrentResult(){return f(this,Gn)}trackResult(e,t){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t==null||t(r),e[r])})}),s}trackProp(e){f(this,Yu).add(e)}getCurrentQuery(){return f(this,Qe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=f(this,cs).defaultQueryOptions(e),s=f(this,cs).getQueryCache().build(f(this,cs),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return _(this,it,nf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),f(this,Gn)))}createResult(e,t){var D;const s=f(this,Qe),r=this.options,o=f(this,Gn),a=f(this,Al),u=f(this,Ku),h=e!==s?e.state:f(this,Gf),{state:m}=e;let g={...m},x=!1,v;if(t._optimisticResults){const U=this.hasListeners(),K=!U&&vN(e,t),X=U&&bN(e,s,t,r);(K||X)&&(g={...g,..._T(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:w,errorUpdatedAt:b,status:C}=g;v=g.data;let E=!1;if(t.placeholderData!==void 0&&v===void 0&&C==="pending"){let U;o!=null&&o.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(U=o.data,E=!0):U=typeof t.placeholderData=="function"?t.placeholderData((D=f(this,Xu))==null?void 0:D.state.data,f(this,Xu)):t.placeholderData,U!==void 0&&(C="success",v=Rb(o==null?void 0:o.data,U,t),x=!0)}if(t.select&&v!==void 0&&!E)if(o&&v===(a==null?void 0:a.data)&&t.select===f(this,Kf))v=f(this,qu);else try{T(this,Kf,t.select),v=t.select(v),v=Rb(o==null?void 0:o.data,v,t),T(this,qu,v),T(this,na,null)}catch(U){T(this,na,U)}f(this,na)&&(w=f(this,na),v=f(this,qu),b=Date.now(),C="error");const N=g.fetchStatus==="fetching",k=C==="pending",P=C==="error",R=k&&N,M=v!==void 0,F={status:C,fetchStatus:g.fetchStatus,isPending:k,isSuccess:C==="success",isError:P,isInitialLoading:R,isLoading:R,data:v,dataUpdatedAt:g.dataUpdatedAt,error:w,errorUpdatedAt:b,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:N,isRefetching:N&&!k,isLoadingError:P&&!M,isPaused:g.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:P&&M,isStale:zS(e,t),refetch:this.refetch,promise:f(this,ta)};if(this.options.experimental_prefetchInRender){const U=ee=>{F.status==="error"?ee.reject(F.error):F.data!==void 0&&ee.resolve(F.data)},K=()=>{const ee=T(this,ta,F.promise=Lb());U(ee)},X=f(this,ta);switch(X.status){case"pending":e.queryHash===s.queryHash&&U(X);break;case"fulfilled":(F.status==="error"||F.data!==X.value)&&K();break;case"rejected":(F.status!=="error"||F.error!==X.reason)&&K();break}}return F}updateResult(){const e=f(this,Gn),t=this.createResult(f(this,Qe),this.options);if(T(this,Al,f(this,Qe).state),T(this,Ku,this.options),f(this,Al).data!==void 0&&T(this,Xu,f(this,Qe)),Pb(t,e))return;T(this,Gn,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!f(this,Yu).size)return!0;const a=new Set(o??f(this,Yu));return this.options.throwOnError&&a.add("error"),Object.keys(f(this,Gn)).some(u=>{const d=u;return f(this,Gn)[d]!==e[d]&&a.has(d)})};_(this,it,LT).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_(this,it,Fb).call(this)}},cs=new WeakMap,Qe=new WeakMap,Gf=new WeakMap,Gn=new WeakMap,Al=new WeakMap,Ku=new WeakMap,ta=new WeakMap,na=new WeakMap,Kf=new WeakMap,qu=new WeakMap,Xu=new WeakMap,El=new WeakMap,Cl=new WeakMap,sa=new WeakMap,Yu=new WeakMap,it=new WeakSet,nf=function(e){_(this,it,Vb).call(this);let t=f(this,Qe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(sr)),t},Mb=function(){_(this,it,Bb).call(this);const e=Pu(this.options.staleTime,f(this,Qe));if(Ac||f(this,Gn).isStale||!Tb(e))return;const s=ET(f(this,Gn).dataUpdatedAt,e)+1;T(this,El,setTimeout(()=>{f(this,Gn).isStale||this.updateResult()},s))},Db=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(f(this,Qe)):this.options.refetchInterval)??!1},Ob=function(e){_(this,it,$b).call(this),T(this,sa,e),!(Ac||Mr(this.options.enabled,f(this,Qe))===!1||!Tb(f(this,sa))||f(this,sa)===0)&&T(this,Cl,setInterval(()=>{(this.options.refetchIntervalInBackground||US.isFocused())&&_(this,it,nf).call(this)},f(this,sa)))},Fb=function(){_(this,it,Mb).call(this),_(this,it,Ob).call(this,_(this,it,Db).call(this))},Bb=function(){f(this,El)&&(clearTimeout(f(this,El)),T(this,El,void 0))},$b=function(){f(this,Cl)&&(clearInterval(f(this,Cl)),T(this,Cl,void 0))},Vb=function(){const e=f(this,cs).getQueryCache().build(f(this,cs),this.options);if(e===f(this,Qe))return;const t=f(this,Qe);T(this,Qe,e),T(this,Gf,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},LT=function(e){Sn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(f(this,Gn))}),f(this,cs).getQueryCache().notify({query:f(this,Qe),type:"observerResultsUpdated"})})},vT);function wO(n,e){return Mr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function vN(n,e){return wO(n,e)||n.state.data!==void 0&&Ub(n,e,e.refetchOnMount)}function Ub(n,e,t){if(Mr(e.enabled,n)!==!1){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&zS(n,e)}return!1}function bN(n,e,t,s){return(n!==e||Mr(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&zS(n,t)}function zS(n,e){return Mr(e.enabled,n)!==!1&&n.isStaleByTime(Pu(e.staleTime,n))}function SO(n,e){return!Pb(n.getCurrentResult(),e)}var AO=class extends bO{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n){super.setOptions({...n,behavior:Bx()})}getOptimisticResult(n){return n.behavior=Bx(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){var w,b;const{state:t}=n,s=super.createResult(n,e),{isFetching:r,isRefetching:o,isError:a,isRefetchError:u}=s,d=(b=(w=t.fetchMeta)==null?void 0:w.fetchMore)==null?void 0:b.direction,h=a&&d==="forward",m=r&&d==="forward",g=a&&d==="backward",x=r&&d==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:xO(e,t.data),hasPreviousPage:yO(e,t.data),isFetchNextPageError:h,isFetchingNextPage:m,isFetchPreviousPageError:g,isFetchingPreviousPage:x,isRefetchError:u&&!h&&!g,isRefetching:o&&!m&&!x}}},IT=A.createContext(void 0),EO=n=>{const e=A.useContext(IT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},CO=({client:n,children:e})=>(A.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),c.jsx(IT.Provider,{value:n,children:e})),MT=A.createContext(!1),NO=()=>A.useContext(MT);MT.Provider;function jO(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var kO=A.createContext(jO()),TO=()=>A.useContext(kO);function PO(n,e){return typeof n=="function"?n(...e):!!n}function wN(){}var _O=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},RO=n=>{A.useEffect(()=>{n.clearReset()},[n])},LO=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:r})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(r&&n.data===void 0||PO(t,[n.error,s])),IO=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},MO=(n,e)=>n.isLoading&&n.isFetching&&!e,DO=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,SN=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function OO(n,e,t){var g,x,v,w,b;const s=EO(),r=NO(),o=TO(),a=s.defaultQueryOptions(n);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,a),a._optimisticResults=r?"isRestoring":"optimistic",IO(a),_O(a,o),RO(o);const u=!s.getQueryCache().get(a.queryHash),[d]=A.useState(()=>new e(s,a)),h=d.getOptimisticResult(a),m=!r&&n.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(C=>{const E=m?d.subscribe(Sn.batchCalls(C)):wN;return d.updateResult(),E},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),A.useEffect(()=>{d.setOptions(a)},[a,d]),DO(a,h))throw SN(a,d,o);if(LO({result:h,errorResetBoundary:o,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((w=(v=s.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||w.call(v,a,h),a.experimental_prefetchInRender&&!Ac&&MO(h,r)){const C=u?SN(a,d,o):(b=s.getQueryCache().get(a.queryHash))==null?void 0:b.promise;C==null||C.catch(wN).finally(()=>{d.updateResult()})}return a.notifyOnChangeProps?h:d.trackResult(h)}function DT(n,e){return OO(n,AO)}var qh={},AN;function FO(){if(AN)return qh;AN=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.parse=a,qh.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function a(x,v){const w=new o,b=x.length;if(b<2)return w;const C=(v==null?void 0:v.decode)||m;let E=0;do{const N=x.indexOf("=",E);if(N===-1)break;const k=x.indexOf(";",E),P=k===-1?b:k;if(N>P){E=x.lastIndexOf(";",N-1)+1;continue}const R=u(x,E,N),M=d(x,N,R),O=x.slice(R,M);if(w[O]===void 0){let F=u(x,N+1,P),D=d(x,P,F);const U=C(x.slice(F,D));w[O]=U}E=P+1}while(E<b);return w}function u(x,v,w){do{const b=x.charCodeAt(v);if(b!==32&&b!==9)return v}while(++v<w);return w}function d(x,v,w){for(;v>w;){const b=x.charCodeAt(--v);if(b!==32&&b!==9)return v+1}return w}function h(x,v,w){const b=(w==null?void 0:w.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const C=b(v);if(!e.test(C))throw new TypeError(`argument val is invalid: ${v}`);let E=x+"="+C;if(!w)return E;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);E+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);E+="; Domain="+w.domain}if(w.path){if(!s.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);E+="; Path="+w.path}if(w.expires){if(!g(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);E+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(E+="; HttpOnly"),w.secure&&(E+="; Secure"),w.partitioned&&(E+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return E}function m(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function g(x){return r.call(x)==="[object Date]"}return qh}FO();var EN="popstate";function BO(n={}){function e(s,r){let{pathname:o,search:a,hash:u}=s.location;return zb("",{pathname:o,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:Lf(r)}return VO(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Or(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $O(){return Math.random().toString(36).substring(2,10)}function CN(n,e){return{usr:n.state,key:n.key,idx:e}}function zb(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?eh(e):e,state:t,key:e&&e.key||s||$O()}}function Lf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function eh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function VO(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,a=r.history,u="POP",d=null,h=m();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function m(){return(a.state||{idx:null}).idx}function g(){u="POP";let C=m(),E=C==null?null:C-h;h=C,d&&d({action:u,location:b.location,delta:E})}function x(C,E){u="PUSH";let N=zb(b.location,C,E);h=m()+1;let k=CN(N,h),P=b.createHref(N);try{a.pushState(k,"",P)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(P)}o&&d&&d({action:u,location:b.location,delta:1})}function v(C,E){u="REPLACE";let N=zb(b.location,C,E);h=m();let k=CN(N,h),P=b.createHref(N);a.replaceState(k,"",P),o&&d&&d({action:u,location:b.location,delta:0})}function w(C){return UO(C)}let b={get action(){return u},get location(){return n(r,a)},listen(C){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(EN,g),d=C,()=>{r.removeEventListener(EN,g),d=null}},createHref(C){return e(r,C)},createURL:w,encodeLocation(C){let E=w(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:v,go(C){return a.go(C)}};return b}function UO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Lf(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function OT(n,e,t="/"){return zO(n,e,t,!1)}function zO(n,e,t,s){let r=typeof e=="string"?eh(e):e,o=xo(r.pathname||"/",t);if(o==null)return null;let a=FT(n);HO(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=tF(o);u=ZO(a[d],h,s)}return u}function FT(n,e=[],t=[],s=""){let r=(o,a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};d.relativePath.startsWith("/")&&(Et(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let h=uo([s,d.relativePath]),m=t.concat(d);o.children&&o.children.length>0&&(Et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),FT(o.children,e,m,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:QO(h,o.index),routesMeta:m})};return n.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let d of BT(o.path))r(o,a,d)}),e}function BT(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let a=BT(s.join("/")),u=[];return u.push(...a.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function HO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:JO(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var WO=/^:[\w-]+$/,GO=3,KO=2,qO=1,XO=10,YO=-2,NN=n=>n==="*";function QO(n,e){let t=n.split("/"),s=t.length;return t.some(NN)&&(s+=YO),e&&(s+=KO),t.filter(r=>!NN(r)).reduce((r,o)=>r+(WO.test(o)?GO:o===""?qO:XO),s)}function JO(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function ZO(n,e,t=!1){let{routesMeta:s}=n,r={},o="/",a=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=$x({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),x=d.route;if(!g&&h&&t&&!s[s.length-1].route.index&&(g=$x({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:uo([o,g.pathname]),pathnameBase:iF(uo([o,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(o=uo([o,g.pathnameBase]))}return a}function $x(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=eF(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((h,{paramName:m,isOptional:g},x)=>{if(m==="*"){let w=u[x]||"";a=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[x];return g&&!v?h[m]=void 0:h[m]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:a,pattern:n}}function eF(n,e=!1,t=!0){Or(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function tF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function nF(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?eh(n):n;return{pathname:t?t.startsWith("/")?t:sF(t,e):e,search:oF(s),hash:aF(r)}}function sF(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Xv(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HS(n){let e=rF(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function WS(n,e,t,s=!1){let r;typeof n=="string"?r=eh(n):(r={...n},Et(!r.pathname||!r.pathname.includes("?"),Xv("?","pathname","search",r)),Et(!r.pathname||!r.pathname.includes("#"),Xv("#","pathname","hash",r)),Et(!r.search||!r.search.includes("#"),Xv("#","search","hash",r)));let o=n===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!s&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),g-=1;r.pathname=x.join("/")}u=g>=0?e[g]:"/"}let d=nF(r,u),h=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var uo=n=>n.join("/").replace(/\/\/+/g,"/"),iF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var $T=["POST","PUT","PATCH","DELETE"];new Set($T);var cF=["GET",...$T];new Set(cF);var th=A.createContext(null);th.displayName="DataRouter";var Cy=A.createContext(null);Cy.displayName="DataRouterState";var VT=A.createContext({isTransitioning:!1});VT.displayName="ViewTransition";var uF=A.createContext(new Map);uF.displayName="Fetchers";var dF=A.createContext(null);dF.displayName="Await";var $r=A.createContext(null);$r.displayName="Navigation";var um=A.createContext(null);um.displayName="Location";var lr=A.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var GS=A.createContext(null);GS.displayName="RouteError";function hF(n,{relative:e}={}){Et(nh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=A.useContext($r),{hash:r,pathname:o,search:a}=dm(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:uo([t,o])),s.createHref({pathname:u,search:a,hash:r})}function nh(){return A.useContext(um)!=null}function et(){return Et(nh(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(um).location}var UT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zT(n){A.useContext($r).static||A.useLayoutEffect(n)}function ke(){let{isDataRoute:n}=A.useContext(lr);return n?jF():fF()}function fF(){Et(nh(),"useNavigate() may be used only in the context of a <Router> component.");let n=A.useContext(th),{basename:e,navigator:t}=A.useContext($r),{matches:s}=A.useContext(lr),{pathname:r}=et(),o=JSON.stringify(HS(s)),a=A.useRef(!1);return zT(()=>{a.current=!0}),A.useCallback((d,h={})=>{if(Or(a.current,UT),!a.current)return;if(typeof d=="number"){t.go(d);return}let m=WS(d,JSON.parse(o),r,h.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:uo([e,m.pathname])),(h.replace?t.replace:t.push)(m,h.state,h)},[e,t,o,r,n])}var pF=A.createContext(null);function mF(n){let e=A.useContext(lr).outlet;return e&&A.createElement(pF.Provider,{value:n},e)}function xs(){let{matches:n}=A.useContext(lr),e=n[n.length-1];return e?e.params:{}}function dm(n,{relative:e}={}){let{matches:t}=A.useContext(lr),{pathname:s}=et(),r=JSON.stringify(HS(t));return A.useMemo(()=>WS(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function gF(n,e){return HT(n,e)}function HT(n,e,t,s){var E;Et(nh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=A.useContext($r),{matches:o}=A.useContext(lr),a=o[o.length-1],u=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",m=a&&a.route;{let N=m&&m.path||"";WT(d,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let g=et(),x;if(e){let N=typeof e=="string"?eh(e):e;Et(h==="/"||((E=N.pathname)==null?void 0:E.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=g;let v=x.pathname||"/",w=v;if(h!=="/"){let N=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=OT(n,{pathname:w});Or(m||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Or(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=wF(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:uo([h,r.encodeLocation?r.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:uo([h,r.encodeLocation?r.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,t,s);return e&&C?A.createElement(um.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function xF(){let n=NF(),e=lF(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:r},t):null,a)}var yF=A.createElement(xF,null),vF=class extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?A.createElement(lr.Provider,{value:this.props.routeContext},A.createElement(GS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bF({routeContext:n,match:e,children:t}){let s=A.useContext(th);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(lr.Provider,{value:n},t)}function wF(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,o=t==null?void 0:t.errors;if(o!=null){let d=r.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let a=!1,u=-1;if(t)for(let d=0;d<r.length;d++){let h=r[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=t,x=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){a=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((d,h,m)=>{let g,x=!1,v=null,w=null;t&&(g=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||yF,a&&(u<0&&m===0?(WT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):u===m&&(x=!0,w=h.route.hydrateFallbackElement||null)));let b=e.concat(r.slice(0,m+1)),C=()=>{let E;return g?E=v:x?E=w:h.route.Component?E=A.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,A.createElement(bF,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:t!=null},children:E})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?A.createElement(vF,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):C()},null)}function KS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SF(n){let e=A.useContext(th);return Et(e,KS(n)),e}function AF(n){let e=A.useContext(Cy);return Et(e,KS(n)),e}function EF(n){let e=A.useContext(lr);return Et(e,KS(n)),e}function qS(n){let e=EF(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function CF(){return qS("useRouteId")}function NF(){var s;let n=A.useContext(GS),e=AF("useRouteError"),t=qS("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function jF(){let{router:n}=SF("useNavigate"),e=qS("useNavigate"),t=A.useRef(!1);return zT(()=>{t.current=!0}),A.useCallback(async(r,o={})=>{Or(t.current,UT),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...o}))},[n,e])}var jN={};function WT(n,e,t){!e&&!jN[n]&&(jN[n]=!0,Or(!1,t))}A.memo(kF);function kF({routes:n,future:e,state:t}){return HT(n,void 0,t,e)}function Ny({to:n,replace:e,state:t,relative:s}){Et(nh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=A.useContext($r);Or(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(lr),{pathname:a}=et(),u=ke(),d=WS(n,HS(o),a,s==="path"),h=JSON.stringify(d);return A.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:s})},[u,h,s,e,t]),null}function TF(n){return mF(n.context)}function Ce(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PF({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:o=!1}){Et(!nh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:a,navigator:r,static:o,future:{}}),[a,r,o]);typeof t=="string"&&(t=eh(t));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:x="default"}=t,v=A.useMemo(()=>{let w=xo(d,a);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:x},navigationType:s}},[a,d,h,m,g,x,s]);return Or(v!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:A.createElement($r.Provider,{value:u},A.createElement(um.Provider,{children:e,value:v}))}function _F({children:n,location:e}){return gF(Hb(n),e)}function Hb(n,e=[]){let t=[];return A.Children.forEach(n,(s,r)=>{if(!A.isValidElement(s))return;let o=[...e,r];if(s.type===A.Fragment){t.push.apply(t,Hb(s.props.children,o));return}Et(s.type===Ce,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Hb(s.props.children,o)),t.push(a)}),t}var Zg="get",ex="application/x-www-form-urlencoded";function jy(n){return n!=null&&typeof n.tagName=="string"}function RF(n){return jy(n)&&n.tagName.toLowerCase()==="button"}function LF(n){return jy(n)&&n.tagName.toLowerCase()==="form"}function IF(n){return jy(n)&&n.tagName.toLowerCase()==="input"}function MF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function DF(n,e){return n.button===0&&(!e||e==="_self")&&!MF(n)}var Mg=null;function OF(){if(Mg===null)try{new FormData(document.createElement("form"),0),Mg=!1}catch{Mg=!0}return Mg}var FF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yv(n){return n!=null&&!FF.has(n)?(Or(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ex}"`),null):n}function BF(n,e){let t,s,r,o,a;if(LF(n)){let u=n.getAttribute("action");s=u?xo(u,e):null,t=n.getAttribute("method")||Zg,r=Yv(n.getAttribute("enctype"))||ex,o=new FormData(n)}else if(RF(n)||IF(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(s=d?xo(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Zg,r=Yv(n.getAttribute("formenctype"))||Yv(u.getAttribute("enctype"))||ex,o=new FormData(u,n),!OF()){let{name:h,type:m,value:g}=n;if(m==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,g)}}else{if(jy(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zg,s=null,r=ex,a=n}return o&&r==="text/plain"&&(a=o,o=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:o,body:a}}function XS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function $F(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VF(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function UF(n,e,t){let s=await Promise.all(n.map(async r=>{let o=e.routes[r.route.id];if(o){let a=await $F(o,t);return a.links?a.links():[]}return[]}));return GF(s.flat(1).filter(VF).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function kN(n,e,t,s,r,o){let a=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var m;return t[h].pathname!==d.pathname||((m=t[h].route.path)==null?void 0:m.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>a(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var g;let m=s.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(a(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function zF(n,e,{includeHydrateFallback:t}={}){return HF(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function HF(n){return[...new Set(n)]}function WF(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function GF(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let o=JSON.stringify(WF(r));return t.has(o)||(t.add(o),s.push({key:o,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KF=new Set([100,101,204,205]);function qF(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&xo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function GT(){let n=A.useContext(th);return XS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function XF(){let n=A.useContext(Cy);return XS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var YS=A.createContext(void 0);YS.displayName="FrameworkContext";function KT(){let n=A.useContext(YS);return XS(n,"You must render this element inside a <HydratedRouter> element"),n}function YF(n,e){let t=A.useContext(YS),[s,r]=A.useState(!1),[o,a]=A.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,x=A.useRef(null);A.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let b=E=>{E.forEach(N=>{a(N.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),A.useEffect(()=>{if(s){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[s]);let v=()=>{r(!0)},w=()=>{r(!1),a(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:Xh(u,v),onBlur:Xh(d,w),onMouseEnter:Xh(h,v),onMouseLeave:Xh(m,w),onTouchStart:Xh(g,v)}]:[!1,x,{}]}function Xh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function QF({page:n,...e}){let{router:t}=GT(),s=A.useMemo(()=>OT(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?A.createElement(ZF,{page:n,matches:s,...e}):null}function JF(n){let{manifest:e,routeModules:t}=KT(),[s,r]=A.useState([]);return A.useEffect(()=>{let o=!1;return UF(n,e,t).then(a=>{o||r(a)}),()=>{o=!0}},[n,e,t]),s}function ZF({page:n,matches:e,...t}){let s=et(),{manifest:r,routeModules:o}=KT(),{basename:a}=GT(),{loaderData:u,matches:d}=XF(),h=A.useMemo(()=>kN(n,e,d,r,s,"data"),[n,e,d,r,s]),m=A.useMemo(()=>kN(n,e,d,r,s,"assets"),[n,e,d,r,s]),g=A.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,b=!1;if(e.forEach(E=>{var k;let N=r.routes[E.route.id];!N||!N.hasLoader||(!h.some(P=>P.route.id===E.route.id)&&E.route.id in u&&((k=o[E.route.id])!=null&&k.shouldRevalidate)||N.hasClientLoader?b=!0:w.add(E.route.id))}),w.size===0)return[];let C=qF(n,a);return b&&w.size>0&&C.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[C.pathname+C.search]},[a,u,s,r,h,e,n,o]),x=A.useMemo(()=>zF(m,r),[m,r]),v=JF(m);return A.createElement(A.Fragment,null,g.map(w=>A.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>A.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:b})=>A.createElement("link",{key:w,...b})))}function e5(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qT&&(window.__reactRouterVersion="7.6.1")}catch{}function t5({basename:n,children:e,window:t}){let s=A.useRef();s.current==null&&(s.current=BO({window:t,v5Compat:!0}));let r=s.current,[o,a]=A.useState({action:r.action,location:r.location}),u=A.useCallback(d=>{A.startTransition(()=>a(d))},[a]);return A.useLayoutEffect(()=>r.listen(u),[r,u]),A.createElement(PF,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:r})}var XT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YT=A.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:o,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g,...x},v){let{basename:w}=A.useContext($r),b=typeof h=="string"&&XT.test(h),C,E=!1;if(typeof h=="string"&&b&&(C=h,qT))try{let D=new URL(window.location.href),U=h.startsWith("//")?new URL(D.protocol+h):new URL(h),K=xo(U.pathname,w);U.origin===D.origin&&K!=null?h=K+U.search+U.hash:E=!0}catch{Or(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=hF(h,{relative:r}),[k,P,R]=YF(s,x),M=i5(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:r,viewTransition:g});function O(D){e&&e(D),D.defaultPrevented||M(D)}let F=A.createElement("a",{...x,...R,href:C||N,onClick:E||o?e:O,ref:e5(v,P),target:d,"data-discover":!b&&t==="render"?"true":void 0});return k&&!b?A.createElement(A.Fragment,null,F,A.createElement(QF,{page:N})):F});YT.displayName="Link";var n5=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:o,to:a,viewTransition:u,children:d,...h},m){let g=dm(a,{relative:h.relative}),x=et(),v=A.useContext(Cy),{navigator:w,basename:b}=A.useContext($r),C=v!=null&&u5(g)&&u===!0,E=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,N=x.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(N=N.toLowerCase(),k=k?k.toLowerCase():null,E=E.toLowerCase()),k&&b&&(k=xo(k,b)||k);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=N===E||!r&&N.startsWith(E)&&N.charAt(P)==="/",M=k!=null&&(k===E||!r&&k.startsWith(E)&&k.charAt(E.length)==="/"),O={isActive:R,isPending:M,isTransitioning:C},F=R?e:void 0,D;typeof s=="function"?D=s(O):D=[s,R?"active":null,M?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(O):o;return A.createElement(YT,{...h,"aria-current":F,className:D,ref:m,style:U,to:a,viewTransition:u},typeof d=="function"?d(O):d)});n5.displayName="NavLink";var s5=A.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:o,method:a=Zg,action:u,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:g,...x},v)=>{let w=l5(),b=c5(u,{relative:h}),C=a.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&XT.test(u),N=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let P=k.nativeEvent.submitter,R=(P==null?void 0:P.getAttribute("formmethod"))||a;w(P||k.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:r,state:o,relative:h,preventScrollReset:m,viewTransition:g})};return A.createElement("form",{ref:v,method:C,action:b,onSubmit:s?d:N,...x,"data-discover":!E&&n==="render"?"true":void 0})});s5.displayName="Form";function r5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QT(n){let e=A.useContext(th);return Et(e,r5(n)),e}function i5(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:o,viewTransition:a}={}){let u=ke(),d=et(),h=dm(n,{relative:o});return A.useCallback(m=>{if(DF(m,e)){m.preventDefault();let g=t!==void 0?t:Lf(d)===Lf(h);u(n,{replace:g,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[d,u,h,t,s,e,n,r,o,a])}var o5=0,a5=()=>`__${String(++o5)}__`;function l5(){let{router:n}=QT("useSubmit"),{basename:e}=A.useContext($r),t=CF();return A.useCallback(async(s,r={})=>{let{action:o,method:a,encType:u,formData:d,body:h}=BF(s,e);if(r.navigate===!1){let m=r.fetcherKey||a5();await n.fetch(m,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:h,formMethod:r.method||a,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:h,formMethod:r.method||a,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function c5(n,{relative:e}={}){let{basename:t}=A.useContext($r),s=A.useContext(lr);Et(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...dm(n||".",{relative:e})},a=et();if(n==null){o.search=a.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let m=u.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:uo([t,o.pathname])),Lf(o)}function u5(n,e={}){let t=A.useContext(VT);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=QT("useViewTransitionState"),r=dm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=xo(t.currentLocation.pathname,s)||t.currentLocation.pathname,a=xo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return $x(r.pathname,a)!=null||$x(r.pathname,o)!=null}[...KF];var sh=AT();const d5=Ey(sh);function h5(){const[n,e]=A.useState(!1),[t,s]=A.useState(!1);return A.useEffect(()=>{const r=setTimeout(()=>{e(!0)},300),o=setTimeout(()=>{s(!0)},1e3);return()=>{clearTimeout(r),clearTimeout(o)}},[]),c.jsx("div",{className:"h-full flex flex-col",children:c.jsxs("div",{className:"h-full flex flex-col relative bg-white",children:[c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:c.jsx("div",{className:`transform transition-all duration-1000 ease-out ${n?"opacity-100 scale-100":"opacity-0 scale-90"}`,children:c.jsx("img",{src:"/crepe-newlogo2.png",alt:"Crepe 메인 로고",className:"w-65 h-60"})})}),c.jsxs("div",{className:`absolute bottom-10 left-0 right-0 flex justify-center text-lg text-slate-700 transition-all duration-1000 ease-in-out ${t?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-4"}`,children:[c.jsx("span",{children:"편리한 블록체인 토큰결제,"}),c.jsx("span",{className:"text-[#1C355E] font-semibold ml-1",children:"Crepe"})]})]})})}/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p5=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),TN=n=>{const e=p5(n);return e.charAt(0).toUpperCase()+e.slice(1)},JT=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),m5=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=A.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:a,...u},d)=>A.createElement("svg",{ref:d,...g5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:JT("lucide",r),...!o&&!m5(u)&&{"aria-hidden":"true"},...u},[...a.map(([h,m])=>A.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(n,e)=>{const t=A.forwardRef(({className:s,...r},o)=>A.createElement(x5,{ref:o,iconNode:e,className:JT(`lucide-${f5(TN(n))}`,`lucide-${n}`,s),...r}));return t.displayName=TN(n),t};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],v5=ut("arrow-up-down",y5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ZT=ut("camera",b5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],eP=ut("chart-no-axes-column",w5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hm=ut("check",S5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],QS=ut("chevron-down",A5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ky=ut("chevron-right",E5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JS=ut("chevron-up",C5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tP=ut("circle-alert",N5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],k5=ut("circle-check-big",j5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],PN=ut("circle-dollar-sign",T5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nP=ut("circle-help",P5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],sP=ut("clock",_5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L5=ut("copy",R5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],rP=ut("credit-card",I5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],iP=ut("heart",M5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],O5=ut("house",D5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],B5=ut("info",F5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],V5=ut("log-out",$5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oP=ut("refresh-cw",U5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ZS=ut("settings",z5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_N=ut("shield-check",H5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],G5=ut("shield-x",W5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vx=ut("shield",K5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Ty=ut("shopping-bag",q5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],aP=ut("shopping-cart",X5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e1=ut("triangle-alert",Y5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],J5=ut("user",Q5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],e3=ut("wallet",Z5);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],n3=ut("x",t3),Ux={blue:"#0C2B5F"};function s3({progress:n,isStore:e=!1,className:t=""}){const s=e?6:5,[r,o]=A.useState(0),a=Math.min(100,Math.max(0,n/(s-1)*100)),u=n>1?Math.min(100,Math.max(0,(n-1)/(s-1)*100)):0;A.useEffect(()=>{o(u);const h=setTimeout(()=>{o(a)},100);return()=>clearTimeout(h)},[n,u,a]);const d=()=>`
      @keyframes shimmer {
        0% {
          background-position: -200px 0;
        }
        100% {
          background-position: calc(200px + 100%) 0;
        }
      }
    `;return c.jsx("div",{className:`w-full py-4 px-6 mt-4 ${t}`,children:c.jsxs("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden relative",children:[c.jsx("div",{className:"h-full absolute transition-all duration-1000 ease-out",style:{width:`${r}%`,backgroundColor:Ux.blue}}),r>0&&c.jsx("div",{className:"absolute h-full opacity-30",style:{width:`${r}%`,backgroundColor:Ux.blue,backgroundImage:`
                linear-gradient(
                  90deg, 
                  transparent, 
                  rgba(255, 255, 255, 0.5), 
                  transparent
                )
              `,backgroundSize:"200px 100%",animation:"shimmer 2s infinite linear"}}),c.jsx("style",{dangerouslySetInnerHTML:{__html:d()}})]})})}function Ie({title:n,progress:e,isStore:t=!1,onBackClick:s,disableBack:r}){const o=ke(),a=()=>{s?s():o(-1)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{backgroundColor:Ux.blue},className:"text-white",children:c.jsxs("div",{className:"h-14 flex items-center px-6",children:[!r&&c.jsx("button",{className:"mr-4",onClick:a,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("h1",{className:"text-lg font-medium flex-1 text-center pr-8 text-white",children:n})]})}),e!==void 0&&c.jsx(s3,{progress:e,isStore:t})]})}function lP({username:n,onLogout:e,hasOtpEnabled:t}){return c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-full border-1 border-gray-400 flex items-center justify-center",style:{background:"linear-gradient(135deg, #93c5fd, #d8b4fe)"},children:c.jsx("span",{className:"text-white text-xl font-semibold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.7)"},children:n.charAt(0).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n}),c.jsx("div",{className:"flex items-center space-x-2 mt-1",children:t?c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(_N,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{className:"text-sm text-green-600 font-medium",children:"보안 강화됨"})]}):c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(G5,{className:"w-4 h-4 text-orange-500"}),c.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"보안 취약"})]})})]})]}),c.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[c.jsx(V5,{className:"w-4 h-4 text-gray-600"}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"로그아웃"})]})]}),c.jsx("div",{className:`rounded-lg p-3 ${t?"bg-green-50 border border-green-200":"bg-orange-50 border border-orange-200"}`,children:c.jsxs("div",{className:"flex items-center space-x-2",children:[t?c.jsx(_N,{className:"w-4 h-4 text-green-600"}):c.jsx(e1,{className:"w-4 h-4 text-orange-500"}),c.jsx("span",{className:`text-sm font-medium ${t?"text-green-800":"text-orange-800"}`,children:t?"2차 인증으로 계정이 보호되고 있습니다":"2차 인증 설정을 권장합니다"})]})})]})}function cP({menuItems:n}){return c.jsx("div",{className:"bg-white rounded-xl shadow-sm",children:n.map((e,t)=>c.jsxs("button",{onClick:e.onClick,className:`w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors ${t===0?"rounded-t-xl":""} ${t===n.length-1?"rounded-b-xl":"border-b border-gray-100"}`,children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[e.icon&&c.jsx("div",{className:"flex-shrink-0",children:e.icon}),c.jsx("span",{className:"text-gray-900 font-medium text-left",children:e.label}),e.badge&&c.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${e.badge==="활성화됨"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:e.badge})]}),c.jsx(ky,{size:16,className:"text-gray-400"})]},t))})}function r3(n){try{const e=n.split(".")[1];if(!e)return null;const t=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(e){return console.error("JWT 파싱 중 오류 발생:",e),null}}function i3(n){if(!n)return"";const e=r3(n);return e&&e.role?e.role:""}function uP(n){return i3(n)==="SELLER"}const o3=({icon:n,label:e,isActive:t,onClick:s})=>c.jsxs("button",{onClick:s,className:`flex flex-col items-center ${t?"text-blue-900":"text-gray-500"}`,children:[n,c.jsx("span",{className:"text-xs mt-1 text-white",children:e})]}),st=()=>{const n=ke(),e=et(),t=sessionStorage.getItem("accessToken"),s=uP(t),r=[{icon:c.jsx(O5,{className:"w-6 h-6",color:"white"}),label:"홈",isActive:e.pathname==="/my/coin",onClick:()=>n("/my/coin")},{icon:c.jsx(Ty,{className:"w-6 h-6",color:"white"}),label:"쇼핑몰",isActive:e.pathname==="/mall"||e.pathname==="/store",onClick:()=>n(s?"/store":"/mall")},{icon:c.jsx(J5,{className:"w-6 h-6",color:"white"}),label:"마이페이지",isActive:e.pathname.includes("/my"),onClick:()=>n(s?"/store/my":"/user/my")}];return c.jsx("nav",{className:`bg-[${Ux.blue}] border-t flex justify-around py-3`,children:r.map((o,a)=>c.jsx(o3,{icon:o.icon,label:o.label,isActive:o.isActive,onClick:o.onClick},a))})},a3={"제한 없음":"ALL_OCCUPATIONS",직장인:"EMPLOYEE",자영업자:"SELF_EMPLOYED",공무원:"PUBLIC_SERVANT",군인:"MILITARY",학생:"STUDENT",주부:"HOUSEWIFE",무직:"UNEMPLOYED"},ys="http://localhost:8080";async function dP(n,e){return await fetch(`${ys}/api/sms/code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n,smsType:e})})}async function hP(n,e,t){return await fetch(`${ys}/api/sms/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n,phone:e,smsType:t})})}async function l3(n){const e=await fetch(`${ys}/api/check/email-duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})});if(e.status===200)return null;if(e.status===403)return(await e.json()).message;{const t=await e.text();throw new Error(t||"이메일 중복 확인 중 오류가 발생했습니다.")}}async function c3(n){const e=await fetch(`${ys}/api/check/nickname-duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:n})});if(e.status===200)return!1;if(e.status===403)return(await e.json()).message;{const t=await e.text();throw new Error(t||"닉네임 중복 확인 중 오류가 발생했습니다.")}}async function u3(n){return await fetch(`${ys}/api/user/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}async function d3({email:n,password:e,captchaKey:t,captchaValue:s}){return await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:e,captchaKey:t,captchaValue:s})})}async function h3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${ys}/api/change/password`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});if(!t.ok){const s=await t.text();throw new Error(s||"비밀번호 변경에 실패했습니다.")}}async function f3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${ys}/api/change/phone`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});if(!t.ok){const s=await t.text();throw new Error(s||"전화번호 변경에 실패했습니다.")}}async function p3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${ys}/api/change/nickname`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});if(!t.ok){const s=await t.text();throw new Error(s||"닉네임 변경에 실패했습니다.")}}async function t1(){const n=sessionStorage.getItem("accessToken"),e=await fetch(`${ys}/api/user/my`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error("사용자 정보를 불러오지 못했습니다.");return await e.json()}async function m3(n){const e=sessionStorage.getItem("accessToken");if(!e)throw new Error("인증 토큰이 없습니다. 다시 로그인해주세요.");const t=new FormData;t.append("file",n);const s=await fetch(`${ys}/api/ocr/id`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:t});if(!s.ok){if(s.status===400)throw new Error("잘못된 요청입니다. 파일을 확인해주세요.");if(s.status===404)throw new Error("사용자를 찾을 수 없습니다.");if(s.status===500)throw new Error("서버에서 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");{const r=await s.text();throw new Error(r||"OCR 처리 중 오류가 발생했습니다.")}}return await s.json()}async function g3(n){const e=sessionStorage.getItem("accessToken");if(!e)throw new Error("인증 토큰이 없습니다. 다시 로그인해주세요.");const t=a3[n];if(!t)throw new Error("유효하지 않은 직업입니다. 올바른 직업을 선택해주세요.");const s=await fetch(`${ys}/api/add/occupation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({occupation:t})});if(!s.ok){const r=await s.json();throw new Error(r.message||"직업 등록 중 오류가 발생했습니다.")}return await s.text()}async function x3(){const n=sessionStorage.getItem("accessToken");if(!n)throw new Error("인증 토큰이 없습니다. 다시 로그인해주세요.");const e=await fetch(`${ys}/api/check/income`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!e.ok){const t=await e.text();throw new Error(t||"소득 조회 중 오류가 발생했습니다.")}return await e.json()}async function y3(n){const e=sessionStorage.getItem("accessToken");if(!e)throw new Error("인증 토큰이 없습니다. 다시 로그인해주세요.");const t=new URL(`${ys}/api/product/check-eligibility`);t.searchParams.append("productId",n.toString());const s=await fetch(t.toString(),{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(!s.ok){const r=await s.text();throw new Error(r||"자격 확인 중 오류가 발생했습니다.")}return await s.json()}async function v3(){const n=sessionStorage.getItem("accessToken");if(!n)throw new Error("인증 토큰이 없습니다.");const e=await fetch(`${ys}/api/pay`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("사용자의 결제내역 정보를 불러오지 못했습니다.");return await e.json()}const Zn="http://localhost:8080";async function b3(n){return await fetch(`${Zn}/api/store/signup`,{method:"POST",body:n})}async function w3(n){const e=new FormData;e.append("file",n);const t=await fetch(`${Zn}/api/ocr/business-license`,{method:"POST",body:e});if(!t.ok)throw new Error("사업자등록증 업로드 중 오류가 발생했습니다.");return await t.json()}async function fm(){const n=sessionStorage.getItem("accessToken"),e=await fetch(`${Zn}/api/store/my`,{headers:{Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error("내 가게 정보를 불러올 수 없습니다.");return await e.json()}async function S3(n){const e=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/change/name`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({newStoreName:n})})}async function A3(n){const e=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/change/address`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({newAddress:n})})}async function E3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${Zn}/api/store/menu/${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("메뉴 상세 조회에 실패했습니다.");return await t.json()}async function C3(n){const e=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/menu`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:n})}const N3=async n=>{const e=sessionStorage.getItem("accessToken");if(!(await fetch(`${Zn}/api/store/change/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({storeStatus:n})})).ok)throw new Error("상태 변경 실패")};async function j3(n,e){const t=sessionStorage.getItem("accessToken"),s=await fetch(`${Zn}/api/store/menu/${n}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`},body:e});if(!s.ok){const r=await s.text();throw new Error(r||"메뉴 수정에 실패했습니다.")}}async function k3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${Zn}/api/store/menu/${n}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`}});if(!t.ok){const s=await t.text();throw new Error(s||"메뉴 삭제에 실패했습니다.")}}async function T3(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${Zn}/api/store/select/coin`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({supportedCoins:n})});if(!t.ok){const s=await t.text();throw new Error(s||"코인 지원 설정 업데이트 실패")}return await t.json()}async function P3(){const n=sessionStorage.getItem("accessToken"),e=await fetch(`${Zn}/api/store/orders`,{headers:{Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}async function _3(n,e){const t=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/orders/${n}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:"accept",preparationTime:e})})}async function R3(n,e){const t=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/orders/${n}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:"refuse",refusalReason:e})})}async function L3(n){const e=sessionStorage.getItem("accessToken");return await fetch(`${Zn}/api/store/orders/${n}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({action:"complete"})})}const RN="http://localhost:8080",fP=A.createContext(null),I3=({children:n})=>{const[e,t]=A.useState(!1),[s,r]=A.useState(!0),o=A.useRef(null),a=A.useRef(null),u=A.useRef(0),d=5,h=()=>{const b=sessionStorage.getItem("accessToken");if(!b){console.log("🔐 토큰이 없어서 SSE 연결을 건너뜁니다.");return}o.current&&(console.log("🔄 기존 SSE 연결을 해제합니다."),o.current.close(),o.current=null),a.current&&(clearTimeout(a.current),a.current=null);try{console.log("🔗 User SSE 연결 시도 중...",`${RN}/api/auth/events`),console.log("🔑 토큰 (앞 50자):",b.substring(0,50)+"...");const C=`${RN}/api/auth/events?token=${encodeURIComponent(b)}`;console.log("📏 SSE URL 길이:",C.length);const E=new EventSource(C);E.onopen=()=>{console.log("✅ User SSE 연결이 성공적으로 열렸습니다."),console.log("📊 EventSource readyState:",E.readyState),u.current=0},E.addEventListener("connected",N=>{console.log("✅ User SSE 연결 확인:",N.data)}),E.addEventListener("keepalive",N=>{console.log("💓 User Keep-alive:",N.data)}),E.onmessage=N=>{console.log("📨 User SSE 일반 메시지 수신:",N),console.log("   - data:",N.data),console.log("   - type:",N.type),console.log("   - lastEventId:",N.lastEventId)},E.addEventListener("duplicate-login",N=>{console.log("🚨 User 중복 로그인 감지:",N.data),alert("다른 기기에서 로그인되어 현재 세션이 종료됩니다."),m()}),E.onerror=N=>{switch(console.error("❌ User SSE 연결 오류:",N),console.log("📊 EventSource readyState:",E.readyState),console.log("🔗 EventSource url:",E.url),E.readyState){case EventSource.CONNECTING:console.log("🔄 User SSE 연결 시도 중...");break;case EventSource.OPEN:console.log("✅ User SSE 연결이 열려있음");break;case EventSource.CLOSED:if(console.log("❌ User SSE 연결이 닫혔습니다."),u.current<d){u.current++;const k=Math.min(1e3*u.current,1e4);console.log(`🔄 ${k/1e3}초 후 User SSE 재연결 시도 (${u.current}/${d})`),a.current=setTimeout(()=>{h()},k)}else console.log("❌ User SSE 최대 재연결 시도 횟수 초과");break;default:console.log("❓ User SSE 알 수 없는 상태:",E.readyState)}E.close()},o.current=E}catch(C){console.error("❌ User SSE 연결 설정 실패:",C)}},m=()=>{console.log("🔄 User 강제 로그아웃 처리 중..."),o.current&&(o.current.close(),o.current=null),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),sessionStorage.removeItem("userEmail"),t(!1),window.location.pathname!=="/login"&&(console.log("🔄 로그인 페이지로 리다이렉트..."),window.location.href="/login")};A.useEffect(()=>((()=>{try{const C=sessionStorage.getItem("accessToken"),E=sessionStorage.getItem("userEmail");console.log("🔍 초기 토큰 확인:",C?"토큰 있음":"토큰 없음"),console.log("📧 초기 이메일 확인:",E||"이메일 없음"),C?(console.log("💾 저장된 User 토큰 발견, 인증 상태 설정 중..."),t(!0),setTimeout(()=>{console.log("🔄 SSE 연결 지연 시작..."),h()},100)):(console.log("❌ 저장된 User 토큰이 없습니다."),t(!1))}catch(C){console.error("User 초기 인증 확인 에러:",C),t(!1)}finally{r(!1)}})(),()=>{console.log("🧹 User AuthProvider 언마운트, SSE 연결 정리 중..."),o.current&&o.current.close(),a.current&&clearTimeout(a.current)}),[]);const g=(b,C,E)=>{console.log("🔐 User 로그인 처리 중..."),console.log("📧 로그인 이메일:",E),sessionStorage.setItem("accessToken",b),sessionStorage.setItem("refreshToken",C),E&&(sessionStorage.setItem("userEmail",E),console.log("✅ 사용자 이메일 저장됨:",E)),t(!0),setTimeout(()=>{console.log("🔄 로그인 후 SSE 연결 시작..."),h()},500)},x=()=>{console.log("🚪 User 로그아웃 처리 중..."),o.current&&(o.current.close(),o.current=null),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),sessionStorage.removeItem("userEmail"),t(!1),console.log("✅ User 로그아웃 완료")},v=()=>!!sessionStorage.getItem("accessToken"),w=()=>sessionStorage.getItem("userEmail");return c.jsx(fP.Provider,{value:{isAuthenticated:e,isLoading:s,login:g,logout:x,checkAuth:v,getUserEmail:w},children:n})},n1=()=>{const n=A.useContext(fP);if(!n)throw new Error("useAuthContext는 AuthProvider 내에서 사용되어야 합니다.");return n};function LN(){const n="http://localhost:8080",e=ke(),t=et(),[s,r]=A.useState("..."),[o,a]=A.useState(""),[u,d]=A.useState(!1),[h,m]=A.useState(!0),[g,x]=A.useState(!1),v=sessionStorage.getItem("accessToken"),{logout:w}=n1(),b=t.pathname.includes("/store"),C=()=>{e(b?"/store/my/edit":"/user/my/edit")},E=async F=>{try{if(console.log("🔍 OTP 상태 조회 시작:",{email:F,BASE_URL:n}),console.log("🔑 사용할 토큰:",v?`${v.substring(0,20)}...`:"null"),!v){console.error("❌ 토큰이 없습니다. 로그인이 필요합니다."),d(!1),x(!0);return}const D=await fetch(`${n}/api/otp/status`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({email:F})});if(console.log("📨 OTP 상태 응답:",{status:D.status,statusText:D.statusText,url:D.url,headers:Object.fromEntries(D.headers.entries())}),D.status===401){console.error("❌ 인증 실패 (401): 토큰이 유효하지 않거나 만료되었습니다."),w(),e("/login",{replace:!0});return}if(!D.ok){const K=await D.text();console.error("❌ OTP 상태 조회 HTTP 오류:",{status:D.status,statusText:D.statusText,errorText:K});return}const U=await D.json();console.log("✅ OTP 상태 응답 데이터:",U),U.status==="success"?U.data&&U.data.enabled?(d(!0),x(!1),console.log("🛡️ OTP 활성화됨")):(d(!1),x(!0),console.log("🔓 OTP 비활성화 또는 미설정")):(console.warn("⚠️ OTP 상태 조회 실패:",U.message),d(!1),x(!0))}catch(D){console.error("❌ OTP 상태 조회 네트워크 오류:",D),d(!1),x(!0)}},N=async()=>{if(!o){alert("이메일 정보가 없습니다.");return}if(confirm(`⚠️ 2차 인증을 해제하시겠습니까?

해제하면 계정 보안이 약화됩니다.
정말로 해제하시겠습니까?`))try{const D=await fetch(`${n}/api/otp/disable`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const U=await D.json();U.status==="success"?(alert("2차 인증이 성공적으로 해제되었습니다."),d(!1),x(!0)):alert(U.message||"OTP 해제에 실패했습니다.")}catch(D){console.error("OTP 해제 오류:",D),alert("네트워크 오류가 발생했습니다.")}};A.useEffect(()=>{(async()=>{try{if(!v){console.warn("⚠️ 토큰이 없어서 사용자 데이터 조회를 건너뜁니다."),x(!0);return}if(console.log("👤 사용자 데이터 조회 시작...",{isSeller:b}),b){const D=await fm();console.log("🏪 스토어 데이터:",D),r(D.storeName),a(D.email),D.email?await E(D.email):(console.warn("⚠️ 스토어 이메일 정보가 없습니다."),x(!0))}else{const D=await t1();console.log("👤 사용자 데이터:",D),r(D.nickname),a(D.email),D.email?await E(D.email):(console.warn("⚠️ 사용자 이메일 정보가 없습니다."),x(!0))}}catch(D){console.error("❌ 사용자 정보 조회 실패:",D),x(!0)}finally{m(!1)}})()},[v,b,n]);const k=()=>{console.log("🚪 로그아웃 버튼 클릭"),w(),e("/login",{replace:!0})},P=()=>{e("/otp/setup")},R=()=>{let F;u?(F=confirm(`2차 인증 관리

• 확인: 2차 인증 해제
• 취소: 2차 인증 재설정

어떤 작업을 하시겠습니까?`),F?N():P()):P()},M=()=>{x(!1)},O=()=>{const F=[{label:"내 정보 수정",onClick:C,icon:c.jsx(ZS,{size:18,color:"#6366f1"})}];return F.push({label:u?"2차 인증 관리":"2차 인증 설정",onClick:R,icon:u?c.jsx(Vx,{size:18,color:"#10b981"}):c.jsx(Vx,{size:18,color:"#6b7280"}),badge:u?"활성화됨":"미설정"}),b?F.push({label:"결산리포트",onClick:()=>e("/settlement"),icon:c.jsx(eP,{size:18,color:"#10b981"})}):F.push({label:"내 주문 내역",onClick:()=>e("/my/orders"),icon:c.jsx(Ty,{size:18,color:"#10b981"})},{label:"결제 내역",onClick:()=>e("/my/payments"),icon:c.jsx(rP,{size:18,color:"#f59e0b"})}),F.push({label:"고객 센터",onClick:()=>e(b?"/store/my/customer-support":"/home/my/customer-support"),icon:c.jsx(nP,{size:18,color:"#0ea5e9"})}),F};return h?c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:b?"판매자 페이지":"마이페이지"}),c.jsx("main",{className:"flex-1 p-4 bg-gray-50 overflow-auto flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),c.jsx(st,{})]}):c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:b?"판매자 페이지":"마이페이지"}),c.jsxs("main",{className:"flex-1 p-4 bg-gray-50 overflow-auto",children:[g&&!u&&c.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 p-4 mb-4 rounded-lg shadow-sm",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(e1,{className:"h-5 w-5 text-amber-400"})}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"🔒 계정 보안 강화가 필요합니다"}),c.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[c.jsxs("p",{className:"mb-2",children:[c.jsx("strong",{children:"2차 인증(OTP)"}),"을 설정하여 계정을 더욱 안전하게 보호하세요!"]}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"해킹 시도로부터 계정 보호"}),c.jsx("li",{children:"무단 로그인 방지"}),c.jsxs("li",{children:["개인정보 및 ",b?"판매":"결제"," 정보 보안 강화"]})]})]}),c.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[c.jsx("button",{onClick:P,className:"bg-amber-600 text-white px-3 py-1.5 rounded text-xs font-medium hover:bg-amber-700 transition-colors",children:"지금 설정하기"}),c.jsx("button",{onClick:M,className:"bg-gray-200 text-gray-600 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-300 transition-colors",children:"나중에"})]})]})]})}),c.jsx(lP,{username:s,onLogout:k,hasOtpEnabled:u}),c.jsx(cP,{menuItems:O()})]}),c.jsx(st,{})]})}function M3({onSuccess:n,onSubmit:e}){const[t,s]=A.useState(""),[r,o]=A.useState(""),[a,u]=A.useState(""),[d,h]=A.useState(""),[m,g]=A.useState(!1),x=()=>{t?g(!0):h("비밀번호를 입력해주세요.")},v=async()=>{if(!m){h("현재 비밀번호를 먼저 확인해주세요.");return}if(!r){h("새로운 비밀번호를 입력해주세요.");return}if(r!==a){h("비밀번호가 일치하지 않습니다.");return}try{await e({oldPassword:t,newPassword:r}),n()}catch(w){console.error("비밀번호 변경 실패",w),h("비밀번호 변경 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[c.jsx("h2",{className:"text-lg font-medium mb-2",children:"비밀번호 변경"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"기존 비밀번호를 입력해주세요."}),c.jsxs("div",{className:"flex",children:[c.jsx("input",{type:"password",value:t,onChange:w=>s(w.target.value),className:"flex-1 border rounded p-2",placeholder:"비밀번호를 입력해주세요.",disabled:m}),c.jsx("button",{onClick:x,className:`ml-2 border px-3 py-2 rounded ${m?"bg-gray-100 text-gray-500 border-gray-300":"bg-white border-[#0a2e65] text-[#0a2e65]"}`,disabled:m,children:"비밀번호확인"})]})]}),d&&c.jsx("p",{className:"text-red-500 text-sm mb-2",children:d}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"새로운 비밀번호 입력"}),c.jsx("input",{type:"password",value:r,onChange:w=>o(w.target.value),className:"w-full border rounded p-2",placeholder:"비밀번호를 입력해주세요.",disabled:!m}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"영문, 숫자, 특수기호를 혼합 8~16자리의 비밀번호"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"새로운 비밀번호 확인"}),c.jsx("input",{type:"password",value:a,onChange:w=>u(w.target.value),className:"w-full border rounded p-2",placeholder:"비밀번호를 입력해주세요.",disabled:!m}),r&&a&&r!==a&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:"비밀번호가 일치하지 않습니다."})]}),c.jsx("button",{onClick:v,className:`w-full py-3 rounded ${m?"bg-[#0a2e65] text-white":"bg-gray-300 text-gray-500"}`,disabled:!m,children:"변경하기"})]})}function D3({onSuccess:n,onSubmit:e}){const[t,s]=A.useState(""),[r,o]=A.useState(""),[a,u]=A.useState(""),[d,h]=A.useState(!1),[m,g]=A.useState(""),x=()=>{if(!a){g("닉네임을 입력해주세요.");return}h(!0),g("")},v=async()=>{if(!d){g("닉네임 중복 확인을 먼저 해주세요.");return}try{await e({newNickname:a}),n()}catch(w){console.error("닉네임 변경 실패",w),g("닉네임 변경 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[c.jsx("h2",{className:"text-lg font-medium mb-2",children:"닉네임 변경"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"닉네임을 입력해주세요."}),c.jsxs("div",{className:"flex",children:[c.jsx("input",{type:"text",value:a,onChange:w=>{u(w.target.value),h(!1)},className:"flex-1 border rounded p-2",placeholder:"닉네임을 입력해주세요."}),c.jsx("button",{onClick:x,className:"ml-2 bg-white border border-[#0a2e65] text-[#0a2e65] px-3 py-2 rounded",children:"중복확인"})]}),m?c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m}):d?c.jsx("p",{className:"text-xs text-green-500 mt-1",children:"사용 가능한 닉네임입니다."}):null]}),c.jsx("button",{onClick:v,className:`w-full py-3 rounded ${d?"bg-[#0a2e65] text-white":"bg-gray-300 text-gray-500"}`,disabled:!d,children:"변경하기"})]})}const IN="http://localhost:8080";function O3({onSuccess:n,onSubmit:e}){const[t,s]=A.useState(""),[r,o]=A.useState(""),[a,u]=A.useState(!1),[d,h]=A.useState(!1),[m,g]=A.useState(""),[x,v]=A.useState(""),w=N=>/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/.test(N),b=async()=>{if(!t){g("휴대전화번호를 입력해주세요.");return}if(!w(t)){g("휴대전화번호 형식이 올바르지 않습니다.");return}try{if(!(await fetch(`${IN}/sms/code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t,smsType:"CHANGE_PHONE_NUM"})})).ok)throw new Error("인증번호 전송 실패");g(""),u(!0)}catch{g("인증번호 전송 중 오류가 발생했습니다.")}},C=async()=>{if(!r){v("인증번호를 입력해주세요.");return}try{if(!(await fetch(`${IN}/sms/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,phone:t,smsType:"CHANGE_PHONE_NUM"})})).ok)throw new Error("인증 실패");h(!0),v("")}catch{v("인증번호가 맞지 않습니다.")}},E=async()=>{if(!d){v("휴대폰 번호 인증을 먼저 완료해주세요.");return}try{await e({phoneNumber:t}),n()}catch(N){console.error("전화번호 변경 실패",N),g("전화번호 변경 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[c.jsx("h2",{className:"text-lg font-medium mb-2",children:"휴대폰 변경"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"휴대전화번호를 입력해주세요."}),c.jsxs("div",{className:"flex",children:[c.jsx("input",{type:"tel",value:t,onChange:N=>{s(N.target.value),u(!1),h(!1)},className:`flex-1 border rounded p-2 ${m?"border-red-500":""}`,placeholder:"휴대전화번호를 입력해주세요.",disabled:d}),c.jsx("button",{onClick:b,className:`ml-2 border px-3 py-2 rounded ${d?"bg-gray-100 text-gray-500 border-gray-300":"bg-white border-[#0a2e65] text-[#0a2e65]"}`,disabled:d,children:"인증번호 전송"})]}),m&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:m})]}),a&&c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"인증번호 입력"}),c.jsxs("div",{className:"flex",children:[c.jsx("input",{type:"text",value:r,onChange:N=>o(N.target.value),className:`flex-1 border rounded p-2 ${x?"border-red-500":""}`,placeholder:"인증번호를 입력해주세요.",disabled:d}),c.jsx("button",{onClick:C,className:`ml-2 border px-3 py-2 rounded ${d?"bg-gray-100 text-gray-500 border-gray-300":"bg-white border-[#0a2e65] text-[#0a2e65]"}`,disabled:d,children:"번호 확인"})]}),x?c.jsx("p",{className:"text-xs text-red-500 mt-1",children:x}):d?c.jsx("p",{className:"text-xs text-green-500 mt-1",children:"인증이 완료되었습니다."}):null]}),c.jsx("button",{onClick:E,className:`w-full py-3 rounded ${d?"bg-[#0a2e65] text-white":"bg-gray-300 text-gray-500"}`,disabled:!d,children:"변경하기"})]})}function F3({isOpen:n,onClose:e,title:t}){return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-sm w-full",children:[c.jsx("h3",{className:"text-center text-lg font-medium mb-6",children:t}),c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:e,className:"bg-[#0a2e65] text-white px-8 py-2 rounded w-full",children:"닫기"})})]})}):null}function B3(){const[n,e]=A.useState(!1),[t,s]=A.useState(""),r=sessionStorage.getItem("accessToken"),o=()=>{s("비밀번호 변경 완료"),e(!0)},a=()=>{s("닉네임 변경 완료"),e(!0)},u=()=>{s("휴대폰 변경 완료"),e(!0)},d=async g=>{if(!r)throw new Error("로그인이 필요합니다.");await h3(g)},h=async g=>{if(!r)throw new Error("로그인이 필요합니다.");await p3(g)},m=async g=>{if(!r)throw new Error("로그인이 필요합니다.");await f3(g)};return c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:"내 정보 수정"}),c.jsxs("main",{className:"flex-1 p-4 bg-gray-50 overflow-auto",children:[c.jsx(M3,{onSuccess:o,onSubmit:d}),c.jsx(D3,{onSuccess:a,onSubmit:h}),c.jsx(O3,{onSuccess:u,onSubmit:m})]}),c.jsx(F3,{isOpen:n,onClose:()=>e(!1),title:t})]})}function $3({selectedPeriod:n,onPeriodChange:e,periods:t}){return c.jsx("div",{className:"py-5 px-8 flex gap-3 overflow-x-auto justify-center",children:t.map(s=>c.jsx("button",{onClick:()=>e(s),className:`
            px-6 py-2.5 
            rounded-full 
            text-sm 
            font-medium 
            transition-all 
            duration-150
            active:scale-95
            ${n===s?"bg-[#0a2e65] text-white shadow-md":"bg-white text-gray-700 border border-gray-200 shadow-sm hover:bg-gray-50"}
          `,children:s},s))})}function V3({totalValue:n}){return c.jsxs("div",{className:"mx-4 mb-4 bg-white rounded-lg p-6 shadow-md border border-gray-100",children:[c.jsx("p",{className:"text-gray-500 mb-1",children:"총 결산"}),c.jsxs("p",{className:"text-2xl font-bold",children:[n.toLocaleString()," KRW"]})]})}function U3({assets:n}){return c.jsx("div",{className:"flex-1 px-4 pb-4 overflow-auto mt-2",children:n.map(e=>c.jsxs("div",{className:"bg-white rounded-xl p-4 mb-3 flex items-center",children:[c.jsxs("div",{className:"w-10 h-10 mr-3 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:[e.code==="XRP"&&c.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M19.6 5L14.7 10.7C13.4 12.3 11.2 12.3 9.9 10.7L5 5M5 19L9.9 13.3C11.2 11.7 13.4 11.7 14.7 13.3L19.6 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.code==="SOL"&&c.jsx("div",{className:"w-6 h-6 bg-[#9945FF] rounded-full flex items-center justify-center",children:c.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),e.code==="USDT"&&c.jsx("div",{className:"w-6 h-6 bg-[#26A17B] rounded-full flex items-center justify-center text-white text-xs font-bold",children:"T"})]}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"w-24",children:[c.jsx("p",{className:"font-medium truncate",children:e.name}),c.jsx("p",{className:"text-xs text-gray-500",children:e.code})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"w-16 text-lg font-medium text-right",style:{fontVariantNumeric:"tabular-nums"},children:[e.percentage,"%"]}),c.jsxs("div",{className:"text-right w-24",children:[c.jsxs("p",{className:"font-medium text-[#4a6ee0]",children:[e.amount," ",e.code]}),c.jsxs("p",{className:"text-xs text-gray-500",children:[e.value.toLocaleString()," KRW"]})]})]})]})})]},e.code))})}const z3=["이번달","지난달","3개월","6개월","12개월"],MN=[{name:"리플",code:"XRP",logo:"/placeholder.svg?height=40&width=40",percentage:15,amount:.3,value:1e3},{name:"솔라나",code:"SOL",logo:"/placeholder.svg?height=40&width=40",percentage:15,amount:.3,value:1e3},{name:"테더",code:"USDT",logo:"/placeholder.svg?height=40&width=40",percentage:15,amount:.3,value:1e3}];function H3(){ke();const n=et(),[e,t]=A.useState("이번달"),s=MN.reduce((r,o)=>r+o.value,0);return n.pathname.includes("/store"),c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:"결산 리포트"}),c.jsx($3,{selectedPeriod:e,onPeriodChange:t,periods:z3}),c.jsx(V3,{totalValue:s}),c.jsx(U3,{assets:MN}),c.jsx(st,{})]})}function Be({text:n,onClick:e,color:t="blue",className:s="",disabled:r=!1,fullWidth:o=!0}){const a={blue:"bg-[#0C2B5F] text-white",gray:"bg-gray-400 text-white",primary:"bg-[#0a2e64] text-white"};return c.jsx("button",{className:`
        ${a[t]}
        py-3
        text-lg
        font-medium
        rounded-lg
        shadow-md
        ${o?"w-full":""}
        ${r?"opacity-50 cursor-not-allowed":""}
        ${s}
      `,onClick:e,disabled:r,children:n})}function W3(){const n=ke();return c.jsxs("div",{className:"h-screen flex flex-col justify-between px-5 py-10",children:[c.jsxs("div",{className:"mt-8 text-center space-y-2",children:[c.jsx("div",{className:"flex items-center justify-center space-x-2",children:c.jsx("img",{src:"/crepe-newlogo2.png",alt:"Crepe 로고",className:"w-[370px] h-[210px] object-contain mb-[-20px]"})}),c.jsxs("p",{className:"text-xl font-semibold text-center leading-snug text-slate-700",children:["지갑 없이도, ",c.jsx("br",{}),"가상화폐를 포인트로 간편하게!"]})]}),c.jsx("div",{className:"w-full mt-20 mb-10 px-5",children:c.jsxs("div",{className:"flex flex-col space-y-3",children:[c.jsxs("div",{className:"text-center text-sm",children:[c.jsx("span",{children:"이미 가입하셨나요? "}),c.jsx("button",{className:"text-[#0a5ca8] font-medium",onClick:()=>n("/login"),children:"로그인 하기"})]}),c.jsx(Be,{text:"지금 시작하기",onClick:()=>n("/terms"),className:"w-full rounded-[9px] font-medium bg-[#0C2B5F] text-white py-3 mx-auto px-4"}),c.jsxs("div",{className:"text-center text-sm",children:[c.jsx("span",{children:"사장님이신가요? "}),c.jsx("button",{className:"text-[#0a5ca8] font-medium",onClick:()=>n("/store/terms"),children:"가맹점 회원가입하기"})]})]})})]})}const Dg={checkedBorder:"#0a2158",checkedText:"#0a2158",uncheckedBorder:"gray-300",uncheckedText:"transparent"};function _a({checked:n,onClick:e}){return c.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center ${n?`border-[${Dg.checkedBorder}] text-[${Dg.checkedText}]`:`border-${Dg.uncheckedBorder} text-${Dg.uncheckedText}`}`,onClick:e,children:n&&c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})})})}function If({className:n="text-gray-400",width:e=20,height:t=20,stroke:s="currentColor"}){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:c.jsx("path",{d:"M9 18l6-6-6-6"})})}function G3({onNext:n,isStore:e}){const[t,s]=A.useState({all:!1,terms:!1,privacy:!1}),r=()=>{const u=!t.all;s({all:u,terms:u,privacy:u})},o=u=>{const d={...t,[u]:!t[u]};d.all=d.terms&&d.privacy,s(d)},a=t.terms&&t.privacy;return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"시작하기",isStore:e}),c.jsxs("main",{className:"flex-1 overflow-auto px-5 pb-24 flex flex-col",children:[c.jsx("div",{className:"flex-1 flex flex-col justify-center items-center mb-8",children:c.jsxs("div",{className:"text-center -mt-16",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"서비스 이용을 위해"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"이용약관 동의가 필요합니다"})]})}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 mb-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center py-4 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:r,children:[c.jsx(_a,{checked:t.all}),c.jsx("span",{className:"ml-3 text-base font-medium text-gray-800",children:"모든 약관에 동의합니다."})]}),c.jsx("div",{className:"h-px bg-gray-200 my-2 mx-1"}),c.jsxs("div",{className:"flex items-center justify-between py-4 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:()=>o("terms"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_a,{checked:t.terms}),c.jsxs("span",{className:"ml-3 text-base text-gray-800",children:["이용약관 ",c.jsx("span",{className:"text-gray-500 font-medium",children:"(필수)"})]})]}),c.jsx(If,{className:"text-gray-400"})]}),c.jsxs("div",{className:"flex items-center justify-between py-4 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:()=>o("privacy"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_a,{checked:t.privacy}),c.jsxs("span",{className:"ml-3 text-base text-gray-800",children:["개인정보 처리방침 ",c.jsx("span",{className:"text-gray-500 font-medium",children:"(필수)"})]})]}),c.jsx(If,{className:"text-gray-400"})]})]})]}),c.jsx("div",{className:"p-5 bg-white",children:c.jsx(Be,{text:"다음",onClick:n,className:`w-full py-3.5 rounded-lg font-medium text-white ${a?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"}`,disabled:!a})})]})}function DN(){const n=ke(),t=et().pathname.includes("/store/"),s=()=>{n(t?"/store/email":"/email")};return c.jsx(G3,{onNext:s,isStore:t})}function Xn({label:n,type:e="text",value:t,onChange:s,onBlur:r,placeholder:o="",isValid:a,showValidation:u=!1,showPassword:d,togglePasswordVisibility:h,disabled:m=!1}){return c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-1",children:n}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:e==="password"&&d?"text":e,value:t,onChange:s,onBlur:r,placeholder:o,disabled:m,className:`w-full border-b border-gray-300 py-2 focus:outline-none ${m?"bg-gray-100 cursor-not-allowed":"focus:border-blue-500"}`}),u&&c.jsx("div",{className:"absolute right-8 top-2",children:c.jsx(_a,{checked:!!a})}),e==="password"&&c.jsx("button",{type:"button",onClick:h,className:"absolute right-0 top-2 text-gray-400",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d?c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),c.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),c.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),c.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]})})})]})]})}function K3({email:n,password:e,onEmailChange:t,onPasswordChange:s,onEmailBlur:r,onNext:o,isStore:a,emailMessage:u,emailMessageColor:d,isEmailValid:h,passwordMessage:m}){const[g,x]=ps.useState(!1),v=()=>{x(!g)},w=!h||!e;return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"회원가입",progress:1,isStore:a}),c.jsxs("main",{className:"flex-1 overflow-auto px-6 pt-6 pb-24 flex flex-col",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"회원가입을 위한"}),c.jsx("p",{className:"text-2xl font-bold mb-8",children:"정보를 입력해주세요"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx(Xn,{label:"Email Address",type:"email",value:n,onChange:b=>t(b.target.value),onBlur:r,placeholder:"이메일을 입력해주세요"}),u&&c.jsx("p",{className:`text-sm ${d}`,children:u})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx(Xn,{label:"Password",type:g?"text":"password",value:e,onChange:b=>s(b.target.value),placeholder:"비밀번호를 입력해주세요",showPassword:g,togglePasswordVisibility:v,disabled:!h}),m&&c.jsx("p",{className:"text-red-500 text-sm",children:m})]})]}),c.jsx("div",{className:"flex-grow"})]}),c.jsx("div",{className:"p-5 bg-white",children:c.jsx(Be,{text:"다음",onClick:o,className:`w-full py-3.5 rounded-lg font-medium text-white ${w?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:w})})]})}function ON(){const n=ke(),t=et().pathname.includes("/store/"),[s,r]=A.useState(""),[o,a]=A.useState(""),[u,d]=A.useState(""),[h,m]=A.useState(""),[g,x]=A.useState(!1),[v,w]=A.useState(""),[b,C]=A.useState(!1),E=R=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%?&])[A-Za-z\d@$!%?&]{10,}$/.test(R),N=async()=>{if(!s.trim()){d("이메일을 입력해주세요."),m("text-red-500"),x(!1);return}try{const R=await l3(s.trim());R?(d(R),m("text-red-500"),x(!1)):(d("사용 가능한 이메일입니다."),m("text-green-500"),x(!0))}catch(R){console.error("이메일 중복 확인 중 오류 발생:",R),d("이메일 중복 확인 중 오류가 발생했습니다."),m("text-red-500"),x(!1)}},k=R=>{a(R),E(R)?(w(""),C(!0)):(w("비밀번호는 10자 이상, 숫자/대문자/소문자/특수문자(@$!%?&)를 포함해야 합니다."),C(!1))},P=()=>{if(!s.trim()||!o.trim()){d("이메일과 비밀번호를 모두 입력해주세요."),m("text-red-500");return}if(!b){w("비밀번호를 올바르게 입력해주세요.");return}const R={email:s.trim(),password:o.trim()};sessionStorage.setItem("signUpData",JSON.stringify(R)),n(t?"/store/phone":"/phone")};return c.jsx(K3,{email:s,password:o,onEmailChange:R=>{r(R),d(""),x(!1)},onPasswordChange:k,onEmailBlur:N,onNext:P,isStore:t,emailMessage:u,emailMessageColor:h,isEmailValid:g,passwordMessage:v})}function q3({onNext:n,isStore:e,onPhoneNumberChange:t,phoneMessage:s,isSending:r}){const[o,a]=A.useState(""),[u,d]=A.useState("");A.useEffect(()=>{if(o){let m=o.replace(/[^0-9]/g,"");m.length>3&&m.length<=7?m=`${m.slice(0,3)}-${m.slice(3)}`:m.length>7&&(m=`${m.slice(0,3)}-${m.slice(3,7)}-${m.slice(7,11)}`),d(m)}else d("")},[o]);const h=m=>{const g=m.target.value.replace(/[^0-9-]/g,"");a(g.replace(/-/g,"")),t(g.replace(/-/g,""))};return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"회원가입",progress:2,isStore:e}),c.jsxs("div",{className:"flex-1 flex flex-col p-5",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"휴대폰 번호를"}),c.jsx("p",{className:"text-2xl font-bold mb-8",children:"입력해주세요"})]}),c.jsx("div",{className:"flex-1 px-4",children:c.jsxs("div",{className:"border-b border-gray-300 py-2",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),c.jsx("input",{type:"tel",value:u,onChange:h,placeholder:"010-0000-0000",className:"w-full focus:outline-none text-gray-800 text-lg"}),s&&c.jsx("p",{className:"text-sm mt-2 text-red-500",children:s})]})})]}),c.jsx("div",{className:"p-5",children:c.jsx(Be,{text:r?"요청 중...":"인증번호 요청",onClick:n,color:"primary",disabled:r})})]})}function FN(){const n=ke(),[e,t]=A.useState(""),[s,r]=A.useState(!1),[o,a]=A.useState(""),u=location.pathname.includes("/store/"),d=async()=>{if(!e||e.length<10){a("유효한 전화번호를 입력해주세요.");return}const h=e.replace(/-/g,"");if(!s){r(!0);try{const m=await dP(h,"SIGN_UP");if(m.ok){const g=sessionStorage.getItem("signUpData")||"{}",x=JSON.parse(g);x.phoneNumber=h,sessionStorage.setItem("signUpData",JSON.stringify(x)),n(u?"/store/phone/verification":"/phone/verification")}else{const g=await m.json();a(g.message||"SMS 전송 중 오류가 발생했습니다.")}}catch(m){console.error("SMS 전송 중 오류 발생:",m),a("SMS 전송 중 오류가 발생했습니다.")}finally{r(!1)}}};return c.jsx(q3,{onNext:d,isStore:u,onPhoneNumberChange:t,phoneMessage:o,isSending:s})}function BN({isStore:n}){const[e,t]=A.useState(["","","","","",""]),[s,r]=A.useState(""),o=ke(),a=et(),u=(m,g)=>{if(g.length<=1){const x=[...e];if(x[m]=g,t(x),g&&m<5){const v=document.getElementById(`code-${m+1}`);v&&v.focus()}}};A.useEffect(()=>{e.every(g=>g!=="")&&d()},[e]);const d=async()=>{const m=e.join("");if(m.length!==6){r("6자리 인증 코드를 입력해주세요.");return}try{const g=sessionStorage.getItem("signUpData");if(!g){r("회원가입 정보를 찾을 수 없습니다.");return}const{phoneNumber:x}=JSON.parse(g),v=await hP(m,x,"SIGN_UP");if(v.ok){const w=JSON.parse(g);w.phoneNumber=x,sessionStorage.setItem("signUpData",JSON.stringify(w)),a.pathname.includes("/store")?o("/store/register"):o("/additional/info")}else{const w=await v.json();r(w.message||"인증에 실패했습니다.")}}catch(g){console.error("인증 요청 중 오류 발생:",g),r("인증 요청 중 오류가 발생했습니다.")}},h=()=>{a.pathname.includes("/store/")?o("/store/phone"):o("/phone")};return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"회원가입",progress:3,isStore:n}),c.jsxs("main",{className:"flex-1 overflow-auto px-6 pt-6 pb-24 flex flex-col",children:[c.jsxs("div",{className:"mb-10",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"휴대폰 번호 인증"}),c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"휴대폰에 전송된 6자리 숫자를 입력해주세요"}),c.jsx("button",{className:"text-blue-600 text-sm font-medium",onClick:h,children:"번호 변경"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:e.map((m,g)=>c.jsx("input",{id:`code-${g}`,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:m,onChange:x=>u(g,x.target.value),className:"w-full h-14 bg-transparent border-b-2 border-gray-200 text-center text-xl font-medium focus:border-blue-500 focus:outline-none transition-all"},g))}),s&&c.jsx("p",{className:"text-red-500 text-sm mb-4",children:s}),c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("span",{className:"text-gray-500 text-sm",children:"코드가 전송되지 않았나요? "}),c.jsx("button",{className:"text-blue-600 text-sm font-medium",children:"코드 재전송"})]})]}),c.jsx("div",{className:"flex-grow"})]})]})}function X3(){const n=ke(),[e,t]=A.useState(""),[s,r]=A.useState(""),[o,a]=A.useState(""),[u,d]=A.useState(""),[h,m]=A.useState(!1),g=e.trim()&&h;A.useEffect(()=>{const v=async()=>{if(!s.trim()){a("닉네임을 입력해주세요."),d("text-red-500"),m(!1);return}try{await c3(s.trim())?(a("이미 사용중인 닉네임입니다."),d("text-red-500"),m(!1)):(a("사용 가능한 닉네임입니다."),d("text-green-500"),m(!0))}catch(w){console.error("닉네임 중복 확인 중 오류 발생:",w),a("닉네임 중복 확인 중 오류가 발생했습니다."),d("text-red-500"),m(!1)}};s.trim()?v():(a(""),m(!1))},[s]);const x=async()=>{if(!g){alert("이름과 닉네임을 모두 입력해주세요.");return}try{const v=sessionStorage.getItem("signUpData");if(!v){alert("회원가입 정보를 찾을 수 없습니다.");return}const b={...JSON.parse(v),name:e.trim(),nickname:s.trim()},C=await u3(b);if(C.ok)sessionStorage.removeItem("signUpData"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),n("/signup-complete");else{const E=await C.json();alert(`회원가입 실패: ${E.message}`)}}catch(v){console.error("회원가입 요청 중 오류 발생:",v),alert("회원가입 요청 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"회원가입",progress:4}),c.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"추가 정보 입력"}),c.jsx("p",{className:"text-gray-500",children:"시작하기 위한 정보를 입력해주세요"})]}),c.jsxs("div",{className:"flex-1 space-y-6 px-1",children:[c.jsx(Xn,{label:"이름",value:e,onChange:v=>t(v.target.value),placeholder:"이름을 입력해주세요"}),c.jsxs("div",{children:[c.jsx(Xn,{label:"닉네임",value:s,onChange:v=>r(v.target.value),placeholder:"닉네임을 입력해주세요"}),o&&c.jsx("p",{className:`text-sm mt-1 ${u}`,children:o})]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center mt-auto mb-8",children:[c.jsx("div",{className:"bg-gray-50 p-3 rounded-full shadow-sm mb-4",children:c.jsx("img",{src:"/lock.png",alt:"Lock Icon",className:"w-6 h-6 text-gray-400"})}),c.jsx("p",{className:"text-center text-sm text-gray-500",children:"모든 개인정보는 암호화되어 안전하게 저장됩니다."})]})]}),c.jsx("div",{className:"p-6 pt-0",children:c.jsx(Be,{text:g?"제출하기":"계속하기",onClick:x,color:g?"primary":"gray",disabled:!g})})]})}const Y3=()=>c.jsx("style",{children:`
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }
    `});function Q3(){const n=ke(),[e,t]=A.useState(!1),[s,r]=A.useState(!1),[o,a]=A.useState(!1);A.useEffect(()=>{const d=setTimeout(()=>t(!0),200),h=setTimeout(()=>r(!0),700),m=setTimeout(()=>a(!0),1200);return()=>{clearTimeout(d),clearTimeout(h),clearTimeout(m)}},[]);const u=()=>{n("/login")};return c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsx(Y3,{}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:c.jsxs("div",{className:`transition-all duration-700 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-4"} flex flex-col items-center space-y-0.5`,children:[c.jsxs("div",{className:"flex items-center gap-0",children:[c.jsx("img",{src:"/crepe-newlogosmall.png",alt:"Crepe Logo",className:"w-[120px] h-[100px] object-contain"}),c.jsx("span",{className:"text-2xl font-bold text-slate-700 leading-none pb-[3px]",children:"에"})]}),c.jsx("p",{className:"text-2xl font-bold text-slate-700 leading-tight ml-4",children:"오신 것을 환영합니다"})]})}),c.jsx("div",{className:"flex-grow flex items-center justify-center",children:c.jsx("div",{className:`relative w-50 h-52 transition-all duration-700 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:s?{animation:"float 3s ease-in-out infinite"}:{},children:c.jsx("img",{src:"/crepe-newlogo.png",alt:"Crepe Logo",className:"w-full h-full"})})}),c.jsx("div",{className:"pt-5 pb-10 px-5",children:c.jsx(Be,{text:"다음",onClick:u})})]})}function J3({onSubmit:n,children:e}){return c.jsx("form",{onSubmit:t=>{t.preventDefault(),n()},className:"flex flex-col w-full",children:e})}function Z3({onSignup:n,onStoreSignup:e,buttonClassName:t}){const[s,r]=A.useState(""),[o,a]=A.useState(""),[u,d]=A.useState(""),[h,m]=A.useState(""),[g,x]=A.useState(""),v=ke(),{login:w,isAuthenticated:b}=n1();A.useEffect(()=>{C(),b&&v("/my/coin")},[b,v]);const C=async()=>{try{const P=await(await fetch("http://localhost:8080/api/captcha")).json();m(P.captchaKey);const R=`https://naveropenapi.apigw.ntruss.com/captcha-bin/v1/ncaptcha?key=${P.captchaKey}`;d(R),x("")}catch(N){console.error("캡차 불러오기 실패:",N)}},E=async()=>{if(!s||!o||!g){alert("아이디와 비밀번호를 입력해 주세요.");return}try{const N=await d3({email:s,password:o,captchaKey:h,captchaValue:g});if(!N.ok){const R=await N.json();alert(R.message||"로그인에 실패했습니다."),C();return}const{accessToken:k,refreshToken:P}=await N.json();w(k,P,s),console.log("✅ 로그인 성공 - 이메일 저장됨:",s),setTimeout(()=>{v("/my/coin")},1e3)}catch(N){console.error("로그인 오류:",N),alert("로그인 중 오류가 발생했습니다."),C()}};return c.jsxs("div",{className:"min-h-screen flex flex-col px-5 pt-12 pb-10",children:[c.jsx("img",{src:"/crepe-newlogo2.png",alt:"Logo",className:"object-contain w-[500px] aspect-[2.51] mx-auto"}),c.jsxs("div",{className:"mt-4 w-full",children:[c.jsx(J3,{onSubmit:E,children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("input",{type:"text",placeholder:"아이디 (이메일)",value:s,onChange:N=>r(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("input",{type:"password",placeholder:"비밀번호",value:o,onChange:N=>a(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 border border-gray-100 mt-12",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:"보안 확인"}),c.jsxs("button",{type:"button",onClick:C,className:"text-amber-500 hover:text-amber-600 flex items-center text-sm",children:[c.jsx(oP,{size:14,className:"mr-1"}),"새로운 보안문자 받기"]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"bg-white rounded-md overflow-hidden border border-gray-200 sm:w-1/2",children:c.jsx("img",{src:u,alt:"CAPTCHA",className:"w-full h-25 object-cover"})}),c.jsx("div",{className:"sm:w-1/2 flex items-center",children:c.jsx("input",{type:"text",value:g,onChange:N=>x(N.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-amber-400 focus:border-transparent outline-none transition",placeholder:"보이는 대로 입력해주세요"})})]})]}),c.jsxs("div",{className:"mt-10",children:[c.jsx(Be,{text:"로그인",onClick:E,className:`w-full rounded-[9px] font-medium bg-[#0C2B5F] text-white ${t}`}),c.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-4 text-sm text-gray-500",children:[c.jsx("button",{onClick:n,className:"hover:underline",children:"유저 회원가입"}),c.jsx("button",{onClick:e,className:"hover:underline",children:"가맹점 회원가입"}),c.jsx("button",{onClick:()=>v("/under-development"),className:"hover:underline",children:"아이디 비밀번호 찾기"})]})]})]})]})}function e4(){const n=ke();return c.jsx(Z3,{onSignup:()=>n("/terms"),onStoreSignup:()=>n("/store/terms")})}function s1({label:n="대표 이미지",previewLabel:e="첨부된 이미지",onChange:t,value:s}){const[r,o]=A.useState(null);A.useEffect(()=>{if(!s){o(null);return}if(typeof s=="string")o(s);else{const u=new FileReader;u.onload=d=>{var h;o((h=d.target)==null?void 0:h.result)},u.readAsDataURL(s)}},[s]);const a=u=>{if(u.target.files&&u.target.files[0]){const d=u.target.files[0];t(d);const h=new FileReader;h.onload=m=>{var g;o((g=m.target)==null?void 0:g.result)},h.readAsDataURL(d)}};return c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n}),c.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[c.jsx("div",{className:"border border-gray-300 rounded-lg p-3 flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center text-gray-500",children:[c.jsx(ZT,{className:"mr-2",size:20}),c.jsx("span",{children:"컴퓨터에서 업로드"})]})}),c.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:a})]}),r&&c.jsxs("div",{className:"mt-1",children:[c.jsx("p",{className:"text-sm text-gray-500",children:e}),c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden w-24 h-24",children:c.jsx("img",{src:r,alt:"업로드된 이미지 미리보기",className:"w-full h-full object-cover"})})]})]})}function Qv({label:n,type:e="text",value:t,onChange:s,placeholder:r="",isValid:o,showValidation:a=!1,showPassword:u,togglePasswordVisibility:d,className:h}){return c.jsxs("div",{className:"mb-4",children:[n&&c.jsx("div",{className:"text-sm text-gray-500 mb-1",children:n}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:e==="password"&&u?"text":e,value:t,onChange:s,placeholder:r,className:`w-full border-b border-gray-300 py-2 focus:outline-none focus:border-blue-500 ${h}`}),a&&c.jsx("div",{className:"absolute right-8 top-2",children:c.jsx(_a,{checked:!!o})}),e==="password"&&c.jsx("button",{type:"button",onClick:d,className:"absolute right-0 top-2 text-gray-400",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u?c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),c.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),c.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),c.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]})})})]})]})}function $N(n,[e,t]){return Math.min(t,Math.max(e,n))}function Gt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function r1(n,e=[]){let t=[];function s(o,a){const u=A.createContext(a),d=t.length;t=[...t,a];const h=g=>{var E;const{scope:x,children:v,...w}=g,b=((E=x==null?void 0:x[n])==null?void 0:E[d])||u,C=A.useMemo(()=>w,Object.values(w));return c.jsx(b.Provider,{value:C,children:v})};h.displayName=o+"Provider";function m(g,x){var b;const v=((b=x==null?void 0:x[n])==null?void 0:b[d])||u,w=A.useContext(v);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[h,m]}const r=()=>{const o=t.map(a=>A.createContext(a));return function(u){const d=(u==null?void 0:u[n])||o;return A.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return r.scopeName=n,[s,t4(r,...e)]}function t4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const a=s.reduce((u,{useScope:d,scopeName:h})=>{const g=d(o)[`__scope${h}`];return{...u,...g}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function VN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function pP(...n){return e=>{let t=!1;const s=n.map(r=>{const o=VN(r,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let r=0;r<s.length;r++){const o=s[r];typeof o=="function"?o():VN(n[r],null)}}}}function En(...n){return A.useCallback(pP(...n),n)}function zx(n){const e=n4(n),t=A.forwardRef((s,r)=>{const{children:o,...a}=s,u=A.Children.toArray(o),d=u.find(r4);if(d){const h=d.props.children,m=u.map(g=>g===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:g);return c.jsx(e,{...a,ref:r,children:A.isValidElement(h)?A.cloneElement(h,void 0,m):null})}return c.jsx(e,{...a,ref:r,children:o})});return t.displayName=`${n}.Slot`,t}function n4(n){const e=A.forwardRef((t,s)=>{const{children:r,...o}=t;if(A.isValidElement(r)){const a=o4(r),u=i4(o,r.props);return r.type!==A.Fragment&&(u.ref=s?pP(s,a):a),A.cloneElement(r,u)}return A.Children.count(r)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var s4=Symbol("radix.slottable");function r4(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===s4}function i4(n,e){const t={...e};for(const s in e){const r=n[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?t[s]=(...u)=>{o(...u),r(...u)}:r&&(t[s]=r):s==="style"?t[s]={...r,...o}:s==="className"&&(t[s]=[r,o].filter(Boolean).join(" "))}return{...n,...t}}function o4(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function a4(n){const e=n+"CollectionProvider",[t,s]=r1(e),[r,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:C,children:E}=b,N=ps.useRef(null),k=ps.useRef(new Map).current;return c.jsx(r,{scope:C,itemMap:k,collectionRef:N,children:E})};a.displayName=e;const u=n+"CollectionSlot",d=zx(u),h=ps.forwardRef((b,C)=>{const{scope:E,children:N}=b,k=o(u,E),P=En(C,k.collectionRef);return c.jsx(d,{ref:P,children:N})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",x=zx(m),v=ps.forwardRef((b,C)=>{const{scope:E,children:N,...k}=b,P=ps.useRef(null),R=En(C,P),M=o(m,E);return ps.useEffect(()=>(M.itemMap.set(P,{ref:P,...k}),()=>void M.itemMap.delete(P))),c.jsx(x,{[g]:"",ref:R,children:N})});v.displayName=m;function w(b){const C=o(n+"CollectionConsumer",b);return ps.useCallback(()=>{const N=C.collectionRef.current;if(!N)return[];const k=Array.from(N.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((M,O)=>k.indexOf(M.ref.current)-k.indexOf(O.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:v},w,s]}var l4=A.createContext(void 0);function c4(n){const e=A.useContext(l4);return n||e||"ltr"}var u4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ut=u4.reduce((n,e)=>{const t=zx(`Primitive.${e}`),s=A.forwardRef((r,o)=>{const{asChild:a,...u}=r,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(d,{...u,ref:o})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function d4(n,e){n&&sh.flushSync(()=>n.dispatchEvent(e))}function Ec(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function h4(n,e=globalThis==null?void 0:globalThis.document){const t=Ec(n);A.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var f4="DismissableLayer",Wb="dismissableLayer.update",p4="dismissableLayer.pointerDownOutside",m4="dismissableLayer.focusOutside",UN,mP=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gP=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:a,onDismiss:u,...d}=n,h=A.useContext(mP),[m,g]=A.useState(null),x=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=A.useState({}),w=En(e,O=>g(O)),b=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=b.indexOf(C),N=m?b.indexOf(m):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,P=N>=E,R=y4(O=>{const F=O.target,D=[...h.branches].some(U=>U.contains(F));!P||D||(r==null||r(O),a==null||a(O),O.defaultPrevented||u==null||u())},x),M=v4(O=>{const F=O.target;[...h.branches].some(U=>U.contains(F))||(o==null||o(O),a==null||a(O),O.defaultPrevented||u==null||u())},x);return h4(O=>{N===h.layers.size-1&&(s==null||s(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},x),A.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(UN=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),zN(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=UN)}},[m,x,t,h]),A.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),zN())},[m,h]),A.useEffect(()=>{const O=()=>v({});return document.addEventListener(Wb,O),()=>document.removeEventListener(Wb,O)},[]),c.jsx(Ut.div,{...d,ref:w,style:{pointerEvents:k?P?"auto":"none":void 0,...n.style},onFocusCapture:Gt(n.onFocusCapture,M.onFocusCapture),onBlurCapture:Gt(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Gt(n.onPointerDownCapture,R.onPointerDownCapture)})});gP.displayName=f4;var g4="DismissableLayerBranch",x4=A.forwardRef((n,e)=>{const t=A.useContext(mP),s=A.useRef(null),r=En(e,s);return A.useEffect(()=>{const o=s.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),c.jsx(Ut.div,{...n,ref:r})});x4.displayName=g4;function y4(n,e=globalThis==null?void 0:globalThis.document){const t=Ec(n),s=A.useRef(!1),r=A.useRef(()=>{});return A.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let d=function(){xP(p4,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function v4(n,e=globalThis==null?void 0:globalThis.document){const t=Ec(n),s=A.useRef(!1);return A.useEffect(()=>{const r=o=>{o.target&&!s.current&&xP(m4,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function zN(){const n=new CustomEvent(Wb);document.dispatchEvent(n)}function xP(n,e,t,{discrete:s}){const r=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?d4(r,o):r.dispatchEvent(o)}var Jv=0;function b4(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??HN()),document.body.insertAdjacentElement("beforeend",n[1]??HN()),Jv++,()=>{Jv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jv--}},[])}function HN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Zv="focusScope.autoFocusOnMount",eb="focusScope.autoFocusOnUnmount",WN={bubbles:!1,cancelable:!0},w4="FocusScope",yP=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...a}=n,[u,d]=A.useState(null),h=Ec(r),m=Ec(o),g=A.useRef(null),x=En(e,b=>d(b)),v=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(s){let b=function(k){if(v.paused||!u)return;const P=k.target;u.contains(P)?g.current=P:Wo(g.current,{select:!0})},C=function(k){if(v.paused||!u)return;const P=k.relatedTarget;P!==null&&(u.contains(P)||Wo(g.current,{select:!0}))},E=function(k){if(document.activeElement===document.body)for(const R of k)R.removedNodes.length>0&&Wo(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",C);const N=new MutationObserver(E);return u&&N.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",C),N.disconnect()}}},[s,u,v.paused]),A.useEffect(()=>{if(u){KN.add(v);const b=document.activeElement;if(!u.contains(b)){const E=new CustomEvent(Zv,WN);u.addEventListener(Zv,h),u.dispatchEvent(E),E.defaultPrevented||(S4(j4(vP(u)),{select:!0}),document.activeElement===b&&Wo(u))}return()=>{u.removeEventListener(Zv,h),setTimeout(()=>{const E=new CustomEvent(eb,WN);u.addEventListener(eb,m),u.dispatchEvent(E),E.defaultPrevented||Wo(b??document.body,{select:!0}),u.removeEventListener(eb,m),KN.remove(v)},0)}}},[u,h,m,v]);const w=A.useCallback(b=>{if(!t&&!s||v.paused)return;const C=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,E=document.activeElement;if(C&&E){const N=b.currentTarget,[k,P]=A4(N);k&&P?!b.shiftKey&&E===P?(b.preventDefault(),t&&Wo(k,{select:!0})):b.shiftKey&&E===k&&(b.preventDefault(),t&&Wo(P,{select:!0})):E===N&&b.preventDefault()}},[t,s,v.paused]);return c.jsx(Ut.div,{tabIndex:-1,...a,ref:x,onKeyDown:w})});yP.displayName=w4;function S4(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Wo(s,{select:e}),document.activeElement!==t)return}function A4(n){const e=vP(n),t=GN(e,n),s=GN(e.reverse(),n);return[t,s]}function vP(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function GN(n,e){for(const t of n)if(!E4(t,{upTo:e}))return t}function E4(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function C4(n){return n instanceof HTMLInputElement&&"select"in n}function Wo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&C4(n)&&e&&n.select()}}var KN=N4();function N4(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=qN(n,e),n.unshift(e)},remove(e){var t;n=qN(n,e),(t=n[0])==null||t.resume()}}}function qN(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function j4(n){return n.filter(e=>e.tagName!=="A")}var gs=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},k4=ST[" useId ".trim().toString()]||(()=>{}),T4=0;function i1(n){const[e,t]=A.useState(k4());return gs(()=>{t(s=>s??String(T4++))},[n]),e?`radix-${e}`:""}const P4=["top","right","bottom","left"],Ra=Math.min,Is=Math.max,Hx=Math.round,Og=Math.floor,yi=n=>({x:n,y:n}),_4={left:"right",right:"left",bottom:"top",top:"bottom"},R4={start:"end",end:"start"};function Gb(n,e,t){return Is(n,Ra(e,t))}function yo(n,e){return typeof n=="function"?n(e):n}function vo(n){return n.split("-")[0]}function rh(n){return n.split("-")[1]}function o1(n){return n==="x"?"y":"x"}function a1(n){return n==="y"?"height":"width"}function La(n){return["top","bottom"].includes(vo(n))?"y":"x"}function l1(n){return o1(La(n))}function L4(n,e,t){t===void 0&&(t=!1);const s=rh(n),r=l1(n),o=a1(r);let a=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Wx(a)),[a,Wx(a)]}function I4(n){const e=Wx(n);return[Kb(n),e,Kb(e)]}function Kb(n){return n.replace(/start|end/g,e=>R4[e])}function M4(n,e,t){const s=["left","right"],r=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?o:a;default:return[]}}function D4(n,e,t,s){const r=rh(n);let o=M4(vo(n),t==="start",s);return r&&(o=o.map(a=>a+"-"+r),e&&(o=o.concat(o.map(Kb)))),o}function Wx(n){return n.replace(/left|right|bottom|top/g,e=>_4[e])}function O4(n){return{top:0,right:0,bottom:0,left:0,...n}}function bP(n){return typeof n!="number"?O4(n):{top:n,right:n,bottom:n,left:n}}function Gx(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function XN(n,e,t){let{reference:s,floating:r}=n;const o=La(e),a=l1(e),u=a1(a),d=vo(e),h=o==="y",m=s.x+s.width/2-r.width/2,g=s.y+s.height/2-r.height/2,x=s[u]/2-r[u]/2;let v;switch(d){case"top":v={x:m,y:s.y-r.height};break;case"bottom":v={x:m,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:g};break;case"left":v={x:s.x-r.width,y:g};break;default:v={x:s.x,y:s.y}}switch(rh(e)){case"start":v[a]-=x*(t&&h?-1:1);break;case"end":v[a]+=x*(t&&h?-1:1);break}return v}const F4=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:a}=t,u=o.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:m,y:g}=XN(h,s,d),x=s,v={},w=0;for(let b=0;b<u.length;b++){const{name:C,fn:E}=u[b],{x:N,y:k,data:P,reset:R}=await E({x:m,y:g,initialPlacement:s,placement:x,strategy:r,middlewareData:v,rects:h,platform:a,elements:{reference:n,floating:e}});m=N??m,g=k??g,v={...v,[C]:{...v[C],...P}},R&&w<=50&&(w++,typeof R=="object"&&(R.placement&&(x=R.placement),R.rects&&(h=R.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):R.rects),{x:m,y:g}=XN(h,x,d)),b=-1)}return{x:m,y:g,placement:x,strategy:r,middlewareData:v}};async function Mf(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:o,rects:a,elements:u,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:x=!1,padding:v=0}=yo(e,n),w=bP(v),C=u[x?g==="floating"?"reference":"floating":g],E=Gx(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(C)))==null||t?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:m,strategy:d})),N=g==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),P=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},R=Gx(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:N,offsetParent:k,strategy:d}):N);return{top:(E.top-R.top+w.top)/P.y,bottom:(R.bottom-E.bottom+w.bottom)/P.y,left:(E.left-R.left+w.left)/P.x,right:(R.right-E.right+w.right)/P.x}}const B4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:o,platform:a,elements:u,middlewareData:d}=e,{element:h,padding:m=0}=yo(n,e)||{};if(h==null)return{};const g=bP(m),x={x:t,y:s},v=l1(r),w=a1(v),b=await a.getDimensions(h),C=v==="y",E=C?"top":"left",N=C?"bottom":"right",k=C?"clientHeight":"clientWidth",P=o.reference[w]+o.reference[v]-x[v]-o.floating[w],R=x[v]-o.reference[v],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let O=M?M[k]:0;(!O||!await(a.isElement==null?void 0:a.isElement(M)))&&(O=u.floating[k]||o.floating[w]);const F=P/2-R/2,D=O/2-b[w]/2-1,U=Ra(g[E],D),K=Ra(g[N],D),X=U,ee=O-b[w]-K,J=O/2-b[w]/2+F,ae=Gb(X,J,ee),Y=!d.arrow&&rh(r)!=null&&J!==ae&&o.reference[w]/2-(J<X?U:K)-b[w]/2<0,G=Y?J<X?J-X:J-ee:0;return{[v]:x[v]+G,data:{[v]:ae,centerOffset:J-ae-G,...Y&&{alignmentOffset:G}},reset:Y}}}),$4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:o,rects:a,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:x,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...C}=yo(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const E=vo(r),N=La(u),k=vo(u)===u,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),R=x||(k||!b?[Wx(u)]:I4(u)),M=w!=="none";!x&&M&&R.push(...D4(u,b,w,P));const O=[u,...R],F=await Mf(e,C),D=[];let U=((s=o.flip)==null?void 0:s.overflows)||[];if(m&&D.push(F[E]),g){const J=L4(r,a,P);D.push(F[J[0]],F[J[1]])}if(U=[...U,{placement:r,overflows:D}],!D.every(J=>J<=0)){var K,X;const J=(((K=o.flip)==null?void 0:K.index)||0)+1,ae=O[J];if(ae)return{data:{index:J,overflows:U},reset:{placement:ae}};let Y=(X=U.filter(G=>G.overflows[0]<=0).sort((G,z)=>G.overflows[1]-z.overflows[1])[0])==null?void 0:X.placement;if(!Y)switch(v){case"bestFit":{var ee;const G=(ee=U.filter(z=>{if(M){const te=La(z.placement);return te===N||te==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(te=>te>0).reduce((te,ne)=>te+ne,0)]).sort((z,te)=>z[1]-te[1])[0])==null?void 0:ee[0];G&&(Y=G);break}case"initialPlacement":Y=u;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};function YN(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function QN(n){return P4.some(e=>n[e]>=0)}const V4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=yo(n,e);switch(s){case"referenceHidden":{const o=await Mf(e,{...r,elementContext:"reference"}),a=YN(o,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:QN(a)}}}case"escaped":{const o=await Mf(e,{...r,altBoundary:!0}),a=YN(o,t.floating);return{data:{escapedOffsets:a,escaped:QN(a)}}}default:return{}}}}};async function U4(n,e){const{placement:t,platform:s,elements:r}=n,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=vo(t),u=rh(t),d=La(t)==="y",h=["left","top"].includes(a)?-1:1,m=o&&d?-1:1,g=yo(e,n);let{mainAxis:x,crossAxis:v,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),d?{x:v*m,y:x*h}:{x:x*h,y:v*m}}const z4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:o,placement:a,middlewareData:u}=e,d=await U4(e,n);return a===((t=u.offset)==null?void 0:t.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:r+d.x,y:o+d.y,data:{...d,placement:a}}}}},H4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:u={fn:C=>{let{x:E,y:N}=C;return{x:E,y:N}}},...d}=yo(n,e),h={x:t,y:s},m=await Mf(e,d),g=La(vo(r)),x=o1(g);let v=h[x],w=h[g];if(o){const C=x==="y"?"top":"left",E=x==="y"?"bottom":"right",N=v+m[C],k=v-m[E];v=Gb(N,v,k)}if(a){const C=g==="y"?"top":"left",E=g==="y"?"bottom":"right",N=w+m[C],k=w-m[E];w=Gb(N,w,k)}const b=u.fn({...e,[x]:v,[g]:w});return{...b,data:{x:b.x-t,y:b.y-s,enabled:{[x]:o,[g]:a}}}}}},W4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:o,middlewareData:a}=e,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=yo(n,e),m={x:t,y:s},g=La(r),x=o1(g);let v=m[x],w=m[g];const b=yo(u,e),C=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const k=x==="y"?"height":"width",P=o.reference[x]-o.floating[k]+C.mainAxis,R=o.reference[x]+o.reference[k]-C.mainAxis;v<P?v=P:v>R&&(v=R)}if(h){var E,N;const k=x==="y"?"width":"height",P=["top","left"].includes(vo(r)),R=o.reference[g]-o.floating[k]+(P&&((E=a.offset)==null?void 0:E[g])||0)+(P?0:C.crossAxis),M=o.reference[g]+o.reference[k]+(P?0:((N=a.offset)==null?void 0:N[g])||0)-(P?C.crossAxis:0);w<R?w=R:w>M&&(w=M)}return{[x]:v,[g]:w}}}},G4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:r,rects:o,platform:a,elements:u}=e,{apply:d=()=>{},...h}=yo(n,e),m=await Mf(e,h),g=vo(r),x=rh(r),v=La(r)==="y",{width:w,height:b}=o.floating;let C,E;g==="top"||g==="bottom"?(C=g,E=x===(await(a.isRTL==null?void 0:a.isRTL(u.floating))?"start":"end")?"left":"right"):(E=g,C=x==="end"?"top":"bottom");const N=b-m.top-m.bottom,k=w-m.left-m.right,P=Ra(b-m[C],N),R=Ra(w-m[E],k),M=!e.middlewareData.shift;let O=P,F=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(F=k),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(O=N),M&&!x){const U=Is(m.left,0),K=Is(m.right,0),X=Is(m.top,0),ee=Is(m.bottom,0);v?F=w-2*(U!==0||K!==0?U+K:Is(m.left,m.right)):O=b-2*(X!==0||ee!==0?X+ee:Is(m.top,m.bottom))}await d({...e,availableWidth:F,availableHeight:O});const D=await a.getDimensions(u.floating);return w!==D.width||b!==D.height?{reset:{rects:!0}}:{}}}};function Py(){return typeof window<"u"}function ih(n){return wP(n)?(n.nodeName||"").toLowerCase():"#document"}function Ds(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Si(n){var e;return(e=(wP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function wP(n){return Py()?n instanceof Node||n instanceof Ds(n).Node:!1}function Fr(n){return Py()?n instanceof Element||n instanceof Ds(n).Element:!1}function wi(n){return Py()?n instanceof HTMLElement||n instanceof Ds(n).HTMLElement:!1}function JN(n){return!Py()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ds(n).ShadowRoot}function pm(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=Br(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function K4(n){return["table","td","th"].includes(ih(n))}function _y(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function c1(n){const e=u1(),t=Fr(n)?Br(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function q4(n){let e=Ia(n);for(;wi(e)&&!Xd(e);){if(c1(e))return e;if(_y(e))return null;e=Ia(e)}return null}function u1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xd(n){return["html","body","#document"].includes(ih(n))}function Br(n){return Ds(n).getComputedStyle(n)}function Ry(n){return Fr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ia(n){if(ih(n)==="html")return n;const e=n.assignedSlot||n.parentNode||JN(n)&&n.host||Si(n);return JN(e)?e.host:e}function SP(n){const e=Ia(n);return Xd(e)?n.ownerDocument?n.ownerDocument.body:n.body:wi(e)&&pm(e)?e:SP(e)}function Df(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=SP(n),o=r===((s=n.ownerDocument)==null?void 0:s.body),a=Ds(r);if(o){const u=qb(a);return e.concat(a,a.visualViewport||[],pm(r)?r:[],u&&t?Df(u):[])}return e.concat(r,Df(r,[],t))}function qb(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function AP(n){const e=Br(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=wi(n),o=r?n.offsetWidth:t,a=r?n.offsetHeight:s,u=Hx(t)!==o||Hx(s)!==a;return u&&(t=o,s=a),{width:t,height:s,$:u}}function d1(n){return Fr(n)?n:n.contextElement}function _u(n){const e=d1(n);if(!wi(e))return yi(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:o}=AP(e);let a=(o?Hx(t.width):t.width)/s,u=(o?Hx(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const X4=yi(0);function EP(n){const e=Ds(n);return!u1()||!e.visualViewport?X4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ds(n)?!1:e}function Cc(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),o=d1(n);let a=yi(1);e&&(s?Fr(s)&&(a=_u(s)):a=_u(n));const u=Y4(o,t,s)?EP(o):yi(0);let d=(r.left+u.x)/a.x,h=(r.top+u.y)/a.y,m=r.width/a.x,g=r.height/a.y;if(o){const x=Ds(o),v=s&&Fr(s)?Ds(s):s;let w=x,b=qb(w);for(;b&&s&&v!==w;){const C=_u(b),E=b.getBoundingClientRect(),N=Br(b),k=E.left+(b.clientLeft+parseFloat(N.paddingLeft))*C.x,P=E.top+(b.clientTop+parseFloat(N.paddingTop))*C.y;d*=C.x,h*=C.y,m*=C.x,g*=C.y,d+=k,h+=P,w=Ds(b),b=qb(w)}}return Gx({width:m,height:g,x:d,y:h})}function h1(n,e){const t=Ry(n).scrollLeft;return e?e.left+t:Cc(Si(n)).left+t}function CP(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:h1(n,s)),o=s.top+e.scrollTop;return{x:r,y:o}}function Q4(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const o=r==="fixed",a=Si(s),u=e?_y(e.floating):!1;if(s===a||u&&o)return t;let d={scrollLeft:0,scrollTop:0},h=yi(1);const m=yi(0),g=wi(s);if((g||!g&&!o)&&((ih(s)!=="body"||pm(a))&&(d=Ry(s)),wi(s))){const v=Cc(s);h=_u(s),m.x=v.x+s.clientLeft,m.y=v.y+s.clientTop}const x=a&&!g&&!o?CP(a,d,!0):yi(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+m.x+x.x,y:t.y*h.y-d.scrollTop*h.y+m.y+x.y}}function J4(n){return Array.from(n.getClientRects())}function Z4(n){const e=Si(n),t=Ry(n),s=n.ownerDocument.body,r=Is(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=Is(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+h1(n);const u=-t.scrollTop;return Br(s).direction==="rtl"&&(a+=Is(e.clientWidth,s.clientWidth)-r),{width:r,height:o,x:a,y:u}}function eB(n,e){const t=Ds(n),s=Si(n),r=t.visualViewport;let o=s.clientWidth,a=s.clientHeight,u=0,d=0;if(r){o=r.width,a=r.height;const h=u1();(!h||h&&e==="fixed")&&(u=r.offsetLeft,d=r.offsetTop)}return{width:o,height:a,x:u,y:d}}function tB(n,e){const t=Cc(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,o=wi(n)?_u(n):yi(1),a=n.clientWidth*o.x,u=n.clientHeight*o.y,d=r*o.x,h=s*o.y;return{width:a,height:u,x:d,y:h}}function ZN(n,e,t){let s;if(e==="viewport")s=eB(n,t);else if(e==="document")s=Z4(Si(n));else if(Fr(e))s=tB(e,t);else{const r=EP(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Gx(s)}function NP(n,e){const t=Ia(n);return t===e||!Fr(t)||Xd(t)?!1:Br(t).position==="fixed"||NP(t,e)}function nB(n,e){const t=e.get(n);if(t)return t;let s=Df(n,[],!1).filter(u=>Fr(u)&&ih(u)!=="body"),r=null;const o=Br(n).position==="fixed";let a=o?Ia(n):n;for(;Fr(a)&&!Xd(a);){const u=Br(a),d=c1(a);!d&&u.position==="fixed"&&(r=null),(o?!d&&!r:!d&&u.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||pm(a)&&!d&&NP(n,a))?s=s.filter(m=>m!==a):r=u,a=Ia(a)}return e.set(n,s),s}function sB(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const a=[...t==="clippingAncestors"?_y(e)?[]:nB(e,this._c):[].concat(t),s],u=a[0],d=a.reduce((h,m)=>{const g=ZN(e,m,r);return h.top=Is(g.top,h.top),h.right=Ra(g.right,h.right),h.bottom=Ra(g.bottom,h.bottom),h.left=Is(g.left,h.left),h},ZN(e,u,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function rB(n){const{width:e,height:t}=AP(n);return{width:e,height:t}}function iB(n,e,t){const s=wi(e),r=Si(e),o=t==="fixed",a=Cc(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=yi(0);if(s||!s&&!o)if((ih(e)!=="body"||pm(r))&&(u=Ry(e)),s){const x=Cc(e,!0,o,e);d.x=x.x+e.clientLeft,d.y=x.y+e.clientTop}else r&&(d.x=h1(r));const h=r&&!s&&!o?CP(r,u):yi(0),m=a.left+u.scrollLeft-d.x-h.x,g=a.top+u.scrollTop-d.y-h.y;return{x:m,y:g,width:a.width,height:a.height}}function tb(n){return Br(n).position==="static"}function ej(n,e){if(!wi(n)||Br(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Si(n)===t&&(t=t.ownerDocument.body),t}function jP(n,e){const t=Ds(n);if(_y(n))return t;if(!wi(n)){let r=Ia(n);for(;r&&!Xd(r);){if(Fr(r)&&!tb(r))return r;r=Ia(r)}return t}let s=ej(n,e);for(;s&&K4(s)&&tb(s);)s=ej(s,e);return s&&Xd(s)&&tb(s)&&!c1(s)?t:s||q4(n)||t}const oB=async function(n){const e=this.getOffsetParent||jP,t=this.getDimensions,s=await t(n.floating);return{reference:iB(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function aB(n){return Br(n).direction==="rtl"}const lB={convertOffsetParentRelativeRectToViewportRelativeRect:Q4,getDocumentElement:Si,getClippingRect:sB,getOffsetParent:jP,getElementRects:oB,getClientRects:J4,getDimensions:rB,getScale:_u,isElement:Fr,isRTL:aB};function kP(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function cB(n,e){let t=null,s;const r=Si(n);function o(){var u;clearTimeout(s),(u=t)==null||u.disconnect(),t=null}function a(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const h=n.getBoundingClientRect(),{left:m,top:g,width:x,height:v}=h;if(u||e(),!x||!v)return;const w=Og(g),b=Og(r.clientWidth-(m+x)),C=Og(r.clientHeight-(g+v)),E=Og(m),k={rootMargin:-w+"px "+-b+"px "+-C+"px "+-E+"px",threshold:Is(0,Ra(1,d))||1};let P=!0;function R(M){const O=M[0].intersectionRatio;if(O!==d){if(!P)return a();O?a(!1,O):s=setTimeout(()=>{a(!1,1e-7)},1e3)}O===1&&!kP(h,n.getBoundingClientRect())&&a(),P=!1}try{t=new IntersectionObserver(R,{...k,root:r.ownerDocument})}catch{t=new IntersectionObserver(R,k)}t.observe(n)}return a(!0),o}function uB(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=d1(n),m=r||o?[...h?Df(h):[],...Df(e)]:[];m.forEach(E=>{r&&E.addEventListener("scroll",t,{passive:!0}),o&&E.addEventListener("resize",t)});const g=h&&u?cB(h,t):null;let x=-1,v=null;a&&(v=new ResizeObserver(E=>{let[N]=E;N&&N.target===h&&v&&(v.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var k;(k=v)==null||k.observe(e)})),t()}),h&&!d&&v.observe(h),v.observe(e));let w,b=d?Cc(n):null;d&&C();function C(){const E=Cc(n);b&&!kP(b,E)&&t(),b=E,w=requestAnimationFrame(C)}return t(),()=>{var E;m.forEach(N=>{r&&N.removeEventListener("scroll",t),o&&N.removeEventListener("resize",t)}),g==null||g(),(E=v)==null||E.disconnect(),v=null,d&&cancelAnimationFrame(w)}}const dB=z4,hB=H4,fB=$4,pB=G4,mB=V4,tj=B4,gB=W4,xB=(n,e,t)=>{const s=new Map,r={platform:lB,...t},o={...r.platform,_c:s};return F4(n,e,{...r,platform:o})};var tx=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Kx(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!Kx(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const o=r[s];if(!(o==="_owner"&&n.$$typeof)&&!Kx(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function TP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function nj(n,e){const t=TP(n);return Math.round(e*t)/t}function nb(n){const e=A.useRef(n);return tx(()=>{e.current=n}),e}function yB(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:o,floating:a}={},transform:u=!0,whileElementsMounted:d,open:h}=n,[m,g]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[x,v]=A.useState(s);Kx(x,s)||v(s);const[w,b]=A.useState(null),[C,E]=A.useState(null),N=A.useCallback(z=>{z!==M.current&&(M.current=z,b(z))},[]),k=A.useCallback(z=>{z!==O.current&&(O.current=z,E(z))},[]),P=o||w,R=a||C,M=A.useRef(null),O=A.useRef(null),F=A.useRef(m),D=d!=null,U=nb(d),K=nb(r),X=nb(h),ee=A.useCallback(()=>{if(!M.current||!O.current)return;const z={placement:e,strategy:t,middleware:x};K.current&&(z.platform=K.current),xB(M.current,O.current,z).then(te=>{const ne={...te,isPositioned:X.current!==!1};J.current&&!Kx(F.current,ne)&&(F.current=ne,sh.flushSync(()=>{g(ne)}))})},[x,e,t,K,X]);tx(()=>{h===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const J=A.useRef(!1);tx(()=>(J.current=!0,()=>{J.current=!1}),[]),tx(()=>{if(P&&(M.current=P),R&&(O.current=R),P&&R){if(U.current)return U.current(P,R,ee);ee()}},[P,R,ee,U,D]);const ae=A.useMemo(()=>({reference:M,floating:O,setReference:N,setFloating:k}),[N,k]),Y=A.useMemo(()=>({reference:P,floating:R}),[P,R]),G=A.useMemo(()=>{const z={position:t,left:0,top:0};if(!Y.floating)return z;const te=nj(Y.floating,m.x),ne=nj(Y.floating,m.y);return u?{...z,transform:"translate("+te+"px, "+ne+"px)",...TP(Y.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:te,top:ne}},[t,u,Y.floating,m.x,m.y]);return A.useMemo(()=>({...m,update:ee,refs:ae,elements:Y,floatingStyles:G}),[m,ee,ae,Y,G])}const vB=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?tj({element:s.current,padding:r}).fn(t):{}:s?tj({element:s,padding:r}).fn(t):{}}}},bB=(n,e)=>({...dB(n),options:[n,e]}),wB=(n,e)=>({...hB(n),options:[n,e]}),SB=(n,e)=>({...gB(n),options:[n,e]}),AB=(n,e)=>({...fB(n),options:[n,e]}),EB=(n,e)=>({...pB(n),options:[n,e]}),CB=(n,e)=>({...mB(n),options:[n,e]}),NB=(n,e)=>({...vB(n),options:[n,e]});var jB="Arrow",PP=A.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...o}=n;return c.jsx(Ut.svg,{...o,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});PP.displayName=jB;var kB=PP;function TB(n){const[e,t]=A.useState(void 0);return gs(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let a,u;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,u=h.blockSize}else a=n.offsetWidth,u=n.offsetHeight;t({width:a,height:u})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var f1="Popper",[_P,RP]=r1(f1),[PB,LP]=_P(f1),IP=n=>{const{__scopePopper:e,children:t}=n,[s,r]=A.useState(null);return c.jsx(PB,{scope:e,anchor:s,onAnchorChange:r,children:t})};IP.displayName=f1;var MP="PopperAnchor",DP=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,o=LP(MP,t),a=A.useRef(null),u=En(e,a);return A.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:c.jsx(Ut.div,{...r,ref:u})});DP.displayName=MP;var p1="PopperContent",[_B,RB]=_P(p1),OP=A.forwardRef((n,e)=>{var se,me,Ne,ce,Fe,He;const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:o="center",alignOffset:a=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:x=!1,updatePositionStrategy:v="optimized",onPlaced:w,...b}=n,C=LP(p1,t),[E,N]=A.useState(null),k=En(e,Re=>N(Re)),[P,R]=A.useState(null),M=TB(P),O=(M==null?void 0:M.width)??0,F=(M==null?void 0:M.height)??0,D=s+(o!=="center"?"-"+o:""),U=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},K=Array.isArray(h)?h:[h],X=K.length>0,ee={padding:U,boundary:K.filter(IB),altBoundary:X},{refs:J,floatingStyles:ae,placement:Y,isPositioned:G,middlewareData:z}=yB({strategy:"fixed",placement:D,whileElementsMounted:(...Re)=>uB(...Re,{animationFrame:v==="always"}),elements:{reference:C.anchor},middleware:[bB({mainAxis:r+F,alignmentAxis:a}),d&&wB({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?SB():void 0,...ee}),d&&AB({...ee}),EB({...ee,apply:({elements:Re,rects:qe,availableWidth:ft,availableHeight:Xe})=>{const{width:qt,height:es}=qe.reference,vs=Re.floating.style;vs.setProperty("--radix-popper-available-width",`${ft}px`),vs.setProperty("--radix-popper-available-height",`${Xe}px`),vs.setProperty("--radix-popper-anchor-width",`${qt}px`),vs.setProperty("--radix-popper-anchor-height",`${es}px`)}}),P&&NB({element:P,padding:u}),MB({arrowWidth:O,arrowHeight:F}),x&&CB({strategy:"referenceHidden",...ee})]}),[te,ne]=$P(Y),$=Ec(w);gs(()=>{G&&($==null||$())},[G,$]);const Z=(se=z.arrow)==null?void 0:se.x,he=(me=z.arrow)==null?void 0:me.y,ve=((Ne=z.arrow)==null?void 0:Ne.centerOffset)!==0,[Ee,ye]=A.useState();return gs(()=>{E&&ye(window.getComputedStyle(E).zIndex)},[E]),c.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:G?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(ce=z.transformOrigin)==null?void 0:ce.x,(Fe=z.transformOrigin)==null?void 0:Fe.y].join(" "),...((He=z.hide)==null?void 0:He.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(_B,{scope:t,placedSide:te,onArrowChange:R,arrowX:Z,arrowY:he,shouldHideArrow:ve,children:c.jsx(Ut.div,{"data-side":te,"data-align":ne,...b,ref:k,style:{...b.style,animation:G?void 0:"none"}})})})});OP.displayName=p1;var FP="PopperArrow",LB={top:"bottom",right:"left",bottom:"top",left:"right"},BP=A.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,o=RB(FP,s),a=LB[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(kB,{...r,ref:t,style:{...r.style,display:"block"}})})});BP.displayName=FP;function IB(n){return n!==null}var MB=n=>({name:"transformOrigin",options:n,fn(e){var C,E,N;const{placement:t,rects:s,middlewareData:r}=e,a=((C=r.arrow)==null?void 0:C.centerOffset)!==0,u=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[h,m]=$P(t),g={start:"0%",center:"50%",end:"100%"}[m],x=(((E=r.arrow)==null?void 0:E.x)??0)+u/2,v=(((N=r.arrow)==null?void 0:N.y)??0)+d/2;let w="",b="";return h==="bottom"?(w=a?g:`${x}px`,b=`${-d}px`):h==="top"?(w=a?g:`${x}px`,b=`${s.floating.height+d}px`):h==="right"?(w=`${-d}px`,b=a?g:`${v}px`):h==="left"&&(w=`${s.floating.width+d}px`,b=a?g:`${v}px`),{data:{x:w,y:b}}}});function $P(n){const[e,t="center"]=n.split("-");return[e,t]}var DB=IP,OB=DP,FB=OP,BB=BP,$B="Portal",VP=A.forwardRef((n,e)=>{var u;const{container:t,...s}=n,[r,o]=A.useState(!1);gs(()=>o(!0),[]);const a=t||r&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return a?d5.createPortal(c.jsx(Ut.div,{...s,ref:e}),a):null});VP.displayName=$B;var VB=ST[" useInsertionEffect ".trim().toString()]||gs;function sj({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,o,a]=UB({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:r;{const m=A.useRef(n!==void 0);A.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${s} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,s])}const h=A.useCallback(m=>{var g;if(u){const x=zB(m)?m(n):m;x!==n&&((g=a.current)==null||g.call(a,x))}else o(m)},[u,n,o,a]);return[d,h]}function UB({defaultProp:n,onChange:e}){const[t,s]=A.useState(n),r=A.useRef(t),o=A.useRef(e);return VB(()=>{o.current=e},[e]),A.useEffect(()=>{var a;r.current!==t&&((a=o.current)==null||a.call(o,t),r.current=t)},[t,r]),[t,s,o]}function zB(n){return typeof n=="function"}function HB(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var UP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WB="VisuallyHidden",GB=A.forwardRef((n,e)=>c.jsx(Ut.span,{...n,ref:e,style:{...UP,...n.style}}));GB.displayName=WB;var KB=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},hu=new WeakMap,Fg=new WeakMap,Bg={},sb=0,zP=function(n){return n&&(n.host||zP(n.parentNode))},qB=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=zP(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},XB=function(n,e,t,s){var r=qB(e,Array.isArray(n)?n:[n]);Bg[t]||(Bg[t]=new WeakMap);var o=Bg[t],a=[],u=new Set,d=new Set(r),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};r.forEach(h);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(x){if(u.has(x))m(x);else try{var v=x.getAttribute(s),w=v!==null&&v!=="false",b=(hu.get(x)||0)+1,C=(o.get(x)||0)+1;hu.set(x,b),o.set(x,C),a.push(x),b===1&&w&&Fg.set(x,!0),C===1&&x.setAttribute(t,"true"),w||x.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",x,E)}})};return m(e),u.clear(),sb++,function(){a.forEach(function(g){var x=hu.get(g)-1,v=o.get(g)-1;hu.set(g,x),o.set(g,v),x||(Fg.has(g)||g.removeAttribute(s),Fg.delete(g)),v||g.removeAttribute(t)}),sb--,sb||(hu=new WeakMap,hu=new WeakMap,Fg=new WeakMap,Bg={})}},YB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),r=KB(n);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),XB(s,r,t,"aria-hidden")):function(){return null}},xi=function(){return xi=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xi.apply(this,arguments)};function HP(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function QB(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,o;s<r;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return n.concat(o||Array.prototype.slice.call(e))}var nx="right-scroll-bar-position",sx="width-before-scroll-bar",JB="with-scroll-bars-hidden",ZB="--removed-body-scroll-bar-size";function rb(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function e$(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var t$=typeof window<"u"?A.useLayoutEffect:A.useEffect,rj=new WeakMap;function n$(n,e){var t=e$(null,function(s){return n.forEach(function(r){return rb(r,s)})});return t$(function(){var s=rj.get(t);if(s){var r=new Set(s),o=new Set(n),a=t.current;r.forEach(function(u){o.has(u)||rb(u,null)}),o.forEach(function(u){r.has(u)||rb(u,a)})}rj.set(t,n)},[n]),t}function s$(n){return n}function r$(n,e){e===void 0&&(e=s$);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var a=e(o,s);return t.push(a),function(){t=t.filter(function(u){return u!==a})}},assignSyncMedium:function(o){for(s=!0;t.length;){var a=t;t=[],a.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){s=!0;var a=[];if(t.length){var u=t;t=[],u.forEach(o),a=t}var d=function(){var m=a;a=[],m.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(m){a.push(m),h()},filter:function(m){return a=a.filter(m),t}}}};return r}function i$(n){n===void 0&&(n={});var e=r$(null);return e.options=xi({async:!0,ssr:!1},n),e}var WP=function(n){var e=n.sideCar,t=HP(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return A.createElement(s,xi({},t))};WP.isSideCarExport=!0;function o$(n,e){return n.useMedium(e),WP}var GP=i$(),ib=function(){},Ly=A.forwardRef(function(n,e){var t=A.useRef(null),s=A.useState({onScrollCapture:ib,onWheelCapture:ib,onTouchMoveCapture:ib}),r=s[0],o=s[1],a=n.forwardProps,u=n.children,d=n.className,h=n.removeScrollBar,m=n.enabled,g=n.shards,x=n.sideCar,v=n.noIsolation,w=n.inert,b=n.allowPinchZoom,C=n.as,E=C===void 0?"div":C,N=n.gapMode,k=HP(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=x,R=n$([t,e]),M=xi(xi({},k),r);return A.createElement(A.Fragment,null,m&&A.createElement(P,{sideCar:GP,removeScrollBar:h,shards:g,noIsolation:v,inert:w,setCallbacks:o,allowPinchZoom:!!b,lockRef:t,gapMode:N}),a?A.cloneElement(A.Children.only(u),xi(xi({},M),{ref:R})):A.createElement(E,xi({},M,{className:d,ref:R}),u))});Ly.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ly.classNames={fullWidth:sx,zeroRight:nx};var a$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function l$(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=a$();return e&&n.setAttribute("nonce",e),n}function c$(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function u$(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var d$=function(){var n=0,e=null;return{add:function(t){n==0&&(e=l$())&&(c$(e,t),u$(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},h$=function(){var n=d$();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},KP=function(){var n=h$(),e=function(t){var s=t.styles,r=t.dynamic;return n(s,r),null};return e},f$={left:0,top:0,right:0,gap:0},ob=function(n){return parseInt(n||"",10)||0},p$=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[ob(t),ob(s),ob(r)]},m$=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return f$;var e=p$(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},g$=KP(),Ru="data-scroll-locked",x$=function(n,e,t,s){var r=n.left,o=n.top,a=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(JB,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(Ru,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nx,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(sx,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(nx," .").concat(nx,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(sx," .").concat(sx,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Ru,`] {
    `).concat(ZB,": ").concat(u,`px;
  }
`)},ij=function(){var n=parseInt(document.body.getAttribute(Ru)||"0",10);return isFinite(n)?n:0},y$=function(){A.useEffect(function(){return document.body.setAttribute(Ru,(ij()+1).toString()),function(){var n=ij()-1;n<=0?document.body.removeAttribute(Ru):document.body.setAttribute(Ru,n.toString())}},[])},v$=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,r=s===void 0?"margin":s;y$();var o=A.useMemo(function(){return m$(r)},[r]);return A.createElement(g$,{styles:x$(o,!e,r,t?"":"!important")})},Xb=!1;if(typeof window<"u")try{var $g=Object.defineProperty({},"passive",{get:function(){return Xb=!0,!0}});window.addEventListener("test",$g,$g),window.removeEventListener("test",$g,$g)}catch{Xb=!1}var fu=Xb?{passive:!1}:!1,b$=function(n){return n.tagName==="TEXTAREA"},qP=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!b$(n)&&t[e]==="visible")},w$=function(n){return qP(n,"overflowY")},S$=function(n){return qP(n,"overflowX")},oj=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=XP(n,s);if(r){var o=YP(n,s),a=o[1],u=o[2];if(a>u)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},A$=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},E$=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},XP=function(n,e){return n==="v"?w$(e):S$(e)},YP=function(n,e){return n==="v"?A$(e):E$(e)},C$=function(n,e){return n==="h"&&e==="rtl"?-1:1},N$=function(n,e,t,s,r){var o=C$(n,window.getComputedStyle(e).direction),a=o*s,u=t.target,d=e.contains(u),h=!1,m=a>0,g=0,x=0;do{var v=YP(n,u),w=v[0],b=v[1],C=v[2],E=b-C-o*w;(w||E)&&XP(n,u)&&(g+=E,x+=w),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(m&&Math.abs(g)<1||!m&&Math.abs(x)<1)&&(h=!0),h},Vg=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},aj=function(n){return[n.deltaX,n.deltaY]},lj=function(n){return n&&"current"in n?n.current:n},j$=function(n,e){return n[0]===e[0]&&n[1]===e[1]},k$=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},T$=0,pu=[];function P$(n){var e=A.useRef([]),t=A.useRef([0,0]),s=A.useRef(),r=A.useState(T$++)[0],o=A.useState(KP)[0],a=A.useRef(n);A.useEffect(function(){a.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var b=QB([n.lockRef.current],(n.shards||[]).map(lj),!0).filter(Boolean);return b.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var u=A.useCallback(function(b,C){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var E=Vg(b),N=t.current,k="deltaX"in b?b.deltaX:N[0]-E[0],P="deltaY"in b?b.deltaY:N[1]-E[1],R,M=b.target,O=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in b&&O==="h"&&M.type==="range")return!1;var F=oj(O,M);if(!F)return!0;if(F?R=O:(R=O==="v"?"h":"v",F=oj(O,M)),!F)return!1;if(!s.current&&"changedTouches"in b&&(k||P)&&(s.current=R),!R)return!0;var D=s.current||R;return N$(D,C,b,D==="h"?k:P)},[]),d=A.useCallback(function(b){var C=b;if(!(!pu.length||pu[pu.length-1]!==o)){var E="deltaY"in C?aj(C):Vg(C),N=e.current.filter(function(R){return R.name===C.type&&(R.target===C.target||C.target===R.shadowParent)&&j$(R.delta,E)})[0];if(N&&N.should){C.cancelable&&C.preventDefault();return}if(!N){var k=(a.current.shards||[]).map(lj).filter(Boolean).filter(function(R){return R.contains(C.target)}),P=k.length>0?u(C,k[0]):!a.current.noIsolation;P&&C.cancelable&&C.preventDefault()}}},[]),h=A.useCallback(function(b,C,E,N){var k={name:b,delta:C,target:E,should:N,shadowParent:_$(E)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),m=A.useCallback(function(b){t.current=Vg(b),s.current=void 0},[]),g=A.useCallback(function(b){h(b.type,aj(b),b.target,u(b,n.lockRef.current))},[]),x=A.useCallback(function(b){h(b.type,Vg(b),b.target,u(b,n.lockRef.current))},[]);A.useEffect(function(){return pu.push(o),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:x}),document.addEventListener("wheel",d,fu),document.addEventListener("touchmove",d,fu),document.addEventListener("touchstart",m,fu),function(){pu=pu.filter(function(b){return b!==o}),document.removeEventListener("wheel",d,fu),document.removeEventListener("touchmove",d,fu),document.removeEventListener("touchstart",m,fu)}},[]);var v=n.removeScrollBar,w=n.inert;return A.createElement(A.Fragment,null,w?A.createElement(o,{styles:k$(r)}):null,v?A.createElement(v$,{gapMode:n.gapMode}):null)}function _$(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const R$=o$(GP,P$);var QP=A.forwardRef(function(n,e){return A.createElement(Ly,xi({},n,{ref:e,sideCar:R$}))});QP.classNames=Ly.classNames;var L$=[" ","Enter","ArrowUp","ArrowDown"],I$=[" ","Enter"],Nc="Select",[Iy,My,M$]=a4(Nc),[oh,aq]=r1(Nc,[M$,RP]),Dy=RP(),[D$,Ua]=oh(Nc),[O$,F$]=oh(Nc),JP=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:o,value:a,defaultValue:u,onValueChange:d,dir:h,name:m,autoComplete:g,disabled:x,required:v,form:w}=n,b=Dy(e),[C,E]=A.useState(null),[N,k]=A.useState(null),[P,R]=A.useState(!1),M=c4(h),[O,F]=sj({prop:s,defaultProp:r??!1,onChange:o,caller:Nc}),[D,U]=sj({prop:a,defaultProp:u,onChange:d,caller:Nc}),K=A.useRef(null),X=C?w||!!C.closest("form"):!0,[ee,J]=A.useState(new Set),ae=Array.from(ee).map(Y=>Y.props.value).join(";");return c.jsx(DB,{...b,children:c.jsxs(D$,{required:v,scope:e,trigger:C,onTriggerChange:E,valueNode:N,onValueNodeChange:k,valueNodeHasChildren:P,onValueNodeHasChildrenChange:R,contentId:i1(),value:D,onValueChange:U,open:O,onOpenChange:F,dir:M,triggerPointerDownPosRef:K,disabled:x,children:[c.jsx(Iy.Provider,{scope:e,children:c.jsx(O$,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(Y=>{J(G=>new Set(G).add(Y))},[]),onNativeOptionRemove:A.useCallback(Y=>{J(G=>{const z=new Set(G);return z.delete(Y),z})},[]),children:t})}),X?c.jsxs(S_,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:g,value:D,onChange:Y=>U(Y.target.value),disabled:x,form:w,children:[D===void 0?c.jsx("option",{value:""}):null,Array.from(ee)]},ae):null]})})};JP.displayName=Nc;var ZP="SelectTrigger",e_=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=n,o=Dy(t),a=Ua(ZP,t),u=a.disabled||s,d=En(e,a.onTriggerChange),h=My(t),m=A.useRef("touch"),[g,x,v]=E_(b=>{const C=h().filter(k=>!k.disabled),E=C.find(k=>k.value===a.value),N=C_(C,b,E);N!==void 0&&a.onValueChange(N.value)}),w=b=>{u||(a.onOpenChange(!0),v()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return c.jsx(OB,{asChild:!0,...o,children:c.jsx(Ut.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":A_(a.value)?"":void 0,...r,ref:d,onClick:Gt(r.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&w(b)}),onPointerDown:Gt(r.onPointerDown,b=>{m.current=b.pointerType;const C=b.target;C.hasPointerCapture(b.pointerId)&&C.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(w(b),b.preventDefault())}),onKeyDown:Gt(r.onKeyDown,b=>{const C=g.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&x(b.key),!(C&&b.key===" ")&&L$.includes(b.key)&&(w(),b.preventDefault())})})})});e_.displayName=ZP;var t_="SelectValue",n_=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,children:o,placeholder:a="",...u}=n,d=Ua(t_,t),{onValueNodeHasChildrenChange:h}=d,m=o!==void 0,g=En(e,d.onValueNodeChange);return gs(()=>{h(m)},[h,m]),c.jsx(Ut.span,{...u,ref:g,style:{pointerEvents:"none"},children:A_(d.value)?c.jsx(c.Fragment,{children:a}):o})});n_.displayName=t_;var B$="SelectIcon",s_=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...r}=n;return c.jsx(Ut.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});s_.displayName=B$;var $$="SelectPortal",r_=n=>c.jsx(VP,{asChild:!0,...n});r_.displayName=$$;var jc="SelectContent",i_=A.forwardRef((n,e)=>{const t=Ua(jc,n.__scopeSelect),[s,r]=A.useState();if(gs(()=>{r(new DocumentFragment)},[]),!t.open){const o=s;return o?sh.createPortal(c.jsx(o_,{scope:n.__scopeSelect,children:c.jsx(Iy.Slot,{scope:n.__scopeSelect,children:c.jsx("div",{children:n.children})})}),o):null}return c.jsx(a_,{...n,ref:e})});i_.displayName=jc;var gr=10,[o_,za]=oh(jc),V$="SelectContentImpl",U$=zx("SelectContent.RemoveScroll"),a_=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:a,side:u,sideOffset:d,align:h,alignOffset:m,arrowPadding:g,collisionBoundary:x,collisionPadding:v,sticky:w,hideWhenDetached:b,avoidCollisions:C,...E}=n,N=Ua(jc,t),[k,P]=A.useState(null),[R,M]=A.useState(null),O=En(e,se=>P(se)),[F,D]=A.useState(null),[U,K]=A.useState(null),X=My(t),[ee,J]=A.useState(!1),ae=A.useRef(!1);A.useEffect(()=>{if(k)return YB(k)},[k]),b4();const Y=A.useCallback(se=>{const[me,...Ne]=X().map(He=>He.ref.current),[ce]=Ne.slice(-1),Fe=document.activeElement;for(const He of se)if(He===Fe||(He==null||He.scrollIntoView({block:"nearest"}),He===me&&R&&(R.scrollTop=0),He===ce&&R&&(R.scrollTop=R.scrollHeight),He==null||He.focus(),document.activeElement!==Fe))return},[X,R]),G=A.useCallback(()=>Y([F,k]),[Y,F,k]);A.useEffect(()=>{ee&&G()},[ee,G]);const{onOpenChange:z,triggerPointerDownPosRef:te}=N;A.useEffect(()=>{if(k){let se={x:0,y:0};const me=ce=>{var Fe,He;se={x:Math.abs(Math.round(ce.pageX)-(((Fe=te.current)==null?void 0:Fe.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((He=te.current)==null?void 0:He.y)??0))}},Ne=ce=>{se.x<=10&&se.y<=10?ce.preventDefault():k.contains(ce.target)||z(!1),document.removeEventListener("pointermove",me),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[k,z,te]),A.useEffect(()=>{const se=()=>z(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[z]);const[ne,$]=E_(se=>{const me=X().filter(Fe=>!Fe.disabled),Ne=me.find(Fe=>Fe.ref.current===document.activeElement),ce=C_(me,se,Ne);ce&&setTimeout(()=>ce.ref.current.focus())}),Z=A.useCallback((se,me,Ne)=>{const ce=!ae.current&&!Ne;(N.value!==void 0&&N.value===me||ce)&&(D(se),ce&&(ae.current=!0))},[N.value]),he=A.useCallback(()=>k==null?void 0:k.focus(),[k]),ve=A.useCallback((se,me,Ne)=>{const ce=!ae.current&&!Ne;(N.value!==void 0&&N.value===me||ce)&&K(se)},[N.value]),Ee=s==="popper"?Yb:l_,ye=Ee===Yb?{side:u,sideOffset:d,align:h,alignOffset:m,arrowPadding:g,collisionBoundary:x,collisionPadding:v,sticky:w,hideWhenDetached:b,avoidCollisions:C}:{};return c.jsx(o_,{scope:t,content:k,viewport:R,onViewportChange:M,itemRefCallback:Z,selectedItem:F,onItemLeave:he,itemTextRefCallback:ve,focusSelectedItem:G,selectedItemText:U,position:s,isPositioned:ee,searchRef:ne,children:c.jsx(QP,{as:U$,allowPinchZoom:!0,children:c.jsx(yP,{asChild:!0,trapped:N.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Gt(r,se=>{var me;(me=N.trigger)==null||me.focus({preventScroll:!0}),se.preventDefault()}),children:c.jsx(gP,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:c.jsx(Ee,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:se=>se.preventDefault(),...E,...ye,onPlaced:()=>J(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Gt(E.onKeyDown,se=>{const me=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!me&&se.key.length===1&&$(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ce=X().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Fe=se.target,He=ce.indexOf(Fe);ce=ce.slice(He+1)}setTimeout(()=>Y(ce)),se.preventDefault()}})})})})})})});a_.displayName=V$;var z$="SelectItemAlignedPosition",l_=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=n,o=Ua(jc,t),a=za(jc,t),[u,d]=A.useState(null),[h,m]=A.useState(null),g=En(e,O=>m(O)),x=My(t),v=A.useRef(!1),w=A.useRef(!0),{viewport:b,selectedItem:C,selectedItemText:E,focusSelectedItem:N}=a,k=A.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&h&&b&&C&&E){const O=o.trigger.getBoundingClientRect(),F=h.getBoundingClientRect(),D=o.valueNode.getBoundingClientRect(),U=E.getBoundingClientRect();if(o.dir!=="rtl"){const Fe=U.left-F.left,He=D.left-Fe,Re=O.left-He,qe=O.width+Re,ft=Math.max(qe,F.width),Xe=window.innerWidth-gr,qt=$N(He,[gr,Math.max(gr,Xe-ft)]);u.style.minWidth=qe+"px",u.style.left=qt+"px"}else{const Fe=F.right-U.right,He=window.innerWidth-D.right-Fe,Re=window.innerWidth-O.right-He,qe=O.width+Re,ft=Math.max(qe,F.width),Xe=window.innerWidth-gr,qt=$N(He,[gr,Math.max(gr,Xe-ft)]);u.style.minWidth=qe+"px",u.style.right=qt+"px"}const K=x(),X=window.innerHeight-gr*2,ee=b.scrollHeight,J=window.getComputedStyle(h),ae=parseInt(J.borderTopWidth,10),Y=parseInt(J.paddingTop,10),G=parseInt(J.borderBottomWidth,10),z=parseInt(J.paddingBottom,10),te=ae+Y+ee+z+G,ne=Math.min(C.offsetHeight*5,te),$=window.getComputedStyle(b),Z=parseInt($.paddingTop,10),he=parseInt($.paddingBottom,10),ve=O.top+O.height/2-gr,Ee=X-ve,ye=C.offsetHeight/2,se=C.offsetTop+ye,me=ae+Y+se,Ne=te-me;if(me<=ve){const Fe=K.length>0&&C===K[K.length-1].ref.current;u.style.bottom="0px";const He=h.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(Ee,ye+(Fe?he:0)+He+G),qe=me+Re;u.style.height=qe+"px"}else{const Fe=K.length>0&&C===K[0].ref.current;u.style.top="0px";const Re=Math.max(ve,ae+b.offsetTop+(Fe?Z:0)+ye)+Ne;u.style.height=Re+"px",b.scrollTop=me-ve+b.offsetTop}u.style.margin=`${gr}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=X+"px",s==null||s(),requestAnimationFrame(()=>v.current=!0)}},[x,o.trigger,o.valueNode,u,h,b,C,E,o.dir,s]);gs(()=>k(),[k]);const[P,R]=A.useState();gs(()=>{h&&R(window.getComputedStyle(h).zIndex)},[h]);const M=A.useCallback(O=>{O&&w.current===!0&&(k(),N==null||N(),w.current=!1)},[k,N]);return c.jsx(W$,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:c.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:c.jsx(Ut.div,{...r,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});l_.displayName=z$;var H$="SelectPopperPosition",Yb=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=gr,...o}=n,a=Dy(t);return c.jsx(FB,{...a,...o,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yb.displayName=H$;var[W$,m1]=oh(jc,{}),Qb="SelectViewport",c_=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...r}=n,o=za(Qb,t),a=m1(Qb,t),u=En(e,o.onViewportChange),d=A.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(Iy.Slot,{scope:t,children:c.jsx(Ut.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Gt(r.onScroll,h=>{const m=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:x}=a;if(x!=null&&x.current&&g){const v=Math.abs(d.current-m.scrollTop);if(v>0){const w=window.innerHeight-gr*2,b=parseFloat(g.style.minHeight),C=parseFloat(g.style.height),E=Math.max(b,C);if(E<w){const N=E+v,k=Math.min(w,N),P=N-k;g.style.height=k+"px",g.style.bottom==="0px"&&(m.scrollTop=P>0?P:0,g.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});c_.displayName=Qb;var u_="SelectGroup",[G$,K$]=oh(u_),q$=A.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=i1();return c.jsx(G$,{scope:t,id:r,children:c.jsx(Ut.div,{role:"group","aria-labelledby":r,...s,ref:e})})});q$.displayName=u_;var d_="SelectLabel",h_=A.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=K$(d_,t);return c.jsx(Ut.div,{id:r.id,...s,ref:e})});h_.displayName=d_;var qx="SelectItem",[X$,f_]=oh(qx),p_=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:o,...a}=n,u=Ua(qx,t),d=za(qx,t),h=u.value===s,[m,g]=A.useState(o??""),[x,v]=A.useState(!1),w=En(e,N=>{var k;return(k=d.itemRefCallback)==null?void 0:k.call(d,N,s,r)}),b=i1(),C=A.useRef("touch"),E=()=>{r||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(X$,{scope:t,value:s,disabled:r,textId:b,isSelected:h,onItemTextChange:A.useCallback(N=>{g(k=>k||((N==null?void 0:N.textContent)??"").trim())},[]),children:c.jsx(Iy.ItemSlot,{scope:t,value:s,disabled:r,textValue:m,children:c.jsx(Ut.div,{role:"option","aria-labelledby":b,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:w,onFocus:Gt(a.onFocus,()=>v(!0)),onBlur:Gt(a.onBlur,()=>v(!1)),onClick:Gt(a.onClick,()=>{C.current!=="mouse"&&E()}),onPointerUp:Gt(a.onPointerUp,()=>{C.current==="mouse"&&E()}),onPointerDown:Gt(a.onPointerDown,N=>{C.current=N.pointerType}),onPointerMove:Gt(a.onPointerMove,N=>{var k;C.current=N.pointerType,r?(k=d.onItemLeave)==null||k.call(d):C.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(a.onPointerLeave,N=>{var k;N.currentTarget===document.activeElement&&((k=d.onItemLeave)==null||k.call(d))}),onKeyDown:Gt(a.onKeyDown,N=>{var P;((P=d.searchRef)==null?void 0:P.current)!==""&&N.key===" "||(I$.includes(N.key)&&E(),N.key===" "&&N.preventDefault())})})})})});p_.displayName=qx;var sf="SelectItemText",m_=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,...o}=n,a=Ua(sf,t),u=za(sf,t),d=f_(sf,t),h=F$(sf,t),[m,g]=A.useState(null),x=En(e,E=>g(E),d.onItemTextChange,E=>{var N;return(N=u.itemTextRefCallback)==null?void 0:N.call(u,E,d.value,d.disabled)}),v=m==null?void 0:m.textContent,w=A.useMemo(()=>c.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:b,onNativeOptionRemove:C}=h;return gs(()=>(b(w),()=>C(w)),[b,C,w]),c.jsxs(c.Fragment,{children:[c.jsx(Ut.span,{id:d.textId,...o,ref:x}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?sh.createPortal(o.children,a.valueNode):null]})});m_.displayName=sf;var g_="SelectItemIndicator",x_=A.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return f_(g_,t).isSelected?c.jsx(Ut.span,{"aria-hidden":!0,...s,ref:e}):null});x_.displayName=g_;var Jb="SelectScrollUpButton",y_=A.forwardRef((n,e)=>{const t=za(Jb,n.__scopeSelect),s=m1(Jb,n.__scopeSelect),[r,o]=A.useState(!1),a=En(e,s.onScrollButtonChange);return gs(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollTop>0;o(h)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?c.jsx(b_,{...n,ref:a,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});y_.displayName=Jb;var Zb="SelectScrollDownButton",v_=A.forwardRef((n,e)=>{const t=za(Zb,n.__scopeSelect),s=m1(Zb,n.__scopeSelect),[r,o]=A.useState(!1),a=En(e,s.onScrollButtonChange);return gs(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;o(m)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),r?c.jsx(b_,{...n,ref:a,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});v_.displayName=Zb;var b_=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=n,o=za("SelectScrollButton",t),a=A.useRef(null),u=My(t),d=A.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),gs(()=>{var m;const h=u().find(g=>g.ref.current===document.activeElement);(m=h==null?void 0:h.ref.current)==null||m.scrollIntoView({block:"nearest"})},[u]),c.jsx(Ut.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:Gt(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:Gt(r.onPointerMove,()=>{var h;(h=o.onItemLeave)==null||h.call(o),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:Gt(r.onPointerLeave,()=>{d()})})}),Y$="SelectSeparator",w_=A.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return c.jsx(Ut.div,{"aria-hidden":!0,...s,ref:e})});w_.displayName=Y$;var ew="SelectArrow",Q$=A.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=Dy(t),o=Ua(ew,t),a=za(ew,t);return o.open&&a.position==="popper"?c.jsx(BB,{...r,...s,ref:e}):null});Q$.displayName=ew;var J$="SelectBubbleInput",S_=A.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const r=A.useRef(null),o=En(s,r),a=HB(e);return A.useEffect(()=>{const u=r.current;if(!u)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const g=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(g)}},[a,e]),c.jsx(Ut.select,{...t,style:{...UP,...t.style},ref:o,defaultValue:e})});S_.displayName=J$;function A_(n){return n===""||n===void 0}function E_(n){const e=Ec(n),t=A.useRef(""),s=A.useRef(0),r=A.useCallback(a=>{const u=t.current+a;e(u),function d(h){t.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))}(u)},[e]),o=A.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,o]}function C_(n,e,t){const r=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let a=Z$(n,Math.max(o,0));r.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==t?d:void 0}function Z$(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var e6=JP,N_=e_,t6=n_,n6=s_,s6=r_,j_=i_,r6=c_,k_=h_,T_=p_,i6=m_,o6=x_,P_=y_,__=v_,R_=w_;function L_(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=L_(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function mm(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=L_(n))&&(s&&(s+=" "),s+=e);return s}const g1="-",a6=n=>{const e=c6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const u=a.split(g1);return u[0]===""&&u.length!==1&&u.shift(),I_(u,e)||l6(a)},getConflictingClassGroupIds:(a,u)=>{const d=t[a]||[];return u&&s[a]?[...d,...s[a]]:d}}},I_=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?I_(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const o=n.join(g1);return(a=e.validators.find(({validator:u})=>u(o)))==null?void 0:a.classGroupId},cj=/^\[(.+)\]$/,l6=n=>{if(cj.test(n)){const e=cj.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},c6=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return d6(Object.entries(n.classGroups),t).forEach(([o,a])=>{tw(a,s,o,e)}),s},tw=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const o=r===""?e:uj(e,r);o.classGroupId=t;return}if(typeof r=="function"){if(u6(r)){tw(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([o,a])=>{tw(a,uj(e,o),t,s)})})},uj=(n,e)=>{let t=n;return e.split(g1).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},u6=n=>n.isThemeGetter,d6=(n,e)=>e?n.map(([t,s])=>{const r=s.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,u])=>[e+a,u])):o);return[t,r]}):n,h6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(o,a)=>{t.set(o,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(o){let a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return r(o,a),a},set(o,a){t.has(o)?t.set(o,a):r(o,a)}}},M_="!",f6=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],o=e.length,a=u=>{const d=[];let h=0,m=0,g;for(let C=0;C<u.length;C++){let E=u[C];if(h===0){if(E===r&&(s||u.slice(C,C+o)===e)){d.push(u.slice(m,C)),m=C+o;continue}if(E==="/"){g=C;continue}}E==="["?h++:E==="]"&&h--}const x=d.length===0?u:u.substring(m),v=x.startsWith(M_),w=v?x.substring(1):x,b=g&&g>m?g-m:void 0;return{modifiers:d,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:b}};return t?u=>t({className:u,parseClassName:a}):a},p6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},m6=n=>({cache:h6(n.cacheSize),parseClassName:f6(n),...a6(n)}),g6=/\s+/,x6=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,o=[],a=n.trim().split(g6);let u="";for(let d=a.length-1;d>=0;d-=1){const h=a[d],{modifiers:m,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}=t(h);let w=!!v,b=s(w?x.substring(0,v):x);if(!b){if(!w){u=h+(u.length>0?" "+u:u);continue}if(b=s(x),!b){u=h+(u.length>0?" "+u:u);continue}w=!1}const C=p6(m).join(":"),E=g?C+M_:C,N=E+b;if(o.includes(N))continue;o.push(N);const k=r(b,w);for(let P=0;P<k.length;++P){const R=k[P];o.push(E+R)}u=h+(u.length>0?" "+u:u)}return u};function y6(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=D_(e))&&(s&&(s+=" "),s+=t);return s}const D_=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=D_(n[s]))&&(t&&(t+=" "),t+=e);return t};function v6(n,...e){let t,s,r,o=a;function a(d){const h=e.reduce((m,g)=>g(m),n());return t=m6(h),s=t.cache.get,r=t.cache.set,o=u,u(d)}function u(d){const h=s(d);if(h)return h;const m=x6(d,t);return r(d,m),m}return function(){return o(y6.apply(null,arguments))}}const vt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},O_=/^\[(?:([a-z-]+):)?(.+)\]$/i,b6=/^\d+\/\d+$/,w6=new Set(["px","full","screen"]),S6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,A6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,N6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_i=n=>Lu(n)||w6.has(n)||b6.test(n),Uo=n=>ah(n,"length",I6),Lu=n=>!!n&&!Number.isNaN(Number(n)),ab=n=>ah(n,"number",Lu),Yh=n=>!!n&&Number.isInteger(Number(n)),j6=n=>n.endsWith("%")&&Lu(n.slice(0,-1)),Ve=n=>O_.test(n),zo=n=>S6.test(n),k6=new Set(["length","size","percentage"]),T6=n=>ah(n,k6,F_),P6=n=>ah(n,"position",F_),_6=new Set(["image","url"]),R6=n=>ah(n,_6,D6),L6=n=>ah(n,"",M6),Qh=()=>!0,ah=(n,e,t)=>{const s=O_.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},I6=n=>A6.test(n)&&!E6.test(n),F_=()=>!1,M6=n=>C6.test(n),D6=n=>N6.test(n),O6=()=>{const n=vt("colors"),e=vt("spacing"),t=vt("blur"),s=vt("brightness"),r=vt("borderColor"),o=vt("borderRadius"),a=vt("borderSpacing"),u=vt("borderWidth"),d=vt("contrast"),h=vt("grayscale"),m=vt("hueRotate"),g=vt("invert"),x=vt("gap"),v=vt("gradientColorStops"),w=vt("gradientColorStopPositions"),b=vt("inset"),C=vt("margin"),E=vt("opacity"),N=vt("padding"),k=vt("saturate"),P=vt("scale"),R=vt("sepia"),M=vt("skew"),O=vt("space"),F=vt("translate"),D=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",Ve,e],X=()=>[Ve,e],ee=()=>["",_i,Uo],J=()=>["auto",Lu,Ve],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",Ve],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Lu,Ve];return{cacheSize:500,separator:":",theme:{colors:[Qh],spacing:[_i,Uo],blur:["none","",zo,Ve],brightness:$(),borderColor:[n],borderRadius:["none","","full",zo,Ve],borderSpacing:X(),borderWidth:ee(),contrast:$(),grayscale:te(),hueRotate:$(),invert:te(),gap:X(),gradientColorStops:[n],gradientColorStopPositions:[j6,Uo],inset:K(),margin:K(),opacity:$(),padding:X(),saturate:$(),scale:$(),sepia:te(),skew:$(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[zo]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),Ve]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yh,Ve]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",Yh,Ve]}],"grid-cols":[{"grid-cols":[Qh]}],"col-start-end":[{col:["auto",{span:["full",Yh,Ve]},Ve]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[Qh]}],"row-start-end":[{row:["auto",{span:[Yh,Ve]},Ve]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[zo]},zo]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",zo,Uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ab]}],"font-family":[{font:[Qh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",Lu,ab]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_i,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_i,Uo]}],"underline-offset":[{"underline-offset":["auto",_i,Ve]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),P6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Y()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[_i,Ve]}],"outline-w":[{outline:[_i,Uo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[_i,Uo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",zo,L6]}],"shadow-color":[{shadow:[Qh]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",zo,Ve]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[k]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Yh,Ve]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[_i,Uo,ab]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},F6=v6(O6),Ma=(...n)=>F6(mm(n)),B6=e6,$6=t6,B_=A.forwardRef(({className:n,children:e,...t},s)=>c.jsxs(N_,{ref:s,className:Ma("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,c.jsx(n6,{asChild:!0,children:c.jsx(QS,{className:"h-4 w-4 opacity-50"})})]}));B_.displayName=N_.displayName;const $_=A.forwardRef(({className:n,...e},t)=>c.jsx(P_,{ref:t,className:Ma("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(JS,{className:"h-4 w-4"})}));$_.displayName=P_.displayName;const V_=A.forwardRef(({className:n,...e},t)=>c.jsx(__,{ref:t,className:Ma("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(QS,{className:"h-4 w-4"})}));V_.displayName=__.displayName;const U_=A.forwardRef(({className:n,children:e,position:t="popper",...s},r)=>c.jsx(s6,{children:c.jsxs(j_,{ref:r,className:Ma("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[c.jsx($_,{}),c.jsx(r6,{className:Ma("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(V_,{})]})}));U_.displayName=j_.displayName;const V6=A.forwardRef(({className:n,...e},t)=>c.jsx(k_,{ref:t,className:Ma("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));V6.displayName=k_.displayName;const rx=A.forwardRef(({className:n,children:e,...t},s)=>c.jsxs(T_,{ref:s,className:Ma("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(o6,{children:c.jsx(hm,{className:"h-4 w-4"})})}),c.jsx(i6,{children:e})]}));rx.displayName=T_.displayName;const U6=A.forwardRef(({className:n,...e},t)=>c.jsx(R_,{ref:t,className:Ma("-mx-1 my-1 h-px bg-muted",n),...e}));U6.displayName=R_.displayName;const z6=n=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>e(s.result),s.onerror=r=>t(r)});function dj(n,e="image/png"){const t=n.split(","),s=atob(t[1]),r=new Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);const o=new Uint8Array(r);return new Blob([o],{type:e})}function H6(){const n=ke(),[e,t]=A.useState(null),[s,r]=A.useState({storeType:"",storeName:"",businessNumber:"",address:"",imageBase64:""}),[o,a]=A.useState(null),[u,d]=A.useState(!0);A.useEffect(()=>{const w=localStorage.getItem("businessOcrResult");w&&t(JSON.parse(w))},[]),A.useEffect(()=>{e&&r(w=>({...w,storeName:e.corpName||"",businessNumber:e.registerNumber||"",address:e.address||""}))},[e]);const h=(w,b)=>{const C={...s,[w]:b};r(C),x(C)},m=w=>{const b={...s,storeType:w};r(b),x(b)},g=async w=>{try{const b=await z6(w),C={...s,imageBase64:b};r(C),a(w),x(C)}catch(b){console.error("이미지 변환 오류:",b)}},x=w=>{const b=w.storeType&&w.storeName&&w.businessNumber&&w.address;d(!b)},v=async()=>{try{const w=sessionStorage.getItem("signUpData")||"{}",C={...JSON.parse(w),storeName:s.storeName,businessNumber:s.businessNumber,storeAddress:s.address,storeType:s.storeType,representativeName:e==null?void 0:e.representativeName,businessType:e==null?void 0:e.businessType},E=new FormData;if(E.append("storeData",new Blob([JSON.stringify(C)],{type:"application/json"})),s.imageBase64){const P=dj(s.imageBase64);E.append("storeImage",P,"storeImage.png")}const N=localStorage.getItem("businessImageBase64");if(N){const P=dj(N);E.append("businessImage",P,"businessImage.png")}const k=await b3(E);if(!k.ok){const P=await k.json();alert(`회원가입 실패: ${P.message}`);return}localStorage.removeItem("businessOcrResult"),localStorage.removeItem("businessImageBase64"),sessionStorage.clear(),alert("회원가입이 완료되었습니다."),n("/signup-complete")}catch(w){console.error("회원가입 중 오류:",w),alert("회원가입 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"h-full flex flex-col bg-white",children:[c.jsx(Ie,{title:"회원가입",progress:4,isStore:!0}),c.jsxs("main",{className:"flex-1 overflow-auto px-6 pt-6 pb-24 flex flex-col",children:[c.jsxs("div",{className:"mb-10",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"가게정보 입력"}),c.jsx("p",{className:"text-sm text-gray-600",children:"OCR 결과가 자동으로 입력됩니다."})]}),c.jsxs("div",{className:"flex-1 space-y-6",children:[c.jsx("div",{children:c.jsxs(B6,{onValueChange:m,children:[c.jsx(B_,{className:"w-full border-t-0 border-x-0 border-b border-gray-300 rounded-none py-3 focus:ring-0",children:c.jsx($6,{placeholder:"가게 업종 선택"})}),c.jsxs(U_,{children:[c.jsx(rx,{value:"음식점",children:"음식점"}),c.jsx(rx,{value:"카페",children:"카페"}),c.jsx(rx,{value:"베이커리",children:"베이커리"})]})]})}),c.jsx("div",{children:c.jsx(Qv,{name:"storeName",label:"가게명(상호)",value:s.storeName,placeholder:"가게명을 입력하세요.",className:"border-t-0 border-x-0 border-b border-gray-300 rounded-none py-3 focus:ring-0 px-0",onChange:w=>h("storeName",w.target.value)})}),c.jsx("div",{children:c.jsx(Qv,{name:"businessNumber",label:"사업자등록번호",value:s.businessNumber,placeholder:"사업자 등록번호",className:"border-t-0 border-x-0 border-b border-gray-300 rounded-none py-3 focus:ring-0 px-0",onChange:w=>h("businessNumber",w.target.value)})}),c.jsx("div",{children:c.jsx(Qv,{name:"address",label:"주소",value:s.address,placeholder:"주소",className:"border-t-0 border-x-0 border-b border-gray-300 rounded-none py-3 focus:ring-0 px-0",onChange:w=>h("address",w.target.value)})}),c.jsx("div",{className:"mt-4 mb-6",children:c.jsx(s1,{label:"대표 이미지",previewLabel:"첨부된 이미지",value:o,onChange:g})})]})]}),c.jsx("div",{className:"p-5 bg-white",children:c.jsx(Be,{text:"회원가입 완료",onClick:v,disabled:u,className:`w-full py-3.5 rounded-xl font-medium text-white ${u?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`})})]})}const Oy=({coins:n})=>{console.log("CoinStatus 데이터:",n);const e={XRP:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-100"},USDT:{bg:"bg-green-100",text:"text-green-800",border:"border-green-100"},SOL:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-100"},default:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300"}};if(!n||n.length===0)return c.jsx("div",{className:"text-xs text-gray-400",children:"지원하는 암호화폐가 없습니다"});const t=r=>{if(console.log("코인 데이터:",r),typeof r=="string")return r;if(r.currency)return r.currency;if(r.name==="XRP"||r.name==="USDT"||r.name==="SOL")return r.name;if(r.code)return r.code;if(r.type)return r.type;if(r.name)return r.name;const o=String(r);return o==="XRP"||o==="USDT"||o==="SOL"?o:"default"},s=Array.from(new Set(n.map(r=>t(r))));return c.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.map((r,o)=>{const a=e[r]||e.default;return c.jsx("div",{className:`flex items-center justify-center text-xs px-2 h-6 rounded-full border ${a.bg} ${a.border}`,children:c.jsx("span",{className:`${a.text}`,children:r})},`coin-${o}-${r}`)})})};function W6(){const[n,e]=A.useState(null),[t,s]=A.useState(!0),[r,o]=A.useState(null);A.useEffect(()=>{(async()=>{try{if(!sessionStorage.getItem("accessToken"))throw new Error("로그인이 필요합니다.");const h=await fm();e(h)}catch(d){console.error(d),o("가게 정보를 불러오는 데 실패했습니다.")}finally{s(!1)}})()},[]);const a=async()=>{if(!n||!sessionStorage.getItem("accessToken"))return;const d=n.storeStatus==="OPEN"?"CLOSED":"OPEN";try{await N3(d),e({...n,storeStatus:d})}catch(h){console.error("상태 변경 실패:",h)}};return t?c.jsx("div",{className:"p-4",children:"로딩 중..."}):r?c.jsx("div",{className:"p-4 text-red-500",children:r}):n?c.jsxs("div",{className:"flex flex-col self-center mt-3 w-full text-center",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 w-full mt-2",children:[c.jsxs("div",{onClick:a,className:`flex items-center text-base font-semibold cursor-pointer transition duration-150 ${n.storeStatus==="OPEN"?"text-green-800":"text-red-600"}`,children:[c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center mr-2 border ${n.storeStatus==="OPEN"?"border-green-700 bg-green-100":"border-gray-300 bg-gray-300"}`,children:n.storeStatus==="OPEN"&&c.jsx(hm,{size:14,className:"text-white"})}),n.storeStatus==="OPEN"?"영업 중":"영업 종료"]}),c.jsxs("div",{className:"flex items-center text-sm text-zinc-500",children:[c.jsx(iP,{size:18,className:"mr-1 fill-red-500 stroke-red-500"}),"좋아요 ",n.likeCount,"개"]})]}),c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:n.storeName}),c.jsx("p",{className:"text-base tracking-tight mt-2 text-gray-700",children:n.storeAddress}),c.jsx("div",{className:"flex justify-center mt-3 mb-2",children:c.jsx(Oy,{coins:n.coinList})}),c.jsx("h2",{className:"text-xl font-bold tracking-tight",children:c.jsx("img",{src:n.storeImageUrl,alt:"가게 이미지",className:"w-full h-auto rounded-lg"})}),c.jsxs("div",{className:"mt-6 px-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2 text-left",children:"메뉴 목록"}),n.menuList.length===0?c.jsx("p",{className:"text-gray-500",children:"등록된 메뉴가 없습니다."}):c.jsx("ul",{children:n.menuList.map((u,d)=>c.jsxs("li",{className:`flex items-center gap-4 py-3 ${d!==n.menuList.length-1?"border-b border-gray-200":""}`,children:[c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("p",{className:"font-semibold text-base",children:u.menuName}),c.jsx("p",{className:"text-sm text-gray-600",children:typeof u.menuPrice=="number"?`${u.menuPrice.toLocaleString()}KRW`:"가격 정보 없음"})]}),c.jsx("img",{src:u.menuImage||"/placeholder.svg",alt:u.menuName,className:"w-16 h-16 object-cover rounded-md"})]},u.menuId))})]})]}):null}function G6(){const n=ke();return c.jsxs(c.Fragment,{children:[c.jsx(Ie,{title:"내 가게 관리",isStore:!0}),c.jsx("div",{className:"relative overflow-auto bg-white pb-36",children:c.jsx("div",{className:"pb-24 p-4",children:c.jsx(W6,{})})}),c.jsx("div",{className:"sticky bottom-16 left-0 right-0 flex justify-center space-x-4 px-10 py-4 bg-white shadow-lg border-t border-gray-200",children:c.jsx(Be,{text:"가게정보 수정",onClick:()=>n("/store/my/edit"),className:"w-1/2 rounded-[9px] font-medium bg-[#0C2B5F] text-white shadow-inner"})}),c.jsx(st,{})]})}function K6(){var s;const n=ke(),t=(s=et().state)==null?void 0:s.orderId;return A.useEffect(()=>{const r=setTimeout(()=>{t?n(`/mall/store/pay-complete/${t}`):alert("주문 ID가 존재하지 않습니다.")},2e3);return()=>clearTimeout(r)},[n,t]),c.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[c.jsx(Ie,{title:"주문 요청",isStore:!1}),c.jsx("div",{className:"flex-grow flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("div",{className:"relative w-20 h-20 mb-8",children:[c.jsx("div",{className:"absolute inset-0 border-4 border-gray-100 rounded-full"}),c.jsx("div",{className:"absolute inset-0 border-4 border-[#0a2e64] border-t-transparent rounded-full animate-spin"})]}),c.jsx("p",{className:"text-xl font-semibold text-gray-800 mb-2",children:"결제 처리 중"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"잠시만 기다려 주세요..."}),c.jsx("div",{className:"mt-6 w-64 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-[#0a2e64] rounded-full animate-progressForward"})})]})}),c.jsx(st,{}),c.jsx("style",{children:`
        @keyframes progressForward {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(0%); }
        }
        .animate-progressForward {
          animation: progressForward 1.5s ease-in-out infinite;
          width: 100%;
        }
      `})]})}function z_({date:n,type:e,balance:t,amount:s,krw:r,isDeposit:o,showAfterBalance:a}){const u={HANA:"HTK",SHINHAN:"STK",WOORI:"WTK"},[d,h]=s.split(" "),m=parseFloat(d),g=u[h==null?void 0:h.toUpperCase()]??h,x=isNaN(m)?s:`${m>0?"+":""}${m.toFixed(2)} ${g}`,[v,w]=t.split(" "),b=parseFloat(v),C=u[w==null?void 0:w.toUpperCase()]??w,E=isNaN(b)?t:`${b.toFixed(2)} ${C}`;return c.jsxs("div",{className:"space-y-2 border-b border-gray-300 pb-4",children:[c.jsx("p",{className:"text-sm text-gray-500",children:n}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:`text-xl font-bold ${o?"text-indigo-800":"text-red-600"} mb-2`,children:e}),a&&c.jsxs("p",{className:"text-gray-600 text-sm",children:["잔액: ",E]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{children:c.jsx("span",{className:`text-lg font-bold ${o?"text-indigo-800":"text-red-500"} mb-2`,children:x})}),c.jsxs("p",{className:"text-sm text-gray-600",children:["= ",r," KRW"]})]})]})]})}function q6({symbol:n,coinName:e,onClose:t,address:s,tag:r}){const o=ke();return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:c.jsxs("div",{className:"bg-white rounded-2xl px-6 py-8 text-center w-[320px] shadow-lg",children:[c.jsxs("h2",{className:"text-lg font-bold mb-6",children:[e," 코인 입금 주소 "]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-sm font-medium mb-1 text-gray-600",children:"내 주소"}),c.jsx("div",{className:"w-full border border-gray-200 rounded-xl py-3 px-4 text-blue-900 font-semibold text-sm bg-gray-50",children:s})]}),n==="XRP"&&c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-sm font-medium mb-1 text-gray-600",children:"태그 주소"}),c.jsx("div",{className:"w-full border border-gray-200 rounded-xl py-3 px-4 text-blue-900 font-semibold text-sm bg-gray-50",children:r})]}),c.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["계좌를 잘못 입력했다면?"," ",c.jsx("span",{className:"underline cursor-pointer",onClick:()=>o("/coin/address/add",{state:{symbol:n,isUser:!1,useExistingAddress:!0,address:s,tag:r}}),children:"재등록하기"})]}),c.jsx("button",{className:"bg-[#0a2e64] text-white w-full py-3 rounded-xl text-base font-semibold",onClick:t,children:"닫기"})]})})}const Ha="http://localhost:8080",X6=async({currency:n,address:e,tag:t})=>{const s=sessionStorage.getItem("accessToken"),r=await fetch(`${Ha}/api/save/address`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({currency:n,address:e,tag:t})});if(!r.ok){const o=await r.text();throw new Error(`계좌 등록 실패: ${r.status} - ${o}`)}},nw=async n=>{const e=sessionStorage.getItem("accessToken"),t=await fetch(`${Ha}/api/address?currency=${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("코인 주소 확인 실패");return t.json()},Y6=async n=>{const e=sessionStorage.getItem("accessToken");return await fetch(`${Ha}/api/resave/address`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)})},H_=async()=>{const n=sessionStorage.getItem("accessToken"),e=await fetch(`${Ha}/api/balance`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("잔액 조회 실패: "+e.status);return await e.json()},x1=async n=>{const e=sessionStorage.getItem("accessToken"),t=await fetch(`${Ha}/api/balance/${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("특정 코인 잔액 조회 실패: "+t.status);return await t.json()},Q6=async(n,e)=>{const t=sessionStorage.getItem("accessToken"),s=await fetch(`${Ha}/api/deposit`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({txid:e,currency:n})});if(!s.ok)throw new Error("입금 요청 실패: "+s.status);return s.text()},J6=async(n,e)=>{const t=sessionStorage.getItem("accessToken"),s=await fetch(`${Ha}/api/withdraw`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({currency:n,amount:e})});if(!s.ok)throw new Error("정산 요청 실패");return await s.text()},Z6=async({pageParam:n=0,queryKey:e})=>{const t=sessionStorage.getItem("accessToken"),s=e[1],r=await fetch(`${Ha}/api/history/coin?currency=${s}&page=${n}&size=5`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("입금 내역 조회 실패");return r.json()};async function eV(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`/api/unregister/address?currency=${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("계좌 등록 해제 실패: "+t.status)}const hj=n=>{let e;const t=new Set,s=(h,m)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const x=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,x))}},r=()=>e,u={setState:s,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=n(s,r,u);return u},tV=n=>n?hj(n):hj,nV=n=>n;function sV(n,e=nV){const t=ps.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return ps.useDebugValue(t),t}const fj=n=>{const e=tV(n),t=s=>sV(e,s);return Object.assign(t,e),t},y1=n=>n?fj(n):fj,v1=y1((n,e)=>({coins:[],setCoins:t=>n({coins:t}),getCoinImage:t=>{var s;return(s=e().coins.find(r=>r.currency===t))==null?void 0:s.coinImageUrl}})),W_=A.createContext({socket:null});function rV({children:n}){const[e,t]=A.useState(null);return A.useEffect(()=>{const s=new WebSocket("wss://api.upbit.com/websocket/v1");return s.binaryType="blob",s.onopen=()=>{s.send(JSON.stringify([{ticket:"ticker-stream"},{type:"ticker",codes:["KRW-XRP","KRW-USDT","KRW-SOL"]}])),t(s)},()=>{s.close()}},[]),c.jsx(W_.Provider,{value:{socket:e},children:n})}function iV(){return A.useContext(W_)}function lh(){const{socket:n}=iV(),[e,t]=A.useState({});return A.useEffect(()=>{if(!n)return;const s=r=>{const o=r.data,a=new FileReader;a.onload=()=>{try{const u=JSON.parse(a.result);u.type==="ticker"&&t(d=>({...d,[u.code]:u}))}catch(u){console.error("WebSocket parsing error:",u)}},a.readAsText(o)};return n.addEventListener("message",s),()=>n.removeEventListener("message",s)},[n]),e}function oV(){var M,O,F,D;const n=document.createElement("style");document.head.appendChild(n);const{symbol:e}=xs(),s=((M=et().state)==null?void 0:M.isUser)??!1,r=lh(),[o,a]=A.useState(null),[u,d]=A.useState(!1),[h,m]=A.useState(null),g=ke(),[x,v]=A.useState(0),b=v1(U=>U.coins).find(U=>U.currency===e),C=((O=r[`KRW-${e}`])==null?void 0:O.trade_price)??0;A.useEffect(()=>{e&&nw(e).then(U=>{a(U.addressRegistryStatus),m({address:U.address,tag:U.tag,addressStatus:U.addressRegistryStatus})}).catch(U=>{console.error("등록된 주소없음",U),a("NOT_REGISTERED"),m(null)})},[e]),A.useEffect(()=>{(async()=>{if(e)try{const K=await x1(e);v(K.balance??0)}catch(K){console.warn("잔액 조회 실패:",K)}})()},[e]);const E=A.useRef(null),{data:N,fetchNextPage:k,hasNextPage:P,isFetchingNextPage:R}=DT({queryKey:["coinHistory",e],queryFn:Z6,getNextPageParam:U=>U.last?void 0:U.pageable.pageNumber+1,enabled:!!e,initialPageParam:0});return A.useEffect(()=>{const U=new IntersectionObserver(K=>{K[0].isIntersecting&&P&&!R&&k()});return E.current&&U.observe(E.current),()=>U.disconnect()},[k,P,R]),c.jsxs("div",{className:"relative flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:`${(b==null?void 0:b.coinName)??e} 상세`,onBackClick:()=>{g("/my/coin")}}),c.jsxs("main",{className:"flex-1 overflow-auto p-3 transition-all duration-500 ease-in-out sm:p-4 md:p-5",children:[c.jsx("div",{className:"mb-4 rounded-xl border border-gray-200 bg-white p-4 shadow-[0_2px_10px_rgba(0,0,0,0.04)] transition-all duration-500 ease-in-out sm:mb-5 sm:p-8 md:mb-6 md:rounded-2xl md:border-2 md:p-12 md:shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-2 flex h-8 w-8 items-center justify-center rounded-full sm:mr-3 sm:h-9 sm:w-9 md:mr-4 md:h-10 md:w-10",children:c.jsx("img",{src:b==null?void 0:b.coinImageUrl,alt:(b==null?void 0:b.coinName)??e,className:"mr-2 h-8 w-8 rounded-full sm:mr-3 sm:h-9 sm:w-9 md:mr-4 md:h-10 md:w-10"})}),c.jsx("p",{className:"text-lg font-semibold sm:text-xl md:text-2xl",children:"총 보유"})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-lg font-bold sm:text-xl md:text-2xl",children:[x.toFixed(2)," ",e]}),c.jsxs("p",{className:"text-sm text-gray-500 sm:text-base",children:["= ",(x*C).toLocaleString()," KRW KRW"]})]})]})}),c.jsxs("div",{className:"mb-4 w-full sm:mb-5 md:mb-6",children:[c.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[c.jsxs("button",{className:"flex flex-1 items-center justify-center gap-1 rounded-lg bg-[#0a2e64] py-1.5 text-base font-semibold text-white shadow sm:gap-2 sm:rounded-xl sm:py-2 sm:text-lg",onClick:()=>{setTimeout(()=>{g(`/coin/address/${e}`,{state:{isUser:s,symbol:e}})},200)},children:[c.jsx(PN,{className:"h-4 w-4 sm:h-5 sm:w-5",stroke:o==="ACTIVE"?"white":"gray"}),c.jsx("span",{className:"sm:text-base, text-sm text-white",children:"코인 충전"})]}),c.jsxs("button",{className:`flex flex-1 items-center justify-center gap-1 rounded-lg py-1.5 text-base font-semibold shadow transition sm:gap-2 sm:rounded-xl sm:py-2 sm:text-lg ${o==="ACTIVE"?"bg-[#0a2e64] text-white":"cursor-not-allowed bg-gray-300 text-gray-400"}`,disabled:o!=="ACTIVE",onClick:()=>{o==="ACTIVE"&&setTimeout(()=>{g("/settlement",{state:{isUser:s,symbol:e}})},200)},children:[c.jsx(PN,{className:"h-4 w-4 sm:h-5 sm:w-5",stroke:o==="ACTIVE"?"white":"gray"}),c.jsx("span",{className:"text-sm text-white sm:text-base",children:"코인 출금"})]})]}),c.jsx("div",{className:`mt-2 w-full rounded-lg py-2 text-center text-sm font-medium transition sm:mt-3 sm:rounded-xl sm:py-3 sm:text-base ${o==="REGISTERING"||o==="UNREGISTERED_AND_REGISTERING"?"cursor-not-allowed bg-gray-300 text-gray-400":"cursor-pointer bg-[#0a2e64] text-white"}`,style:{boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>{o==="REGISTERING"||o==="UNREGISTERED_AND_REGISTERING"?d(!0):g("/coin/address/add",{state:{symbol:e}})},children:c.jsxs("span",{className:"text-white",children:[o==="ACTIVE"&&"계좌가 등록되어 있습니다. 변경하려면 눌러주세요.",o==="REGISTERING"&&"계좌가 등록중입니다.",o==="UNREGISTERED"&&"계좌가 등록 해제 중입니다...",o==="UNREGISTERED_AND_REGISTERING"&&"계좌 등록 해제 후 변경 중입니다...",o==="NOT_REGISTERED"&&"출금계좌 등록하기",o==="REJECTED"&&"거절 되었습니다 다시 등록하기"]})})]}),u&&h&&c.jsx(q6,{symbol:e,coinName:(b==null?void 0:b.coinName)||e||"",address:h.address,tag:h.tag,onClose:()=>d(!1)}),c.jsxs("div",{className:"mb-3 flex items-center justify-between sm:mb-4",children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 sm:text-lg",children:"거래 내역"}),c.jsxs("button",{className:"flex items-center text-xs font-medium text-[#0a2e64] sm:text-sm",children:["전체보기",c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ml-1",children:c.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),c.jsxs("div",{className:"space-y-4 pb-16 text-sm sm:space-y-5 sm:pb-10 sm:text-base md:space-y-6 md:text-lg lg:text-xl",children:[N==null?void 0:N.pages.map((U,K)=>U.content.map((X,ee)=>{var G;const J=((G=r[`KRW-${e}`])==null?void 0:G.trade_price)??0,ae=Math.floor(X.amount*J).toLocaleString(),Y=X.status==="ACCEPTED";return c.jsx("div",{className:"transition-all duration-300 ease-in-out",children:c.jsx(z_,{date:new Date(X.transferredAt).toLocaleString(),type:X.type==="DEPOSIT"?X.status==="ACCEPTED"?"입금 완료":"입금 대기중":X.type==="WITHDRAW"?X.status==="ACCEPTED"?"출금 완료":"출금 대기중":X.type==="PAY"?X.status==="ACCEPTED"?"결제 완료":X.status==="PENDING"?"정산 대기중":X.status==="FAILED"?"결제 취소":"환불 완료":X.type==="REFUND"?"환불 완료":X.type==="EXCHANGE"?X.amount>0?"환전 입금 완료":"환전 출금 완료":"알 수 없음",balance:`${X.afterBalance??"-"} ${e}`,amount:X.amount.toFixed(2)+" "+e,krw:`${ae} KRW`,isDeposit:X.type==="DEPOSIT"||X.type==="EXCHANGE"&&X.amount<0||X.type==="PAY"&&X.amount<0,showAfterBalance:Y})},`${K}-${ee}`)})),c.jsxs("div",{ref:E,className:"mt-4 flex h-10 items-center justify-center",children:[R&&c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-gray-200 border-t-[#0a2e64]"}),!P&&((F=N==null?void 0:N.pages[0])==null?void 0:F.content.length)>0&&c.jsx("p",{className:"text-sm text-gray-500",children:"더 이상 거래 내역이 없습니다"}),((D=N==null?void 0:N.pages[0])==null?void 0:D.content.length)===0&&c.jsx("p",{className:"text-sm text-gray-500",children:"거래 내역이 없습니다"})]})]})]}),c.jsx(st,{})]})}function G_({isOpen:n,onClose:e,children:t,title:s}){const r=A.useRef(null);A.useEffect(()=>{const a=u=>{u.key==="Escape"&&n&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[n,e]);const o=a=>{r.current&&!r.current.contains(a.target)&&e()};return A.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),n?sh.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:o,children:c.jsxs("div",{ref:r,className:"bg-white rounded-lg shadow-lg w-full max-w-md mx-4 overflow-hidden",onClick:a=>a.stopPropagation(),children:[s&&c.jsx("div",{className:"p-4 border-b",children:c.jsx("h2",{className:"text-lg font-medium text-center",children:s})}),c.jsx("div",{className:"p-4",children:t})]})}),document.body):null}function aV({isOpen:n,onClose:e,onAccept:t}){const[s,r]=A.useState(null),o=["10분","20분","30분","40분","50분","60분"],a=()=>{s!==null&&(t(s),e())};return c.jsx(G_,{isOpen:n,onClose:e,children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"text-center text-base font-medium mb-4",children:"주문 처리까지 필요한 시간을 선택해주세요."}),c.jsx("div",{className:"space-y-2",children:o.map(u=>c.jsx("div",{onClick:()=>r(u),className:`p-3 rounded-md cursor-pointer ${s===u?"bg-blue-50 border border-blue-500":"hover:bg-gray-50"}`,children:u},u))}),c.jsx("button",{onClick:a,disabled:s===null,className:`w-full mt-6 py-3 rounded-md text-white font-medium ${s===null?"bg-blue-300":"bg-[#0a2e65]"}`,children:"수락"})]})})}const lV={"매장에 자리가 없어요":"자리없음","매장 주문이 너무 많아요":"주문많음","매장에 재고가 없어요":"재고없음"};function cV({isOpen:n,onClose:e,onReject:t}){const[s,r]=A.useState(null),o=["매장에 자리가 없어요","매장 주문이 너무 많아요","매장에 재고가 없어요"],a=()=>{if(s!==null){const u=lV[s];t(u),e()}};return c.jsx(G_,{isOpen:n,onClose:e,children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"text-center text-base font-medium mb-4",children:"거절 사유를 선택해주세요."}),c.jsx("div",{className:"space-y-2",children:o.map(u=>c.jsx("div",{onClick:()=>r(u),className:`p-3 rounded-md cursor-pointer ${s===u?"bg-red-50 border border-red-500":"hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-5 h-5 rounded-full border ${s===u?"border-red-500 bg-red-500":"border-gray-300"} mr-3 flex items-center justify-center`,children:s===u&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),c.jsx("span",{children:u})]})},u))}),c.jsx("button",{onClick:a,disabled:s===null,className:`w-full mt-6 py-3 rounded-md text-white font-medium ${s===null?"bg-red-300":"bg-red-500"}`,children:"거절"})]})})}function uV(){const n=ke(),e=et(),[t,s]=A.useState([]),[r,o]=A.useState(!1),[a,u]=A.useState(!1),[d,h]=A.useState(null);A.useEffect(()=>{(async()=>{try{const P=(await P3()).map(R=>({id:R.orderId,number:R.orderId,type:R.orderType,status:R.status==="WAITING"?"주문 접수":R.status,items:R.orderDetails.map(M=>({name:M.menuName,quantity:M.menuCount})),expanded:!1}));s(P)}catch(k){console.error("Failed to fetch orders:",k)}})()},[]);const m=N=>{s(t.map(k=>k.id===N?{...k,expanded:!k.expanded}:k))},g=N=>{h(N),o(!0)},x=N=>{h(N),u(!0)},v=async N=>{if(d)try{const k=await _3(d,N);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);s(P=>P.map(R=>R.id===d?{...R,status:"수락 완료",timeRemaining:parseInt(N)}:R))}catch(k){console.error("Failed to accept order:",k)}finally{o(!1)}},w=async N=>{if(d)try{const k=await R3(d,N);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);s(P=>P.map(R=>R.id===d?{...R,status:"거절됨",rejectionReason:N}:R))}catch(k){console.error("Failed to refuse order:",k)}finally{u(!1)}},b=async N=>{try{const k=await L3(N);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);s(P=>P.map(R=>R.id===N?{...R,status:"준비 완료",timeRemaining:void 0}:R))}catch(k){console.error("Failed to complete order:",k)}},C=N=>{s(t.map(k=>k.id===N?{...k,status:"수락 완료",timeRemaining:15}:k))},E=()=>{n("/store/manage")};return e.pathname.includes("/store"),c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:"주문 현황"}),c.jsx("main",{className:"flex-1 bg-gray-100 overflow-auto",children:t.map(N=>c.jsx("div",{className:"bg-white mb-2 border-b border-gray-200 mt-2",children:c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"font-bold",children:["Order #",N.number]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("p",{className:"text-gray-600 text-base mr-2",children:N.type}),c.jsx("span",{className:"px-2 py-0.5 rounded-full text-sm",style:{color:"#0C2B5F"},children:N.status})]})]}),c.jsx("button",{onClick:()=>m(N.id),className:"p-1 rounded-full",children:c.jsx("img",{src:N.expanded?"/foldingbutton.png":"/expandbutton.png",alt:N.expanded?"Collapse":"Expand",className:"w-7 h-7"})})]}),N.expanded&&c.jsxs("div",{className:"mt-2",children:[N.items.map((k,P)=>c.jsxs("div",{className:"flex justify-between py-1 text-sm",children:[c.jsx("span",{children:k.name}),c.jsxs("span",{children:[k.quantity,"개"]})]},P)),N.status==="거절됨"&&N.rejectionReason&&c.jsx("div",{className:"mt-2 p-2 bg-red-50 rounded-md",children:c.jsxs("p",{className:"text-red-600 text-sm font-medium",children:["거절 사유: ",N.rejectionReason]})})]}),c.jsxs("div",{className:"mt-4 flex justify-between",children:[N.status==="주문 접수"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>x(N.id),className:"px-6 py-2 border border-red-500 text-red-500 rounded-md",children:"거절"}),c.jsx("button",{onClick:()=>g(N.id),className:"px-6 py-2 bg-white border border-gray-300 text-gray-700 rounded-md",children:"수락"})]}),N.status==="수락 완료"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"px-4 py-2 bg-red-100 text-red-600 rounded-md",children:[N.timeRemaining,"분 남음"]}),c.jsx("button",{onClick:()=>b(N.id),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md",children:"준비 완료"})]}),N.status==="준비 완료"&&c.jsx("button",{onClick:()=>C(N.id),className:"ml-auto px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md",children:"준비 완료 취소"}),N.status==="종료"&&c.jsx("div",{className:"ml-auto px-4 py-2 bg-gray-100 text-gray-500 rounded-md",children:"완료됨"}),N.status==="거절됨"&&c.jsx("div",{className:"ml-auto px-4 py-2 bg-red-100 text-red-500 rounded-md",children:"거절됨"})]})]})},N.id))}),c.jsx("div",{className:"p-4 bg-gray-100",children:c.jsx(Be,{text:"가게 설정",onClick:E,className:"w-full py-4 bg-[#0a2e65] text-white rounded-md font-medium"})}),c.jsx(st,{}),c.jsx(aV,{isOpen:r,onClose:()=>o(!1),onAccept:v}),c.jsx(cV,{isOpen:a,onClose:()=>u(!1),onReject:w})]})}const K_="http://localhost:8080";async function dV(){const n=sessionStorage.getItem("accessToken"),e=await fetch(`${K_}/api/store`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error("가게 목록을 불러오는데 실패했습니다");return e.json()}async function q_(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${K_}/api/store/${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("가게 상세 정보를 불러오는데 실패했습니다");return t.json()}function hV(){const n=ke(),{id:e}=xs(),[t,s]=A.useState([]),[r,o]=A.useState(!1),[a,u]=A.useState(!1),[d,h]=A.useState("추천메뉴"),[m,g]=A.useState(null),[x,v]=A.useState(!0),[w,b]=A.useState(null);A.useEffect(()=>{const P=localStorage.getItem("cartItems");P&&s(JSON.parse(P))},[]),A.useEffect(()=>{(async()=>{try{if(v(!0),!e)throw new Error("가게 ID가 유효하지 않습니다.");const R=await q_(e),M={likeCount:R.likeCount,storeName:R.storeName,storeAddress:R.storeAddress,storeImageUrl:R.storeImageUrl,coinList:R.coinList,menuList:R.menuList};g(M)}catch(R){b(R instanceof Error?R.message:"알 수 없는 오류")}finally{v(!1)}})(),window.scrollTo(0,0)},[e]);const C=P=>{const R=Number(e);o(!0),s(M=>{if(M.length>0&&M[0].storeId!==R){const F=[{...P,storeId:R,quantity:1}];return localStorage.setItem("cartItems",JSON.stringify(F)),F}if(M.find(F=>F.id===P.id&&F.storeId===R)){const F=M.map(D=>D.id===P.id&&D.storeId===R?{...D,quantity:D.quantity+1}:D);return localStorage.setItem("cartItems",JSON.stringify(F)),F}else{const F=[...M,{...P,storeId:R,quantity:1}];return localStorage.setItem("cartItems",JSON.stringify(F)),F}})},E=(P,R)=>{s(M=>M.map(O=>{if(O.id===P){const F=Math.max(0,O.quantity+R);return{...O,quantity:F}}return O}).filter(O=>O.quantity>0)),t.length===0&&(o(!1),u(!1))},N=t.reduce((P,R)=>P+R.quantity,0),k=t.reduce((P,R)=>P+R.price*R.quantity,0);return x?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("p",{className:"text-lg font-bold text-gray-500",children:"가게 정보를 불러오는 중..."})}):w||!m?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("p",{className:"text-lg font-bold text-gray-500",children:"가게를 찾을 수 없습니다."})}):c.jsxs("div",{className:"flex flex-col h-full bg-gray-50 relative",children:[c.jsx(Ie,{title:m.storeName,isStore:!0}),c.jsxs("main",{className:"flex-1 overflow-auto pb-16",children:[c.jsxs("div",{className:"bg-white shadow-sm mb-4 min-h-[450px]",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:m.storeImageUrl||"/store-image.png",alt:`${m.storeName} 가게사진`,className:"w-full h-72 object-cover"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6",children:c.jsx("h2",{className:"text-white text-2xl font-bold",children:m.storeName})})]}),c.jsx("div",{className:"flex justify-end px-6 mt-5",children:c.jsxs("div",{className:"flex items-center text-sm text-zinc-500",children:[c.jsx(iP,{size:18,className:"mr-1 fill-red-500 stroke-red-500"}),m.likeCount]})}),c.jsxs("div",{className:"text-center px-6 mt-4 mb-6",children:[c.jsx("p",{className:"text-base tracking-tight mt-2 text-gray-700",children:m.storeAddress}),c.jsx("div",{className:"flex justify-center mt-5 mb-5",children:c.jsx(Oy,{coins:m.coinList})})]})]}),c.jsx("div",{className:"bg-white pb-4",children:c.jsx("div",{className:"divide-y divide-gray-100 px-5",children:m.menuList.map(P=>c.jsx("div",{className:"py-4",children:c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("div",{className:"flex-1 pr-4",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:P.menuName}),c.jsxs("div",{className:"mt-2 font-bold text-gray-900",children:[P.menuPrice.toLocaleString()," KRW"]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"h-24 w-24 rounded-lg overflow-hidden bg-gray-100",children:c.jsx("img",{src:P.menuImage||"/store-image.png",alt:P.menuName,className:"h-full w-full object-cover"})}),c.jsx("button",{onClick:()=>C({id:P.menuId,name:P.menuName,price:P.menuPrice,image:P.menuImage}),className:"absolute -bottom-2 -right-2 bg-[#002169] rounded-full p-2 shadow-md hover:bg-[#001d5a]",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]})},P.menuId))})})]}),c.jsx(st,{}),t.length>0&&c.jsx("div",{className:"fixed bottom-16 left-0 right-0 z-20 flex justify-center",children:c.jsxs("div",{className:"bg-white border-t border-gray-200 shadow-lg rounded-t-lg w-full max-w-md mx-auto",children:[c.jsxs("div",{className:"py-3 px-5 flex items-center justify-between cursor-pointer",onClick:()=>u(!a),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-[#002169] rounded-full p-2 mr-3",children:c.jsx(aP,{className:"h-5 w-5 text-white"})}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[N,"개 항목"]}),c.jsx("p",{className:"text-xs text-gray-500",children:"탭하여 장바구니 상세보기"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("span",{className:"font-bold text-lg mr-2",children:[k.toLocaleString()," KRW"]}),c.jsx(JS,{className:`h-5 w-5 text-gray-500 transition-transform ${a?"rotate-180":""}`})]})]}),c.jsx("div",{className:`transition-all duration-300 ${a?"max-h-48 overflow-y-auto":"max-h-0 overflow-hidden"}`,children:c.jsx("div",{className:"px-5 pb-2",children:c.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:t.map(P=>c.jsxs("div",{className:"flex justify-between items-center py-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900",children:P.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[P.price.toLocaleString()," KRW"]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{onClick:R=>{R.stopPropagation(),E(P.id,-1)},className:"w-8 h-8 flex items-center justify-center text-gray-500 bg-white rounded-full border border-gray-200",children:"-"}),c.jsx("span",{className:"w-8 text-center font-medium",children:P.quantity}),c.jsx("button",{onClick:R=>{R.stopPropagation(),E(P.id,1)},className:"w-8 h-8 flex items-center justify-center text-gray-500 bg-white rounded-full border border-gray-200",children:"+"})]})]},P.id))})})}),c.jsx("div",{className:"px-5 py-3 border-t border-gray-100",children:c.jsxs("div",{className:"flex justify-center gap-3",children:[c.jsx(Be,{text:"취소하기",onClick:()=>{s([]),o(!1),u(!1),localStorage.setItem("cartItems",JSON.stringify([])),localStorage.setItem("totalPrice",JSON.stringify([]))},className:"w-1/2 py-3 rounded-lg font-medium bg-gray-100 text-black border border-gray-200"}),c.jsx(Be,{text:"주문하기",onClick:()=>n("/mall/store/cart"),className:"w-1/2 py-3 rounded-lg font-medium bg-[#002169] text-white shadow-sm"})]})})]})})]})}function fV({isOpen:n,onClose:e,title:t,coins:s=[]}){if(!n)return null;const r={XRP:"bg-yellow-100 text-yellow-800 border-yellow-100",USDT:"bg-green-100 text-green-800 border-green-100",SOL:"bg-purple-100 text-purple-800 border-purple-100",default:"bg-gray-500 text-gray-800 border-gray-100"},[o,a]=A.useState([]),u=h=>{a(m=>m.includes(h)?m.filter(g=>g!==h):[...m,h])},d=async()=>{if(!sessionStorage.getItem("accessToken")){alert("로그인이 필요합니다.");return}try{await T3(o),alert("결제 수단 지원 설정이 업데이트되었습니다."),e()}catch(m){console.error("코인 업데이트 실패:",m),alert("코인 업데이트 중 오류가 발생했습니다.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-sm w-full",children:[c.jsx("h3",{className:"text-center text-lg font-medium mb-6",children:t}),c.jsx("div",{className:"flex justify-around",children:s.map((h,m)=>{const g=typeof h=="string"?h:h.name||"",x=o.includes(g);return c.jsx("button",{onClick:()=>g&&u(g),className:`px-4 py-2 rounded-full text-sm transition-colors border 
                   ${r[g]||r.default}
                   ${x?"font-semibold":""}
                  `,children:g},m)})}),c.jsxs("div",{className:"flex justify-center mt-6 space-x-3",children:[c.jsx("button",{onClick:d,className:"bg-[#0a2e65] text-white px-8 py-2 rounded w-full",children:"변경하기"}),c.jsx("button",{onClick:e,className:"bg-gray-300 text-black px-8 py-2 rounded w-full",children:"취소"})]})]})})}function pV(){const[n,e]=A.useState(""),[t,s]=A.useState(""),r=ke(),[o,a]=A.useState([]),[u,d]=A.useState(!1);sessionStorage.getItem("accessToken");const h=async()=>{if(!n.trim()){alert("가게명을 입력해주세요!");return}try{const x=await S3(n);alert(`가게명이 "${n}"(으)로 변경되었습니다.`)}catch(x){console.error("가게명 변경 실패:",x),alert("가게명 변경 중 오류가 발생했습니다.")}},m=async()=>{if(!t.trim()){alert("주소를 입력해주세요!");return}try{const x=await A3(t);if(!x.ok){const v=await x.text();throw new Error(v||"주소 변경에 실패했습니다.")}alert(`주소가 "${t}"(으)로 변경되었습니다.`)}catch(x){console.error("주소 변경 실패:",x),alert("주소 변경 중 오류가 발생했습니다.")}},g=()=>{r("/store/menu/add",{state:{isUser:!0}})};return A.useEffect(()=>{(async()=>{try{const v=sessionStorage.getItem("accessToken"),w=await fm();console.log("API 응답:",w),a(w.menuList??[])}catch(v){console.error("메뉴 불러오기 실패:",v),alert("메뉴 정보를 불러오는 데 실패했습니다.")}})()},[]),c.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[c.jsx(Ie,{title:"메뉴/결제수단 설정"}),c.jsxs("div",{className:"flex-1 px-4 py-4 overflow-auto",children:[c.jsxs("div",{className:"bg-white p-5 mb-2",children:[c.jsx("h2",{className:"font-medium mb-2 font-bold",children:"가게명 변경"}),c.jsx(Xn,{label:"가게명",value:n,onChange:x=>e(x.target.value),placeholder:"가게명을 입력해주세요."}),c.jsx(Be,{text:"변경하기",onClick:h,className:"mt-3 w-full bg-[#0a2158] text-white py-3 rounded-lg font-medium"})]}),c.jsxs("div",{className:"bg-white p-5 mb-2",children:[c.jsx("h2",{className:"font-medium mb-2 font-bold",children:"주소"}),c.jsx(Xn,{label:"주소",value:t,onChange:x=>s(x.target.value),placeholder:"주소를 입력해주세요."}),c.jsx(Be,{text:"변경하기",onClick:m,className:"mt-3 w-full bg-[#0a2158] text-white py-3 rounded-lg font-medium"})]}),c.jsxs("div",{className:"bg-white p-4 mb-2 cursor-pointer",onClick:()=>d(!0),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"결제 수단 지원 설정"}),c.jsx(ky,{className:"w-5 h-5 text-gray-400"})]}),o.map(x=>c.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-gray-200 cursor-pointer",onClick:()=>r(`/store/menu/edit/${x.menuId}`),children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:x.menuName}),c.jsxs("p",{className:"text-sm text-gray-600",children:[x.menuPrice.toLocaleString()," KRW"]})]}),c.jsx("img",{src:x.menuImage||"/placeholder.svg",alt:x.menuName,className:"w-20 h-20 object-cover rounded"})]},x.menuId)),c.jsx("div",{className:"p-3",children:c.jsx(Be,{text:"메뉴 추가하기",onClick:g,color:"blue",className:"mt-3 w-full bg-[#0a2158] text-white py-3 rounded-lg font-medium"})})]})]}),c.jsx(fV,{isOpen:u,onClose:()=>d(!1),title:"결제 수단 선택",coins:[{name:"XRP"},{name:"USDT"},{name:"SOL"}]}),c.jsx(st,{})]})}function pj({label:n,value:e,placeholder:t,onChange:s,className:r="mb-6"}){return c.jsxs("div",{className:r,children:[c.jsx("h3",{className:"text-base font-medium mb-2",children:n}),c.jsx("input",{type:"text",value:e,onChange:s,placeholder:t,className:"w-full p-3 border-b border-gray-300 focus:outline-none focus:border-[#0a2158]"})]})}const mV=()=>c.jsxs("div",{children:[c.jsx("p",{className:"text-base mb-4",children:"고객님의 주소를 확인하는 방법"}),c.jsxs("ol",{className:"list-decimal pl-5 text-sm space-y-2",children:[c.jsx("li",{children:"https://upbit.com/balances/SOL?tab=deposit"}),c.jsx("li",{children:"출금할 코인 수량 입력"}),c.jsx("li",{children:"입금 네트워크와 현재 선택한 코인이 동일한지 확인"}),c.jsx("li",{children:"입금주소 복사"})]})]});function gV(){const n=ke(),e=et(),{symbol:t}=e.state||{},[s,r]=A.useState(),[o,a]=A.useState(),[u,d]=A.useState(),[h,m]=A.useState(null),[g,x]=A.useState(null);A.useEffect(()=>{t&&nw(t).then(E=>{m(E.addressRegistryStatus),x({address:E.address,tag:E.tag,addressStatus:E.addressRegistryStatus}),E.address&&d(!0)}).catch(E=>{console.error("등록된 주소없음",E),m("NOT_REGISTERED"),x(null)})},[t]);const v=async()=>{if(t)try{await eV(t);const E=await nw(t);if(E!=null&&E.addressRegistryStatus)m(E.addressRegistryStatus),x({address:E.address,tag:E.tag,addressStatus:E.addressRegistryStatus});else throw new Error("계좌 상태를 불러오지 못했습니다.")}catch(E){alert("등록 해제 요청 실패"),console.error(E)}},w=()=>h==="UNREGISTERED_AND_REGISTERING"?"등록 해제 후 변경 중..":h==="UNREGISTERED"?"등록 해제중..":"등록 해제",b=async()=>{if(!t){alert("코인 심볼이 없습니다.");return}try{const E={currency:t,address:s,tag:t==="XRP"?o:void 0};u?(await Y6(E),alert("계좌가 재등록되었습니다.")):(await X6(E),alert("계좌 등록이 완료되었습니다.")),n(`/coin-detail/${t}`,{state:{isUser:!1}})}catch(E){alert(E.message||"계좌 등록 중 오류 발생"),console.error(E)}},C=!s;return c.jsxs("div",{className:"flex h-screen flex-col bg-white",children:[c.jsx(Ie,{title:"코인 입금"}),c.jsx("div",{className:"flex-1 overflow-auto px-6 py-6",children:c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"mb-8 rounded-lg bg-gray-50 p-4 shadow-sm",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-blue-100 mr-3 flex h-10 w-10 items-center justify-center rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-blue-600 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["네트워크: ",t]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[t," 토큰을 지원하는 블록체인 네트워크"]})]}),(h==="ACTIVE"||h==="UNREGISTERED_AND_REGISTERING"||h==="UNREGISTERED")&&c.jsx("button",{onClick:v,disabled:h==="UNREGISTERED",className:"ml-32 mt-1.5 min-w-[140px] whitespace-nowrap rounded px-4 py-1 text-sm font-bold text-red-600 hover:bg-red-200 disabled:opacity-50",children:w()})]})]})}),c.jsxs("div",{className:"mb-8 rounded-lg border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsx(pj,{label:`고객님의 ${t} 주소`,value:s,onChange:E=>r(E.target.value),placeholder:`고객님의 ${t} 주소를 입력해주세요.`}),t==="XRP"&&c.jsx(pj,{label:"고객님의 XRP Tag 주소",value:o,onChange:E=>a(E.target.value),placeholder:"고객님의 XRP 태그를 입력해주세요.",className:"mt-6"})]}),(g==null?void 0:g.address)&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("p",{className:"mb-1 text-sm font-medium text-gray-600",children:[t," 출금 주소"]}),c.jsx("div",{className:"text-blue-900 w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold",children:g.address})]}),t==="XRP"&&c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"mb-1 text-sm font-medium text-gray-600",children:"태그 주소"}),c.jsx("div",{className:"text-blue-900 w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold",children:g.tag})]})]}),c.jsxs("div",{className:"rounded-lg border border-yellow-100 bg-yellow-50 p-4",children:[c.jsxs("h3",{className:"mb-2 flex items-center text-sm font-medium text-yellow-800",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-1 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),"안내사항"]}),c.jsx(mV,{})]})]})}),c.jsx("div",{className:"bg-white p-5",children:c.jsx(Be,{text:u?"계좌 재등록 요청":"계좌 등록 요청",onClick:b,disabled:C,color:C?"gray":"blue",className:"w-full rounded-lg py-3 text-lg font-medium shadow-md"})}),c.jsx(st,{})]})}const xV=({amount:n,onAmountChange:e,symbol:t,equivalentValue:s})=>c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"flex items-end mb-2",children:c.jsxs("div",{className:"flex-1 flex items-baseline",children:[c.jsx("input",{type:"text",value:n,onChange:r=>e(r.target.value),className:"text-3xl font-bold w-full bg-transparent border-none outline-none p-0",style:{color:"#0C2B5F"},inputMode:"decimal"}),c.jsx("span",{className:"text-xl font-medium text-gray-700 ml-2",children:t})]})}),c.jsxs("div",{className:"flex justify-between items-center pb-1 border-b border-gray-200",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:["= ",s]}),c.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"환율 적용"})]})]}),yV=({percentages:n,selectedPercentage:e,onPercentageClick:t})=>c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(s=>c.jsxs("button",{onClick:()=>t(s),className:`px-4 py-2 rounded-lg text-sm transition-all duration-200 flex items-center justify-center min-w-16 border ${e===s?"bg-white text-blue-600 font-bold border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 font-medium border-transparent"}`,children:[s,"%"]},s))}),vV=({availableAmount:n,symbol:e,equivalentValue:t})=>c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-lg text-gray-700 font-bold mb-1",children:"정산 가능 금액"})}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-xl font-bold",children:[n.toFixed(2).toLocaleString()," ",c.jsx("span",{className:"text-lg",children:e})]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["= ",t]})]})]});function bV(){var b,C;const[n,e]=A.useState("3.45"),[t,s]=A.useState(70),r=ke(),a=((b=et().state)==null?void 0:b.symbol)||"XRP",d=((C=lh()[`KRW-${a}`])==null?void 0:C.trade_price)??0,h=E=>{e(E)},m=E=>{s(E);const N=(g*(E/100)).toFixed(2);e(N)},[g,x]=A.useState(0),v=E=>{const N=parseFloat(E);return isNaN(N)?"0 KRW":`${Math.floor(N*d).toLocaleString()} KRW`};A.useEffect(()=>{(async()=>{try{const N=await x1(a);x(N.balance??0);const k=(N.balance*t/100).toFixed(2);e(k)}catch(N){console.warn("잔액 조회 실패:",N)}})()},[a]);const w=async()=>{try{await J6(a,n),alert("정산 요청이 완료되었습니다."),r(`/coin-detail/${a}`,{state:{symbol:a}})}catch(E){E instanceof Error&&(alert("정산 요청 실패: "+E.message),console.error(E))}};return c.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[c.jsx(Ie,{title:`${a} 정산`}),c.jsxs("main",{className:"flex-1 overflow-auto px-6 pt-6 pb-24 flex flex-col",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),c.jsx("h1",{className:"text-xl text-gray-800 font-bold",children:"정산받을 금액을 입력하세요"})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:c.jsx(xV,{amount:n,onAmountChange:h,symbol:a,equivalentValue:v(n)})}),c.jsxs("div",{className:"mb-8",children:[c.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"빠른 금액 선택"}),c.jsx(yV,{percentages:[10,20,30,50,70,100],selectedPercentage:t,onPercentageClick:m})]}),c.jsx("div",{className:"h-px bg-gray-200 my-6"}),c.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:c.jsx(vV,{availableAmount:g,symbol:a,equivalentValue:v(String(g))})})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"정산 안내"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["정산 요청 후 영업일 기준 1-2일 내에 처리됩니다. 정산 최소 금액은 0.4 ",a,"입니다."]})]})]})}),c.jsx("div",{className:"flex-grow"})]}),c.jsx("div",{className:"p-5 bg-white",children:c.jsx(Be,{text:"정산 요청",onClick:w,color:"primary",className:"py-4 text-lg font-medium rounded-xl shadow-md"})}),c.jsx(st,{})]})}function wV({networkName:n}){return c.jsx("div",{className:"bg-white rounded-xl p-5 shadow-md mb-6 border border-blue-100",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mr-4 shadow-sm",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["네트워크: ",n]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[n," 토큰을 지원하는 네트워크"]})]})]})})}function SV({address:n,copied:e,onCopy:t}){return c.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md mb-6 border border-gray-100",children:[c.jsx("p",{className:"text-base font-bold mb-3 text-gray-800",children:"입금할 주소"}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3 border border-gray-200",children:[c.jsx("span",{className:"text-blue-600 font-mono font-medium text-sm break-all mr-2",children:n}),c.jsx("button",{onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-600 p-2 rounded-lg transition-colors",children:c.jsx(L5,{size:18})})]}),e&&c.jsxs("div",{className:"flex items-center mt-2 text-green-500 text-sm",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"주소가 복사되었습니다"]})]})}const AV=()=>c.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md mb-6 border border-gray-100",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("p",{className:"text-base font-bold text-gray-800",children:"입금하는 방법"})]}),c.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 mb-4 border border-yellow-100",children:[c.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"안내사항"}),c.jsx("p",{className:"text-xs text-yellow-700",children:"반드시 정확한 주소로 입금해주세요. 잘못된 주소로 입금 시 복구가 불가능합니다."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-blue-600",children:"1"})}),c.jsx("p",{className:"text-sm text-gray-700",children:"https://upbit.com/balances/SOL?tab=withdraw"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-blue-600",children:"2"})}),c.jsx("p",{className:"text-sm text-gray-700",children:"출금할 코인 수량 입력"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-blue-600",children:"3"})}),c.jsx("p",{className:"text-sm text-gray-700",children:"확인 버튼 클릭"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-blue-600",children:"4"})}),c.jsx("p",{className:"text-sm text-gray-700",children:"입금처: 입력된 선택"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-blue-600",children:"5"})}),c.jsx("p",{className:"text-sm text-gray-700",children:"받는사람 주소 입력 상단의 입금할 주소 복사하여 붙여넣기"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-red-600",children:"6"})}),c.jsx("p",{className:"text-sm font-bold text-red-600",children:"출금 신청"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-red-600",children:"7"})}),c.jsx("p",{className:"text-sm font-bold text-red-600",children:"거래내역에 접속"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-red-600",children:"8"})}),c.jsx("p",{className:"text-sm font-bold text-red-600",children:"거래 ID 복사"})]}),c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:c.jsx("span",{className:"text-xs font-bold text-red-600",children:"9"})}),c.jsx("p",{className:"text-sm font-bold text-red-600",children:"하단의 입금 요청 클릭 후 거래 ID 입력"})]})]})]});function EV(){const[n,e]=A.useState(!1),t=ke(),{symbol:s}=xs(),r=()=>{navigator.clipboard.writeText("TNgzwecDR23DDKFodjkfn20d"),e(!0),setTimeout(()=>e(!1),2e3)},o=()=>{t(`/coin/transaction/${s}`,{state:{isUser:!0}})};return c.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[c.jsx(Ie,{title:"코인 입금"}),c.jsx("div",{className:"flex-1 px-6 py-6 overflow-auto bg-gray-50",children:c.jsxs("div",{className:"mb-16 max-w-md mx-auto",children:[c.jsx(wV,{networkName:s||"Unknown"}),c.jsx(SV,{address:"TNgzwecDR23DDKFodjkfn20d",copied:n,onCopy:r}),c.jsx(AV,{})]})}),c.jsx("div",{className:"p-5 bg-white shadow-lg border-t border-gray-100",children:c.jsx(Be,{text:"입금 확인",onClick:o,color:"blue",className:"w-full rounded-lg py-3 font-semibold text-lg shadow-md"})}),c.jsx(st,{})]})}function CV({value:n,onChange:e}){return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-lg font-semibold mb-3 text-gray-700",children:"거래 ID"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:t=>e(t.target.value),placeholder:"예: TNgzwecDR23DDKFodjkfn20d",className:"w-full border border-gray-300 rounded-lg py-3 px-4 text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),n&&c.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),c.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})})]})]})}const NV=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"입금 가이드"}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[c.jsx("h4",{className:"font-medium text-blue-700 mb-3",children:"STEP 1"}),c.jsx("p",{className:"text-gray-700 mb-2 text-sm",children:"Upbit 내 출금 완료 후 해당 코인 내역에 접속 후 거래 내역 클릭"}),c.jsx("p",{className:"text-red-600 font-medium text-sm mb-4",children:"※ 출금이 완료되었는지 반드시 확인하세요!"}),c.jsx("div",{className:"bg-white p-2 rounded-lg border border-gray-200",children:c.jsx("img",{src:"/transaction1.svg",alt:"출금 완료 확인 이미지",className:"w-full rounded"})})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[c.jsx("h4",{className:"font-medium text-blue-700 mb-3",children:"STEP 2"}),c.jsx("p",{className:"text-gray-700 mb-4 text-sm",children:"거래 ID를 복사하여 Crepe에 입력하여 거래 확인"}),c.jsx("div",{className:"bg-white p-2 rounded-lg border border-gray-200",children:c.jsx("img",{src:"/transaction2.svg",alt:"거래 ID 복사 이미지",className:"w-full rounded"})})]})]});function jV(){const n=ke(),t=xs().symbol,[s,r]=A.useState(""),o=!s,a=async()=>{if(!t){alert("코인 심볼이 없습니다.");return}if(!s){alert("거래 ID를 입력해주세요.");return}console.log(t,s);try{await Q6(t,s),n(`/coin-detail/${t}`,{state:{isUser:!0,symbol:t,transactionId:s}})}catch(u){alert("입금 요청 실패: "+u.message)}};return c.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[c.jsx(Ie,{title:"코인 입금"}),c.jsxs("div",{className:"flex-1 px-5 py-6 overflow-auto",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:"거래 ID 입력"}),c.jsx(CV,{value:s,onChange:r})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:c.jsx(NV,{})})]}),c.jsx("div",{className:"p-5 bg-white border-t border-gray-100 shadow-sm",children:c.jsx(Be,{text:"확인",onClick:a,color:o?"gray":"blue",className:"rounded-lg h-14 text-lg font-medium"})}),c.jsx(st,{})]})}function kV({coins:n,onClick:e}){return c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-sm",children:[c.jsx("div",{className:"mb-4 flex items-center justify-between",children:c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"보유 가상자산"})}),c.jsx("div",{className:"space-y-3",children:n.map(t=>c.jsxs("div",{onClick:()=>e(t.currency),className:"flex cursor-pointer items-center justify-between rounded-lg p-3 hover:bg-gray-50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full ",children:c.jsx("img",{src:t.icon,alt:t.coinName,className:"h-5 w-5 rounded-full"})}),c.jsxs("div",{className:"ml-3",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:[t.coinName," ",c.jsx("span",{className:"text-sm text-gray-500",children:t.currency})]}),c.jsx("div",{className:"text-sm text-green-500",children:t.change})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-medium text-gray-900",children:t.balance}),c.jsx("div",{className:"text-sm text-gray-500",children:t.krw})]})]},t.currency))})]})}function TV({tokens:n,onClick:e}){const[t,s]=A.useState({}),r=ke(),o=a=>{s(u=>({...u,[a]:!u[a]}))};return c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow",children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-gray-800",children:"보유 토큰"}),n.map(a=>{var u;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between bg-white p-4",children:[c.jsxs("div",{className:"flex cursor-pointer items-center gap-3",onClick:()=>r(`/token/detail/${a.currency}`),children:[c.jsx("img",{src:a.bankImageUrl,alt:a.name,className:"h-6 w-6 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:a.name}),c.jsx("p",{className:"text-xs text-gray-500",children:a.currency})]})]}),c.jsxs("div",{className:"flex cursor-pointer items-center gap-2",onClick:()=>o(a.currency),children:[c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a.balance.toLocaleString()," ",a.currency]}),c.jsx("p",{className:"text-sm text-gray-500",children:a.krw})]}),c.jsx("div",{children:t[a.currency]?c.jsx(JS,{size:16,className:"text-gray-500"}):c.jsx(QS,{size:16,className:"text-gray-500"})})]})]}),t[a.name]&&((u=a.product)==null?void 0:u.map(d=>c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 bg-gray-50 p-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200",children:c.jsx("span",{className:"whitespace-pre text-xs font-medium"})}),c.jsx("div",{children:c.jsx("p",{className:"font-medium",children:d.name})})]}),c.jsxs("div",{className:"flex cursor-pointer items-center gap-2 text-right",onClick:()=>r(`/token/product/detail/${d.subId}`,{state:{products:d,tokenInfo:a}}),children:[c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("p",{className:"text-blue-600 font-medium",children:d.balance}),c.jsx("p",{className:"text-xs text-gray-500",children:a.currency})]}),c.jsx(ky,{size:16,className:"text-gray-500"})]})]},d.subId)))]},a.currency)})]})}const b1=y1((n,e)=>({tokens:[],setTokens:t=>n({tokens:t}),getTokenImage:t=>{var s;return(s=e().tokens.find(r=>r.currency===t))==null?void 0:s.bankImageUrl}})),gm="http://localhost:8080",w1="http://localhost:8080",PV=async n=>{const e=sessionStorage.getItem("accessToken"),t=await fetch(`${gm}/api/expired/terminate/${n}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok){let s="알 수 없는 오류가 발생했습니다.";try{s=(await t.json()).message||s}catch(r){console.warn("상품 목록 조회 실패:",r)}throw new Error(s)}return await t.text()},_V=async(n,e)=>{const t=sessionStorage.getItem("accessToken"),s=await fetch(`${gm}/api/deposit/token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({subscribeId:n,amount:e})});if(!s.ok){let r="알 수 없는 오류가 발생했습니다.";try{r=(await s.json()).message||r}catch(o){console.warn("상품 목록 조회 실패:",o)}throw new Error(r)}return await s.text()},RV=async()=>{const n=sessionStorage.getItem("accessToken"),e=await fetch(`${gm}/api/account`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!e.ok){let t="알 수 없는 오류가 발생했습니다.";try{t=(await e.json()).message||t}catch(s){console.warn("상품 목록 조회 실패:",s)}throw new Error(t)}return await e.json()},LV=async n=>{const e=sessionStorage.getItem("accessToken"),t=await fetch(`${gm}/api/subscribe/preview/${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok){let s="알 수 없는 오류가 발생했습니다.";try{s=(await t.json()).message||s}catch(r){console.warn("내역 조회 실패:",r)}throw new Error(s)}return await t.json()},X_=async(n,e,t=3)=>{const s=sessionStorage.getItem("accessToken");if(!s)throw new Error("로그인 토큰이 없습니다. 다시 로그인해주세요.");const r=await fetch(`${gm}/api/subscribe/history/${n}?page=${e}&size=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!r.ok){let o="알 수 없는 오류가 발생했습니다.";try{o=(await r.json()).message||o}catch(a){console.warn("상품 목록 조회 실패:",a)}throw new Error(o)}return await r.json()},S1=async n=>{const e=sessionStorage.getItem("accessToken"),t=await fetch(`${w1}/api/exchange/info?currency=${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`토큰 정보 조회 실패: ${t.status}`);return await t.json()},IV=async(n,e)=>{const t=sessionStorage.getItem("accessToken"),r=await fetch(`${w1}${n?"/api/exchange/token":"/api/exchange/coin"}`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error(`환전 요청 실패: ${r.status}`);return await r.text()},MV=async(n,e=0,t=5)=>{const s=sessionStorage.getItem("accessToken"),r=new URLSearchParams;r.append("currency",n),r.append("page",e.toString()),r.append("size",t.toString());const o=await fetch(`${w1}/api/history/token?${r}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`환전 내역 조회 실패: ${o.status}`);return await o.json()};async function Y_(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`/api/token/balance/${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok){let s="알 수 없는 오류가 발생했습니다.";try{s=(await t.json()).message||s}catch(r){console.warn("잔액 조회 실패:",r)}throw new Error(s)}return await t.json()}function DV(){const n=ke(),[e,t]=A.useState("coin"),[s,r]=A.useState([]),[o,a]=A.useState([]),u=lh(),[d,h]=A.useState(0);A.useEffect(()=>{if(!o.length||!u)return;(async()=>{try{const b=await Promise.all(o.map(N=>S1(N.currency)));let C=0;const E=o.map(N=>{const k=b.find(M=>M.currency===N.currency);if(!k)return{...N,krw:"- KRW"};const P=k.portfolios.reduce((M,O)=>{var D;const F=((D=u[`KRW-${O.currency}`])==null?void 0:D.trade_price)??0;return M+(O.amount??0)*F},0)/(k.totalSupply||1),R=Math.floor(N.balance*P);return C+=R,{...N,krw:`${R.toLocaleString()} KRW`}});a(E),h(C)}catch(b){console.error("토큰 정보 불러오기 실패:",b)}})()},[o.length,u]),A.useEffect(()=>{(async()=>{try{const b=await H_();r(b.balance),a(b.bankTokenInfo),b1.getState().setTokens(b.bankTokenInfo),v1.getState().setCoins(b.balance)}catch(b){console.error("잔액 불러오기 실패",b)}})()},[]);const m=A.useMemo(()=>s.map(w=>{const b=w.balance,C=u[`KRW-${w.currency}`],E=(C==null?void 0:C.trade_price)??0,N=(C==null?void 0:C.signed_change_rate)??0,k=(C==null?void 0:C.change)??"EVEN",P=`${b} ${w.currency}`,R=b&&E?`${Math.floor(b*E).toLocaleString()} KRW`:"- KRW",M=k==="EVEN"?"-":`${k==="RISE"?"+":"-"}${(Math.abs(N)*100).toFixed(2)}%`;return{currency:w.currency,coinName:w.coinName,icon:w.coinImageUrl,balance:P,krw:R,change:M,changeDirection:k}}),[s,u]),g=w=>{n(`/coin-detail/${w}`)},x=()=>{n("/token/onsale/products")},v=m.reduce((w,b)=>{const C=Number(b.krw.replace(/[^0-9]/g,""));return w+(isNaN(C)?0:C)},0);return c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"자산관리"}),c.jsxs("main",{className:"flex-1 overflow-auto bg-gray-50",children:[c.jsxs("div",{className:"px-4 py-6",children:[c.jsxs("div",{className:"overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-400 to-blue-500 p-5 shadow-lg",children:[c.jsxs("div",{className:"mb-4 flex items-center",children:[c.jsx(e3,{className:"mr-2 h-6 w-6 text-blue-100"}),c.jsx("span",{className:"text-lg font-medium text-blue-100",children:"총 자산"})]}),c.jsxs("h2",{className:"mb-1 text-3xl font-bold text-white",children:[d+v," KRW"]}),c.jsx("div",{className:"flex items-center text-green-300"})]}),c.jsx("div",{className:"mt-5 w-full",children:c.jsx("button",{className:"w-full bg-[#0a2e64] text-white py-2 rounded-xl font-medium text-base shadow-sm",onClick:x,children:"K-토큰 상품 가입"})})]}),c.jsxs("div",{className:"mb-4 flex border-b border-gray-200 bg-white",children:[c.jsx("button",{className:`flex-1 py-3 text-center text-sm font-medium ${e==="coin"?"border-b-2 border-indigo-400 text-indigo-400":"text-gray-500"}`,onClick:()=>t("coin"),children:"가상 자산"}),c.jsx("button",{className:`flex-1 py-3 text-center text-sm font-medium ${e==="token"?"border-b-2 border-indigo-400 text-indigo-400":"text-gray-500"}`,onClick:()=>t("token"),children:"K-토큰"})]}),c.jsx("div",{className:"px-4",children:e==="coin"?c.jsx(kV,{coins:m,onClick:g}):c.jsx(TV,{tokens:o,onClick:x})}),c.jsx("button",{onClick:()=>n("/my/orders"),className:"fixed bottom-24 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-indigo-500 text-white shadow-lg hover:bg-indigo-500","aria-label":"주문 내역으로 이동",children:c.jsx(aP,{className:"h-6 w-6 stroke-white"})})]}),c.jsx(st,{})]})}const Q_=A.createContext({});function OV(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const A1=A.createContext(null),J_=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function FV(n=!0){const e=A.useContext(A1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,o=A.useId();A.useEffect(()=>{n&&r(o)},[n]);const a=A.useCallback(()=>n&&s&&s(o),[o,s,n]);return!t&&s?[!1,a]:[!0]}const E1=typeof window<"u",BV=E1?A.useLayoutEffect:A.useEffect,Os=n=>n;let Z_=Os;function C1(n){let e;return()=>(e===void 0&&(e=n()),e)}const Yd=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},ho=n=>n*1e3,fo=n=>n/1e3,$V={useManualTiming:!1};function VV(n){let e=new Set,t=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),n()),h(a)}const d={schedule:(h,m=!1,g=!1)=>{const v=g&&s?e:t;return m&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{t.delete(h),o.delete(h)},process:h=>{if(a=h,s){r=!0;return}s=!0,[e,t]=[t,e],e.forEach(u),e.clear(),s=!1,r&&(r=!1,d.process(h))}};return d}const Ug=["read","resolveKeyframes","update","preRender","render","postRender"],UV=40;function eR(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,a=Ug.reduce((E,N)=>(E[N]=VV(o),E),{}),{read:u,resolveKeyframes:d,update:h,preRender:m,render:g,postRender:x}=a,v=()=>{const E=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(E-r.timestamp,UV),1),r.timestamp=E,r.isProcessing=!0,u.process(r),d.process(r),h.process(r),m.process(r),g.process(r),x.process(r),r.isProcessing=!1,t&&e&&(s=!1,n(v))},w=()=>{t=!0,s=!0,r.isProcessing||n(v)};return{schedule:Ug.reduce((E,N)=>{const k=a[N];return E[N]=(P,R=!1,M=!1)=>(t||w(),k.schedule(P,R,M)),E},{}),cancel:E=>{for(let N=0;N<Ug.length;N++)a[Ug[N]].cancel(E)},state:r,steps:a}}const{schedule:wt,cancel:Da,state:wn,steps:lb}=eR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Os,!0),tR=A.createContext({strict:!1}),mj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qd={};for(const n in mj)Qd[n]={isEnabled:e=>mj[n].some(t=>!!e[t])};function zV(n){for(const e in n)Qd[e]={...Qd[e],...n[e]}}const HV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||HV.has(n)}let nR=n=>!Xx(n);function WV(n){n&&(nR=e=>e.startsWith("on")?!Xx(e):n(e))}try{WV(require("@emotion/is-prop-valid").default)}catch{}function GV(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(nR(r)||t===!0&&Xx(r)||!e&&!Xx(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function KV(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Fy=A.createContext({});function Of(n){return typeof n=="string"||Array.isArray(n)}function By(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const N1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j1=["initial",...N1];function $y(n){return By(n.animate)||j1.some(e=>Of(n[e]))}function sR(n){return!!($y(n)||n.variants)}function qV(n,e){if($y(n)){const{initial:t,animate:s}=n;return{initial:t===!1||Of(t)?t:void 0,animate:Of(s)?s:void 0}}return n.inherit!==!1?e:{}}function XV(n){const{initial:e,animate:t}=qV(n,A.useContext(Fy));return A.useMemo(()=>({initial:e,animate:t}),[gj(e),gj(t)])}function gj(n){return Array.isArray(n)?n.join(" "):n}const YV=Symbol.for("motionComponentSymbol");function Eu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function QV(n,e,t){return A.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Eu(t)&&(t.current=s))},[e])}const k1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JV="framerAppearId",rR="data-"+k1(JV),{schedule:T1}=eR(queueMicrotask,!1),iR=A.createContext({});function ZV(n,e,t,s,r){var o,a;const{visualElement:u}=A.useContext(Fy),d=A.useContext(tR),h=A.useContext(A1),m=A.useContext(J_).reducedMotion,g=A.useRef(null);s=s||d.renderer,!g.current&&s&&(g.current=s(n,{visualState:e,parent:u,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const x=g.current,v=A.useContext(iR);x&&!x.projection&&r&&(x.type==="html"||x.type==="svg")&&eU(g.current,t,r,v);const w=A.useRef(!1);A.useInsertionEffect(()=>{x&&w.current&&x.update(t,h)});const b=t[rR],C=A.useRef(!!b&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,b))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,b)));return BV(()=>{x&&(w.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),T1.render(x.render),C.current&&x.animationState&&x.animationState.animateChanges())}),A.useEffect(()=>{x&&(!C.current&&x.animationState&&x.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,b)}),C.current=!1))}),x}function eU(n,e,t,s){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:d,layoutRoot:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:oR(n.parent)),n.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&Eu(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:h})}function oR(n){if(n)return n.options.allowProjection!==!1?n.projection:oR(n.parent)}function tU({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){var o,a;n&&zV(n);function u(h,m){let g;const x={...A.useContext(J_),...h,layoutId:nU(h)},{isStatic:v}=x,w=XV(h),b=s(h,v);if(!v&&E1){sU();const C=rU(x);g=C.MeasureLayout,w.visualElement=ZV(r,b,x,e,C.ProjectionNode)}return c.jsxs(Fy.Provider,{value:w,children:[g&&w.visualElement?c.jsx(g,{visualElement:w.visualElement,...x}):null,t(r,h,QV(b,w.visualElement,m),b,v,w.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const d=A.forwardRef(u);return d[YV]=r,d}function nU({layoutId:n}){const e=A.useContext(Q_).id;return e&&n!==void 0?e+"-"+n:n}function sU(n,e){A.useContext(tR).strict}function rU(n){const{drag:e,layout:t}=Qd;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const iU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P1(n){return typeof n!="string"||n.includes("-")?!1:!!(iU.indexOf(n)>-1||/[A-Z]/u.test(n))}function xj(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function _1(n,e,t,s){if(typeof e=="function"){const[r,o]=xj(s);e=e(t!==void 0?t:n.custom,r,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,o]=xj(s);e=e(t!==void 0?t:n.custom,r,o)}return e}const sw=n=>Array.isArray(n),oU=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),aU=n=>sw(n)?n[n.length-1]||0:n,Fn=n=>!!(n&&n.getVelocity);function ix(n){const e=Fn(n)?n.get():n;return oU(e)?e.toValue():e}function lU({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},s,r,o){const a={latestValues:cU(s,r,o,n),renderState:e()};return t&&(a.onMount=u=>t({props:s,current:u,...a}),a.onUpdate=u=>t(u)),a}const aR=n=>(e,t)=>{const s=A.useContext(Fy),r=A.useContext(A1),o=()=>lU(n,e,s,r);return t?o():OV(o)};function cU(n,e,t,s){const r={},o=s(n,{});for(const x in o)r[x]=ix(o[x]);let{initial:a,animate:u}=n;const d=$y(n),h=sR(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;if(g&&typeof g!="boolean"&&!By(g)){const x=Array.isArray(g)?g:[g];for(let v=0;v<x.length;v++){const w=_1(n,x[v]);if(w){const{transitionEnd:b,transition:C,...E}=w;for(const N in E){let k=E[N];if(Array.isArray(k)){const P=m?k.length-1:0;k=k[P]}k!==null&&(r[N]=k)}for(const N in b)r[N]=b[N]}}}return r}const ch=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ic=new Set(ch),lR=n=>e=>typeof e=="string"&&e.startsWith(n),cR=lR("--"),uU=lR("var(--"),R1=n=>uU(n)?dU.test(n.split("/*")[0].trim()):!1,dU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uR=(n,e)=>e&&typeof n=="number"?e.transform(n):n,bo=(n,e,t)=>t>e?e:t<n?n:t,uh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ff={...uh,transform:n=>bo(0,1,n)},zg={...uh,default:1},xm=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Go=xm("deg"),vi=xm("%"),_e=xm("px"),hU=xm("vh"),fU=xm("vw"),yj={...vi,parse:n=>vi.parse(n)/100,transform:n=>vi.transform(n*100)},pU={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,backgroundPositionX:_e,backgroundPositionY:_e},mU={rotate:Go,rotateX:Go,rotateY:Go,rotateZ:Go,scale:zg,scaleX:zg,scaleY:zg,scaleZ:zg,skew:Go,skewX:Go,skewY:Go,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:Ff,originX:yj,originY:yj,originZ:_e},vj={...uh,transform:Math.round},L1={...pU,...mU,zIndex:vj,size:_e,fillOpacity:Ff,strokeOpacity:Ff,numOctaves:vj},gU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xU=ch.length;function yU(n,e,t){let s="",r=!0;for(let o=0;o<xU;o++){const a=ch[o],u=n[a];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(a.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const h=uR(u,L1[a]);if(!d){r=!1;const m=gU[a]||a;s+=`${m}(${h}) `}t&&(e[a]=h)}}return s=s.trim(),t?s=t(e,r?"":s):r&&(s="none"),s}function I1(n,e,t){const{style:s,vars:r,transformOrigin:o}=n;let a=!1,u=!1;for(const d in e){const h=e[d];if(Ic.has(d)){a=!0;continue}else if(cR(d)){r[d]=h;continue}else{const m=uR(h,L1[d]);d.startsWith("origin")?(u=!0,o[d]=m):s[d]=m}}if(e.transform||(a||t?s.transform=yU(e,n.transform,t):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:m=0}=o;s.transformOrigin=`${d} ${h} ${m}`}}const vU={offset:"stroke-dashoffset",array:"stroke-dasharray"},bU={offset:"strokeDashoffset",array:"strokeDasharray"};function wU(n,e,t=1,s=0,r=!0){n.pathLength=1;const o=r?vU:bU;n[o.offset]=_e.transform(-s);const a=_e.transform(e),u=_e.transform(t);n[o.array]=`${a} ${u}`}function bj(n,e,t){return typeof n=="string"?n:_e.transform(e+t*n)}function SU(n,e,t){const s=bj(e,n.x,n.width),r=bj(t,n.y,n.height);return`${s} ${r}`}function M1(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g){if(I1(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:v,dimensions:w}=n;x.transform&&(w&&(v.transform=x.transform),delete x.transform),w&&(r!==void 0||o!==void 0||v.transform)&&(v.transformOrigin=SU(w,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),s!==void 0&&(x.scale=s),a!==void 0&&wU(x,a,u,d,!1)}const D1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dR=()=>({...D1(),attrs:{}}),O1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function hR(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const o in t)n.style.setProperty(o,t[o])}const fR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pR(n,e,t,s){hR(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(fR.has(r)?r:k1(r),e.attrs[r])}const Yx={};function AU(n){Object.assign(Yx,n)}function mR(n,{layout:e,layoutId:t}){return Ic.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Yx[n]||n==="opacity")}function F1(n,e,t){var s;const{style:r}=n,o={};for(const a in r)(Fn(r[a])||e.style&&Fn(e.style[a])||mR(a,n)||((s=t==null?void 0:t.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function gR(n,e,t){const s=F1(n,e,t);for(const r in n)if(Fn(n[r])||Fn(e[r])){const o=ch.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[o]=n[r]}return s}function EU(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const wj=["x","y","width","height","cx","cy","r"],CU={useVisualState:aR({scrapeMotionValuesFromProps:gR,createRenderState:dR,onUpdate:({props:n,prevProps:e,current:t,renderState:s,latestValues:r})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in r)if(Ic.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<wj.length;u++){const d=wj[u];n[d]!==e[d]&&(a=!0)}a&&wt.read(()=>{EU(t,s),wt.render(()=>{M1(s,r,O1(t.tagName),n.transformTemplate),pR(t,s)})})}})},NU={useVisualState:aR({scrapeMotionValuesFromProps:F1,createRenderState:D1})};function xR(n,e,t){for(const s in e)!Fn(e[s])&&!mR(s,t)&&(n[s]=e[s])}function jU({transformTemplate:n},e){return A.useMemo(()=>{const t=D1();return I1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function kU(n,e){const t=n.style||{},s={};return xR(s,t,n),Object.assign(s,jU(n,e)),s}function TU(n,e){const t={},s=kU(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}function PU(n,e,t,s){const r=A.useMemo(()=>{const o=dR();return M1(o,e,O1(s),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};xR(o,n.style,n),r.style={...o,...r.style}}return r}function _U(n=!1){return(t,s,r,{latestValues:o},a)=>{const d=(P1(t)?PU:TU)(s,o,a,t),h=GV(s,typeof t=="string",n),m=t!==A.Fragment?{...h,...d,ref:r}:{},{children:g}=s,x=A.useMemo(()=>Fn(g)?g.get():g,[g]);return A.createElement(t,{...m,children:x})}}function RU(n,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...P1(s)?CU:NU,preloadedFeatures:n,useRender:_U(r),createVisualElement:e,Component:s};return tU(a)}}function yR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function Vy(n,e,t){const s=n.getProps();return _1(s,e,t!==void 0?t:s.custom,n)}const LU=C1(()=>window.ScrollTimeline!==void 0);class IU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=t}attachTimeline(e,t){const s=this.animations.map(r=>{if(LU()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{s.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class MU extends IU{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function B1(n,e){return n?n[e]||n.default||n:void 0}const rw=2e4;function vR(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<rw;)e+=t,s=n.next(e);return e>=rw?1/0:e}function $1(n){return typeof n=="function"}function Sj(n,e){n.timeline=e,n.onfinish=null}const V1=n=>Array.isArray(n)&&typeof n[0]=="number",DU={linearEasing:void 0};function OU(n,e){const t=C1(n);return()=>{var s;return(s=DU[e])!==null&&s!==void 0?s:t()}}const Qx=OU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bR=(n,e,t=10)=>{let s="";const r=Math.max(Math.round(e/t),2);for(let o=0;o<r;o++)s+=n(Yd(0,r-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function wR(n){return!!(typeof n=="function"&&Qx()||!n||typeof n=="string"&&(n in iw||Qx())||V1(n)||Array.isArray(n)&&n.every(wR))}const rf=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,iw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rf([0,.65,.55,1]),circOut:rf([.55,0,1,.45]),backIn:rf([.31,.01,.66,-.59]),backOut:rf([.33,1.53,.69,.99])};function SR(n,e){if(n)return typeof n=="function"&&Qx()?bR(n,e):V1(n)?rf(n):Array.isArray(n)?n.map(t=>SR(t,e)||iw.easeOut):iw[n]}const xr={x:!1,y:!1};function AR(){return xr.x||xr.y}function FU(n,e,t){var s;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const o=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function ER(n,e){const t=FU(n),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[t,r,()=>s.abort()]}function Aj(n){return e=>{e.pointerType==="touch"||AR()||n(e)}}function BU(n,e,t={}){const[s,r,o]=ER(n,t),a=Aj(u=>{const{target:d}=u,h=e(u);if(typeof h!="function"||!d)return;const m=Aj(g=>{h(g),d.removeEventListener("pointerleave",m)});d.addEventListener("pointerleave",m,r)});return s.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const CR=(n,e)=>e?n===e?!0:CR(n,e.parentElement):!1,U1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,$U=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VU(n){return $U.has(n.tagName)||n.tabIndex!==-1}const of=new WeakSet;function Ej(n){return e=>{e.key==="Enter"&&n(e)}}function cb(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const UU=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=Ej(()=>{if(of.has(t))return;cb(t,"down");const r=Ej(()=>{cb(t,"up")}),o=()=>cb(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function Cj(n){return U1(n)&&!AR()}function zU(n,e,t={}){const[s,r,o]=ER(n,t),a=u=>{const d=u.currentTarget;if(!Cj(u)||of.has(d))return;of.add(d);const h=e(u),m=(v,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),!(!Cj(v)||!of.has(d))&&(of.delete(d),typeof h=="function"&&h(v,{success:w}))},g=v=>{m(v,t.useGlobalTarget||CR(d,v.target))},x=v=>{m(v,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",x,r)};return s.forEach(u=>{!VU(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(t.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",h=>UU(h,r),r)}),o}function HU(n){return n==="x"||n==="y"?xr[n]?null:(xr[n]=!0,()=>{xr[n]=!1}):xr.x||xr.y?null:(xr.x=xr.y=!0,()=>{xr.x=xr.y=!1})}const NR=new Set(["width","height","top","left","right","bottom",...ch]);let ox;function WU(){ox=void 0}const bi={now:()=>(ox===void 0&&bi.set(wn.isProcessing||$V.useManualTiming?wn.timestamp:performance.now()),ox),set:n=>{ox=n,queueMicrotask(WU)}};function z1(n,e){n.indexOf(e)===-1&&n.push(e)}function H1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class W1{constructor(){this.subscriptions=[]}add(e){return z1(this.subscriptions,e),()=>H1(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function jR(n,e){return e?n*(1e3/e):0}const Nj=30,GU=n=>!isNaN(parseFloat(n));class KU{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const o=bi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new W1);const s=this.events[e].add(t);return e==="change"?()=>{s(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Nj)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Nj);return jR(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bf(n,e){return new KU(n,e)}function qU(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Bf(t))}function XU(n,e){const t=Vy(n,e);let{transitionEnd:s={},transition:r={},...o}=t||{};o={...o,...s};for(const a in o){const u=aU(o[a]);qU(n,a,u)}}function YU(n){return!!(Fn(n)&&n.add)}function ow(n,e){const t=n.getValue("willChange");if(YU(t))return t.add(e)}function kR(n){return n.props[rR]}const TR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,QU=1e-7,JU=12;function ZU(n,e,t,s,r){let o,a,u=0;do a=e+(t-e)/2,o=TR(a,s,r)-n,o>0?t=a:e=a;while(Math.abs(o)>QU&&++u<JU);return a}function ym(n,e,t,s){if(n===e&&t===s)return Os;const r=o=>ZU(o,0,1,n,t);return o=>o===0||o===1?o:TR(r(o),e,s)}const PR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,_R=n=>e=>1-n(1-e),RR=ym(.33,1.53,.69,.99),G1=_R(RR),LR=PR(G1),IR=n=>(n*=2)<1?.5*G1(n):.5*(2-Math.pow(2,-10*(n-1))),K1=n=>1-Math.sin(Math.acos(n)),MR=_R(K1),DR=PR(K1),OR=n=>/^0[^.\s]+$/u.test(n);function ez(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||OR(n):!0}const Ef=n=>Math.round(n*1e5)/1e5,q1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tz(n){return n==null}const nz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,X1=(n,e)=>t=>!!(typeof t=="string"&&nz.test(t)&&t.startsWith(n)||e&&!tz(t)&&Object.prototype.hasOwnProperty.call(t,e)),FR=(n,e,t)=>s=>{if(typeof s!="string")return s;const[r,o,a,u]=s.match(q1);return{[n]:parseFloat(r),[e]:parseFloat(o),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},sz=n=>bo(0,255,n),ub={...uh,transform:n=>Math.round(sz(n))},xl={test:X1("rgb","red"),parse:FR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+ub.transform(n)+", "+ub.transform(e)+", "+ub.transform(t)+", "+Ef(Ff.transform(s))+")"};function rz(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const aw={test:X1("#"),parse:rz,transform:xl.transform},Cu={test:X1("hsl","hue"),parse:FR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+vi.transform(Ef(e))+", "+vi.transform(Ef(t))+", "+Ef(Ff.transform(s))+")"},Dn={test:n=>xl.test(n)||aw.test(n)||Cu.test(n),parse:n=>xl.test(n)?xl.parse(n):Cu.test(n)?Cu.parse(n):aw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?xl.transform(n):Cu.transform(n)},iz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oz(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(q1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(iz))===null||t===void 0?void 0:t.length)||0)>0}const BR="number",$R="color",az="var",lz="var(",jj="${}",cz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $f(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(cz,d=>(Dn.test(d)?(s.color.push(o),r.push($R),t.push(Dn.parse(d))):d.startsWith(lz)?(s.var.push(o),r.push(az),t.push(d)):(s.number.push(o),r.push(BR),t.push(parseFloat(d))),++o,jj)).split(jj);return{values:t,split:u,indexes:s,types:r}}function VR(n){return $f(n).values}function UR(n){const{split:e,types:t}=$f(n),s=e.length;return r=>{let o="";for(let a=0;a<s;a++)if(o+=e[a],r[a]!==void 0){const u=t[a];u===BR?o+=Ef(r[a]):u===$R?o+=Dn.transform(r[a]):o+=r[a]}return o}}const uz=n=>typeof n=="number"?0:n;function dz(n){const e=VR(n);return UR(n)(e.map(uz))}const Oa={test:oz,parse:VR,createTransformer:UR,getAnimatableNone:dz},hz=new Set(["brightness","contrast","saturate","opacity"]);function fz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(q1)||[];if(!s)return n;const r=t.replace(s,"");let o=hz.has(e)?1:0;return s!==t&&(o*=100),e+"("+o+r+")"}const pz=/\b([a-z-]*)\(.*?\)/gu,lw={...Oa,getAnimatableNone:n=>{const e=n.match(pz);return e?e.map(fz).join(" "):n}},mz={...L1,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:lw,WebkitFilter:lw},Y1=n=>mz[n];function zR(n,e){let t=Y1(n);return t!==lw&&(t=Oa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const gz=new Set(["auto","none","0"]);function xz(n,e,t){let s=0,r;for(;s<n.length&&!r;){const o=n[s];typeof o=="string"&&!gz.has(o)&&$f(o).values.length&&(r=n[s]),s++}if(r&&t)for(const o of e)n[o]=zR(t,r)}const kj=n=>n===uh||n===_e,Tj=(n,e)=>parseFloat(n.split(", ")[e]),Pj=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return Tj(r[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?Tj(o[1],n):0}},yz=new Set(["x","y","z"]),vz=ch.filter(n=>!yz.has(n));function bz(n){const e=[];return vz.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Jd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Pj(4,13),y:Pj(5,14)};Jd.translateX=Jd.x;Jd.translateY=Jd.y;const Sc=new Set;let cw=!1,uw=!1;function HR(){if(uw){const n=Array.from(Sc).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const r=bz(s);r.length&&(t.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=t.get(s);r&&r.forEach(([o,a])=>{var u;(u=s.getValue(o))===null||u===void 0||u.set(a)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}uw=!1,cw=!1,Sc.forEach(n=>n.complete()),Sc.clear()}function WR(){Sc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(uw=!0)})}function wz(){WR(),HR()}class Q1{constructor(e,t,s,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sc.add(this),cw||(cw=!0,wt.read(WR),wt.resolveKeyframes(HR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const d=s.readValue(t,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Sz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Az(n){const e=Sz.exec(n);if(!e)return[,];const[,t,s,r]=e;return[`--${t??s}`,r]}function KR(n,e,t=1){const[s,r]=Az(n);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const a=o.trim();return GR(a)?parseFloat(a):a}return R1(r)?KR(r,e,t+1):r}const qR=n=>e=>e.test(n),Ez={test:n=>n==="auto",parse:n=>n},XR=[uh,_e,vi,Go,fU,hU,Ez],_j=n=>XR.find(qR(n));class YR extends Q1{constructor(e,t,s,r,o){super(e,t,s,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),R1(h))){const m=KR(h,t.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!NR.has(s)||e.length!==2)return;const[r,o]=e,a=_j(r),u=_j(o);if(a!==u)if(kj(a)&&kj(u))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)ez(e[r])&&s.push(r);s.length&&xz(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jd[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(s);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Jd[s](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}const Rj=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Oa.test(n)||n==="0")&&!n.startsWith("url("));function Cz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Nz(n,e,t,s){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],a=Rj(r,e),u=Rj(o,e);return!a||!u?!1:Cz(n)||(t==="spring"||$1(t))&&s}const jz=n=>n!==null;function Uy(n,{repeat:e,repeatType:t="loop"},s){const r=n.filter(jz),o=e&&t!=="loop"&&e%2===1?0:r.length-1;return!o||s===void 0?r[o]:s}const kz=40;class QR{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bi.now(),this.options={autoplay:e,delay:t,type:s,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wz(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=bi.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:o,delay:a,onComplete:u,onUpdate:d,isGenerator:h}=this.options;if(!h&&!Nz(e,s,r,o))if(a)this.options.duration=0;else{d&&d(Uy(e,this.options,t)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,t);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...m},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const _t=(n,e,t)=>n+(e-n)*t;function db(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Tz({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,o=0,a=0;if(!e)r=o=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;r=db(d,u,n+1/3),o=db(d,u,n),a=db(d,u,n-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:s}}function Jx(n,e){return t=>t>0?e:n}const hb=(n,e,t)=>{const s=n*n,r=t*(e*e-s)+s;return r<0?0:Math.sqrt(r)},Pz=[aw,xl,Cu],_z=n=>Pz.find(e=>e.test(n));function Lj(n){const e=_z(n);if(!e)return!1;let t=e.parse(n);return e===Cu&&(t=Tz(t)),t}const Ij=(n,e)=>{const t=Lj(n),s=Lj(e);if(!t||!s)return Jx(n,e);const r={...t};return o=>(r.red=hb(t.red,s.red,o),r.green=hb(t.green,s.green,o),r.blue=hb(t.blue,s.blue,o),r.alpha=_t(t.alpha,s.alpha,o),xl.transform(r))},Rz=(n,e)=>t=>e(n(t)),vm=(...n)=>n.reduce(Rz),dw=new Set(["none","hidden"]);function Lz(n,e){return dw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Iz(n,e){return t=>_t(n,e,t)}function J1(n){return typeof n=="number"?Iz:typeof n=="string"?R1(n)?Jx:Dn.test(n)?Ij:Oz:Array.isArray(n)?JR:typeof n=="object"?Dn.test(n)?Ij:Mz:Jx}function JR(n,e){const t=[...n],s=t.length,r=n.map((o,a)=>J1(o)(o,e[a]));return o=>{for(let a=0;a<s;a++)t[a]=r[a](o);return t}}function Mz(n,e){const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=J1(n[r])(n[r],e[r]));return r=>{for(const o in s)t[o]=s[o](r);return t}}function Dz(n,e){var t;const s=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=n.indexes[a][r[a]],d=(t=n.values[u])!==null&&t!==void 0?t:0;s[o]=d,r[a]++}return s}const Oz=(n,e)=>{const t=Oa.createTransformer(e),s=$f(n),r=$f(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?dw.has(n)&&!r.values.length||dw.has(e)&&!s.values.length?Lz(n,e):vm(JR(Dz(s,r),r.values),t):Jx(n,e)};function ZR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?_t(n,e,t):J1(n)(n,e)}const Fz=5;function e2(n,e,t){const s=Math.max(e-Fz,0);return jR(t-n(s),e-s)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mj=.001;function Bz({duration:n=Dt.duration,bounce:e=Dt.bounce,velocity:t=Dt.velocity,mass:s=Dt.mass}){let r,o,a=1-e;a=bo(Dt.minDamping,Dt.maxDamping,a),n=bo(Dt.minDuration,Dt.maxDuration,fo(n)),a<1?(r=h=>{const m=h*a,g=m*n,x=m-t,v=hw(h,a),w=Math.exp(-g);return Mj-x/v*w},o=h=>{const g=h*a*n,x=g*t+t,v=Math.pow(a,2)*Math.pow(h,2)*n,w=Math.exp(-g),b=hw(Math.pow(h,2),a);return(-r(h)+Mj>0?-1:1)*((x-v)*w)/b}):(r=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-.001+m*g},o=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=Vz(r,o,u);if(n=ho(n),isNaN(d))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:n};{const h=Math.pow(d,2)*s;return{stiffness:h,damping:a*2*Math.sqrt(s*h),duration:n}}}const $z=12;function Vz(n,e,t){let s=t;for(let r=1;r<$z;r++)s=s-n(s)/e(s);return s}function hw(n,e){return n*Math.sqrt(1-e*e)}const Uz=["duration","bounce"],zz=["stiffness","damping","mass"];function Dj(n,e){return e.some(t=>n[t]!==void 0)}function Hz(n){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...n};if(!Dj(n,zz)&&Dj(n,Uz))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),r=s*s,o=2*bo(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Dt.mass,stiffness:r,damping:o}}else{const t=Bz(n);e={...e,...t,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function t2(n=Dt.visualDuration,e=Dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:r}=t;const o=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:h,mass:m,duration:g,velocity:x,isResolvedFromDuration:v}=Hz({...t,velocity:-fo(t.velocity||0)}),w=x||0,b=h/(2*Math.sqrt(d*m)),C=a-o,E=fo(Math.sqrt(d/m)),N=Math.abs(C)<5;s||(s=N?Dt.restSpeed.granular:Dt.restSpeed.default),r||(r=N?Dt.restDelta.granular:Dt.restDelta.default);let k;if(b<1){const R=hw(E,b);k=M=>{const O=Math.exp(-b*E*M);return a-O*((w+b*E*C)/R*Math.sin(R*M)+C*Math.cos(R*M))}}else if(b===1)k=R=>a-Math.exp(-E*R)*(C+(w+E*C)*R);else{const R=E*Math.sqrt(b*b-1);k=M=>{const O=Math.exp(-b*E*M),F=Math.min(R*M,300);return a-O*((w+b*E*C)*Math.sinh(F)+R*C*Math.cosh(F))/R}}const P={calculatedDuration:v&&g||null,next:R=>{const M=k(R);if(v)u.done=R>=g;else{let O=0;b<1&&(O=R===0?ho(w):e2(k,R,M));const F=Math.abs(O)<=s,D=Math.abs(a-M)<=r;u.done=F&&D}return u.value=u.done?a:M,u},toString:()=>{const R=Math.min(vR(P),rw),M=bR(O=>P.next(R*O).value,R,30);return R+"ms "+M}};return P}function Oj({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],x={done:!1,value:g},v=F=>u!==void 0&&F<u||d!==void 0&&F>d,w=F=>u===void 0?d:d===void 0||Math.abs(u-F)<Math.abs(d-F)?u:d;let b=t*e;const C=g+b,E=a===void 0?C:a(C);E!==C&&(b=E-g);const N=F=>-b*Math.exp(-F/s),k=F=>E+N(F),P=F=>{const D=N(F),U=k(F);x.done=Math.abs(D)<=h,x.value=x.done?E:U};let R,M;const O=F=>{v(x.value)&&(R=F,M=t2({keyframes:[x.value,w(x.value)],velocity:e2(k,F,x.value),damping:r,stiffness:o,restDelta:h,restSpeed:m}))};return O(0),{calculatedDuration:null,next:F=>{let D=!1;return!M&&R===void 0&&(D=!0,P(F),O(F)),R!==void 0&&F>=R?M.next(F-R):(!D&&P(F),x)}}}const Wz=ym(.42,0,1,1),Gz=ym(0,0,.58,1),n2=ym(.42,0,.58,1),Kz=n=>Array.isArray(n)&&typeof n[0]!="number",qz={linear:Os,easeIn:Wz,easeInOut:n2,easeOut:Gz,circIn:K1,circInOut:DR,circOut:MR,backIn:G1,backInOut:LR,backOut:RR,anticipate:IR},Fj=n=>{if(V1(n)){Z_(n.length===4);const[e,t,s,r]=n;return ym(e,t,s,r)}else if(typeof n=="string")return qz[n];return n};function Xz(n,e,t){const s=[],r=t||ZR,o=n.length-1;for(let a=0;a<o;a++){let u=r(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||Os:e;u=vm(d,u)}s.push(u)}return s}function Yz(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const o=n.length;if(Z_(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=Xz(e,s,r),d=u.length,h=m=>{if(a&&m<n[0])return e[0];let g=0;if(d>1)for(;g<n.length-2&&!(m<n[g+1]);g++);const x=Yd(n[g],n[g+1],m);return u[g](x)};return t?m=>h(bo(n[0],n[o-1],m)):h}function Qz(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=Yd(0,e,s);n.push(_t(t,1,r))}}function Jz(n){const e=[0];return Qz(e,n.length-1),e}function Zz(n,e){return n.map(t=>t*e)}function eH(n,e){return n.map(()=>e||n2).splice(0,n.length-1)}function Zx({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=Kz(s)?s.map(Fj):Fj(s),o={done:!1,value:e[0]},a=Zz(t&&t.length===e.length?t:Jz(e),n),u=Yz(a,e,{ease:Array.isArray(r)?r:eH(e,r)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const tH=n=>{const e=({timestamp:t})=>n(t);return{start:()=>wt.update(e,!0),stop:()=>Da(e),now:()=>wn.isProcessing?wn.timestamp:bi.now()}},nH={decay:Oj,inertia:Oj,tween:Zx,keyframes:Zx,spring:t2},sH=n=>n/100;class Z1 extends QR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:t,motionValue:s,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||Q1,u=(d,h)=>this.onKeyframesResolved(d,h);this.resolver=new a(o,u,t,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=$1(t)?t:nH[t]||Zx;let d,h;u!==Zx&&typeof e[0]!="number"&&(d=vm(sH,ZR(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=vR(m));const{calculatedDuration:g}=m,x=g+r,v=x*(s+1)-r;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:d,calculatedDuration:g,resolvedDuration:x,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:s}=this;if(!s){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:h,totalDuration:m,resolvedDuration:g}=s;if(this.startTime===null)return o.next(0);const{delay:x,repeat:v,repeatType:w,repeatDelay:b,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-x*(this.speed>=0?1:-1),N=this.speed>=0?E<0:E>m;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let k=this.currentTime,P=o;if(v){const F=Math.min(this.currentTime,m)/g;let D=Math.floor(F),U=F%1;!U&&F>=1&&(U=1),U===1&&D--,D=Math.min(D,v+1),!!(D%2)&&(w==="reverse"?(U=1-U,b&&(U-=b/g)):w==="mirror"&&(P=a)),k=bo(0,1,U)*g}const R=N?{done:!1,value:d[0]}:P.next(k);u&&(R.value=u(R.value));let{done:M}=R;!N&&h!==null&&(M=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return O&&r!==void 0&&(R.value=Uy(d,this.options,r)),C&&C(R.value),O&&this.finish(),R}get duration(){const{resolved:e}=this;return e?fo(e.calculatedDuration):0}get time(){return fo(this.currentTime)}set time(e){e=ho(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=tH,onPlay:t,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const rH=new Set(["opacity","clipPath","filter","transform"]);function iH(n,e,t,{delay:s=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=SR(u,r);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:s,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const oH=C1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ey=10,aH=2e4;function lH(n){return $1(n.type)||n.type==="spring"||!wR(n.ease)}function cH(n,e){const t=new Z1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const r=[];let o=0;for(;!s.done&&o<aH;)s=t.sample(o),r.push(s.value),o+=ey;return{times:void 0,keyframes:r,duration:o-ey,ease:"linear"}}const s2={anticipate:IR,backInOut:LR,circInOut:DR};function uH(n){return n in s2}class Bj extends QR{constructor(e){super(e);const{name:t,motionValue:s,element:r,keyframes:o}=this.options;this.resolver=new YR(o,(a,u)=>this.onKeyframesResolved(a,u),t,s,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:s=300,times:r,ease:o,type:a,motionValue:u,name:d,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Qx()&&uH(o)&&(o=s2[o]),lH(this.options)){const{onComplete:g,onUpdate:x,motionValue:v,element:w,...b}=this.options,C=cH(e,b);e=C.keyframes,e.length===1&&(e[1]=e[0]),s=C.duration,r=C.times,o=C.ease,a="keyframes"}const m=iH(u.owner.current,d,e,{...this.options,duration:s,times:r,ease:o});return m.startTime=h??this.calcStartTime(),this.pendingTimeline?(Sj(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Uy(e,this.options,t)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:s,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return fo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return fo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.currentTime=ho(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Os;const{animation:s}=t;Sj(s,e)}return Os}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:s,duration:r,type:o,ease:a,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:g,element:x,...v}=this.options,w=new Z1({...v,keyframes:s,duration:r,type:o,ease:a,times:u,isGenerator:!0}),b=ho(this.time);h.setWithVelocity(w.sample(b-ey).value,w.sample(b).value,ey)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return oH()&&s&&rH.has(s)&&!d&&!h&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const dH={type:"spring",stiffness:500,damping:25,restSpeed:10},hH=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),fH={type:"keyframes",duration:.8},pH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mH=(n,{keyframes:e})=>e.length>2?fH:Ic.has(n)?n.startsWith("scale")?hH(e[1]):dH:pH;function gH({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const eA=(n,e,t,s={},r,o)=>a=>{const u=B1(s,n)||{},d=u.delay||s.delay||0;let{elapsed:h=0}=s;h=h-ho(d);let m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:r};gH(u)||(m={...m,...mH(n,m)}),m.duration&&(m.duration=ho(m.duration)),m.repeatDelay&&(m.repeatDelay=ho(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!o&&e.get()!==void 0){const x=Uy(m.keyframes,u);if(x!==void 0)return wt.update(()=>{m.onUpdate(x),m.onComplete()}),new MU([])}return!o&&Bj.supports(m)?new Bj(m):new Z1(m)};function xH({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function r2(n,e,{delay:t=0,transitionOverride:s,type:r}={}){var o;let{transition:a=n.getDefaultTransition(),transitionEnd:u,...d}=e;s&&(a=s);const h=[],m=r&&n.animationState&&n.animationState.getState()[r];for(const g in d){const x=n.getValue(g,(o=n.latestValues[g])!==null&&o!==void 0?o:null),v=d[g];if(v===void 0||m&&xH(m,g))continue;const w={delay:t,...B1(a||{},g)};let b=!1;if(window.MotionHandoffAnimation){const E=kR(n);if(E){const N=window.MotionHandoffAnimation(E,g,wt);N!==null&&(w.startTime=N,b=!0)}}ow(n,g),x.start(eA(g,x,v,n.shouldReduceMotion&&NR.has(g)?{type:!1}:w,n,b));const C=x.animation;C&&h.push(C)}return u&&Promise.all(h).then(()=>{wt.update(()=>{u&&XU(n,u)})}),h}function fw(n,e,t={}){var s;const r=Vy(n,e,t.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(r2(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:x}=o;return yH(n,e,m+h,g,x,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[h,m]=d==="beforeChildren"?[a,u]:[u,a];return h().then(()=>m())}else return Promise.all([a(),u(t.delay)])}function yH(n,e,t=0,s=0,r=1,o){const a=[],u=(n.variantChildren.size-1)*s,d=r===1?(h=0)=>h*s:(h=0)=>u-h*s;return Array.from(n.variantChildren).sort(vH).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(fw(h,e,{...o,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function vH(n,e){return n.sortNodePosition(e)}function bH(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(o=>fw(n,o,t));s=Promise.all(r)}else if(typeof e=="string")s=fw(n,e,t);else{const r=typeof e=="function"?Vy(n,e,t.custom):e;s=Promise.all(r2(n,r,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const wH=j1.length;function i2(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?i2(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<wH;t++){const s=j1[t],r=n.props[s];(Of(r)||r===!1)&&(e[s]=r)}return e}const SH=[...N1].reverse(),AH=N1.length;function EH(n){return e=>Promise.all(e.map(({animation:t,options:s})=>bH(n,t,s)))}function CH(n){let e=EH(n),t=$j(),s=!0;const r=d=>(h,m)=>{var g;const x=Vy(n,m,d==="exit"?(g=n.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(x){const{transition:v,transitionEnd:w,...b}=x;h={...h,...b,...w}}return h};function o(d){e=d(n)}function a(d){const{props:h}=n,m=i2(n.parent)||{},g=[],x=new Set;let v={},w=1/0;for(let C=0;C<AH;C++){const E=SH[C],N=t[E],k=h[E]!==void 0?h[E]:m[E],P=Of(k),R=E===d?N.isActive:null;R===!1&&(w=C);let M=k===m[E]&&k!==h[E]&&P;if(M&&s&&n.manuallyAnimateOnMount&&(M=!1),N.protectedKeys={...v},!N.isActive&&R===null||!k&&!N.prevProp||By(k)||typeof k=="boolean")continue;const O=NH(N.prevProp,k);let F=O||E===d&&N.isActive&&!M&&P||C>w&&P,D=!1;const U=Array.isArray(k)?k:[k];let K=U.reduce(r(E),{});R===!1&&(K={});const{prevResolvedValues:X={}}=N,ee={...X,...K},J=G=>{F=!0,x.has(G)&&(D=!0,x.delete(G)),N.needsAnimating[G]=!0;const z=n.getValue(G);z&&(z.liveStyle=!1)};for(const G in ee){const z=K[G],te=X[G];if(v.hasOwnProperty(G))continue;let ne=!1;sw(z)&&sw(te)?ne=!yR(z,te):ne=z!==te,ne?z!=null?J(G):x.add(G):z!==void 0&&x.has(G)?J(G):N.protectedKeys[G]=!0}N.prevProp=k,N.prevResolvedValues=K,N.isActive&&(v={...v,...K}),s&&n.blockInitialAnimation&&(F=!1),F&&(!(M&&O)||D)&&g.push(...U.map(G=>({animation:G,options:{type:E}})))}if(x.size){const C={};x.forEach(E=>{const N=n.getBaseTarget(E),k=n.getValue(E);k&&(k.liveStyle=!0),C[E]=N??null}),g.push({animation:C})}let b=!!g.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(b=!1),s=!1,b?e(g):Promise.resolve()}function u(d,h){var m;if(t[d].isActive===h)return Promise.resolve();(m=n.variantChildren)===null||m===void 0||m.forEach(x=>{var v;return(v=x.animationState)===null||v===void 0?void 0:v.setActive(d,h)}),t[d].isActive=h;const g=a(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=$j(),s=!0}}}function NH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!yR(e,n):!1}function al(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $j(){return{animate:al(!0),whileInView:al(),whileHover:al(),whileTap:al(),whileDrag:al(),whileFocus:al(),exit:al()}}class Wa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jH extends Wa{constructor(e){super(e),e.animationState||(e.animationState=CH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();By(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let kH=0;class TH extends Wa{constructor(){super(...arguments),this.id=kH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const PH={animation:{Feature:jH},exit:{Feature:TH}};function Vf(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function bm(n){return{point:{x:n.pageX,y:n.pageY}}}const _H=n=>e=>U1(e)&&n(e,bm(e));function Cf(n,e,t,s){return Vf(n,e,_H(t),s)}const Vj=(n,e)=>Math.abs(n-e);function RH(n,e){const t=Vj(n.x,e.x),s=Vj(n.y,e.y);return Math.sqrt(t**2+s**2)}class o2{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=pb(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=RH(g.offset,{x:0,y:0})>=3;if(!x&&!v)return;const{point:w}=g,{timestamp:b}=wn;this.history.push({...w,timestamp:b});const{onStart:C,onMove:E}=this.handlers;x||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=fb(x,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=pb(g.type==="pointercancel"?this.lastMoveEventInfo:fb(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,C),w&&w(g,C)},!U1(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const a=bm(e),u=fb(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=wn;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,pb(u,this.history)),this.removeListeners=vm(Cf(this.contextWindow,"pointermove",this.handlePointerMove),Cf(this.contextWindow,"pointerup",this.handlePointerUp),Cf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Da(this.updatePoint)}}function fb(n,e){return e?{point:e(n.point)}:n}function Uj(n,e){return{x:n.x-e.x,y:n.y-e.y}}function pb({point:n},e){return{point:n,delta:Uj(n,a2(e)),offset:Uj(n,LH(e)),velocity:IH(e,.1)}}function LH(n){return n[0]}function a2(n){return n[n.length-1]}function IH(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=a2(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>ho(e)));)t--;if(!s)return{x:0,y:0};const o=fo(r.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-s.x)/o,y:(r.y-s.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const l2=1e-4,MH=1-l2,DH=1+l2,c2=.01,OH=0-c2,FH=0+c2;function Bs(n){return n.max-n.min}function BH(n,e,t){return Math.abs(n-e)<=t}function zj(n,e,t,s=.5){n.origin=s,n.originPoint=_t(e.min,e.max,n.origin),n.scale=Bs(t)/Bs(e),n.translate=_t(t.min,t.max,n.origin)-n.originPoint,(n.scale>=MH&&n.scale<=DH||isNaN(n.scale))&&(n.scale=1),(n.translate>=OH&&n.translate<=FH||isNaN(n.translate))&&(n.translate=0)}function Nf(n,e,t,s){zj(n.x,e.x,t.x,s?s.originX:void 0),zj(n.y,e.y,t.y,s?s.originY:void 0)}function Hj(n,e,t){n.min=t.min+e.min,n.max=n.min+Bs(e)}function $H(n,e,t){Hj(n.x,e.x,t.x),Hj(n.y,e.y,t.y)}function Wj(n,e,t){n.min=e.min-t.min,n.max=n.min+Bs(e)}function jf(n,e,t){Wj(n.x,e.x,t.x),Wj(n.y,e.y,t.y)}function VH(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?_t(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?_t(t,n,s.max):Math.min(n,t)),n}function Gj(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function UH(n,{top:e,left:t,bottom:s,right:r}){return{x:Gj(n.x,t,r),y:Gj(n.y,e,s)}}function Kj(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function zH(n,e){return{x:Kj(n.x,e.x),y:Kj(n.y,e.y)}}function HH(n,e){let t=.5;const s=Bs(n),r=Bs(e);return r>s?t=Yd(e.min,e.max-s,n.min):s>r&&(t=Yd(n.min,n.max-r,e.min)),bo(0,1,t)}function WH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const pw=.35;function GH(n=pw){return n===!1?n=0:n===!0&&(n=pw),{x:qj(n,"left","right"),y:qj(n,"top","bottom")}}function qj(n,e,t){return{min:Xj(n,e),max:Xj(n,t)}}function Xj(n,e){return typeof n=="number"?n:n[e]||0}const Yj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nu=()=>({x:Yj(),y:Yj()}),Qj=()=>({min:0,max:0}),$t=()=>({x:Qj(),y:Qj()});function Ys(n){return[n("x"),n("y")]}function u2({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function KH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function mb(n){return n===void 0||n===1}function mw({scale:n,scaleX:e,scaleY:t}){return!mb(n)||!mb(e)||!mb(t)}function cl(n){return mw(n)||d2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function d2(n){return Jj(n.x)||Jj(n.y)}function Jj(n){return n&&n!=="0%"}function ty(n,e,t){const s=n-t,r=e*s;return t+r}function Zj(n,e,t,s,r){return r!==void 0&&(n=ty(n,r,s)),ty(n,t,s)+e}function gw(n,e=0,t=1,s,r){n.min=Zj(n.min,e,t,s,r),n.max=Zj(n.max,e,t,s,r)}function h2(n,{x:e,y:t}){gw(n.x,e.translate,e.scale,e.originPoint),gw(n.y,t.translate,t.scale,t.originPoint)}const ek=.999999999999,tk=1.0000000000001;function XH(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=t[u],a=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ku(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,h2(n,a)),s&&cl(o.latestValues)&&ku(n,o.latestValues))}e.x<tk&&e.x>ek&&(e.x=1),e.y<tk&&e.y>ek&&(e.y=1)}function ju(n,e){n.min=n.min+e,n.max=n.max+e}function nk(n,e,t,s,r=.5){const o=_t(n.min,n.max,r);gw(n,e,t,o,s)}function ku(n,e){nk(n.x,e.x,e.scaleX,e.scale,e.originX),nk(n.y,e.y,e.scaleY,e.scale,e.originY)}function f2(n,e){return u2(qH(n.getBoundingClientRect(),e))}function YH(n,e,t){const s=f2(n,t),{scroll:r}=e;return r&&(ju(s.x,r.offset.x),ju(s.y,r.offset.y)),s}const p2=({current:n})=>n?n.ownerDocument.defaultView:null,QH=new WeakMap;class JH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(bm(m).point)},o=(m,g)=>{const{drag:x,dragPropagation:v,onDragStart:w}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HU(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ys(C=>{let E=this.getAxisMotionValue(C).get()||0;if(vi.test(E)){const{projection:N}=this.visualElement;if(N&&N.layout){const k=N.layout.layoutBox[C];k&&(E=Bs(k)*(parseFloat(E)/100))}}this.originPoint[C]=E}),w&&wt.postRender(()=>w(m,g)),ow(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:w,onDrag:b}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:C}=g;if(v&&this.currentDirection===null){this.currentDirection=ZH(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),d=()=>Ys(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new o2(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:p2(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&wt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!Hg(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=VH(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&Eu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=UH(r.layoutBox,t):this.constraints=!1,this.elastic=GH(s),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ys(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=WH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Eu(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=YH(s,r.root,this.visualElement.getTransformPagePoint());let a=zH(r.layout.layoutBox,o);if(t){const u=t(KH(a));this.hasMutatedConstraints=!!u,u&&(a=u2(u))}return a}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=Ys(m=>{if(!Hg(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const x=r?200:1e6,v=r?40:1e7,w={type:"inertia",velocity:s?e[m]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,w)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return ow(this.visualElement,e),s.start(eA(e,s,0,t,this.visualElement,!1))}stopAnimation(){Ys(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ys(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ys(t=>{const{drag:s}=this.getProps();if(!Hg(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[t];o.set(e[t]-_t(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Eu(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ys(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const d=u.get();r[a]=HH({min:d,max:d},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ys(a=>{if(!Hg(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(_t(d,h,r[a]))})}addListeners(){if(!this.visualElement.current)return;QH.set(this.visualElement,this);const e=this.visualElement.current,t=Cf(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Eu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),wt.read(s);const a=Vf(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ys(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())});return()=>{a(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=pw,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Hg(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ZH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class e8 extends Wa{constructor(e){super(e),this.removeGroupControls=Os,this.removeListeners=Os,this.controls=new JH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Os}unmount(){this.removeGroupControls(),this.removeListeners()}}const sk=n=>(e,t)=>{n&&wt.postRender(()=>n(e,t))};class t8 extends Wa{constructor(){super(...arguments),this.removePointerDownListener=Os}onPointerDown(e){this.session=new o2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:p2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:sk(e),onStart:sk(t),onMove:s,onEnd:(o,a)=>{delete this.session,r&&wt.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=Cf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ax={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Jh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(_e.test(n))n=parseFloat(n);else return n;const t=rk(n,e.target.x),s=rk(n,e.target.y);return`${t}% ${s}%`}},n8={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=Oa.parse(n);if(r.length>5)return s;const o=Oa.createTransformer(n),a=typeof r[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;r[0+a]/=u,r[1+a]/=d;const h=_t(u,d,.5);return typeof r[2+a]=="number"&&(r[2+a]/=h),typeof r[3+a]=="number"&&(r[3+a]/=h),o(r)}};class s8 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:o}=e;AU(r8),o&&(t.group&&t.group.add(o),s&&s.register&&r&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ax.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:o}=this.props,a=s.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||wt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),T1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function m2(n){const[e,t]=FV(),s=A.useContext(Q_);return c.jsx(s8,{...n,layoutGroup:s,switchLayoutGroup:A.useContext(iR),isPresent:e,safeToRemove:t})}const r8={borderRadius:{...Jh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jh,borderTopRightRadius:Jh,borderBottomLeftRadius:Jh,borderBottomRightRadius:Jh,boxShadow:n8};function i8(n,e,t){const s=Fn(n)?n:Bf(n);return s.start(eA("",s,e,t)),s.animation}function o8(n){return n instanceof SVGElement&&n.tagName!=="svg"}const a8=(n,e)=>n.depth-e.depth;class l8{constructor(){this.children=[],this.isDirty=!1}add(e){z1(this.children,e),this.isDirty=!0}remove(e){H1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(a8),this.isDirty=!1,this.children.forEach(e)}}function c8(n,e){const t=bi.now(),s=({timestamp:r})=>{const o=r-t;o>=e&&(Da(s),n(o-e))};return wt.read(s,!0),()=>Da(s)}const g2=["TopLeft","TopRight","BottomLeft","BottomRight"],u8=g2.length,ik=n=>typeof n=="string"?parseFloat(n):n,ok=n=>typeof n=="number"||_e.test(n);function d8(n,e,t,s,r,o){r?(n.opacity=_t(0,t.opacity!==void 0?t.opacity:1,h8(s)),n.opacityExit=_t(e.opacity!==void 0?e.opacity:1,0,f8(s))):o&&(n.opacity=_t(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let a=0;a<u8;a++){const u=`border${g2[a]}Radius`;let d=ak(e,u),h=ak(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||ok(d)===ok(h)?(n[u]=Math.max(_t(ik(d),ik(h),s),0),(vi.test(h)||vi.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=_t(e.rotate||0,t.rotate||0,s))}function ak(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const h8=x2(0,.5,MR),f8=x2(.5,.95,Os);function x2(n,e,t){return s=>s<n?0:s>e?1:t(Yd(n,e,s))}function lk(n,e){n.min=e.min,n.max=e.max}function qs(n,e){lk(n.x,e.x),lk(n.y,e.y)}function ck(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function uk(n,e,t,s,r){return n-=e,n=ty(n,1/t,s),r!==void 0&&(n=ty(n,1/r,s)),n}function p8(n,e=0,t=1,s=.5,r,o=n,a=n){if(vi.test(e)&&(e=parseFloat(e),e=_t(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=_t(o.min,o.max,s);n===o&&(u-=e),n.min=uk(n.min,e,t,u,r),n.max=uk(n.max,e,t,u,r)}function dk(n,e,[t,s,r],o,a){p8(n,e[t],e[s],e[r],e.scale,o,a)}const m8=["x","scaleX","originX"],g8=["y","scaleY","originY"];function hk(n,e,t,s){dk(n.x,e,m8,t?t.x:void 0,s?s.x:void 0),dk(n.y,e,g8,t?t.y:void 0,s?s.y:void 0)}function fk(n){return n.translate===0&&n.scale===1}function y2(n){return fk(n.x)&&fk(n.y)}function pk(n,e){return n.min===e.min&&n.max===e.max}function x8(n,e){return pk(n.x,e.x)&&pk(n.y,e.y)}function mk(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function v2(n,e){return mk(n.x,e.x)&&mk(n.y,e.y)}function gk(n){return Bs(n.x)/Bs(n.y)}function xk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class y8{constructor(){this.members=[]}add(e){z1(this.members,e),e.scheduleRender()}remove(e){if(H1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function v8(n,e,t){let s="";const r=n.x.translate/e.x,o=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((r||o||a)&&(s=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:x,skewX:v,skewY:w}=t;h&&(s=`perspective(${h}px) ${s}`),m&&(s+=`rotate(${m}deg) `),g&&(s+=`rotateX(${g}deg) `),x&&(s+=`rotateY(${x}deg) `),v&&(s+=`skewX(${v}deg) `),w&&(s+=`skewY(${w}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(s+=`scale(${u}, ${d})`),s||"none"}const ul={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},af=typeof window<"u"&&window.MotionDebug!==void 0,gb=["","X","Y","Z"],b8={visibility:"hidden"},yk=1e3;let w8=0;function xb(n,e,t,s){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),s&&(s[n]=0))}function b2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=kR(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wt,!(r||o))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&b2(s)}function w2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=w8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,af&&(ul.totalNodes=ul.resolvedTargetDeltas=ul.recalculatedProjection=0),this.nodes.forEach(E8),this.nodes.forEach(T8),this.nodes.forEach(P8),this.nodes.forEach(C8),af&&window.MotionDebug.record(ul)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new l8)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new W1),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=o8(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const x=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=c8(x,250),ax.hasAnimatedSinceResize&&(ax.hasAnimatedSinceResize=!1,this.nodes.forEach(bk))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeTargetChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||M8,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=m.getProps(),N=!this.targetLayout||!v2(this.targetLayout,w)||v,k=!x&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||x&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,k);const P={...B1(b,"layout"),onPlay:C,onComplete:E};(m.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else x||bk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&b2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vk);return}this.isUpdating||this.nodes.forEach(j8),this.isUpdating=!1,this.nodes.forEach(k8),this.nodes.forEach(S8),this.nodes.forEach(A8),this.clearAllSnapshots();const u=bi.now();wn.delta=bo(0,1e3/60,u-wn.timestamp),wn.timestamp=u,wn.isProcessing=!0,lb.update.process(wn),lb.preRender.process(wn),lb.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,T1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N8),this.sharedNodes.forEach(R8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!y2(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||cl(this.latestValues)||m)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),D8(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return $t();const d=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(O8))){const{scroll:m}=this.root;m&&(ju(d.x,m.offset.x),ju(d.y,m.offset.y))}return d}removeElementScroll(a){var u;const d=$t();if(qs(d,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:x}=m;m!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&qs(d,a),ju(d.x,g.offset.x),ju(d.y,g.offset.y))}return d}applyTransform(a,u=!1){const d=$t();qs(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ku(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),cl(m.latestValues)&&ku(d,m.latestValues)}return cl(this.latestValues)&&ku(d,this.latestValues),d}removeTransform(a){const u=$t();qs(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!cl(h.latestValues))continue;mw(h.latestValues)&&h.updateSnapshot();const m=$t(),g=h.measurePageBox();qs(m,g),hk(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return cl(this.latestValues)&&hk(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),jf(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$H(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qs(this.target,this.layout.layoutBox),h2(this.target,this.targetDelta)):qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),jf(this.relativeTargetOrigin,this.target,v.target),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}af&&ul.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||mw(this.parent.latestValues)||d2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;qs(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,v=this.treeScale.y;XH(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=$t());const{target:w}=u;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ck(this.prevProjectionDelta.x,this.projectionDelta.x),ck(this.prevProjectionDelta.y,this.projectionDelta.y)),Nf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==v||!xk(this.projectionDelta.x,this.prevProjectionDelta.x)||!xk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),af&&ul.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nu(),this.projectionDelta=Nu(),this.projectionDeltaWithTransform=Nu()}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=Nu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=$t(),v=d?d.source:void 0,w=this.layout?this.layout.source:void 0,b=v!==w,C=this.getStack(),E=!C||C.members.length<=1,N=!!(b&&!E&&this.options.crossfade===!0&&!this.path.some(I8));this.animationProgress=0;let k;this.mixTargetDelta=P=>{const R=P/1e3;wk(g.x,a.x,R),wk(g.y,a.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L8(this.relativeTarget,this.relativeTargetOrigin,x,R),k&&x8(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=$t()),qs(k,this.relativeTarget)),b&&(this.animationValues=m,d8(m,h,this.latestValues,R,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{ax.hasAnimatedSinceResize=!0,this.currentAnimation=i8(0,yk,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&S2(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||$t();const g=Bs(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const x=Bs(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+x}qs(u,d),ku(u,m),Nf(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new y8),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&xb("z",a,h,this.animationValues);for(let m=0;m<gb.length;m++)xb(`rotate${gb[m]}`,a,h,this.animationValues),xb(`skew${gb[m]}`,a,h,this.animationValues);a.render();for(const m in h)a.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return b8;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=ix(a==null?void 0:a.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=ix(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!cl(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const x=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=v8(this.projectionDeltaWithTransform,this.treeScale,x),m&&(h.transform=m(x,h.transform));const{x:v,y:w}=this.projectionDelta;h.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=x.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=g===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const b in Yx){if(x[b]===void 0)continue;const{correct:C,applyTo:E}=Yx[b],N=h.transform==="none"?x[b]:C(x[b],g);if(E){const k=E.length;for(let P=0;P<k;P++)h[E[P]]=N}else h[b]=N}return this.options.layoutId&&(h.pointerEvents=g===this?ix(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(vk),this.root.sharedNodes.clear()}}}function S8(n){n.updateLayout()}function A8(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:o}=n.options,a=t.source!==n.layout.source;o==="size"?Ys(g=>{const x=a?t.measuredBox[g]:t.layoutBox[g],v=Bs(x);x.min=s[g].min,x.max=x.min+v}):S2(o,t.layoutBox,s)&&Ys(g=>{const x=a?t.measuredBox[g]:t.layoutBox[g],v=Bs(s[g]);x.max=x.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const u=Nu();Nf(u,s,t.layoutBox);const d=Nu();a?Nf(d,n.applyTransform(r,!0),t.measuredBox):Nf(d,s,t.layoutBox);const h=!y2(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:v}=g;if(x&&v){const w=$t();jf(w,t.layoutBox,x.layoutBox);const b=$t();jf(b,s,v.layoutBox),v2(w,b)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=w,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function E8(n){af&&ul.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function C8(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function N8(n){n.clearSnapshot()}function vk(n){n.clearMeasurements()}function j8(n){n.isLayoutDirty=!1}function k8(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function bk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function T8(n){n.resolveTargetDelta()}function P8(n){n.calcProjection()}function _8(n){n.resetSkewAndRotation()}function R8(n){n.removeLeadSnapshot()}function wk(n,e,t){n.translate=_t(e.translate,0,t),n.scale=_t(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Sk(n,e,t,s){n.min=_t(e.min,t.min,s),n.max=_t(e.max,t.max,s)}function L8(n,e,t,s){Sk(n.x,e.x,t.x,s),Sk(n.y,e.y,t.y,s)}function I8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const M8={duration:.45,ease:[.4,0,.1,1]},Ak=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Ek=Ak("applewebkit/")&&!Ak("chrome/")?Math.round:Os;function Ck(n){n.min=Ek(n.min),n.max=Ek(n.max)}function D8(n){Ck(n.x),Ck(n.y)}function S2(n,e,t){return n==="position"||n==="preserve-aspect"&&!BH(gk(e),gk(t),.2)}function O8(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const F8=w2({attachResizeListener:(n,e)=>Vf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yb={current:void 0},A2=w2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yb.current){const n=new F8({});n.mount(window),n.setOptions({layoutScroll:!0}),yb.current=n}return yb.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),B8={pan:{Feature:t8},drag:{Feature:e8,ProjectionNode:A2,MeasureLayout:m2}};function Nk(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,o=s[r];o&&wt.postRender(()=>o(e,bm(e)))}class $8 extends Wa{mount(){const{current:e}=this.node;e&&(this.unmount=BU(e,t=>(Nk(this.node,t,"Start"),s=>Nk(this.node,s,"End"))))}unmount(){}}class V8 extends Wa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vm(Vf(this.node.current,"focus",()=>this.onFocus()),Vf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jk(n,e,t){const{props:s}=n;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),o=s[r];o&&wt.postRender(()=>o(e,bm(e)))}class U8 extends Wa{mount(){const{current:e}=this.node;e&&(this.unmount=zU(e,t=>(jk(this.node,t,"Start"),(s,{success:r})=>jk(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xw=new WeakMap,vb=new WeakMap,z8=n=>{const e=xw.get(n.target);e&&e(n)},H8=n=>{n.forEach(z8)};function W8({root:n,...e}){const t=n||document;vb.has(t)||vb.set(t,{});const s=vb.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(H8,{root:n,...e})),s[r]}function G8(n,e,t){const s=W8(e);return xw.set(n,t),s.observe(n),()=>{xw.delete(n),s.unobserve(n)}}const K8={some:0,all:1};class q8 extends Wa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:o}=e,a={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:K8[r]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),x=h?m:g;x&&x(d)};return G8(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(X8(e,t))&&this.startObserver()}unmount(){}}function X8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Y8={inView:{Feature:q8},tap:{Feature:U8},focus:{Feature:V8},hover:{Feature:$8}},Q8={layout:{ProjectionNode:A2,MeasureLayout:m2}},yw={current:null},E2={current:!1};function J8(){if(E2.current=!0,!!E1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>yw.current=n.matches;n.addListener(e),e()}else yw.current=!1}const Z8=[...XR,Dn,Oa],eW=n=>Z8.find(qR(n)),kk=new WeakMap;function tW(n,e,t){for(const s in e){const r=e[s],o=t[s];if(Fn(r))n.addValue(s,r);else if(Fn(o))n.addValue(s,Bf(r,{owner:n}));else if(o!==r)if(n.hasValue(s)){const a=n.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(s);n.addValue(s,Bf(a!==void 0?a:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const Tk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nW{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=bi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,wt.render(this.render,!1,!0))};const{latestValues:d,renderState:h,onUpdate:m}=a;this.onUpdate=m,this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=$y(t),this.isVariantNode=sR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...x}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in x){const w=x[v];d[v]!==void 0&&Fn(w)&&w.set(d[v],!1)}}mount(e){this.current=e,kk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),E2.current||J8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kk.delete(this.current),this.projection&&this.projection.unmount(),Da(this.notifyUpdate),Da(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ic.has(e),r=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&wt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qd){const t=Qd[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Tk.length;s++){const r=Tk[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=tW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Bf(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(GR(r)||OR(r))?r=parseFloat(r):!eW(r)&&Oa.test(t)&&(r=zR(e,t)),this.setBaseTarget(e,Fn(r)?r.get():r)),Fn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const a=_1(this.props,s,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(r=a[e])}if(s&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new W1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class C2 extends nW{constructor(){super(...arguments),this.KeyframeResolver=YR}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function sW(n){return window.getComputedStyle(n)}class rW extends C2{constructor(){super(...arguments),this.type="html",this.renderInstance=hR}readValueFromInstance(e,t){if(Ic.has(t)){const s=Y1(t);return s&&s.default||0}else{const s=sW(e),r=(cR(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return f2(e,t)}build(e,t,s){I1(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return F1(e,t,s)}}class iW extends C2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ic.has(t)){const s=Y1(t);return s&&s.default||0}return t=fR.has(t)?t:k1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return gR(e,t,s)}build(e,t,s){M1(e,t,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,s,r){pR(e,t,s,r)}mount(e){this.isSVGTag=O1(e.tagName),super.mount(e)}}const oW=(n,e)=>P1(n)?new iW(e):new rW(e,{allowProjection:n!==A.Fragment}),aW=RU({...PH,...Y8,...B8,...Q8},oW),Kn=KV(aW);function lW({isSelected:n}){return c.jsx(Kn.div,{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center",animate:{borderColor:n?"#002169":"#d1d5db",boxShadow:n?"0 0 0 2px rgba(0, 33, 105, 0.2)":"none"},children:n&&c.jsx(Kn.div,{className:"w-4 h-4 rounded-full bg-[#002169]",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30}})})}function cW({option:n}){return c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:n.label}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-lg font-bold",children:n.amount}),n.insufficientBalance&&c.jsx("span",{className:"ml-2 text-sm text-red-500",children:"잔액 부족"})]})]})}function uW({option:n,isSelected:e,onSelect:t,animationDelay:s}){return c.jsx(Kn.div,{className:`p-4 rounded-lg border ${e?"border-[#002169]":"border-gray-200"} ${n.insufficientBalance?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{n.insufficientBalance||t(n.id)},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s},whileHover:n.insufficientBalance?{}:{scale:1.02},whileTap:n.insufficientBalance?{}:{scale:.98},children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(cW,{option:n}),c.jsx(lW,{isSelected:e})]})})}const dW=({options:n,selectedPaymentId:e,onSelectPayment:t})=>c.jsx("div",{className:"space-y-4",children:n.map((s,r)=>c.jsx(uW,{option:s,isSelected:e===s.id,onSelect:t,animationDelay:r*.1},s.id))}),tA="http://localhost:8080";async function hW(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${tA}/api/orders/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});if(!t.ok)throw new Error(`Order creation failed with status ${t.status}`);return t.text()}async function fW(n){const e=sessionStorage.getItem("accessToken"),t=await fetch(`${tA}/api/orders/${n}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Failed to fetch order details with status ${t.status}`);return t.json()}async function pW(){const n=sessionStorage.getItem("accessToken"),e=await fetch(`${tA}/api/orders`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!e.ok)throw new Error(`Failed to fetch order details with status ${e.status}`);return e.json()}function mW(){var g,x,v,w,b,C,E,N,k,P,R;const n=ke(),[e,t]=A.useState(null),s=lh(),[r,o]=A.useState({}),[a,u]=A.useState(0);A.useEffect(()=>{const M=localStorage.getItem("totalPrice");M&&u(Number(M))},[]),A.useEffect(()=>{(async()=>{try{const D=(await H_()).balance.reduce((U,K)=>(U[K.currency]=K.balance,U),{});o(D)}catch(O){console.error("Error fetching balances:",O)}})()},[]);const d=[{id:"XRP",label:"XRP",amount:(g=s["KRW-XRP"])!=null&&g.trade_price?`${(a/s["KRW-XRP"].trade_price).toFixed(2)} XRP`:"Loading...",insufficientBalance:!((x=s["KRW-XRP"])!=null&&x.trade_price)||r.XRP===void 0||r.XRP<a/s["KRW-XRP"].trade_price},{id:"SOL",label:"SOL",amount:(v=s["KRW-SOL"])!=null&&v.trade_price?`${(a/((w=s["KRW-SOL"])==null?void 0:w.trade_price)).toFixed(2)} SOL`:"Loading...",insufficientBalance:!((b=s["KRW-SOL"])!=null&&b.trade_price)||r.SOL===void 0||r.SOL<a/((C=s["KRW-SOL"])==null?void 0:C.trade_price)},{id:"USDT",label:"USDT",amount:(E=s["KRW-USDT"])!=null&&E.trade_price?`${(a/((N=s["KRW-USDT"])==null?void 0:N.trade_price)).toFixed(2)} USDT`:"Loading...",insufficientBalance:!((k=s["KRW-USDT"])!=null&&k.trade_price)||r.USDT===void 0||r.USDT<a/((P=s["KRW-USDT"])==null?void 0:P.trade_price)}],h=M=>{t(M)},m=async()=>{var ee;if(!e)return;const M=d.find(J=>J.id===e);if(M!=null&&M.insufficientBalance){alert("잔액이 부족합니다.");return}const O=localStorage.getItem("cartItems");if(!O){alert("장바구니에 담긴 상품이 없습니다.");return}const F=JSON.parse(O);if(!F.length){alert("장바구니가 비어있습니다.");return}const D=(ee=F[0])==null?void 0:ee.storeId;if(D==null){alert("유효한 가게 정보가 없습니다. (storeId is null)");return}const U=F.map(J=>({menuId:J.id,menuCount:J.quantity})),K=s[`KRW-${e}`].trade_price;if(!K){alert("시세 정보를 불러오지 못했습니다. 잠시 후 다시 시도해주세요.");return}const X={storeId:D,orderDetails:U,currency:e,exchangeRate:K};try{const J=await hW(X);n("/mall/store/order-pending",{state:{orderId:J}})}catch(J){console.error("Order creation failed:",J),alert("주문 생성에 실패했습니다.")}};return c.jsxs("div",{className:"flex flex-col min-h-screen",children:[c.jsx(Ie,{title:"결제수단 선택",isStore:!1}),c.jsxs("div",{className:"flex-grow page-container bg-white pb-0 pt-5",children:[c.jsx("div",{className:"p-4 min-h-[70vh]",children:c.jsx(dW,{options:d,selectedPaymentId:e,onSelectPayment:h})}),c.jsx("div",{className:"flex justify-center mt-auto px-4 pb-4",children:c.jsx(Be,{text:"주문하기",onClick:m,color:"primary",disabled:!e||((R=d.find(M=>M.id===e))==null?void 0:R.insufficientBalance),fullWidth:!0})})]}),c.jsx(st,{})]})}const gW=({items:n,onIncrease:e,onDecrease:t})=>c.jsx("div",{className:"space-y-5",children:n.map(s=>c.jsxs("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx("div",{className:"flex-shrink-0 mr-4",children:c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:s.image,alt:s.name,className:"w-20 h-20 object-cover rounded-lg shadow-sm"}),c.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs font-medium px-2 py-1 rounded-full",children:s.quantity})]})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-base font-medium text-gray-800 mb-1",children:s.name}),c.jsxs("p",{className:"text-blue-600 font-medium",children:[s.price.toLocaleString()," KRW"]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("button",{className:"w-8 h-8 flex items-center justify-center text-blue-600 rounded-full hover:bg-blue-50 transition-colors",onClick:()=>t(s.id),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),c.jsx("span",{className:"w-6 text-center font-medium text-gray-700",children:s.quantity}),c.jsx("button",{className:"w-8 h-8 flex items-center justify-center text-blue-600 rounded-full hover:bg-blue-50 transition-colors",onClick:()=>e(s.id),children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},s.id))}),xW=({totalPrice:n,onCheckoutClick:e})=>c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-3",children:"결제 정보"}),c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[c.jsx("span",{children:"상품 금액"}),c.jsxs("span",{children:[n.toLocaleString()," KRW"]})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[c.jsx("span",{children:"배송비"}),c.jsx("span",{children:"0 KRW"})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[c.jsx("span",{children:"할인 금액"}),c.jsx("span",{children:"0 KRW"})]})]}),c.jsxs("div",{className:"flex justify-between items-center py-4 border-t border-b mb-6",children:[c.jsx("span",{className:"font-medium text-gray-800",children:"총 결제 금액"}),c.jsxs("span",{className:"font-bold text-xl text-blue-700",children:[n.toLocaleString()," KRW"]})]}),c.jsx(Be,{text:"결제수단 선택",onClick:e,className:"w-full py-3 rounded-lg font-medium bg-blue-700 hover:bg-blue-800 text-white transition-colors shadow-md"})]}),yW=({onClick:n})=>c.jsxs("button",{className:"flex items-center justify-center w-full py-3 rounded-lg bg-blue-50 text-blue-700 font-medium hover:bg-blue-100 transition-colors",onClick:n,children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:c.jsx("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{children:"더 담으러 가기"})]});function vW(){const n=ke(),[e,t]=A.useState([]),[s,r]=A.useState(null),o=e.length>0?e[0].storeId:0;A.useEffect(()=>{const u=localStorage.getItem("cartItems");u?t(JSON.parse(u)):(console.warn("로컬 스토리지에 장바구니 데이터가 없습니다."),n(-1))},[]),A.useEffect(()=>{e.length>0&&(async()=>{try{const d=e[0].storeId,h=await q_(d);r(h)}catch(d){console.error("Error fetching store data:",d)}})()},[e]);const a=e.reduce((u,d)=>u+d.price*d.quantity,0);return A.useEffect(()=>{localStorage.setItem("totalPrice",a.toString())},[a]),c.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[c.jsx(Ie,{title:"장바구니",isStore:!1}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"text-center px-4 mt-4 mb-5",children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:s==null?void 0:s.storeName}),c.jsxs("p",{className:"text-base tracking-tight mt-2 text-gray-700",children:["주소: ",s==null?void 0:s.storeAddress]}),c.jsx("div",{className:"flex justify-center mt-5 mb-5",children:c.jsx(Oy,{coins:(s==null?void 0:s.coinList)||[]})})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5 mb-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-3",children:"주문 상품 목록"}),c.jsx("div",{className:"space-y-5",children:c.jsx(gW,{items:e,onIncrease:u=>{t(d=>{const h=d.map(m=>m.id===u?{...m,quantity:m.quantity+1}:m);return localStorage.setItem("cartItems",JSON.stringify(h)),h})},onDecrease:u=>{t(d=>{const h=d.map(m=>m.id===u?{...m,quantity:Math.max(0,m.quantity-1)}:m).filter(m=>m.quantity>0);return localStorage.setItem("cartItems",JSON.stringify(h)),h})}})}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:c.jsx(yW,{onClick:()=>n(`/mall/store/${o}`)})})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 mb-12",children:c.jsx(xW,{totalPrice:a,onCheckoutClick:()=>n("/mall/store/order")})})]})}),c.jsx(st,{})]})}const bW=({currentStep:n})=>{const e=[{label:"주문요청",number:1},{label:"주문확인",number:2},{label:"준비완료",number:3}];return c.jsx("div",{className:"flex justify-between items-center mb-8",children:e.map((t,s)=>c.jsxs(ps.Fragment,{children:[c.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[c.jsx("div",{className:`w-8 h-8 rounded-full ${t.number<=n?"bg-[#002169] text-white":"bg-gray-300 text-gray-500"} flex items-center justify-center mb-2`,children:n>=t.number?c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M20 6L9 17L4 12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):t.number}),c.jsx("div",{className:`text-xs ${t.number<=n?"text-[#002169] font-medium":"text-gray-500"}`,children:t.label})]}),s<e.length-1&&c.jsx("div",{className:"w-16 h-1 bg-gray-300"})]},t.number))})},wW=(n,e)=>{switch(n){case"WAITING":return c.jsx("div",{className:"text-xs text-blue-500",children:"주문 접수"});case"PAID":return c.jsx("div",{className:"text-xs text-green-500",children:"주문 수락"});case"COMPLETED":return c.jsx("div",{className:"text-xs text-green-500",children:"준비 완료"});case"CANCELLED":return c.jsxs("div",{className:"text-xs text-red-500",children:["주문 거절",e?" - "+e:""]});default:return c.jsx("div",{className:"text-xs text-gray-500",children:"알 수 없는 상태"})}},SW=({orderId:n,totalPrice:e,orderStatus:t,orderType:s,orderDetails:r,reason:o})=>c.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-md flex items-center justify-center mr-2",children:c.jsx(AW,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-bold",children:["Order #",n]}),wW(t,o)]})]}),c.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[c.jsxs("p",{children:["주문 유형: ",s]}),c.jsxs("p",{children:["총 금액: ",e.toLocaleString()," 원"]})]}),c.jsx("div",{className:"mt-4",children:r.map((a,u)=>c.jsxs("div",{className:"flex justify-between text-sm py-1 border-b last:border-0",children:[c.jsxs("span",{children:[a.menuName," x ",a.menuCount]}),c.jsxs("span",{children:[(a.menuPrice*a.menuCount).toLocaleString()," 원"]})]},u))})]}),AW=()=>c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z",stroke:"#4CAF50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z",stroke:"#4CAF50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6",stroke:"#4CAF50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),EW=({orderStatus:n})=>{let e="",t="",s="",r=null;switch(n){case"PAID":e="주문이 확인되었습니다",t="결제가 완료되었습니다.",s="bg-blue-100",r=c.jsx("svg",{className:"w-12 h-12 text-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});break;case"COMPLETED":e="준비완료",t="주문하신 상품이 준비되었습니다.",s="bg-green-100",r=c.jsx("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});break;case"CANCELLED":e="주문이 취소되었습니다",t="취소된 주문입니다.",s="bg-red-100",r=c.jsx("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});break;default:e="주문이 접수되었습니다",t="곧 매장에서 주문을 확인할 예정입니다.",s="bg-green-100",r=c.jsx("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});break}return c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:`inline-block rounded-full ${s} p-4 mb-4 shadow-md`,children:r}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:e}),c.jsx("p",{className:"text-gray-600",children:t})]})};function CW(){const n=ke(),{orderId:e}=xs(),[t,s]=A.useState(null),r=u=>{switch(u){case"WAITING":return 1;case"PAID":return 2;case"COMPLETED":return 3;default:return 1}};A.useEffect(()=>{if(!e)return;const u=async()=>{try{const h=await fW(e);s(h)}catch(h){console.error("Failed to fetch order details:",h)}};u();const d=setInterval(u,1e4);return()=>clearInterval(d)},[e]),A.useEffect(()=>{localStorage.removeItem("totalPrice"),localStorage.removeItem("cartItems")},[]);const o={hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.3,staggerChildren:.2}}},a={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}};return c.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[c.jsx(Ie,{title:"주문 요청",isStore:!1}),c.jsx(Kn.div,{className:"flex-grow",initial:"hidden",animate:"visible",variants:o,children:c.jsxs("div",{className:"p-6",children:[c.jsx(Kn.div,{variants:a,children:c.jsx(EW,{orderStatus:t?t.orderStatus:"WAITING"})}),c.jsx(Kn.div,{variants:a,children:c.jsx(bW,{currentStep:t?r(t.orderStatus):1})}),c.jsx(Kn.div,{variants:a,className:"my-8 transition-all duration-300 hover:shadow-lg rounded-xl",children:t?c.jsx(SW,{orderId:t.orderId,totalPrice:t.totalPrice,orderStatus:t.orderStatus,orderType:t.orderType,orderDetails:t.orderDetails}):c.jsx("p",{children:"주문 상세 정보를 불러오는 중..."})}),c.jsx(Kn.div,{className:"mt-6",variants:a,whileHover:{scale:1.03},whileTap:{scale:.97},children:c.jsx(Be,{text:"홈으로 돌아가기",onClick:()=>n("/mall"),color:"primary",className:"py-4 rounded-xl shadow-lg",fullWidth:!0})}),c.jsx(Kn.div,{className:"mt-6 text-center text-gray-500 text-sm",variants:a})]})}),c.jsx(st,{})]})}const NW=()=>{const[n,e]=A.useState(""),[t,s]=A.useState("전체"),r=ke(),[o,a]=A.useState(!1),[u,d]=A.useState([]),[h,m]=A.useState(!0),[g,x]=A.useState(null);A.useEffect(()=>(window.scrollTo(0,0),a(!0),document.body.style.overflow="hidden",document.body.classList.remove("page-transition"),(async()=>{try{m(!0);const N=await dV();d(N),x(null)}catch(N){console.error("Error fetching stores:",N),x("가게 목록을 불러오는데 실패했습니다. 다시 시도해주세요.")}finally{m(!1)}})(),()=>{document.body.style.overflow=""}),[]);const v=E=>{E.preventDefault()},w=u.filter(E=>{const N=n===""||E.storeName.toLowerCase().includes(n.toLowerCase()),k=t==="전체"||E.storeType===t;return N&&k}),b=g?[]:w;return c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"쇼핑몰",isStore:!1}),c.jsxs("main",{className:"flex-1 overflow-auto",children:[c.jsx("div",{className:"bg-white shadow-sm",children:c.jsxs("div",{className:"px-5 pt-5 pb-3",children:[c.jsxs("form",{onSubmit:v,className:"relative mb-5",children:[c.jsx("input",{type:"text",placeholder:"상품 검색어를 입력해 주세요.",value:n,onChange:E=>e(E.target.value),className:"w-full h-12 bg-gray-100 rounded-full pl-5 pr-12 focus:outline-none focus:ring-2 focus:ring-[#002169] focus:ring-opacity-30 transition-all"}),c.jsx("button",{type:"submit",className:"absolute right-4 top-3",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-500",children:c.jsx("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{className:"flex border-b border-gray-200",children:[["전체","음식점","카페"].map(E=>c.jsxs("button",{className:`px-5 py-3 text-sm font-medium relative transition-all ${t===E?"text-[#002169] font-semibold":"text-gray-500 hover:text-gray-700"}`,onClick:()=>s(E),children:[E,t===E&&c.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[#002169] rounded-t-full"})]},`tab-${E}`)),c.jsxs("button",{className:"ml-auto px-4 py-3 text-sm font-medium text-gray-600 flex items-center",children:["최신순",c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ml-1",children:c.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})}),h?c.jsx("div",{className:"flex justify-center items-center p-10",children:c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#002169]"})}):g?c.jsxs("div",{className:"px-5 py-10 text-center text-gray-600",children:[c.jsx("p",{children:g}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-[#002169] text-white rounded-lg hover:bg-opacity-90",children:"새로고침"})]}):c.jsx("div",{className:"bg-gray-50 py-3",children:c.jsx("div",{className:"px-5 space-y-4",children:b.length>0?b.map(E=>c.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 transition-all hover:shadow-md",onClick:()=>{document.body.classList.add("page-transition"),r(`/mall/store/${E.storeId}`)},children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:E.storeName}),c.jsx("div",{className:"flex items-center",children:c.jsx("img",{src:E.storeImage,alt:E.storeName,width:80,height:60,className:"rounded-lg object-cover"})})]}),c.jsx(Oy,{coins:E.coinList||[]}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsx("div",{className:"text-sm text-gray-500",children:E.storeType&&c.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-full",children:E.storeType})}),c.jsxs("div",{className:"flex items-center text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1",children:c.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsx("span",{className:"text-sm font-medium",children:E.likeCount||0})]})]})]},`store-${E.storeId}`)):c.jsx("div",{className:"py-10 text-center text-gray-600",children:c.jsx("p",{children:"표시할 가게가 없습니다."})})})})]}),c.jsx(st,{}),c.jsx("style",{dangerouslySetInnerHTML:{__html:`
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
    }

    #root {
      height: 100%;
      width: 100%;
      overflow: hidden;
    }

    .page-transition {
      opacity: 0.8;
      transition: opacity 0.2s ease-in-out;
    }
  `}})]})};function jW(){var O,F;const{bank:n}=xs(),e=ke(),s=((O=et().state)==null?void 0:O.isUser)??!1,[r,o]=A.useState(!0),[a,u]=A.useState(0),[d,h]=A.useState(null),m=A.useRef(null),g=b1(D=>D.tokens),x=lh(),v=g.find(D=>D.currency===n),w=(D,U)=>U===0?0:D/U,[b,C]=A.useState(0),[E,N]=A.useState(0);A.useEffect(()=>{if(!d||!x)return;const D=d.portfolios.reduce((K,X)=>{var J;const ee=((J=x[`KRW-${X.currency}`])==null?void 0:J.trade_price)??0;return K+(X.amount??0)*ee},0);C(D);const U=w(D,d.totalSupply??0);N(U)},[d,x]),A.useEffect(()=>{if(!n)return;const D=async()=>{const[K]=await Promise.all([S1(n)]);h(K)};D();const U=setInterval(D,5e3);return()=>clearInterval(U)},[n]);const{data:k,fetchNextPage:P,hasNextPage:R,isFetchingNextPage:M}=DT({queryKey:["tokenExchangeHistory",n],queryFn:({pageParam:D=0})=>MV(n??"",D,5),getNextPageParam:D=>{var U;if(!(D.last||(((U=D.content)==null?void 0:U.length)||0)===0))return D.pageable.pageNumber+1},enabled:!!n,initialPageParam:0,refetchOnWindowFocus:!1});return A.useEffect(()=>{const D=new IntersectionObserver(U=>{U[0].isIntersecting&&R&&!M&&P()});return m.current&&D.observe(m.current),()=>D.disconnect()},[P,R,M]),A.useEffect(()=>{n&&Y_(n).then(D=>u(D)).catch(D=>{console.error("잔액 조회 실패:",D),u(0)})},[n]),n?c.jsxs("div",{className:"relative flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:`${n} 상세`,onBackClick:()=>{e("/my/coin")}}),c.jsxs("main",{className:"flex-1 overflow-auto p-3 transition-all duration-500 ease-in-out sm:p-4 md:p-5",children:[c.jsx("div",{className:"mb-4 rounded-xl border border-gray-200 bg-white p-4 shadow-[0_2px_10px_rgba(0,0,0,0.04)] transition-all duration-500 ease-in-out sm:mb-5 sm:p-8 md:mb-6 md:rounded-2xl md:border-2 md:p-12 md:shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[(v==null?void 0:v.bankImageUrl)&&c.jsx("img",{src:v.bankImageUrl,alt:v.name,className:"h-8 w-8 rounded-full"}),c.jsx("p",{className:"ml-3 text-lg font-semibold sm:text-xl md:text-2xl",children:"총 보유"})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-lg font-bold sm:text-xl md:text-2xl",children:[a.toFixed(2)," ",n]}),c.jsxs("p",{className:"text-sm text-gray-500 sm:text-base",children:[(E*a).toFixed(2)," KRW"]})]})]})}),c.jsx("div",{className:"mb-4 w-full sm:mb-5 md:mb-6",children:c.jsx("button",{className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#0a2e64] py-3 font-semibold text-white shadow transition-all hover:bg-[#081d40]",onClick:()=>{setTimeout(()=>{e(`/token/exchange/${n}`,{state:{bank:n,isUser:s}})},200)},children:c.jsx("span",{className:"text-base text-white",children:"토큰 환전"})})}),c.jsxs("div",{className:"mb-3 flex items-center justify-between sm:mb-4",children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 sm:text-lg",children:"거래 내역"}),c.jsxs("button",{className:"flex items-center text-xs font-medium text-[#0a2e64] sm:text-sm",children:["전체보기",c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ml-1",children:c.jsx("path",{d:"M6 12L10 8L6 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),c.jsxs("div",{className:"space-y-4 pb-16 text-sm sm:space-y-5 sm:pb-10 sm:text-base md:space-y-6 md:text-lg lg:text-xl",children:[Array.isArray(k==null?void 0:k.pages)&&k.pages.length>0?k.pages.map((D,U)=>D.content.map((K,X)=>{var ae;const ee=w(b,(d==null?void 0:d.totalSupply)??0),J=Math.floor(K.amount*ee).toLocaleString();return c.jsx("div",{className:"transition-all duration-300 ease-in-out",children:c.jsx(z_,{date:new Date(K.transferredAt).toLocaleString(),type:K.amount>0?"환전 입금 완료":"환전 출금 완료",balance:`${((ae=K.afterBalance)==null?void 0:ae.toFixed(2))??"-"} ${n}`,amount:`${K.amount.toFixed(2)} ${n}`,krw:`${J} KRW`,isDeposit:K.amount>0,showAfterBalance:K.status==="ACCEPTED"})},K.id||`${K.transferredAt}-${K.amount}-${U}-${X}`)})):!r&&c.jsx("div",{className:"flex items-center justify-center py-10 text-gray-500",children:c.jsx("p",{children:"거래 내역이 없습니다"})}),c.jsxs("div",{ref:m,className:"mt-4 flex h-10 items-center justify-center",children:[M&&c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-gray-200 border-t-[#0a2e64]"}),!R&&((F=k==null?void 0:k.pages[0])==null?void 0:F.content.length)>0&&c.jsx("p",{className:"text-sm text-gray-500",children:"더 이상 거래 내역이 없습니다"})]})]})]}),c.jsx(st,{})]}):c.jsx("div",{className:"p-4",children:"잘못된 경로입니다."})}const kW=(n,e,t,s,r)=>n?e?e*s/r:0:t?t*r/s:0;function TW(n,e){return n.reduce((t,s)=>{var a;const r=((a=e[`KRW-${s.currency}`])==null?void 0:a.trade_price)??0,o=s.amount-(s.nonAvailableAmount||0);return t+o*r},0)}function Pk(n,e){return!e||e===0?0:n/e}function PW({tokenInfo:n,selectedCurrency:e,tokenCapital:t,tickerData:s}){var g;if(!n||!e||!t||!n.totalSupply)return"-";const r=t/n.totalSupply,o=((g=s[`KRW-${e}`])==null?void 0:g.trade_price)??0,a=n.portfolios.find(x=>x.currency===e);return a?(((a.amount??0)-(a.nonAvailableAmount??0))*o/r*r/o).toFixed(2):"-"}function _W({tokenInfo:n,selectedCurrency:e,tokenCapital:t,tickerData:s}){var m;if(!n||!e||!t||!n.tokenBalance)return"-";const r=t/n.tokenBalance,o=((m=s[`KRW-${e}`])==null?void 0:m.trade_price)??0,a=n.portfolios.find(g=>g.currency===e),u=((a==null?void 0:a.amount)??0)-((a==null?void 0:a.nonAvailableAmount)??0);return o===0||r===0?"-":(u*o/r).toFixed(2)}function RW(){var J,ae;const n=ke(),{bank:e}=xs(),[t,s]=A.useState(null),[r,o]=A.useState("XRP"),[a,u]=A.useState(0),[d,h]=A.useState(0),[m,g]=A.useState(0),[x,v]=A.useState(!0),[w,b]=A.useState(0),[C,E]=A.useState(0),N=t==null?void 0:t.portfolios.find(Y=>Y.currency===r),k=v1(Y=>Y.coins),P=b1(Y=>Y.tokens),R=k.find(Y=>Y.currency===r),M=P.find(Y=>Y.currency===e),O=lh();A.useEffect(()=>{if(!e)return;(async()=>{const[G]=await Promise.all([S1(e)]);s(G),o(z=>z||(G.portfolios.length>0?G.portfolios[0].currency:""))})()},[e]),A.useEffect(()=>{var ne;if(!t||!r)return;const Y=TW(t.portfolios,O);g(Number(Y.toFixed(2)));const G=Pk(Y,t.tokenBalance),z=((ne=O[`KRW-${r}`])==null?void 0:ne.trade_price)??0;if(!z||!G)return;const te=kW(x,a,d,z,G);x?h(Number(te.toFixed(2))):u(Number(te.toFixed(2)))},[t,r,a,d,x,O]);const F=A.useMemo(()=>Pk(m,(t==null?void 0:t.tokenAmount)??0),[m,t==null?void 0:t.tokenAmount]),D=A.useMemo(()=>_W({tokenInfo:t,selectedCurrency:r,tokenCapital:m,tickerData:O}),[t,r,m,O]),U=A.useMemo(()=>PW({tokenInfo:t,selectedCurrency:r,tokenCapital:m,tickerData:O}),[t,r,m,O]),K=A.useMemo(()=>{var G;if(!a||!r||!O)return 0;const Y=((G=O[`KRW-${r}`])==null?void 0:G.trade_price)??0;return(a*Y).toFixed(2)},[a,r,O]),X=A.useMemo(()=>!d||!F?0:(d*F).toFixed(2),[d,F]),ee=async()=>{if(!t)return console.error("Exchange error");const Y={};t.portfolios.forEach(G=>{var ne;const z=G.currency,te=(ne=O[`KRW-${z}`])==null?void 0:ne.trade_price;te!=null?Y[z]=Number(te.toFixed(2)):console.warn(` ${z} 시세를 찾을 수 없습니다.`)});try{await IV(x,{fromCurrency:x?r:t.currency,toCurrency:x?t.currency:r,coinRates:Y,tokenAmount:d??0,coinAmount:a??0}),n("/token/exchange/complete",{state:{bank:t.currency,fromCurrency:r,toCurrency:t.currency,fromAmount:a,toAmount:d,isCoinToToken:x}})}catch(G){console.error(G),alert("환전 요청에 실패했습니다.")}};return A.useEffect(()=>{e&&(Y_(e).then(E).catch(Y=>{console.error("토큰 잔액 조회 실패:",Y),E(0)}),x1(r).then(Y=>{b(Y.balance)}).catch(Y=>{console.error("코인 잔액 조회 실패:",Y),b(0)}))},[e,r]),c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"토큰 환전"}),c.jsxs("main",{className:"flex-1 overflow-auto p-5",children:[c.jsx("div",{className:"mb-6 mt-6 min-h-[10px] rounded-2xl border-2 border-gray-200 bg-white p-6 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center gap-0.5",children:t&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"ml-3 flex items-center gap-3",children:x?(R==null?void 0:R.coinImageUrl)&&c.jsx("img",{src:R.coinImageUrl,alt:R.coinName,className:"h-10 w-10 rounded-full"}):(M==null?void 0:M.bankImageUrl)&&c.jsx("img",{src:M.bankImageUrl,alt:M.name,className:"h-10 w-10 rounded-full"})}),x?((J=t==null?void 0:t.portfolios)==null?void 0:J.length)>0&&c.jsx("select",{value:r,onChange:Y=>o(Y.target.value),className:"rounded border border-none px-3 py-1 text-lg font-bold outline-none",children:t.portfolios.map(Y=>c.jsx("option",{value:Y.currency,children:Y.currency},Y.currency))}):c.jsx("p",{className:"ml-3 text-lg font-bold",children:t.currency})]})}),c.jsxs("div",{className:"mr-3 mt-0 flex min-w-[140px] flex-col items-end space-y-1",children:[c.jsxs("p",{className:"text-xs text-gray-400",children:["보유:"," ",x?`${w} ${r}`:`${C} ${e}`]}),c.jsxs("div",{className:"flex items-baseline space-x-1",children:[c.jsx("input",{type:"number",step:"any",min:"0",className:"appearance-none border-none bg-transparent text-right text-lg font-bold outline-none",value:x?a:d,onChange:Y=>{const G=Number(Y.target.value),te=Math.min(G,x?w:C);x?u(te):h(te)},placeholder:"0"}),c.jsx("span",{className:"text-lg font-bold",children:x?r:t==null?void 0:t.currency})]}),c.jsx("p",{className:"text-xs text-gray-500",children:x?`≈ ${K} KRW`:`≈ ${X} KRW`})]})]})}),c.jsx("div",{className:"mb-4 flex justify-center",children:c.jsx("button",{onClick:()=>v(!x),className:"border-blue-300 hover:bg-blue-50 flex items-center justify-center rounded-full border bg-white p-3 shadow transition","aria-label":"Switch direction",children:c.jsx(v5,{size:20,className:"text-blue-800"})})}),c.jsx("div",{className:"mb-6 min-h-[110px] rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-0.5",children:[x?(M==null?void 0:M.bankImageUrl)&&c.jsx("img",{src:M.bankImageUrl,alt:M.name,className:"h-10 w-10 rounded-full"}):(R==null?void 0:R.coinImageUrl)&&c.jsx("img",{src:R.coinImageUrl,alt:R.coinName,className:"h-10 w-10 rounded-full"}),x?c.jsx("p",{className:"ml-4 text-lg font-bold",children:t==null?void 0:t.currency}):((ae=t==null?void 0:t.portfolios)==null?void 0:ae.length)>0&&c.jsx("select",{value:r,onChange:Y=>o(Y.target.value),className:"rounded border border-none px-3 py-1 text-lg font-bold outline-none",children:t.portfolios.map(Y=>c.jsx("option",{value:Y.currency,children:Y.currency},Y.currency))})]}),c.jsxs("div",{className:"text-blue-600 min-w-[100px] text-right text-xl font-bold",children:[x?d!==null?c.jsxs(c.Fragment,{children:[d,c.jsx("span",{className:"ml-5",children:t==null?void 0:t.currency})]}):"-":a!==null?c.jsxs(c.Fragment,{children:[a,c.jsx("span",{className:"ml-5",children:r})]}):"-",x&&N&&(()=>{N.amount,N.nonAvailableAmount})()]})]})}),c.jsx("div",{className:"mt-2 space-y-1 text-sm text-gray-500",children:c.jsxs("p",{children:["* 잔여 교환 가능"," ",x?`${r} → ${t==null?void 0:t.currency} : ${D} ${t==null?void 0:t.currency}`:`${t==null?void 0:t.currency} → ${r} : ${U} ${r}`]})})]}),c.jsxs("div",{className:"mb-28 border-none p-5",children:[c.jsxs("div",{className:"mb-3 flex items-end justify-between",children:[c.jsx("h2",{className:"text-xl font-bold",children:"토큰 구성"}),c.jsxs("p",{className:"text-sm text-gray-500",children:["총 자본금 ",m==null?void 0:m.toFixed(2).toLocaleString()," KRW"]})]}),t==null?void 0:t.portfolios.map(Y=>{const G=Y.nonAvailableAmount&&Y.amount>0?Y.nonAvailableAmount/Y.amount*100:0;return c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"mb-1 flex justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Y.currency}),c.jsxs("span",{className:"text-sm text-gray-600",children:["교환됨 ",G.toFixed(2),"%"]})]}),c.jsxs("div",{className:"flex h-3 w-full overflow-hidden rounded-full bg-gray-200",children:[c.jsx("div",{className:"bg-indigo-500",style:{width:`${100-G}%`}}),c.jsx("div",{className:"bg-fuchsia-400",style:{width:`${G}%`}})]})]},Y.currency)})]}),c.jsx("div",{className:"border-t border-gray-50 bg-gray-50 p-5 shadow-lg",children:c.jsx(Be,{text:"환전 요청",onClick:ee,className:"w-full rounded-lg py-3 text-lg font-semibold shadow-md"})}),c.jsx(st,{})]})}function LW(){const n=ke(),e=et(),{bank:t,fromCurrency:s,toCurrency:r,fromAmount:o,toAmount:a,isCoinToToken:u}=e.state||{},d=()=>{t?n(`/token/detail/${t}`):alert("잘못된 접근입니다.")};return c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{disableBack:!0,title:"토큰 환전"}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-2xl font-medium mb-2",children:"환전이"}),c.jsx("h2",{className:"text-2xl font-medium mb-12",children:"완료되었습니다."}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("p",{className:"text-3xl font-bold",children:u?`${o} ${s}`:`${a} ${r}`}),c.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M12 5v14M19 12l-7 7-7-7"})})}),c.jsx("p",{className:"text-3xl font-bold",children:u?`${a} ${r}`:`${o} ${s}`})]})]})}),c.jsx("div",{className:"p-5 bg-gray-50 shadow-lg border-t border-gray-50",children:c.jsx(Be,{text:"확인",onClick:d,className:"w-full rounded-lg py-3 font-semibold text-lg shadow-md"})}),c.jsx(st,{})]})}const IW={WTK:{label:"우리은행",image:"/woori.png"},STK:{label:"신한은행",image:"/shinhan.png"},HTK:{label:"하나은행",image:"/hana.png"},KTK:{label:"국민은행",image:"/hana.png"},NTK:{label:"농협은행",image:"/hana.png"}};function nA({bank:n}){const{label:e,image:t}=IW[n];return c.jsx("div",{className:"flex items-center",children:c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex items-center justify-center bg-gray-200",children:c.jsx("img",{src:t,alt:e,className:"object-cover w-full h-full"})})})}const Uf=y1(n=>({bankTokens:null,fetchBankTokens:async()=>{try{const t=(await RV()).map(s=>{const r=s.balances.map(a=>parseFloat(a)).reduce((a,u)=>a+u,0).toFixed(2),o=s.products.map(a=>({subscribeId:a.id,name:a.productName,amount:a.balance.toFixed(2),status:a.status==="ACTIVE"?"진행 중":"만료",rate:`${a.baseInterestRate.toFixed(2)}%`,maxMonthlyPayment:a.maxMonthlyPayment,preTaxInterest:a.preTaxInterest}));return{bankTokenName:s.bankTokenName,currency:s.currency,totalBalance:r,products:o}}).sort((s,r)=>s.bankTokenName.localeCompare(r.bankTokenName));n({bankTokens:t})}catch(e){console.error("토큰 계좌 조회 실패:",e),n({bankTokens:[]})}}}));function MW(){const n=ke(),[e,t]=A.useState(0),{bankTokens:s}=Uf(),{subscribeId:r}=xs(),o=et(),{productState:a,tokenInfoState:u}=o.state||{},[d,h]=A.useState(0);if(!r||!a||!u)return c.jsx("div",{className:"p-4",children:"해당 토큰 정보를 찾을 수 없습니다."});A.useEffect(()=>{if(!r)return;(async()=>{try{const v=await X_(r,0,100),w=v.content??v,b=new Date,C=new Date(b.getFullYear(),b.getMonth(),1),N=w.filter(k=>{const P=new Date(k.date);return k.eventType.toUpperCase()==="DEPOSIT"&&P>=C&&P<=b}).reduce((k,P)=>k+Number(P.amount),0);h(N)}catch(v){console.error("이번 달 예치 합산 실패",v)}})()},[r]);const m=async()=>{if(!r||e<=0){alert("예치할 금액을 입력해주세요.");return}console.log("product",a.maxMonthlyPayment);try{await _V(r,e),alert("예치가 완료되었습니다."),n(`/token/product/detail/${r}`,{state:{productState:a,tokenInfoState:u},replace:!0})}catch(x){alert(x.message)}},g=Math.max(0,Number(a.maxMonthlyPayment)-d);return c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"토큰 예치"}),c.jsxs("main",{className:"flex-1 overflow-auto p-5",children:[c.jsx("div",{className:"mb-6 rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:c.jsx(nA,{bank:u.currency})}),c.jsx("p",{className:"text-xl font-semibold",children:u.bankTokenName})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[c.jsx("input",{type:"number",step:1e3,min:0,value:e,onChange:x=>t(Number(x.target.value)),placeholder:"예치할 금액 입력",className:"text-xl font-bold text-right w-full border-none bg-transparent focus:outline-none focus:ring-0"}),c.jsx("span",{className:"text-xl font-bold text-black",children:u.currency})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["= ",a.evaluated]})]})]})}),c.jsx("div",{className:"flex justify-center my-1",children:c.jsx("div",{className:"w-10 h-12 bg-navy-800 flex items-center justify-center rounded-full -mt-3",children:c.jsxs("svg",{className:"w-6 h-10 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 3v16"}),c.jsx("path",{d:"M19 12l-7 7-7-7"})]})})}),c.jsx("div",{className:"mb-6 rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium whitespace-pre",children:a.rate})})}),c.jsx("p",{className:"text-xl font-semibold",children:a.name})]}),c.jsx("div",{className:"text-right gap-0.5",children:c.jsxs("p",{className:"text-xl font-bold ",children:[e.toLocaleString()," ",u.currency]})})]})},a.subscribeId),c.jsxs("div",{className:"mt-6 space-y-3 text-sm text-gray-700",children:[c.jsxs("p",{className:"leading-snug",children:["💡 한달 최대 ",c.jsx("span",{className:"text-indigo-600 text-base font-bold",children:Number(a.maxMonthlyPayment).toLocaleString()}),c.jsx("span",{className:"ml-1 text-indigo-600 text-base font-bold",children:u.currency})," 예치 가능"]}),c.jsxs("p",{className:"leading-snug",children:["💰 이번 달 남은 예치 가능 토큰:"," ",c.jsx("span",{className:"text-indigo-600 text-base text font-bold",children:g.toLocaleString()}),c.jsx("span",{className:"ml-1 text-base text-indigo-600 font-bold",children:u.currency})]})]})]}),c.jsx("div",{className:"p-5 bg-gray-50 shadow-lg border-t border-gray-50",children:c.jsx(Be,{text:"예치 하기",onClick:m,className:"w-full rounded-lg py-3 font-semibold text-lg shadow-md"})}),c.jsx(st,{})]})}function DW(){const n=ke(),{bankTokens:e}=Uf(),{fetchBankTokens:t}=Uf.getState(),{subscribeId:s}=xs(),r=et(),{productState:o,tokenInfoState:a}=r.state||{},[u,d]=A.useState(null),m=new Date().toISOString().slice(0,10);if(!s||!o||!a)return c.jsx("div",{className:"p-4",children:"해당 토큰 정보를 찾을 수 없습니다."});A.useEffect(()=>{(async()=>{if(s)try{const M=await LV(s);d(M)}catch(M){console.error("해지 예상 정보 조회 실패",M),alert("예상 정보를 불러오는 데 실패했습니다.")}})()},[s]),console.log("productState:",o);const g=async()=>{if(!s){alert("해지할 상품을 찾을 수 없습니다.");return}try{const R=await PV(s);alert("상품이 해지되었습니다."),console.log("해지 결과:",R),n(`/token/product/detail/${s}`,{state:{productState:o,tokenInfoState:a},replace:!0})}catch(R){console.error(R),alert("해지 중 오류가 발생했습니다.")}},x=(u==null?void 0:u.totalPayout.toLocaleString())??"-",v=(u==null?void 0:u.preTaxInterest.toLocaleString())??"-";u==null||u.postTaxInterest.toLocaleString();const w=(u==null?void 0:u.postTaxInterest)??0,b=w*.14,C=w*.014,E=b.toLocaleString(),N=C.toLocaleString(),P=(b+C).toLocaleString();return c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"상품 중도 해지"}),c.jsxs("div",{className:"flex-1 overflow-auto",children:[c.jsxs("div",{className:"p-4 text-center font-semibold text-gray-600 text-lg bg-gray-50 border-b border-gray-200",children:[c.jsx("p",{children:"중도해지 시 아래와 같이"}),c.jsx("p",{children:"오늘까지 발생한 이자와 원금이 입금됩니다."})]}),c.jsxs("div",{className:"p-4 pb-0",children:[c.jsx("div",{className:"text-center mb-2 text-base text-gray-500",children:"받으실 금액"}),c.jsx("div",{className:"text-center text-3xl font-bold mb-2 text-blue-900",children:c.jsxs("span",{className:"text-xl",children:[x," ",a.currency]})}),c.jsxs("div",{className:"rounded-xl overflow-hidden border border-gray-200 shadow-sm mt-4 mb-6",children:[c.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-gray-200",children:c.jsx("h3",{className:"font-medium text-blue-800",children:"거래 상세 내역"})}),c.jsxs("div",{className:"flex justify-between py-4 px-4 bg-blue-50/50 border-b border-gray-200",children:[c.jsx("div",{className:"font-medium text-gray-700",children:"원금"}),c.jsxs("div",{className:"font-bold text-blue-900",children:[o.amount,a.currency," "]})]}),c.jsxs("div",{className:"flex justify-between py-4 px-4 bg-blue-50/30 border-b border-gray-200",children:[c.jsx("div",{className:"font-medium text-gray-700",children:"이자(세전)"}),c.jsxs("div",{className:"font-bold text-indigo-500",children:[" ",v," ",a.currency]})]}),c.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:c.jsx("div",{className:"text-xs text-gray-500",children:"세금 정보"})}),c.jsxs("div",{className:"flex justify-between py-3 px-4 border-b border-gray-100",children:[c.jsx("div",{className:"text-gray-600",children:"세금"}),c.jsxs("div",{className:"font-medium text-gray-800",children:[P," ",a.currency]})]}),c.jsxs("div",{className:"flex justify-between py-3 px-4 border-b border-gray-100 bg-gray-50/50",children:[c.jsx("div",{className:"text-gray-600 pl-4 text-sm",children:"└ 소득세"}),c.jsxs("div",{className:"font-medium text-gray-700",children:[E," ",a.currency]})]}),c.jsxs("div",{className:"flex justify-between py-3 px-4 border-b border-gray-100 bg-gray-50/50",children:[c.jsx("div",{className:"text-gray-600 pl-4 text-sm",children:"└ 지방소득세"}),c.jsxs("div",{className:"font-medium text-gray-700",children:[N," ",a.currency]})]}),c.jsxs("div",{className:"flex justify-between py-3 px-4 border-b border-gray-200",children:[c.jsx("div",{className:"text-gray-600",children:"과세구분"}),c.jsx("div",{className:"font-medium text-gray-800",children:"일반과세"})]}),c.jsxs("div",{className:"flex justify-between py-4 px-4 bg-blue-100/50 border-b border-gray-200",children:[c.jsx("div",{className:"font-semibold text-blue-900",children:"받으실 금액"}),c.jsxs("div",{className:"font-bold text-indigo-700",children:[x," ",a.currency]})]}),c.jsxs("div",{className:"flex justify-between py-3 px-4",children:[c.jsx("div",{className:"text-gray-600",children:"기준일"}),c.jsx("div",{className:"font-medium text-gray-800",children:m})]})]}),c.jsxs("div",{className:"mt-1 mb-1 text-base font-semibold text-center text-gray-200",children:[c.jsx("p",{children:"⚠️ 중도 해지시 우대금리, 세제혜택 등이 ⚠️"}),c.jsx("p",{children:"적용되지 않습니다️"})]}),c.jsx("div",{className:"mb-6 mt-8 rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-xs font-medium whitespace-pre",children:o.rate})})}),c.jsx("p",{className:"text-xl font-semibold",children:o.name})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-xl font-bold",children:[o.amount," ",a.currency]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["= ",o.amount]})]})]})},o.subscribeId),c.jsx("div",{className:"flex justify-center my-1",children:c.jsx("div",{className:"w-10 h-12 bg-navy-800 flex items-center justify-center rounded-full -mt-3",children:c.jsxs("svg",{className:"w-6 h-10 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 3v16"}),c.jsx("path",{d:"M19 12l-7 7-7-7"})]})})}),c.jsx("div",{className:"mb-6 rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:c.jsx(nA,{bank:a.currency})}),c.jsx("p",{className:"text-xl font-semibold",children:a.bankTokenName})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-xl font-bold",children:[o.amount," ",a.currency]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["= ",a.totalBalance]})]})]})})]})]}),c.jsx("div",{className:"p-5 bg-gray-50 shadow-lg border-t border-gray-50",children:c.jsx(Be,{text:"상품 해지",onClick:g,className:"w-full rounded-lg py-3 font-semibold text-lg shadow-md"})}),c.jsx(st,{})]})}function OW({order:n}){const e=ke(),{id:t,status:s,reason:r,storeName:o,orderItems:a,orderDate:u,totalPrice:d,storeLocation:h}=n;function m(b,C){switch(b){case"WAITING":return"주문 접수";case"PAID":return"주문 수락";case"COMPLETED":return"준비 완료";case"CANCELLED":return`주문 거절${C?" - "+C:""}`;default:return"알 수 없는 상태"}}function g(b){switch(b){case"WAITING":case"PAID":case"COMPLETED":return"bg-green-500";case"CANCELLED":return"bg-red-500";default:return"bg-gray-400"}}const x=m(s,r),v=g(s),w=["WAITING","PAID","COMPLETED"].includes(s);return c.jsxs("div",{className:"mb-6 rounded-2xl bg-white shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between border-b p-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"relative mr-4",children:[c.jsx(Ty,{className:"h-8 w-8"}),c.jsx("div",{className:`absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full ${v}`,children:w?c.jsx(hm,{className:"h-4 w-4 text-white"}):c.jsx(n3,{className:"h-4 w-4 text-white"})})]}),c.jsxs("p",{className:"text-xl font-medium",children:["주문번호 ",t]})]}),c.jsx("div",{className:"text-base text-gray-500",children:c.jsx("p",{children:x})}),c.jsx("button",{onClick:()=>e(`/mall/store/pay-complete/${t}`),className:"flex h-10 w-10 items-center justify-center rounded-full border border-gray-300",children:c.jsx(If,{className:"h-6 w-6"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("p",{className:"mb-3 text-lg font-medium",children:o}),c.jsxs("div",{className:"text-base text-gray-500",children:[c.jsx("p",{children:a}),c.jsxs("p",{children:["주문금액: ",d]}),c.jsxs("p",{children:["주문점포: ",h]}),c.jsxs("p",{children:["주문일시: ",u]})]})]})]})}function FW({orders:n}){return c.jsxs("div",{className:"mx-6 mt-8 pb-6",children:[c.jsx("h2",{className:"mb-6 text-2xl font-bold",children:"Crepe 주문 현황"}),n.map(e=>c.jsx(OW,{order:e},e.id))]})}function BW(){ke();const[n,e]=A.useState([]);function t(s){return s.map(r=>{const a=new Date(r.createdAt).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return{id:r.orderId,status:r.orderStatus,reason:r.message||"",storeName:r.storeName,orderItems:r.orderDetails.map(u=>`${u.menuName} x ${u.menuCount}`).join(", "),orderDate:a,orderNumber:r.orderId,totalPrice:r.totalPrice.toString(),storeLocation:r.storeAddress}})}return A.useEffect(()=>{(async()=>{try{const s=await pW();e(t(s))}catch(s){console.error("Failed to fetch order history:",s)}})()},[]),c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:"주문 내역"}),c.jsx("main",{className:"flex-1 overflow-auto px-4 py-6",children:c.jsx(FW,{orders:n})}),c.jsx(st,{})]})}function _k({icon:n,label:e,onClick:t}){return c.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm border border-gray-100 mb-4 cursor-pointer",onClick:t,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center mr-4",children:n}),c.jsx("span",{className:"text-lg font-medium",children:e})]}),c.jsx(ky,{className:"text-gray-400"})]})}function Rk(){return c.jsx("img",{src:"/verify-mark.png",alt:"Verify Mark",width:40,height:40})}function $W(){var r;const n=ke(),e=et(),t=((r=e.state)==null?void 0:r.signupState)||{},s=()=>{n("/id/verification/step2",{state:{from:e.pathname,signupState:{...t}}})};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"본인확인"}),c.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[c.jsx("h1",{className:"text-2xl font-bold text-[#0a2d6b] mb-2",children:"STEP1 신분증 확인"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"원하는 방법을 선택해주세요"}),c.jsx("div",{className:"flex justify-center my-8",children:c.jsx("div",{className:"border w-80 h-40 rounded flex items-center justify-center",children:c.jsx("img",{src:"/idcard-emoticon.png",alt:"ID Card Emoticon",className:"object-contain w-full h-full"})})}),c.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[c.jsx(_k,{icon:c.jsx(Rk,{}),label:"주민등록증",onClick:s}),c.jsx(_k,{icon:c.jsx(Rk,{}),label:"운전면허증",onClick:s})]})]})]})}function VW({onCapture:n}){const[e,t]=A.useState(null),[s,r]=A.useState("environment"),[o,a]=A.useState(null),[u,d]=A.useState(!1),[h,m]=A.useState(!1),g=A.useRef(null),x=A.useRef(null),v=async()=>{try{e&&e.getTracks().forEach(N=>N.stop());const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:s,width:{ideal:1280},height:{ideal:720}},audio:!1});t(E),a(null),g.current&&(g.current.srcObject=E)}catch{a("카메라 접근에 실패했습니다. 권한을 확인해주세요.")}};A.useEffect(()=>{const E=setInterval(()=>{d(N=>!N)},2e3);return()=>clearInterval(E)},[]);const w=()=>{e&&(e.getTracks().forEach(E=>E.stop()),t(null))},b=()=>{r(E=>E==="user"?"environment":"user")},C=()=>{!g.current||!x.current||(m(!0),setTimeout(()=>{const E=g.current,N=x.current;if(!E||!N)return;N.width=E.videoWidth,N.height=E.videoHeight;const k=N.getContext("2d");if(k){k.drawImage(E,0,0,N.width,N.height);const P=N.toDataURL("image/png");n&&n(P)}m(!1)},300))};return A.useEffect(()=>(v(),()=>{w()}),[s]),c.jsxs("div",{className:"relative w-full h-full bg-black overflow-hidden rounded-xl shadow-lg",children:[c.jsx("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c.jsx("canvas",{ref:x,className:"hidden"}),c.jsxs("div",{className:`
        absolute inset-0 m-auto w-72 h-44 border-4 rounded-lg pointer-events-none
        ${u?"border-green-400":"border-white"}
        ${h?"scale-95 opacity-0":"scale-100 opacity-100"}
      `,children:[c.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 border-t-2 border-l-2 rounded-tl-md border-current"}),c.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 border-t-2 border-r-2 rounded-tr-md border-current"}),c.jsx("div",{className:"absolute -bottom-1 -left-1 w-5 h-5 border-b-2 border-l-2 rounded-bl-md border-current"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 border-b-2 border-r-2 rounded-br-md border-current"})]}),u&&c.jsxs("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 bg-green-500 bg-opacity-90 text-white px-3 py-1 rounded-full text-xs flex items-center space-x-1 shadow-md",children:[c.jsx(hm,{size:14}),c.jsx("span",{children:"신분증 인식됨"})]}),c.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center items-center space-x-4",children:[c.jsx("button",{onClick:b,className:"relative p-1 rounded-full focus:outline-none transform transition-all bg-gray-800 bg-opacity-60 hover:bg-opacity-80 shadow-lg",children:c.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",children:c.jsx(oP,{size:16,className:"text-white"})})}),c.jsx("button",{onClick:C,disabled:!u,className:`
      relative p-1 rounded-full focus:outline-none transform transition-all 
      ${u?"bg-white hover:bg-opacity-80 scale-100":"bg-gray-400 scale-95 cursor-not-allowed"}
    `,children:c.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-current flex items-center justify-center",children:c.jsx(ZT,{size:16,className:u?"text-black":"text-gray-600"})})})]}),o&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-500 bg-opacity-75 text-white p-4 rounded-xl",children:c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx(tP,{size:32}),c.jsx("p",{className:"text-center",children:o})]})}),h&&c.jsx("div",{className:"absolute inset-0 bg-white animate-flash"})]})}function UW(){var x;const n=ke(),e=et(),t=A.useRef(null),[s,r]=A.useState(null),[o,a]=A.useState(null),u=((x=e.state)==null?void 0:x.signupState)||{},d=()=>{var v;(v=t.current)==null||v.click()},h=v=>{var b;const w=(b=v.target.files)==null?void 0:b[0];w&&(a(w),r(URL.createObjectURL(w)))},m=()=>{a(null),r(null)},g=async()=>{if(o||s)try{let v=null;if(o)v=o;else if(s){const C=await(await fetch(s)).blob();v=new File([C],"captured.png",{type:"image/png"})}if(!v)throw new Error("No file to send for OCR processing.");const w=await m3(v);n("/id/verification/step3",{state:{from:e.pathname,signupState:{...u,ocrData:w}}})}catch(v){console.error("OCR 처리 중 오류 발생:",v.message),alert(v.message)}else alert("신분증 이미지가 필요합니다.")};return c.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[c.jsx(Ie,{title:"본인확인"}),c.jsxs("div",{className:"px-5 py-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"신분증 촬영"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"신분증의 모든 정보가 잘 보이도록 촬영해주세요"})]}),c.jsxs("div",{className:"flex-1 px-5 flex flex-col",children:[c.jsx("div",{className:"w-full h-80 bg-white rounded-xl overflow-hidden shadow-md",children:s?c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("img",{src:s,alt:"Uploaded ID",className:"w-full h-full object-contain"}),c.jsxs("div",{className:"absolute top-3 right-3 bg-green-500 text-white rounded-full px-3 py-1 text-xs flex items-center space-x-1",children:[c.jsx(hm,{size:14}),c.jsx("span",{children:"이미지 준비완료"})]})]}):c.jsx(VW,{onCapture:r})}),!s&&c.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-100 p-3 rounded-lg",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"촬영 가이드"}),c.jsxs("ul",{className:"mt-1 text-xs text-blue-700 list-disc pl-5 space-y-1",children:[c.jsx("li",{children:"신분증이 프레임 안에 완전히 들어오도록 해주세요"}),c.jsx("li",{children:"밝은 곳에서 그림자 없이 촬영하세요"}),c.jsx("li",{children:"모든 정보가 선명하게 보여야 합니다"})]})]})]}),c.jsxs("div",{className:"p-5 space-y-3 bg-white border-t border-gray-200 shadow-inner",children:[c.jsx("input",{type:"file",ref:t,accept:"image/*",className:"hidden",onChange:h}),c.jsx(Be,{text:"파일 업로드",fullWidth:!0,onClick:d}),c.jsx(Be,{text:"다음",fullWidth:!0,onClick:g}),s&&c.jsx(Be,{text:"다시 촬영하기",fullWidth:!0,onClick:m})]})]})}function zW(){var g,x;const n=ke(),e=et(),t=((g=e.state)==null?void 0:g.signupState)||{},s=t.ocrData||{name:"",personalNum:"",address:"",issueDate:"",authority:""},[r,o]=ps.useState(s),a=(v,w)=>{o(b=>({...b,[v]:w}))},u=()=>{n("/id/verification/step4",{state:{from:e.pathname,signupState:{...t,ocrData:r}}})},d=((x=r.personalNum)==null?void 0:x.split("-"))??[],h=d[0]||"",m=d[1]||"";return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"본인확인"}),c.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6",children:"인증정보 확인 및 수정"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"OCR 결과를 확인 후 필요시 정보를 수정해주세요."}),c.jsx(Xn,{label:"이름",value:r.name,onChange:v=>a("name",v.target.value)}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-500 mb-2",children:"주민등록번호"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"text",value:h,onChange:v=>a("personalNum",v.target.value+"-"+m),className:"w-full py-3 px-0 border-0 border-b border-gray-300 focus:outline-none focus:border-[#0a2d6b] text-xl",maxLength:6}),c.jsx("span",{className:"mx-4 text-xl",children:"-"}),c.jsx("input",{type:"text",value:r.personalNum.split("-")[1]||"",readOnly:!0,className:"w-full py-3 px-0 border-0 border-b border-gray-300 focus:outline-none text-xl"})]})]}),c.jsx(Xn,{label:"발급일",value:r.issueDate,onChange:v=>a("issueDate",v.target.value)}),c.jsx(Xn,{label:"발급지역",value:r.authority,onChange:v=>a("issueDate",v.target.value)})]}),c.jsx("div",{className:"p-4",children:c.jsx(Be,{text:"다음",onClick:u,fullWidth:!0})})]})}function HW({eventType:n,amount:e,date:t,currency:s,totalBalance:r}){const o=n==="TERMINATION",a=parseFloat(e)>0&&!o,u=`+${parseFloat(e).toLocaleString()} ${s}`,d=new Date(t).toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),h={INTEREST:"이자 지급",DEPOSIT:"예치 완료",TERMINATION:"해지 완료"};return c.jsxs("div",{className:"space-y-2 border-b border-gray-200 pb-4",children:[c.jsx("p",{className:"text-sm text-gray-500",children:d}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("p",{className:`text-base font-semibold ${o?"text-red-500":"text-indigo-800"}`,children:h[n]??n}),c.jsx("p",{className:`text-base font-bold ${o?"text-red-500":"text-indigo-800"}`,children:u})]}),o&&r!==void 0&&c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["계좌 잔액: ",r.toLocaleString()," ",s]})]})}const WW=({transactions:n,loaderRef:e,loading:t,hasNext:s,currency:r,totalBalance:o})=>c.jsxs("div",{className:"space-y-4 pb-10 text-xs",children:[n.length>0?n.map((a,u)=>c.jsx(HW,{eventType:a.eventType,amount:a.amount,date:a.date,currency:r,totalBalance:a.eventType==="TERMINATION"?o:void 0},u)):c.jsx("p",{className:"text-sm text-gray-500",children:"거래 내역이 없습니다."}),c.jsxs("div",{ref:e,className:"h-10 flex items-center justify-center",children:[t&&c.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-gray-300 border-t-[#0a2e64]"}),!s&&!t&&n.length>0&&c.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"더 이상 거래 내역이 없습니다"})]})]});function GW(){const{subscribeId:n}=xs(),{bankTokens:e,fetchBankTokens:t}=Uf(),s=ke(),[r,o]=A.useState(null),[a,u]=A.useState([]),[d,h]=A.useState(!1),[m,g]=A.useState(0),x=et(),[v,w]=A.useState(!0),b=A.useRef(null),C=A.useRef(null),[E,N]=A.useState(!1),[k,P]=A.useState(!1),[R,M]=A.useState(null),[O,F]=A.useState(null),D=()=>{s(`/token/product/cancel/${n}`,{state:{productState:R,tokenInfoState:O}})},U=()=>{s(`/token/product/deposit/${n}`,{state:{productState:R,tokenInfoState:O}})},K=A.useCallback(async()=>{if(!(!n||!v||d)){h(!0);try{const X=await X_(n.toString(),m,3),ee=(X.content||[]).map(J=>({eventType:J.eventType,amount:J.amount,date:J.date}));u(J=>[...J,...ee]),w(!X.last),g(J=>J+1)}catch(X){o(X.message||"오류가 발생했습니다.")}finally{h(!1)}}},[n,m,v,d]);return A.useEffect(()=>{x.state&&(u([]),g(0),w(!0),t().then(()=>{var ee;const X=(ee=Uf.getState().bankTokens)==null?void 0:ee.flatMap(J=>J.products.map(ae=>({product:ae,tokenInfo:{currency:J.currency,totalBalance:J.totalBalance,bankTokenName:J.bankTokenName}}))).find(J=>Number(n)===J.product.subscribeId);X&&(console.log(X.product),M(X.product),F(X.tokenInfo)),N(!0)}))},[x.state,n]),A.useEffect(()=>{E&&!k&&(K(),P(!0))},[E,k,K]),A.useEffect(()=>{if(d)return;const X=C.current;if(X)return b.current&&b.current.disconnect(),b.current=new IntersectionObserver(([ee])=>{ee.isIntersecting&&v&&K()}),b.current.observe(X),console.log("fetch called with page:",m),()=>{var ee;return(ee=b.current)==null?void 0:ee.disconnect()}},[K,m,v,d]),E?c.jsxs("div",{className:"flex h-full flex-col bg-gray-50",children:[c.jsx(Ie,{title:`${R.name} 상세`,onBackClick:()=>s(-1)}),c.jsxs("main",{className:"flex-1 overflow-auto p-5",children:[c.jsx("div",{className:"mb-6 rounded-2xl border-2 border-gray-200 bg-white p-9 shadow-[0_4px_20px_rgba(0,0,0,0.06)]",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:c.jsx(nA,{bank:O.currency})}),c.jsx("p",{className:"text-2xl font-semibold",children:"총 보유"})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-2xl font-bold",children:[R.amount," ",O.currency]}),c.jsxs("p",{className:"text-base text-gray-500",children:["= ",R.evaluated]}),c.jsxs("p",{className:"text-lg mt-1 font-semibold text-indigo-800",children:["연 ",c.jsx("span",{className:"text-lg font-semibold text-indigo-800",children:R.rate})]})]})]})}),c.jsx("div",{className:"-mt-2 mb-4 w-full",children:c.jsx("button",{className:"w-full bg-[#0a2e64] text-white py-3 rounded-lg font-semibold text-base shadow-sm",onClick:U,children:"토큰 예치"})}),c.jsx("div",{className:"mb-7 flex items-center justify-between",children:c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"거래 내역"})}),c.jsx(WW,{transactions:a,loaderRef:C,loading:d,hasNext:v,currency:O.currency,totalBalance:O.totalBalance})]}),c.jsx("div",{className:"p-5 bg-gray-50 shadow-lg border-t border-gray-50",children:c.jsx(Be,{text:"해지하기",onClick:D,className:"w-full rounded-lg py-3 font-semibold text-base shadow-md"})}),c.jsx(st,{})]}):c.jsx("div",{className:"p-4",children:"로딩 중입니다..."})}function N2({productTitle:n,interestRange:e}){return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 font-bold text-2xl",children:n}),c.jsx("div",{className:"text-2xl font-bold mb-2",children:e})]})}function KW({productName:n,bankName:e,productType:t,target:s,amount:r,condition:o,incomeLevel:a,interestPayment:u,baseRate:d,preferentialRate:h,infoMessage:m}){return c.jsxs("div",{className:"border-t border-b py-4 px-4",children:[c.jsx("h2",{className:"font-medium mb-2",children:"상품 안내"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"주관 은행"}),c.jsx("div",{children:e})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"상품명"}),c.jsx("div",{children:n})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"상품 종류"}),c.jsx("div",{children:t})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"가입 대상"}),c.jsx("div",{children:s})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"가입 금액"}),c.jsx("div",{children:r})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"가입 조건"}),c.jsx("div",{children:o})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"소득 조건"})," ",c.jsx("div",{children:a})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"이자 지급"}),c.jsx("div",{children:u})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"기본 금리"}),c.jsx("div",{children:d})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"우대 금리"}),c.jsx("div",{children:h})]})]}),c.jsxs("div",{className:"mt-4 bg-gray-100 p-3 rounded-md text-sm text-gray-600 flex items-start",children:[c.jsx(B5,{size:16,className:"mr-2 mt-0.5"}),c.jsx("p",{children:m})]})]})}function Wg({text:n}){return c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 mt-2 mr-2"}),c.jsx("div",{children:n})]})}function qW({depositorProtection:n,productType:e,selectionEnrollment:t,interestRateNotice:s}){return c.jsxs("div",{className:"p-4",children:[c.jsx("h2",{className:"font-medium mb-2",children:"예금자보호"}),c.jsx("div",{className:"space-y-2",children:c.jsx(Wg,{text:n})}),c.jsx("h2",{className:"font-medium mb-2 mt-4",children:"상품유형"}),c.jsx("div",{className:"space-y-2",children:c.jsx(Wg,{text:e})}),c.jsx("h2",{className:"font-medium mb-2 mt-4",children:"선택순 가입"}),c.jsx("div",{className:"space-y-2",children:t.map((r,o)=>c.jsx(Wg,{text:r},o))}),c.jsx("h2",{className:"font-medium mb-2 mt-4",children:"우대이자율 안내"}),c.jsx("div",{className:"space-y-2",children:c.jsx(Wg,{text:s})})]})}const j2="http://localhost:8080";async function XW(){const n=sessionStorage.getItem("accessToken");if(!n)throw new Error("인증 토큰이 없습니다.");console.log("Access token:",sessionStorage.getItem("accessToken"));const e=await fetch(`${j2}/api/product`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!e.ok){const t=await e.text();throw new Error(t||"상품 목록 조회 실패")}return await e.json()}async function YW(n){const e=sessionStorage.getItem("accessToken");if(!e)throw new Error("인증 토큰이 없습니다.");const t=await fetch(`${j2}/api/product/${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){const s=await t.text();throw new Error(s||"상품 상세 조회 실패")}return await t.json()}const QW=[{id:"YOUTH",label:"청년"},{id:"MIDDLE_AGED",label:"중장년"},{id:"SENIOR",label:"노년"},{id:"ALL_AGES",label:"전연령대"}],JW=[{id:"ALL_OCCUPATIONS",label:"제한 없음"},{id:"EMPLOYEE",label:"직장인"},{id:"SELF_EMPLOYED",label:"자영업자"},{id:"PUBLIC_SERVANT",label:"공무원"},{id:"MILITARY",label:"군인"},{id:"STUDENT",label:"학생"},{id:"HOUSEWIFE",label:"주부"},{id:"UNEMPLOYED",label:"무직"}],ZW=[{id:"LOW_INCOME",label:"저소득층"},{id:"LIMITED_INCOME",label:"소득제한(월 5천 이하)"},{id:"NO_LIMIT",label:"제한없음"}],Gg={BENEFIT:"bg-red-100 text-red-800",HIGH_INTEREST:"bg-yellow-100 text-yellow-800",SAVING:"bg-green-100 text-green-800",DEFAULT:"bg-purple-100 text-purple-800"},bb={BENEFIT:["세제혜택","청년우대","노년층우대"],HIGH_INTEREST:["고금리","단기예금","장기예금","외화예금"],SAVING:["자유적금","정기적금","주택청약","연금저축"]};function sA(n){return bb.BENEFIT.includes(n)?Gg.BENEFIT:bb.HIGH_INTEREST.includes(n)?Gg.HIGH_INTEREST:bb.SAVING.includes(n)?Gg.SAVING:Gg.DEFAULT}function Lk(n){switch(n){case"SAVING":return"예금";case"INSTALLMENT":return"적금";case"VOUCHER":return"상품권";default:return"알 수 없음"}}function k2({imageUrl:n}){return c.jsx("img",{src:n,alt:"은행 로고",className:"w-12 h-12 rounded-full"})}function wb(n,e){return n.map(t=>{var s;return((s=e.find(r=>r.id===t))==null?void 0:s.label)||t}).join(", ")}function eG(){var w,b,C,E,N,k,P,R;const n=ke(),{productId:e}=xs(),[t,s]=A.useState(null),[r,o]=A.useState(null),u=(w=et().state)==null?void 0:w.product;if(A.useEffect(()=>{YW(Number(e)).then(s).catch(()=>o("상품 정보를 불러오는 데 실패했습니다."))},[e]),!t)return c.jsx("div",{className:"p-4",children:"상품 정보를 불러오는 중입니다..."});const d={...u,...t},h=wb(((b=d.joinCondition)==null?void 0:b.ageGroups)||[],QW),m=wb(((C=d.joinCondition)==null?void 0:C.occupations)||[],JW),g=wb(((E=d.joinCondition)==null?void 0:E.incomeLevels)||[],ZW),x=d.minInterestRate&&d.maxInterestRate?`연 ${d.minInterestRate}% ~ 연 ${d.maxInterestRate}%`:`기본금리 연 ${d.baseInterestRate}%`,v=()=>{n(`/token/onsale/products/${e}/signup`,{state:{productId:e,productName:d.productName,bankName:d.bankName,tags:d.tags,productType:d.type,imageUrl:d.imageUrl,guideFile:d.guideFile,interestRange:x}})};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"자산관리"}),c.jsx("div",{className:"flex-1 overflow-auto bg-gray-50",children:c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[c.jsx(k2,{imageUrl:d.imageUrl}),c.jsx(N2,{productTitle:d.productName,interestRange:x}),c.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:(N=d.tags)==null?void 0:N.map((M,O)=>c.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${sA(M)}`,children:M},O))})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"상품 안내"}),c.jsx(KW,{productName:d.productName,bankName:d.bankName,productType:Lk(d.type),target:h||"전 연령",amount:`${d.maxMonthlyPayment}`,condition:m||"-",incomeLevel:g||"-",interestPayment:"만기 일시 지급",baseRate:`연 ${d.baseInterestRate}%`,preferentialRate:(k=d.rateConditions)!=null&&k.length?`최대 연 ${Math.max(...d.rateConditions.map(M=>M.rate))}% 우대`:"없음",infoMessage:"자세한 우대조건은 상품 가이드를 확인하세요."})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"추가 정보"}),c.jsx(qW,{depositorProtection:"예금자 보호 대상 아님",productType:Lk(d.type),selectionEnrollment:((P=d.rateConditions)==null?void 0:P.map(M=>M.title))??[],interestRateNotice:(R=d.rateConditions)!=null&&R.length?`우대 조건 만족 시 최대 연 ${Math.max(...d.rateConditions.map(M=>M.rate))}% 우대 이율 제공`:"우대 조건 없음"})]})]})}),c.jsx("div",{className:"p-4",children:c.jsx(Be,{text:"토큰 상품 가입",onClick:v,fullWidth:!0})})]})}const tG="modulepreload",nG=function(n){return"/"+n},Ik={},Kg=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let a=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=a(t.map(h=>{if(h=nG(h),h in Ik)return;Ik[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":tG,m||(x.as="script"),x.crossOrigin="",x.href=h,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((v,w)=>{x.addEventListener("load",v),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var kf={};kf.d=(n,e)=>{for(var t in e)kf.o(e,t)&&!kf.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};kf.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Oe=globalThis.pdfjsLib={};kf.d(Oe,{AbortException:()=>Dc,AnnotationEditorLayer:()=>PS,AnnotationEditorParamsType:()=>De,AnnotationEditorType:()=>Ue,AnnotationEditorUIManager:()=>Tc,AnnotationLayer:()=>eK,AnnotationMode:()=>Xo,ColorPicker:()=>iy,DOMSVGFactory:()=>mA,DrawLayer:()=>IS,FeatureTest:()=>Yn,GlobalWorkerOptions:()=>co,ImageKind:()=>lx,InvalidPDFException:()=>P2,MissingPDFException:()=>Mc,OPS:()=>vr,OutputScale:()=>Aw,PDFDataRangeTransport:()=>NL,PDFDateString:()=>lA,PDFWorker:()=>Mu,PasswordResponses:()=>oG,PermissionFlag:()=>iG,PixelsPerInch:()=>Fa,RenderingCancelledException:()=>oA,TextLayer:()=>Qw,UnexpectedResponseException:()=>Gy,Util:()=>Ae,VerbosityLevel:()=>zy,XfaLayer:()=>kL,build:()=>I7,createValidAbsoluteUrl:()=>uG,fetchData:()=>qy,getDocument:()=>C7,getFilenameFromUrl:()=>vG,getPdfFilenameFromUrl:()=>bG,getXfaPageViewport:()=>wG,isDataScheme:()=>Xy,isPdfFile:()=>aA,noContextMenu:()=>ar,normalizeUnicode:()=>gG,setLayerDimensions:()=>kc,shadow:()=>Je,version:()=>L7});const Bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),T2=[1,0,0,1,0,0],vw=[.001,0,0,.001,0,0],sG=1e7,Sb=1.35,Ls={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Xo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},rG="pdfjs_internal_editor_",Ue={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},De={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},iG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Tn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},lx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Jt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Zh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},zy={ERRORS:0,WARNINGS:1,INFOS:5},vr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},oG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Hy=zy.WARNINGS;function aG(n){Number.isInteger(n)&&(Hy=n)}function lG(){return Hy}function Wy(n){Hy>=zy.INFOS&&console.log(`Info: ${n}`)}function We(n){Hy>=zy.WARNINGS&&console.log(`Warning: ${n}`)}function bt(n){throw new Error(n)}function nn(n,e){n||bt(e)}function cG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function uG(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=mG(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(cG(s))return s}catch{}return null}function Je(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Ga=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class bw extends Ga{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ww extends Ga{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class P2 extends Ga{constructor(e){super(e,"InvalidPDFException")}}class Mc extends Ga{constructor(e){super(e,"MissingPDFException")}}class Gy extends Ga{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class dG extends Ga{constructor(e){super(e,"FormatError")}}class Dc extends Ga{constructor(e){super(e,"AbortException")}}function _2(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&bt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),a=n.subarray(r,o);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Ky(n){typeof n!="string"&&bt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function hG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function rA(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function fG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function pG(){try{return new Function(""),!0}catch{return!1}}class Yn{static get isLittleEndian(){return Je(this,"isLittleEndian",fG())}static get isEvalSupported(){return Je(this,"isEvalSupported",pG())}static get isOffscreenCanvasSupported(){return Je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Je(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Je(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Je(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ab=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var mo,cx,Sw;class Ae{static makeHexColor(e,t,s){return`#${Ab[e]}${Ab[t]}${Ab[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[s,r]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[r,o]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],r[0],o[0],a[0]),Math.min(s[1],r[1],o[1],a[1]),Math.max(s[0],r[0],o[0],a[0]),Math.max(s[1],r[1],o[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],u=(s+a)/2,d=Math.sqrt((s+a)**2-4*(s*a-o*r))/2,h=u+d||1,m=u-d||1;return[Math.sqrt(h),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>a?null:[s,o,r,a]}static bezierBoundingBox(e,t,s,r,o,a,u,d,h){return h?(h[0]=Math.min(h[0],e,u),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,u),h[3]=Math.max(h[3],t,d)):h=[Math.min(e,u),Math.min(t,d),Math.max(e,u),Math.max(t,d)],_(this,mo,Sw).call(this,e,s,o,u,t,r,a,d,3*(-e+3*(s-o)+u),6*(e-2*s+o),3*(s-e),h),_(this,mo,Sw).call(this,e,s,o,u,t,r,a,d,3*(-t+3*(r-a)+d),6*(t-2*r+a),3*(r-t),h),h}}mo=new WeakSet,cx=function(e,t,s,r,o,a,u,d,h,m){if(h<=0||h>=1)return;const g=1-h,x=h*h,v=x*h,w=g*(g*(g*e+3*h*t)+3*x*s)+v*r,b=g*(g*(g*o+3*h*a)+3*x*u)+v*d;m[0]=Math.min(m[0],w),m[1]=Math.min(m[1],b),m[2]=Math.max(m[2],w),m[3]=Math.max(m[3],b)},Sw=function(e,t,s,r,o,a,u,d,h,m,g,x){if(Math.abs(h)<1e-12){Math.abs(m)>=1e-12&&_(this,mo,cx).call(this,e,t,s,r,o,a,u,d,-g/m,x);return}const v=m**2-4*g*h;if(v<0)return;const w=Math.sqrt(v),b=2*h;_(this,mo,cx).call(this,e,t,s,r,o,a,u,d,(-m+w)/b,x),_(this,mo,cx).call(this,e,t,s,r,o,a,u,d,(-m-w)/b,x)},I(Ae,mo);function mG(n){return decodeURIComponent(escape(n))}let Eb=null,Mk=null;function gG(n){return Eb||(Eb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Mk=new Map([["ﬅ","ſt"]])),n.replaceAll(Eb,(e,t,s)=>t?t.normalize("NFKC"):Mk.get(s))}function xG(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return _2(n)}const iA="pdfjs_internal_id_",Ri={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function yG(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(_2(n))}const Mi="http://www.w3.org/2000/svg",ml=class ml{};Me(ml,"CSS",96),Me(ml,"PDF",72),Me(ml,"PDF_TO_CSS_UNITS",ml.CSS/ml.PDF);let Fa=ml;async function qy(n,e="text"){if(lf(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class wm{constructor({viewBox:e,scale:t,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=r,this.offsetY=o;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,m,g,x;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,m=0,g=0,x=1;break;case 90:h=0,m=1,g=1,x=0;break;case 270:h=0,m=-1,g=-1,x=0;break;case 0:h=1,m=0,g=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,x=-x);let v,w,b,C;h===0?(v=Math.abs(d-e[1])*t+r,w=Math.abs(u-e[0])*t+o,b=(e[3]-e[1])*t,C=(e[2]-e[0])*t):(v=Math.abs(u-e[0])*t+r,w=Math.abs(d-e[1])*t+o,b=(e[2]-e[0])*t,C=(e[3]-e[1])*t),this.transform=[h*t,m*t,g*t,x*t,v-h*t*u-g*t*d,w-m*t*u-x*t*d],this.width=b,this.height=C}get rawDims(){const{viewBox:e}=this;return Je(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new wm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return Ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ae.applyTransform([e[0],e[1]],this.transform),s=Ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return Ae.applyInverseTransform([e,t],this.transform)}}class oA extends Ga{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Xy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function aA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function vG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function bG(n,e="document.pdf"){if(typeof n!="string")return e;if(Xy(n))return We('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let o=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=s.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Dk{constructor(){Me(this,"started",Object.create(null));Me(this,"times",[])}time(e){e in this.started&&We(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||We(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:o}of this.times)e.push(`${s.padEnd(t)} ${o-r}ms
`);return e.join("")}}function lf(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ar(n){n.preventDefault()}function Ok(n){console.log("Deprecated API usage: "+n)}var qf;class lA{static toDateObject(e){if(!e||typeof e!="string")return null;f(this,qf)||T(this,qf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f(this,qf).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=m,u+=g):h==="+"&&(a-=m,u-=g),new Date(Date.UTC(s,r,o,a,u,d))}}qf=new WeakMap,I(lA,qf);function wG(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new wm({viewBox:o,scale:e,rotation:t})}function cA(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(We(`Not a valid color format: "${n}"`),[0,0,0])}function SG(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,cA(s))}e.remove()}function Pt(n){const{a:e,b:t,c:s,d:r,e:o,f:a}=n.getTransform();return[e,t,s,r,o,a]}function Li(n){const{a:e,b:t,c:s,d:r,e:o,f:a}=n.getTransform().invertSelf();return[e,t,s,r,o,a]}function kc(n,e,t=!1,s=!0){if(e instanceof wm){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:a}=n,u=Yn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,h=`var(--scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=u?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=m,a.height=g):(a.width=g,a.height=m)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Aw{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var ra,Nl,Sr,jl,Xf,Yf,ay,R2,Qn,L2,I2,ux,M2,Cw;const Di=class Di{constructor(e){I(this,Qn);I(this,ra,null);I(this,Nl,null);I(this,Sr);I(this,jl,null);I(this,Xf,null);T(this,Sr,e),f(Di,Yf)||T(Di,Yf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=T(this,ra,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=f(this,Sr)._uiManager._signal;e.addEventListener("contextmenu",ar,{signal:t}),e.addEventListener("pointerdown",_(Di,ay,R2),{signal:t});const s=T(this,jl,document.createElement("div"));s.className="buttons",e.append(s);const r=f(this,Sr).toolbarPosition;if(r){const{style:o}=e,a=f(this,Sr)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*a}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,Qn,M2).call(this),e}get div(){return f(this,ra)}hide(){var e;f(this,ra).classList.add("hidden"),(e=f(this,Nl))==null||e.hideDropdown()}show(){var e;f(this,ra).classList.remove("hidden"),(e=f(this,Xf))==null||e.shown()}async addAltText(e){const t=await e.render();_(this,Qn,ux).call(this,t),f(this,jl).prepend(t,f(this,Qn,Cw)),T(this,Xf,e)}addColorPicker(e){T(this,Nl,e);const t=e.renderButton();_(this,Qn,ux).call(this,t),f(this,jl).prepend(t,f(this,Qn,Cw))}remove(){var e;f(this,ra).remove(),(e=f(this,Nl))==null||e.destroy(),T(this,Nl,null)}};ra=new WeakMap,Nl=new WeakMap,Sr=new WeakMap,jl=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,ay=new WeakSet,R2=function(e){e.stopPropagation()},Qn=new WeakSet,L2=function(e){f(this,Sr)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},I2=function(e){f(this,Sr)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},ux=function(e){const t=f(this,Sr)._uiManager._signal;e.addEventListener("focusin",_(this,Qn,L2).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",_(this,Qn,I2).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ar,{signal:t})},M2=function(){const{editorType:e,_uiManager:t}=f(this,Sr),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",f(Di,Yf)[e]),_(this,Qn,ux).call(this,s),s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),f(this,jl).append(s)},Cw=function(){const e=document.createElement("div");return e.className="divider",e},I(Di,ay),I(Di,Yf,null);let Ew=Di;var Qf,kl,Tl,$a,D2,O2,F2;class AG{constructor(e){I(this,$a);I(this,Qf,null);I(this,kl,null);I(this,Tl);T(this,Tl,e)}show(e,t,s){const[r,o]=_(this,$a,O2).call(this,t,s),{style:a}=f(this,kl)||T(this,kl,_(this,$a,D2).call(this));e.append(f(this,kl)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,kl).remove()}}Qf=new WeakMap,kl=new WeakMap,Tl=new WeakMap,$a=new WeakSet,D2=function(){const e=T(this,kl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ar,{signal:f(this,Tl)._signal});const t=T(this,Qf,document.createElement("div"));return t.className="buttons",e.append(t),_(this,$a,F2).call(this),e},O2=function(e,t){let s=0,r=0;for(const o of e){const a=o.y+o.height;if(a<s)continue;const u=o.x+(t?o.width:0);if(a>s){r=u,s=a;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,s]},F2=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=f(this,Tl)._signal;e.addEventListener("contextmenu",ar,{signal:s}),e.addEventListener("click",()=>{f(this,Tl).highlightSelection("floating_button")},{signal:s}),f(this,Qf).append(e)};function ny(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}function EG(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var ly;class CG{constructor(){I(this,ly,0)}get id(){return`${rG}${ln(this,ly)._++}`}}ly=new WeakMap;var Qu,Jf,Rn,Ju,dx;const yA=class yA{constructor(){I(this,Ju);I(this,Qu,xG());I(this,Jf,0);I(this,Rn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Je(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:o}=e;return _(this,Ju,dx).call(this,`${t}_${s}_${r}_${o}`,e)}async getFromUrl(e){return _(this,Ju,dx).call(this,e,e)}async getFromBlob(e,t){const s=await t;return _(this,Ju,dx).call(this,e,s)}async getFromId(e){f(this,Rn)||T(this,Rn,new Map);const t=f(this,Rn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){f(this,Rn)||T(this,Rn,new Map);let s=f(this,Rn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${f(this,Qu)}_${ln(this,Jf)._++}`,refCounter:1,isSvg:!1},f(this,Rn).set(e,s),f(this,Rn).set(s.id,s),s}getSvgUrl(e){const t=f(this,Rn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;f(this,Rn)||T(this,Rn,new Map);const t=f(this,Rn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(s.width,s.height);o.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=o.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${f(this,Qu)}_`)}};Qu=new WeakMap,Jf=new WeakMap,Rn=new WeakMap,Ju=new WeakSet,dx=async function(e,t){f(this,Rn)||T(this,Rn,new Map);let s=f(this,Rn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${f(this,Qu)}_${ln(this,Jf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await qy(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=yA._isSVGFittingCanvas,a=new FileReader,u=new Image,d=new Promise((h,m)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,h()},a.onload=async()=>{const g=s.svgUrl=a.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=a.onerror=m});a.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){console.error(r),s=null}return f(this,Rn).set(e,s),s&&f(this,Rn).set(s.id,s),s};let Nw=yA;var un,ia,Zf,dn;class NG{constructor(e=128){I(this,un,[]);I(this,ia,!1);I(this,Zf);I(this,dn,-1);T(this,Zf,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(r&&e(),f(this,ia))return;const d={cmd:e,undo:t,post:s,type:o};if(f(this,dn)===-1){f(this,un).length>0&&(f(this,un).length=0),T(this,dn,0),f(this,un).push(d);return}if(a&&f(this,un)[f(this,dn)].type===o){u&&(d.undo=f(this,un)[f(this,dn)].undo),f(this,un)[f(this,dn)]=d;return}const h=f(this,dn)+1;h===f(this,Zf)?f(this,un).splice(0,1):(T(this,dn,h),h<f(this,un).length&&f(this,un).splice(h)),f(this,un).push(d)}undo(){if(f(this,dn)===-1)return;T(this,ia,!0);const{undo:e,post:t}=f(this,un)[f(this,dn)];e(),t==null||t(),T(this,ia,!1),T(this,dn,f(this,dn)-1)}redo(){if(f(this,dn)<f(this,un).length-1){T(this,dn,f(this,dn)+1),T(this,ia,!0);const{cmd:e,post:t}=f(this,un)[f(this,dn)];e(),t==null||t(),T(this,ia,!1)}}hasSomethingToUndo(){return f(this,dn)!==-1}hasSomethingToRedo(){return f(this,dn)<f(this,un).length-1}destroy(){T(this,un,null)}}un=new WeakMap,ia=new WeakMap,Zf=new WeakMap,dn=new WeakMap;var cy,B2;class Sm{constructor(e){I(this,cy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Yn.platform;for(const[s,r,o={}]of e)for(const a of s){const u=a.startsWith("mac+");t&&u?(this.callbacks.set(a.slice(4),{callback:r,options:o}),this.allKeys.add(a.split("+").at(-1))):!t&&!u&&(this.callbacks.set(a,{callback:r,options:o}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(_(this,cy,B2).call(this,t));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:a=[],checker:u=null}}=s;u&&!u(e,t)||(r.bind(e,...a,t)(),o||(t.stopPropagation(),t.preventDefault()))}}cy=new WeakSet,B2=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const uy=class uy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return SG(e),Je(this,"_colors",e)}convert(e){const t=cA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((o,a)=>o===t[a]))return uy._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Ae.makeHexColor(...t):e}};Me(uy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let jw=uy;var Zu,Cs,Zt,yn,ed,Bi,td,Ar,oa,nd,Pl,Zr,Er,_l,ep,tp,sd,np,ei,aa,rd,la,ti,dy,ca,sp,ua,Rl,rp,ip,hn,at,$i,Ll,op,ap,da,ni,Vi,lp,Js,de,hx,kw,$2,V2,fx,U2,z2,H2,Tw,W2,Pw,_w,G2,zn,Ko,K2,q2,Rw,X2,cf,Lw;const Tu=class Tu{constructor(e,t,s,r,o,a,u,d,h,m,g){I(this,de);I(this,Zu,new AbortController);I(this,Cs,null);I(this,Zt,new Map);I(this,yn,new Map);I(this,ed,null);I(this,Bi,null);I(this,td,null);I(this,Ar,new NG);I(this,oa,null);I(this,nd,0);I(this,Pl,new Set);I(this,Zr,null);I(this,Er,null);I(this,_l,new Set);I(this,ep,!1);I(this,tp,!1);I(this,sd,!1);I(this,np,null);I(this,ei,null);I(this,aa,null);I(this,rd,null);I(this,la,!1);I(this,ti,null);I(this,dy,new CG);I(this,ca,!1);I(this,sp,!1);I(this,ua,null);I(this,Rl,null);I(this,rp,null);I(this,ip,null);I(this,hn,Ue.NONE);I(this,at,new Set);I(this,$i,null);I(this,Ll,null);I(this,op,null);I(this,ap,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});I(this,da,[0,0]);I(this,ni,null);I(this,Vi,null);I(this,lp,null);I(this,Js,null);const x=this._signal=f(this,Zu).signal;T(this,Vi,e),T(this,lp,t),T(this,ed,s),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:x}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),r._on("setpreference",this.onSetPreference.bind(this),{signal:x}),r._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:x}),_(this,de,U2).call(this),_(this,de,G2).call(this),_(this,de,Tw).call(this),T(this,Bi,o.annotationStorage),T(this,np,o.filterFactory),T(this,Ll,a),T(this,rd,u||null),T(this,ep,d),T(this,tp,h),T(this,sd,m),T(this,ip,g||null),this.viewParameters={realScale:Fa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Tu.prototype,t=a=>f(a,Vi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Je(this,"_keyboardManager",new Sm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&f(a,Vi).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&f(a,Vi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,s,r;(e=f(this,Js))==null||e.resolve(),T(this,Js,null),(t=f(this,Zu))==null||t.abort(),T(this,Zu,null),this._signal=null;for(const o of f(this,yn).values())o.destroy();f(this,yn).clear(),f(this,Zt).clear(),f(this,_l).clear(),T(this,Cs,null),f(this,at).clear(),f(this,Ar).destroy(),(s=f(this,ed))==null||s.destroy(),(r=f(this,ti))==null||r.hide(),T(this,ti,null),f(this,ei)&&(clearTimeout(f(this,ei)),T(this,ei,null)),f(this,ni)&&(clearTimeout(f(this,ni)),T(this,ni,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return f(this,ip)}get useNewAltTextFlow(){return f(this,tp)}get useNewAltTextWhenAddingImage(){return f(this,sd)}get hcmFilter(){return Je(this,"hcmFilter",f(this,Ll)?f(this,np).addHCMFilter(f(this,Ll).foreground,f(this,Ll).background):"none")}get direction(){return Je(this,"direction",getComputedStyle(f(this,Vi)).direction)}get highlightColors(){return Je(this,"highlightColors",f(this,rd)?new Map(f(this,rd).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Je(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){T(this,rp,e)}editAltText(e,t=!1){var s;(s=f(this,ed))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":T(this,sd,t);break}}onPageChanging({pageNumber:e}){T(this,nd,e-1)}focusMainContainer(){f(this,Vi).focus()}findParent(e,t){for(const s of f(this,yn).values()){const{x:r,y:o,width:a,height:u}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=o&&t<=o+u)return s}return null}disableUserSelect(e=!1){f(this,lp).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,_l).add(e)}removeShouldRescale(e){f(this,_l).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Fa.PDF_TO_CSS_UNITS;for(const t of f(this,_l))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a}=t,u=t.toString(),h=_(this,de,hx).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(h);if(!m)return;t.empty();const g=_(this,de,kw).call(this,h),x=f(this,hn)===Ue.NONE,v=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a,text:u}),x&&this.showAllEditors("highlight",!0,!0)};if(x){this.switchToMode(Ue.HIGHLIGHT,v);return}v()}addToAnnotationStorage(e){!e.isEmpty()&&f(this,Bi)&&!f(this,Bi).has(e.id)&&f(this,Bi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,f(this,la)&&(T(this,la,!1),_(this,de,fx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,at))if(t.div.contains(e)){T(this,Rl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,Rl))return;const[e,t]=f(this,Rl);T(this,Rl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){_(this,de,Tw).call(this),_(this,de,Pw).call(this)}removeEditListeners(){_(this,de,W2).call(this),_(this,de,_w).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of f(this,Er))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of f(this,Er))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=f(this,Cs))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of f(this,at)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const a of f(this,Er))if(a.isHandlingMimeForPasting(o.type)){a.paste(o,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){We(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const h=await r.deserialize(d);if(!h)return;o.push(h)}const a=()=>{for(const d of o)_(this,de,Rw).call(this,d);_(this,de,Lw).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(o){We(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,hn)!==Ue.NONE&&!this.isEditorHandlingKeyboard&&Tu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,la)&&(T(this,la,!1),_(this,de,fx).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(_(this,de,z2).call(this),_(this,de,Pw).call(this),_(this,de,zn).call(this,{isEditing:f(this,hn)!==Ue.NONE,isEmpty:_(this,de,cf).call(this),hasSomethingToUndo:f(this,Ar).hasSomethingToUndo(),hasSomethingToRedo:f(this,Ar).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,de,H2).call(this),_(this,de,_w).call(this),_(this,de,zn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,Er)){T(this,Er,e);for(const t of f(this,Er))_(this,de,Ko).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,dy).id}get currentLayer(){return f(this,yn).get(f(this,nd))}getLayer(e){return f(this,yn).get(e)}get currentPageIndex(){return f(this,nd)}addLayer(e){f(this,yn).set(e.pageIndex,e),f(this,ca)?e.enable():e.disable()}removeLayer(e){f(this,yn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){if(f(this,hn)!==e&&!(f(this,Js)&&(await f(this,Js).promise,!f(this,Js)))){if(T(this,Js,Promise.withResolvers()),T(this,hn,e),e===Ue.NONE){this.setEditingState(!1),_(this,de,q2).call(this),f(this,Js).resolve();return}this.setEditingState(!0),await _(this,de,K2).call(this),this.unselectAll();for(const r of f(this,yn).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),f(this,Js).resolve();return}for(const r of f(this,Zt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();f(this,Js).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==f(this,hn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(f(this,Er)){switch(e){case De.CREATE:this.currentLayer.addNewEditor();return;case De.HIGHLIGHT_DEFAULT_COLOR:(s=f(this,rp))==null||s.updateColor(t);break;case De.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,op)||T(this,op,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of f(this,at))r.updateParams(e,t);for(const r of f(this,Er))r.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var o;for(const a of f(this,Zt).values())a.editorType===e&&a.show(t);(((o=f(this,op))==null?void 0:o.get(De.HIGHLIGHT_SHOW_ALL))??!0)!==t&&_(this,de,Ko).call(this,[[De.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,sp)!==e){T(this,sp,e);for(const t of f(this,yn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of f(this,Zt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return f(this,Zt).get(e)}addEditor(e){f(this,Zt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(f(this,ei)&&clearTimeout(f(this,ei)),T(this,ei,setTimeout(()=>{this.focusMainContainer(),T(this,ei,null)},0))),f(this,Zt).delete(e.id),this.unselect(e),(!e.annotationElementId||!f(this,Pl).has(e.annotationElementId))&&((t=f(this,Bi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){f(this,Pl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,Pl).has(e)}removeDeletedAnnotationElement(e){f(this,Pl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,Cs)!==e&&(T(this,Cs,e),e&&_(this,de,Ko).call(this,e.propertiesToUpdate))}updateUI(e){f(this,de,X2)===e&&_(this,de,Ko).call(this,e.propertiesToUpdate)}toggleSelected(e){if(f(this,at).has(e)){f(this,at).delete(e),e.unselect(),_(this,de,zn).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,at).add(e),e.select(),_(this,de,Ko).call(this,e.propertiesToUpdate),_(this,de,zn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of f(this,at))t!==e&&t.unselect();f(this,at).clear(),f(this,at).add(e),e.select(),_(this,de,Ko).call(this,e.propertiesToUpdate),_(this,de,zn).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,at).has(e)}get firstSelectedEditor(){return f(this,at).values().next().value}unselect(e){e.unselect(),f(this,at).delete(e),_(this,de,zn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,at).size!==0}get isEnterHandled(){return f(this,at).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){f(this,Ar).undo(),_(this,de,zn).call(this,{hasSomethingToUndo:f(this,Ar).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,de,cf).call(this)})}redo(){f(this,Ar).redo(),_(this,de,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,Ar).hasSomethingToRedo(),isEmpty:_(this,de,cf).call(this)})}addCommands(e){f(this,Ar).add(e),_(this,de,zn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,de,cf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...f(this,at)],t=()=>{for(const r of e)r.remove()},s=()=>{for(const r of e)_(this,de,Rw).call(this,r)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=f(this,Cs))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,Cs)||this.hasSelection}selectAll(){for(const e of f(this,at))e.commit();_(this,de,Lw).call(this,f(this,Zt).values())}unselectAll(){if(!(f(this,Cs)&&(f(this,Cs).commitOrRemove(),f(this,hn)!==Ue.NONE))&&this.hasSelection){for(const e of f(this,at))e.unselect();f(this,at).clear(),_(this,de,zn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;f(this,da)[0]+=e,f(this,da)[1]+=t;const[r,o]=f(this,da),a=[...f(this,at)],u=1e3;f(this,ni)&&clearTimeout(f(this,ni)),T(this,ni,setTimeout(()=>{T(this,ni,null),f(this,da)[0]=f(this,da)[1]=0,this.addCommands({cmd:()=>{for(const d of a)f(this,Zt).has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of a)f(this,Zt).has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},u));for(const d of a)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,Zr,new Map);for(const e of f(this,at))f(this,Zr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,Zr))return!1;this.disableUserSelect(!1);const e=f(this,Zr);T(this,Zr,null);let t=!1;for(const[{x:r,y:o,pageIndex:a},u]of e)u.newX=r,u.newY=o,u.newPageIndex=a,t||(t=r!==u.savedX||o!==u.savedY||a!==u.savedPageIndex);if(!t)return!1;const s=(r,o,a,u)=>{if(f(this,Zt).has(r.id)){const d=f(this,yn).get(u);d?r._setParentAndPosition(d,o,a):(r.pageIndex=u,r.x=o,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:a,newPageIndex:u}]of e)s(r,o,a,u)},undo:()=>{for(const[r,{savedX:o,savedY:a,savedPageIndex:u}]of e)s(r,o,a,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,Zr))for(const s of f(this,Zr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,at).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,Cs)===e}getActive(){return f(this,Cs)}getMode(){return f(this,hn)}get imageManager(){return Je(this,"imageManager",new Nw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,m=t.rangeCount;h<m;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:a}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(h,m,g,x)=>({x:(m-r)/a,y:1-(h+g-s)/o,width:x/a,height:g/o});break;case"180":u=(h,m,g,x)=>({x:1-(h+g-s)/o,y:1-(m+x-r)/a,width:g/o,height:x/a});break;case"270":u=(h,m,g,x)=>({x:1-(m+x-r)/a,y:(h-s)/o,width:x/a,height:g/o});break;default:u=(h,m,g,x)=>({x:(h-s)/o,y:(m-r)/a,width:g/o,height:x/a});break}const d=[];for(let h=0,m=t.rangeCount;h<m;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x,y:v,width:w,height:b}of g.getClientRects())w===0||b===0||d.push(u(x,v,w,b))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,td)||T(this,td,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,td))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=f(this,td))==null?void 0:r.get(e.data.id);if(!t)return;const s=f(this,Bi).getRawValue(t);s&&(f(this,hn)===Ue.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};Zu=new WeakMap,Cs=new WeakMap,Zt=new WeakMap,yn=new WeakMap,ed=new WeakMap,Bi=new WeakMap,td=new WeakMap,Ar=new WeakMap,oa=new WeakMap,nd=new WeakMap,Pl=new WeakMap,Zr=new WeakMap,Er=new WeakMap,_l=new WeakMap,ep=new WeakMap,tp=new WeakMap,sd=new WeakMap,np=new WeakMap,ei=new WeakMap,aa=new WeakMap,rd=new WeakMap,la=new WeakMap,ti=new WeakMap,dy=new WeakMap,ca=new WeakMap,sp=new WeakMap,ua=new WeakMap,Rl=new WeakMap,rp=new WeakMap,ip=new WeakMap,hn=new WeakMap,at=new WeakMap,$i=new WeakMap,Ll=new WeakMap,op=new WeakMap,ap=new WeakMap,da=new WeakMap,ni=new WeakMap,Vi=new WeakMap,lp=new WeakMap,Js=new WeakMap,de=new WeakSet,hx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},kw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of f(this,yn).values())if(s.hasTextLayer(e))return s;return null},$2=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=_(this,de,hx).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(f(this,ti)||T(this,ti,new AG(this)),f(this,ti).show(s,r,this.direction==="ltr"))},V2=function(){var o,a,u;const e=document.getSelection();if(!e||e.isCollapsed){f(this,$i)&&((o=f(this,ti))==null||o.hide(),T(this,$i,null),_(this,de,zn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,$i))return;const r=_(this,de,hx).call(this,e).closest(".textLayer");if(!r){f(this,$i)&&((a=f(this,ti))==null||a.hide(),T(this,$i,null),_(this,de,zn).call(this,{hasSelectedText:!1}));return}if((u=f(this,ti))==null||u.hide(),T(this,$i,t),_(this,de,zn).call(this,{hasSelectedText:!0}),!(f(this,hn)!==Ue.HIGHLIGHT&&f(this,hn)!==Ue.NONE)&&(f(this,hn)===Ue.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,la,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=f(this,hn)===Ue.HIGHLIGHT?_(this,de,kw).call(this,r):null;d==null||d.toggleDrawing();const h=new AbortController,m=this.combinedSignal(h),g=x=>{x.type==="pointerup"&&x.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),x.type==="pointerup"&&_(this,de,fx).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},fx=function(e=""){f(this,hn)===Ue.HIGHLIGHT?this.highlightSelection(e):f(this,ep)&&_(this,de,$2).call(this)},U2=function(){document.addEventListener("selectionchange",_(this,de,V2).bind(this),{signal:this._signal})},z2=function(){if(f(this,aa))return;T(this,aa,new AbortController);const e=this.combinedSignal(f(this,aa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},H2=function(){var e;(e=f(this,aa))==null||e.abort(),T(this,aa,null)},Tw=function(){if(f(this,ua))return;T(this,ua,new AbortController);const e=this.combinedSignal(f(this,ua));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},W2=function(){var e;(e=f(this,ua))==null||e.abort(),T(this,ua,null)},Pw=function(){if(f(this,oa))return;T(this,oa,new AbortController);const e=this.combinedSignal(f(this,oa));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_w=function(){var e;(e=f(this,oa))==null||e.abort(),T(this,oa,null)},G2=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},zn=function(e){Object.entries(e).some(([s,r])=>f(this,ap)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,ap),e)}),f(this,hn)===Ue.HIGHLIGHT&&e.hasSelectedEditor===!1&&_(this,de,Ko).call(this,[[De.HIGHLIGHT_FREE,!0]]))},Ko=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},K2=async function(){if(!f(this,ca)){T(this,ca,!0);const e=[];for(const t of f(this,yn).values())e.push(t.enable());await Promise.all(e);for(const t of f(this,Zt).values())t.enable()}},q2=function(){if(this.unselectAll(),f(this,ca)){T(this,ca,!1);for(const e of f(this,yn).values())e.disable();for(const e of f(this,Zt).values())e.disable()}},Rw=function(e){const t=f(this,yn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},X2=function(){let e=null;for(e of f(this,at));return e},cf=function(){if(f(this,Zt).size===0)return!0;if(f(this,Zt).size===1)for(const e of f(this,Zt).values())return e.isEmpty();return!1},Lw=function(e){for(const t of f(this,at))t.unselect();f(this,at).clear();for(const t of e)t.isEmpty()||(f(this,at).add(t),t.select());_(this,de,zn).call(this,{hasSelectedEditor:this.hasSelection})},Me(Tu,"TRANSLATE_SMALL",1),Me(Tu,"TRANSLATE_BIG",10);let Tc=Tu;var fn,si,Cr,id,ri,Ns,od,ii,us,Ui,Il,oi,ha,Dr,uf,px;const Hn=class Hn{constructor(e){I(this,Dr);I(this,fn,null);I(this,si,!1);I(this,Cr,null);I(this,id,null);I(this,ri,null);I(this,Ns,null);I(this,od,!1);I(this,ii,null);I(this,us,null);I(this,Ui,null);I(this,Il,null);I(this,oi,!1);T(this,us,e),T(this,oi,e._uiManager.useNewAltTextFlow),f(Hn,ha)||T(Hn,ha,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Hn._l10n??(Hn._l10n=e)}async render(){const e=T(this,Cr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=T(this,id,document.createElement("span"));e.append(t),f(this,oi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",f(Hn,ha).missing),t.setAttribute("data-l10n-id",f(Hn,ha)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=f(this,us)._uiManager._signal;e.addEventListener("contextmenu",ar,{signal:s}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),f(this,us)._uiManager.editAltText(f(this,us)),f(this,oi)&&f(this,us)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,Dr,uf)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(T(this,od,!0),r(o))},{signal:s}),await _(this,Dr,px).call(this),e}finish(){f(this,Cr)&&(f(this,Cr).focus({focusVisible:f(this,od)}),T(this,od,!1))}isEmpty(){return f(this,oi)?f(this,fn)===null:!f(this,fn)&&!f(this,si)}hasData(){return f(this,oi)?f(this,fn)!==null||!!f(this,Ui):this.isEmpty()}get guessedText(){return f(this,Ui)}async setGuessedText(e){f(this,fn)===null&&(T(this,Ui,e),T(this,Il,await Hn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),_(this,Dr,px).call(this))}toggleAltTextBadge(e=!1){var t;if(!f(this,oi)||f(this,fn)){(t=f(this,ii))==null||t.remove(),T(this,ii,null);return}if(!f(this,ii)){const s=T(this,ii,document.createElement("div"));s.className="noAltTextBadge",f(this,us).div.append(s)}f(this,ii).classList.toggle("hidden",!e)}serialize(e){let t=f(this,fn);return!e&&f(this,Ui)===t&&(t=f(this,Il)),{altText:t,decorative:f(this,si),guessedText:f(this,Ui),textWithDisclaimer:f(this,Il)}}get data(){return{altText:f(this,fn),decorative:f(this,si)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(T(this,Ui,s),T(this,Il,r)),!(f(this,fn)===e&&f(this,si)===t)&&(o||(T(this,fn,e),T(this,si,t)),_(this,Dr,px).call(this))}toggle(e=!1){f(this,Cr)&&(!e&&f(this,Ns)&&(clearTimeout(f(this,Ns)),T(this,Ns,null)),f(this,Cr).disabled=!e)}shown(){f(this,us)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,Dr,uf)}})}destroy(){var e,t;(e=f(this,Cr))==null||e.remove(),T(this,Cr,null),T(this,id,null),T(this,ri,null),(t=f(this,ii))==null||t.remove(),T(this,ii,null)}};fn=new WeakMap,si=new WeakMap,Cr=new WeakMap,id=new WeakMap,ri=new WeakMap,Ns=new WeakMap,od=new WeakMap,ii=new WeakMap,us=new WeakMap,Ui=new WeakMap,Il=new WeakMap,oi=new WeakMap,ha=new WeakMap,Dr=new WeakSet,uf=function(){return f(this,fn)&&"added"||f(this,fn)===null&&this.guessedText&&"review"||"missing"},px=async function(){var r,o,a;const e=f(this,Cr);if(!e)return;if(f(this,oi)){if(e.classList.toggle("done",!!f(this,fn)),e.setAttribute("data-l10n-id",f(Hn,ha)[f(this,Dr,uf)]),(r=f(this,id))==null||r.setAttribute("data-l10n-id",f(Hn,ha)[`${f(this,Dr,uf)}-label`]),!f(this,fn)){(o=f(this,ri))==null||o.remove();return}}else{if(!f(this,fn)&&!f(this,si)){e.classList.remove("done"),(a=f(this,ri))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=f(this,ri);if(!t){T(this,ri,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${f(this,us).id}`;const u=100,d=f(this,us)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(f(this,Ns)),T(this,Ns,null)},{once:!0}),e.addEventListener("mouseenter",()=>{T(this,Ns,setTimeout(()=>{T(this,Ns,null),f(this,ri).classList.add("show"),f(this,us)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;f(this,Ns)&&(clearTimeout(f(this,Ns)),T(this,Ns,null)),(h=f(this,ri))==null||h.classList.remove("show")},{signal:d})}f(this,si)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=f(this,fn)),t.parentNode||e.append(t);const s=f(this,us).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},I(Hn,ha,null),Me(Hn,"_l10n",null);let sy=Hn;var Ml,Nr,kt,ad,Dl,vn,Ol,fa,cp,Fl,pa,up,Bl,zi,ai,ld,cd,Zs,dp,hy,ze,Iw,hp,Mw,Dw,Y2,Q2,Ow,Fw,Bw,J2,$w,Z2,eL,tL,Vw,df;const rt=class rt{constructor(e){I(this,ze);I(this,Ml,null);I(this,Nr,null);I(this,kt,null);I(this,ad,!1);I(this,Dl,!1);I(this,vn,null);I(this,Ol,null);I(this,fa,null);I(this,cp,"");I(this,Fl,!1);I(this,pa,null);I(this,up,!1);I(this,Bl,!1);I(this,zi,!1);I(this,ai,null);I(this,ld,0);I(this,cd,0);I(this,Zs,null);Me(this,"_editToolbar",null);Me(this,"_initialOptions",Object.create(null));Me(this,"_initialData",null);Me(this,"_isVisible",!0);Me(this,"_uiManager",null);Me(this,"_focusEventsAllowed",!0);I(this,dp,!1);I(this,hy,rt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,a];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=Tc.TRANSLATE_SMALL,s=Tc.TRANSLATE_BIG;return Je(this,"_resizerKeyboardManager",new Sm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Je(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new jG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(rt._l10n??(rt._l10n=e),rt._l10nResizer||(rt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),rt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,dp)}set _isDraggable(e){var t;T(this,dp,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,hy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):_(this,ze,df).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,Fl)?T(this,Fl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[o,a]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/o,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){_(this,ze,Iw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,pa)||T(this,pa,[this.x,this.y]),_(this,ze,Iw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){f(this,pa)||T(this,pa,[this.x,this.y]);const[s,r]=this.parentDimensions;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[u,d]=this.getBaseTranslation();o+=u,a+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!f(this,pa)&&(f(this,pa)[0]!==this.x||f(this,pa)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=rt,r=s/e,o=s/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:r,y:o,width:a,height:u}=this;if(a*=t,u*=s,r*=t,o*=s,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-a,r)),o=Math.max(0,Math.min(s-u,o));break;case 90:r=Math.max(0,Math.min(t-u,r)),o=Math.min(s,Math.max(a,o));break;case 180:r=Math.min(t,Math.max(a,r)),o=Math.min(s,Math.max(u,o));break;case 270:r=Math.min(t,Math.max(u,r)),o=Math.max(0,Math.min(s-a,o));break}this.x=r/=t,this.y=o/=s;const[d,h]=this.getBaseTranslation();r+=d,o+=h;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return _(s=rt,hp,Mw).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return _(s=rt,hp,Mw).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,r]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,f(this,Dl)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),o=!f(this,Dl)&&t.endsWith("%");if(r&&o)return;const[a,u]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!f(this,Dl)&&!o&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=f(this,kt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||f(this,Bl)?this._editToolbar:(this._editToolbar=new Ew(this),this.div.append(this._editToolbar.render()),f(this,kt)&&await this._editToolbar.addAltText(f(this,kt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=f(this,kt))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,kt)||(sy.initialize(rt._l10n),T(this,kt,new sy(this)),f(this,Ml)&&(f(this,kt).data=f(this,Ml),T(this,Ml,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=f(this,kt))==null?void 0:e.data}set altTextData(e){f(this,kt)&&(f(this,kt).data=e)}get guessedAltText(){var e;return(e=f(this,kt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=f(this,kt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=f(this,kt))==null?void 0:t.serialize(e)}hasAltText(){return!!f(this,kt)&&!f(this,kt).isEmpty()}hasAltTextData(){var e;return((e=f(this,kt))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=f(this,ad)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),_(this,ze,$w).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),ny(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Yn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,Fl,!0),this._isDraggable){_(this,ze,J2).call(this,e);return}_(this,ze,Bw).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){f(this,ai)&&clearTimeout(f(this,ai)),T(this,ai,setTimeout(()=>{var e;T(this,ai,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const r=this.parentScale,[o,a]=this.pageDimensions,[u,d]=this.pageTranslation,h=e/r,m=t/r,g=this.x*o,x=this.y*a,v=this.width*o,w=this.height*a;switch(s){case 0:return[g+h+u,a-x-m-w+d,g+h+v+u,a-x-m+d];case 90:return[g+m+u,a-x+h+d,g+m+w+u,a-x+h+v+d];case 180:return[g-h-v+u,a-x+m+d,g-h+u,a-x+m+w+d];case 270:return[g-m-w+u,a-x-h-v+d,g-m+u,a-x-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,o,a]=e,u=o-s,d=a-r;switch(this.rotation){case 0:return[s,t-a,u,d];case 90:return[s,t-r,d,u];case 180:return[o,t-r,u,d];case 270:return[o,t-a,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){T(this,Bl,!0)}disableEditMode(){T(this,Bl,!1)}isInEditMode(){return f(this,Bl)}shouldGetKeyboardEvents(){return f(this,zi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){_(this,ze,$w).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){bt("An editor must be serializable")}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});r.rotation=e.rotation,T(r,Ml,e.accessibilityData);const[o,a]=r.pageDimensions,[u,d,h,m]=r.getRectInCurrentCoords(e.rect,a);return r.x=u/o,r.y=d/a,r.width=h/o,r.height=m/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=f(this,fa))==null||e.abort(),T(this,fa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,ai)&&(clearTimeout(f(this,ai)),T(this,ai,null)),_(this,ze,df).call(this),this.removeEditToolbar(),f(this,Zs)){for(const t of f(this,Zs).values())clearTimeout(t);T(this,Zs,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,ze,Y2).call(this),f(this,vn).classList.remove("hidden"),ny(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,Ol,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,vn).children;if(!f(this,Nr)){T(this,Nr,Array.from(t));const a=_(this,ze,Z2).bind(this),u=_(this,ze,eL).bind(this),d=this._uiManager._signal;for(const h of f(this,Nr)){const m=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",u,{signal:d}),h.addEventListener("focus",_(this,ze,tL).bind(this,m),{signal:d}),h.setAttribute("data-l10n-id",rt._l10nResizer[m])}}const s=f(this,Nr)[0];let r=0;for(const a of t){if(a===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(f(this,Nr).length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)f(this,vn).append(f(this,vn).firstChild);else if(o>r)for(let u=0;u<o-r;u++)f(this,vn).firstChild.before(f(this,vn).lastChild);let a=0;for(const u of t){const h=f(this,Nr)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",rt._l10nResizer[h])}}_(this,ze,Vw).call(this,0),T(this,zi,!0),f(this,vn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,zi)&&_(this,ze,Fw).call(this,f(this,cp),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){_(this,ze,df).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(s=f(this,kt))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,r,o;(e=f(this,vn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=f(this,kt))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return f(this,up)}set isEditing(e){T(this,up,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){T(this,Dl,!0);const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,Zs)||T(this,Zs,new Map);const{action:s}=e;let r=f(this,Zs).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),f(this,Zs).delete(s),f(this,Zs).size===0&&T(this,Zs,null)},rt._telemetryTimeout),f(this,Zs).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,ad,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,ad,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ml=new WeakMap,Nr=new WeakMap,kt=new WeakMap,ad=new WeakMap,Dl=new WeakMap,vn=new WeakMap,Ol=new WeakMap,fa=new WeakMap,cp=new WeakMap,Fl=new WeakMap,pa=new WeakMap,up=new WeakMap,Bl=new WeakMap,zi=new WeakMap,ai=new WeakMap,ld=new WeakMap,cd=new WeakMap,Zs=new WeakMap,dp=new WeakMap,hy=new WeakMap,ze=new WeakSet,Iw=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this.fixAndSetPosition()},hp=new WeakSet,Mw=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Dw=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},Y2=function(){if(f(this,vn))return;T(this,vn,document.createElement("div")),f(this,vn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");f(this,vn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",_(this,ze,Q2).bind(this,s),{signal:t}),r.addEventListener("contextmenu",ar,{signal:t}),r.tabIndex=-1}this.div.prepend(f(this,vn))},Q2=function(e,t){var w;t.preventDefault();const{isMac:s}=Yn.platform;if(t.button!==0||t.ctrlKey&&s)return;(w=f(this,kt))==null||w.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,a=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,ze,Fw).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",ar,{signal:a});const u=this.x,d=this.y,h=this.width,m=this.height,g=this.parent.div.style.cursor,x=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const v=()=>{var b;o.abort(),this.parent.togglePointerEvents(!0),(b=f(this,kt))==null||b.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=g,this.div.style.cursor=x,_(this,ze,Ow).call(this,u,d,h,m)};window.addEventListener("pointerup",v,{signal:a}),window.addEventListener("blur",v,{signal:a})},Ow=function(e,t,s,r){const o=this.x,a=this.y,u=this.width,d=this.height;o===e&&a===t&&u===s&&d===r||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=a;const[h,m]=this.parentDimensions;this.setDims(h*u,m*d),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=r,this.x=e,this.y=t;const[h,m]=this.parentDimensions;this.setDims(h*s,m*r),this.fixAndSetPosition()},mustExec:!0})},Fw=function(e,t){const[s,r]=this.parentDimensions,o=this.x,a=this.y,u=this.width,d=this.height,h=rt.MIN_SIZE/s,m=rt.MIN_SIZE/r,g=G=>Math.round(G*1e4)/1e4,x=_(this,ze,Dw).call(this,this.rotation),v=(G,z)=>[x[0]*G+x[2]*z,x[1]*G+x[3]*z],w=_(this,ze,Dw).call(this,360-this.rotation),b=(G,z)=>[w[0]*G+w[2]*z,w[1]*G+w[3]*z];let C,E,N=!1,k=!1;switch(e){case"topLeft":N=!0,C=(G,z)=>[0,0],E=(G,z)=>[G,z];break;case"topMiddle":C=(G,z)=>[G/2,0],E=(G,z)=>[G/2,z];break;case"topRight":N=!0,C=(G,z)=>[G,0],E=(G,z)=>[0,z];break;case"middleRight":k=!0,C=(G,z)=>[G,z/2],E=(G,z)=>[0,z/2];break;case"bottomRight":N=!0,C=(G,z)=>[G,z],E=(G,z)=>[0,0];break;case"bottomMiddle":C=(G,z)=>[G/2,z],E=(G,z)=>[G/2,0];break;case"bottomLeft":N=!0,C=(G,z)=>[0,z],E=(G,z)=>[G,0];break;case"middleLeft":k=!0,C=(G,z)=>[0,z/2],E=(G,z)=>[G,z/2];break}const P=C(u,d),R=E(u,d);let M=v(...R);const O=g(o+M[0]),F=g(a+M[1]);let D=1,U=1,[K,X]=this.screenToPageTranslation(t.movementX,t.movementY);if([K,X]=b(K/s,X/r),N){const G=Math.hypot(u,d);D=U=Math.max(Math.min(Math.hypot(R[0]-P[0]-K,R[1]-P[1]-X)/G,1/u,1/d),h/u,m/d)}else k?D=Math.max(h,Math.min(1,Math.abs(R[0]-P[0]-K)))/u:U=Math.max(m,Math.min(1,Math.abs(R[1]-P[1]-X)))/d;const ee=g(u*D),J=g(d*U);M=v(...E(ee,J));const ae=O-M[0],Y=F-M[1];this.width=ee,this.height=J,this.x=ae,this.y=Y,this.setDims(s*ee,r*J),this.fixAndSetPosition()},Bw=function(e){const{isMac:t}=Yn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},J2=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const s=new AbortController,r=this._uiManager.combinedSignal(s);if(t){this.div.classList.add("moving"),T(this,ld,e.clientX),T(this,cd,e.clientY);const a=u=>{const{clientX:d,clientY:h}=u,[m,g]=this.screenToPageTranslation(d-f(this,ld),h-f(this,cd));T(this,ld,d),T(this,cd,h),this._uiManager.dragSelectedEditors(m,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:r})}const o=()=>{s.abort(),t&&this.div.classList.remove("moving"),T(this,Fl,!1),this._uiManager.endDragSession()||_(this,ze,Bw).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},$w=function(){if(f(this,fa)||!this.div)return;T(this,fa,new AbortController);const e=this._uiManager.combinedSignal(f(this,fa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Z2=function(e){rt._resizerKeyboardManager.exec(this,e)},eL=function(e){var t;f(this,zi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,vn)&&_(this,ze,df).call(this)},tL=function(e){T(this,cp,f(this,zi)?e:"")},Vw=function(e){if(f(this,Nr))for(const t of f(this,Nr))t.tabIndex=e},df=function(){if(T(this,zi,!1),_(this,ze,Vw).call(this,-1),f(this,Ol)){const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=f(this,Ol);_(this,ze,Ow).call(this,e,t,s,r),T(this,Ol,null)}},I(rt,hp),Me(rt,"_l10n",null),Me(rt,"_l10nResizer",null),Me(rt,"_borderLineWidth",-1),Me(rt,"_colorManager",new jw),Me(rt,"_zIndex",1),Me(rt,"_telemetryTimeout",1e3);let ct=rt;class jG extends ct{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Fk=3285377520,Xs=4294901760,Xr=65535;class nL{constructor(e){this.h1=e?e&4294967295:Fk,this.h2=e?e&4294967295:Fk}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let b=0,C=e.length;b<C;b++){const E=e.charCodeAt(b);E<=255?t[s++]=E:(t[s++]=E>>>8,t[s++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,a=new Uint32Array(t.buffer,0,r);let u=0,d=0,h=this.h1,m=this.h2;const g=3432918353,x=461845907,v=g&Xr,w=x&Xr;for(let b=0;b<r;b++)b&1?(u=a[b],u=u*g&Xs|u*v&Xr,u=u<<15|u>>>17,u=u*x&Xs|u*w&Xr,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[b],d=d*g&Xs|d*v&Xr,d=d<<15|d>>>17,d=d*x&Xs|d*w&Xr,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*g&Xs|u*v&Xr,u=u<<15|u>>>17,u=u*x&Xs|u*w&Xr,r&1?h^=u:m^=u}this.h1=h,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Xs|e*36045&Xr,t=t*4283543511&Xs|((t<<16|e>>>16)*2950163797&Xs)>>>16,e^=t>>>1,e=e*444984403&Xs|e*60499&Xr,t=t*3301882366&Xs|((t<<16|e>>>16)*3120437893&Xs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Uw=Object.freeze({map:null,hash:"",transfer:void 0});var $l,Vl,pn,fy,sL;class uA{constructor(){I(this,fy);I(this,$l,!1);I(this,Vl,null);I(this,pn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=f(this,pn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return f(this,pn).get(e)}remove(e){if(f(this,pn).delete(e),f(this,pn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of f(this,pn).values())if(t instanceof ct)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=f(this,pn).get(e);let r=!1;if(s!==void 0)for(const[o,a]of Object.entries(t))s[o]!==a&&(r=!0,s[o]=a);else r=!0,f(this,pn).set(e,t);r&&_(this,fy,sL).call(this),t instanceof ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return f(this,pn).has(e)}getAll(){return f(this,pn).size>0?rA(f(this,pn)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return f(this,pn).size}resetModified(){f(this,$l)&&(T(this,$l,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rL(this)}get serializable(){if(f(this,pn).size===0)return Uw;const e=new Map,t=new nL,s=[],r=Object.create(null);let o=!1;for(const[a,u]of f(this,pn)){const d=u instanceof ct?u.serialize(!1,r):u;d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Uw}get editorStats(){let e=null;const t=new Map;for(const s of f(this,pn).values()){if(!(s instanceof ct))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[o]||(e[o]=new Map);for(const[u,d]of Object.entries(r)){if(u==="type")continue;let h=a.get(u);h||(h=new Map,a.set(u,h));const m=h.get(d)??0;h.set(d,m+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){T(this,Vl,null)}get modifiedIds(){if(f(this,Vl))return f(this,Vl);const e=[];for(const t of f(this,pn).values())!(t instanceof ct)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return T(this,Vl,{ids:new Set(e),hash:e.join(",")})}}$l=new WeakMap,Vl=new WeakMap,pn=new WeakMap,fy=new WeakSet,sL=function(){f(this,$l)||(T(this,$l,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fp;class rL extends uA{constructor(t){super();I(this,fp);const{map:s,hash:r,transfer:o}=t.serializable,a=structuredClone(s,o?{transfer:o}:null);T(this,fp,{map:a,hash:r,transfer:o})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,fp)}get modifiedIds(){return Je(this,"modifiedIds",{ids:new Set,hash:""})}}fp=new WeakMap;var ud;class kG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){I(this,ud,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,ud).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||f(this,ud).has(e.loadedName))){if(nn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=e,a=new FontFace(s,r,o);this.addNativeFontFace(a);try{await a.load(),f(this,ud).add(s),t==null||t(e)}catch{We(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw We(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Je(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Bn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Je(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(nn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Je(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(P,R){return P.charCodeAt(R)<<24|P.charCodeAt(R+1)<<16|P.charCodeAt(R+2)<<8|P.charCodeAt(R+3)&255}function r(P,R,M,O){const F=P.substring(0,R),D=P.substring(R+M);return F+O+D}let o,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let h=0;function m(P,R){if(++h>30){We("Load test font never loaded."),R();return}if(d.font="30px "+P,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(m.bind(null,P,R))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=r(x,976,g.length,g);const w=16,b=1482184792;let C=s(x,w);for(o=0,a=g.length-3;o<a;o+=4)C=C-b+s(g,o)|0;o<g.length&&(C=C-b+s(g+"XXX",o)|0),x=r(x,w,4,hG(C));const E=`url(data:font/opentype;base64,${btoa(x)});`,N=`@font-face {font-family:"${g}";src:${E}}`;this.insertRule(N);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const P of[e.loadedName,g]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=P,k.append(R)}this._document.body.append(k),m(g,()=>{k.remove(),t.complete()})}}ud=new WeakMap;class TG{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${yG(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(o){We(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(o,a){};const r=[];for(let o=0,a=s.length;o<a;)switch(s[o++]){case Ri.BEZIER_CURVE_TO:{const[u,d,h,m,g,x]=s.slice(o,o+6);r.push(v=>v.bezierCurveTo(u,d,h,m,g,x)),o+=6}break;case Ri.MOVE_TO:{const[u,d]=s.slice(o,o+2);r.push(h=>h.moveTo(u,d)),o+=2}break;case Ri.LINE_TO:{const[u,d]=s.slice(o,o+2);r.push(h=>h.lineTo(u,d)),o+=2}break;case Ri.QUADRATIC_CURVE_TO:{const[u,d,h,m]=s.slice(o,o+4);r.push(g=>g.quadraticCurveTo(u,d,h,m)),o+=4}break;case Ri.RESTORE:r.push(u=>u.restore());break;case Ri.SAVE:r.push(u=>u.save());break;case Ri.SCALE:nn(r.length===2,"Scale command is only valid at the third position.");break;case Ri.TRANSFORM:{const[u,d,h,m,g,x]=s.slice(o,o+6);r.push(v=>v.transform(u,d,h,m,g,x)),o+=6}break;case Ri.TRANSLATE:{const[u,d]=s.slice(o,o+2);r.push(h=>h.translate(u,d)),o+=2}break}return this.compiledGlyphs[t]=function(a,u){r[0](a),r[1](a),a.scale(u,-u);for(let d=2,h=r.length;d<h;d++)r[d](a)}}}var pp;class iL{constructor({enableHWA:e=!1}){I(this,pp,!1);T(this,pp,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!f(this,pp)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){bt("Abstract method `_createCanvas` called.")}}pp=new WeakMap;class PG extends iL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class oL{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class aL extends oL{async _fetch(e){const t=await qy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ky(t)}}class lL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,o){return"none"}destroy(e=!1){}}var Ul,zl,li,Hi,Ln,py,Hl,ge,Pn,gu,xu,mx,yu,cL,zw,vu,hf,ff,Hw,pf;class _G extends lL{constructor({docId:t,ownerDocument:s=globalThis.document}){super();I(this,ge);I(this,Ul);I(this,zl);I(this,li);I(this,Hi);I(this,Ln);I(this,py);I(this,Hl,0);T(this,Hi,t),T(this,Ln,s)}addFilter(t){if(!t)return"none";let s=f(this,ge,Pn).get(t);if(s)return s;const[r,o,a]=_(this,ge,mx).call(this,t),u=t.length===1?r:`${r}${o}${a}`;if(s=f(this,ge,Pn).get(u),s)return f(this,ge,Pn).set(t,s),s;const d=`g_${f(this,Hi)}_transfer_map_${ln(this,Hl)._++}`,h=_(this,ge,yu).call(this,d);f(this,ge,Pn).set(t,h),f(this,ge,Pn).set(u,h);const m=_(this,ge,vu).call(this,d);return _(this,ge,ff).call(this,r,o,a,m),h}addHCMFilter(t,s){var w;const r=`${t}-${s}`,o="base";let a=f(this,ge,gu).get(o);if((a==null?void 0:a.key)===r||(a?((w=a.filter)==null||w.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},f(this,ge,gu).set(o,a)),!t||!s))return a.url;const u=_(this,ge,pf).call(this,t);t=Ae.makeHexColor(...u);const d=_(this,ge,pf).call(this,s);if(s=Ae.makeHexColor(...d),f(this,ge,xu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const h=new Array(256);for(let b=0;b<=255;b++){const C=b/255;h[b]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const m=h.join(","),g=`g_${f(this,Hi)}_hcm_filter`,x=a.filter=_(this,ge,vu).call(this,g);_(this,ge,ff).call(this,m,m,m,x),_(this,ge,zw).call(this,x);const v=(b,C)=>{const E=u[b]/255,N=d[b]/255,k=new Array(C+1);for(let P=0;P<=C;P++)k[P]=E+P/C*(N-E);return k.join(",")};return _(this,ge,ff).call(this,v(0,5),v(1,5),v(2,5),x),a.url=_(this,ge,yu).call(this,g),a.url}addAlphaFilter(t){let s=f(this,ge,Pn).get(t);if(s)return s;const[r]=_(this,ge,mx).call(this,[t]),o=`alpha_${r}`;if(s=f(this,ge,Pn).get(o),s)return f(this,ge,Pn).set(t,s),s;const a=`g_${f(this,Hi)}_alpha_map_${ln(this,Hl)._++}`,u=_(this,ge,yu).call(this,a);f(this,ge,Pn).set(t,u),f(this,ge,Pn).set(o,u);const d=_(this,ge,vu).call(this,a);return _(this,ge,Hw).call(this,r,d),u}addLuminosityFilter(t){let s=f(this,ge,Pn).get(t||"luminosity");if(s)return s;let r,o;if(t?([r]=_(this,ge,mx).call(this,[t]),o=`luminosity_${r}`):o="luminosity",s=f(this,ge,Pn).get(o),s)return f(this,ge,Pn).set(t,s),s;const a=`g_${f(this,Hi)}_luminosity_map_${ln(this,Hl)._++}`,u=_(this,ge,yu).call(this,a);f(this,ge,Pn).set(t,u),f(this,ge,Pn).set(o,u);const d=_(this,ge,vu).call(this,a);return _(this,ge,cL).call(this,d),t&&_(this,ge,Hw).call(this,r,d),u}addHighlightHCMFilter(t,s,r,o,a){var N;const u=`${s}-${r}-${o}-${a}`;let d=f(this,ge,gu).get(t);if((d==null?void 0:d.key)===u||(d?((N=d.filter)==null||N.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},f(this,ge,gu).set(t,d)),!s||!r))return d.url;const[h,m]=[s,r].map(_(this,ge,pf).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),x=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[v,w]=[o,a].map(_(this,ge,pf).bind(this));x<g&&([g,x,v,w]=[x,g,w,v]),f(this,ge,xu).style.color="";const b=(k,P,R)=>{const M=new Array(256),O=(x-g)/R,F=k/255,D=(P-k)/(255*R);let U=0;for(let K=0;K<=R;K++){const X=Math.round(g+K*O),ee=F+K*D;for(let J=U;J<=X;J++)M[J]=ee;U=X+1}for(let K=U;K<256;K++)M[K]=M[U-1];return M.join(",")},C=`g_${f(this,Hi)}_hcm_${t}_filter`,E=d.filter=_(this,ge,vu).call(this,C);return _(this,ge,zw).call(this,E),_(this,ge,ff).call(this,b(v[0],w[0],5),b(v[1],w[1],5),b(v[2],w[2],5),E),d.url=_(this,ge,yu).call(this,C),d.url}destroy(t=!1){t&&f(this,ge,gu).size!==0||(f(this,li)&&(f(this,li).parentNode.parentNode.remove(),T(this,li,null)),f(this,zl)&&(f(this,zl).clear(),T(this,zl,null)),T(this,Hl,0))}}Ul=new WeakMap,zl=new WeakMap,li=new WeakMap,Hi=new WeakMap,Ln=new WeakMap,py=new WeakMap,Hl=new WeakMap,ge=new WeakSet,Pn=function(){return f(this,zl)||T(this,zl,new Map)},gu=function(){return f(this,py)||T(this,py,new Map)},xu=function(){if(!f(this,li)){const t=f(this,Ln).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=f(this,Ln).createElementNS(Mi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),T(this,li,f(this,Ln).createElementNS(Mi,"defs")),t.append(r),r.append(f(this,li)),f(this,Ln).body.append(t)}return f(this,li)},mx=function(t){if(t.length===1){const h=t[0],m=new Array(256);for(let x=0;x<256;x++)m[x]=h[x]/255;const g=m.join(",");return[g,g,g]}const[s,r,o]=t,a=new Array(256),u=new Array(256),d=new Array(256);for(let h=0;h<256;h++)a[h]=s[h]/255,u[h]=r[h]/255,d[h]=o[h]/255;return[a.join(","),u.join(","),d.join(",")]},yu=function(t){if(f(this,Ul)===void 0){T(this,Ul,"");const s=f(this,Ln).URL;s!==f(this,Ln).baseURI&&(Xy(s)?We('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,Ul,s.split("#",1)[0]))}return`url(${f(this,Ul)}#${t})`},cL=function(t){const s=f(this,Ln).createElementNS(Mi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},zw=function(t){const s=f(this,Ln).createElementNS(Mi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},vu=function(t){const s=f(this,Ln).createElementNS(Mi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),f(this,ge,xu).append(s),s},hf=function(t,s,r){const o=f(this,Ln).createElementNS(Mi,s);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},ff=function(t,s,r,o){const a=f(this,Ln).createElementNS(Mi,"feComponentTransfer");o.append(a),_(this,ge,hf).call(this,a,"feFuncR",t),_(this,ge,hf).call(this,a,"feFuncG",s),_(this,ge,hf).call(this,a,"feFuncB",r)},Hw=function(t,s){const r=f(this,Ln).createElementNS(Mi,"feComponentTransfer");s.append(r),_(this,ge,hf).call(this,r,"feFuncA",t)},pf=function(t){return f(this,ge,xu).style.color=t,cA(getComputedStyle(f(this,ge,xu)).getPropertyValue("color"))};class uL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class dL extends uL{async _fetch(e){const t=await qy(e,"arraybuffer");return new Uint8Array(t)}}if(Bn){var Ww=Promise.withResolvers(),Tf=null;(async()=>{const e=await Kg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Kg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Kg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Kg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,a;return new Map(Object.entries({fs:e,http:t,https:s,url:r,canvas:o,path2d:a}))})().then(e=>{Tf=e,Ww.resolve()},e=>{We(`loadPackages: ${e}`),Tf=new Map,Ww.resolve()})}class Ba{static get promise(){return Ww.promise}static get(e){return Tf==null?void 0:Tf.get(e)}}async function hL(n){const t=await Ba.get("fs").promises.readFile(n);return new Uint8Array(t)}class RG extends lL{}class LG extends iL{_createCanvas(e,t){return Ba.get("canvas").createCanvas(e,t)}}class IG extends oL{async _fetch(e){return hL(e)}}class MG extends uL{async _fetch(e){return hL(e)}}const qn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Gw(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class dA{getPattern(){bt("Abstract method `getPattern` called.")}}class DG extends dA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let o;if(r===qn.STROKE||r===qn.FILL){const a=t.current.getClippedPathBoundingBox(r,Pt(e))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",u,d),m=h.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-a[0],-a[1]),s=Ae.transform(s,[1,0,0,1,a[0],a[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Gw(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(s);o.setTransform(g)}else Gw(e,this._bbox),o=this._createGradient(e);return o}}function Cb(n,e,t,s,r,o,a,u){const d=e.coords,h=e.colors,m=n.data,g=n.width*4;let x;d[t+1]>d[s+1]&&(x=t,t=s,s=x,x=o,o=a,a=x),d[s+1]>d[r+1]&&(x=s,s=r,r=x,x=a,a=u,u=x),d[t+1]>d[s+1]&&(x=t,t=s,s=x,x=o,o=a,a=x);const v=(d[t]+e.offsetX)*e.scaleX,w=(d[t+1]+e.offsetY)*e.scaleY,b=(d[s]+e.offsetX)*e.scaleX,C=(d[s+1]+e.offsetY)*e.scaleY,E=(d[r]+e.offsetX)*e.scaleX,N=(d[r+1]+e.offsetY)*e.scaleY;if(w>=N)return;const k=h[o],P=h[o+1],R=h[o+2],M=h[a],O=h[a+1],F=h[a+2],D=h[u],U=h[u+1],K=h[u+2],X=Math.round(w),ee=Math.round(N);let J,ae,Y,G,z,te,ne,$;for(let Z=X;Z<=ee;Z++){if(Z<C){const se=Z<w?0:(w-Z)/(w-C);J=v-(v-b)*se,ae=k-(k-M)*se,Y=P-(P-O)*se,G=R-(R-F)*se}else{let se;Z>N?se=1:C===N?se=0:se=(C-Z)/(C-N),J=b-(b-E)*se,ae=M-(M-D)*se,Y=O-(O-U)*se,G=F-(F-K)*se}let he;Z<w?he=0:Z>N?he=1:he=(w-Z)/(w-N),z=v-(v-E)*he,te=k-(k-D)*he,ne=P-(P-U)*he,$=R-(R-K)*he;const ve=Math.round(Math.min(J,z)),Ee=Math.round(Math.max(J,z));let ye=g*Z+ve*4;for(let se=ve;se<=Ee;se++)he=(J-se)/(J-z),he<0?he=0:he>1&&(he=1),m[ye++]=ae-(ae-te)*he|0,m[ye++]=Y-(Y-ne)*he|0,m[ye++]=G-(G-$)*he|0,m[ye++]=255}}function OG(n,e,t){const s=e.coords,r=e.colors;let o,a;switch(e.type){case"lattice":const u=e.verticesPerRow,d=Math.floor(s.length/u)-1,h=u-1;for(o=0;o<d;o++){let m=o*u;for(let g=0;g<h;g++,m++)Cb(n,t,s[m],s[m+1],s[m+u],r[m],r[m+1],r[m+u]),Cb(n,t,s[m+u+1],s[m+1],s[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(o=0,a=s.length;o<a;o+=3)Cb(n,t,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class FG extends dA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),v=h/g,w=m/x,b={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/w},C=g+2*2,E=x+2*2,N=s.getCanvas("mesh",C,E),k=N.context,P=k.createImageData(g,x);if(t){const M=P.data;for(let O=0,F=M.length;O<F;O+=4)M[O]=t[0],M[O+1]=t[1],M[O+2]=t[2],M[O+3]=255}for(const M of this._figures)OG(P,M,b);return k.putImageData(P,2,2),{canvas:N.canvas,offsetX:u-2*v,offsetY:d-2*w,scaleX:v,scaleY:w}}getPattern(e,t,s,r){Gw(e,this._bbox);let o;if(r===qn.SHADING)o=Ae.singularValueDecompose2dScale(Pt(e));else if(o=Ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const u=Ae.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const a=this._createMeshCanvas(o,r===qn.SHADING?null:this._background,t.cachedCanvases);return r!==qn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class BG extends dA{getPattern(){return"hotpink"}}function $G(n){switch(n[0]){case"RadialAxial":return new DG(n);case"Mesh":return new FG(n);case"Dummy":return new BG}throw new Error(`Unknown IR type: ${n[0]}`)}const Bk={COLORED:1,UNCOLORED:2},my=class my{constructor(e,t,s,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),Wy("TilingType: "+o);const m=t[0],g=t[1],x=t[2],v=t[3],w=x-m,b=v-g,C=Ae.singularValueDecompose2dScale(this.matrix),E=Ae.singularValueDecompose2dScale(this.baseTransform),N=C[0]*E[0],k=C[1]*E[1];let P=w,R=b,M=!1,O=!1;const F=Math.ceil(d*N),D=Math.ceil(h*k),U=Math.ceil(w*N),K=Math.ceil(b*k);F>=U?P=d:M=!0,D>=K?R=h:O=!0;const X=this.getSizeAndScale(P,this.ctx.canvas.width,N),ee=this.getSizeAndScale(R,this.ctx.canvas.height,k),J=e.cachedCanvases.getCanvas("pattern",X.size,ee.size),ae=J.context,Y=u.createCanvasGraphics(ae);if(Y.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Y,r,a),ae.translate(-X.scale*m,-ee.scale*g),Y.transform(X.scale,0,0,ee.scale,0,0),ae.save(),this.clipBbox(Y,m,g,x,v),Y.baseTransform=Pt(Y.ctx),Y.executeOperatorList(s),Y.endDrawing(),ae.restore(),M||O){const G=J.canvas;M&&(P=d),O&&(R=h);const z=this.getSizeAndScale(P,this.ctx.canvas.width,N),te=this.getSizeAndScale(R,this.ctx.canvas.height,k),ne=z.size,$=te.size,Z=e.cachedCanvases.getCanvas("pattern-workaround",ne,$),he=Z.context,ve=M?Math.floor(w/d):0,Ee=O?Math.floor(b/h):0;for(let ye=0;ye<=ve;ye++)for(let se=0;se<=Ee;se++)he.drawImage(G,ne*ye,$*se,ne,$,0,0,ne,$);return{canvas:Z.canvas,scaleX:z.scale,scaleY:te.scale,offsetX:m,offsetY:g}}return{canvas:J.canvas,scaleX:X.scale,scaleY:ee.scale,offsetX:m,offsetY:g}}getSizeAndScale(e,t,s){const r=Math.max(my.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*s);return o>=r?o=r:s=o/e,{scale:s,size:o}}clipBbox(e,t,s,r,o){const a=r-t,u=o-s;e.ctx.rect(t,s,a,u),e.current.updateRectMinMax(Pt(e.ctx),[t,s,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,o=e.current;switch(t){case Bk.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case Bk.UNCOLORED:const u=Ae.makeHexColor(s[0],s[1],s[2]);r.fillStyle=u,r.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new dG(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,r){let o=s;r!==qn.SHADING&&(o=Ae.transform(o,t.baseTransform),this.matrix&&(o=Ae.transform(o,this.matrix)));const a=this.createPatternCanvas(t);let u=new DOMMatrix(o);u=u.translate(a.offsetX,a.offsetY),u=u.scale(1/a.scaleX,1/a.scaleY);const d=e.createPattern(a.canvas,"repeat");return d.setTransform(u),d}};Me(my,"MAX_PATTERN_SIZE",3e3);let Kw=my;function VG({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:a=!1}){const u=Yn.isLittleEndian?4278190080:255,[d,h]=a?[o,u]:[u,o],m=s>>3,g=s&7,x=n.length;t=new Uint32Array(t.buffer);let v=0;for(let w=0;w<r;w++){for(const C=e+m;e<C;e++){const E=e<x?n[e]:255;t[v++]=E&128?h:d,t[v++]=E&64?h:d,t[v++]=E&32?h:d,t[v++]=E&16?h:d,t[v++]=E&8?h:d,t[v++]=E&4?h:d,t[v++]=E&2?h:d,t[v++]=E&1?h:d}if(g===0)continue;const b=e<x?n[e++]:255;for(let C=0;C<g;C++)t[v++]=b&1<<7-C?h:d}return{srcPos:e,destPos:v}}const $k=16,Vk=100,UG=15,Uk=10,zk=1e3,fs=16;function zG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,r){e.translate(s,r),this.__originalTranslate(s,r)},n.scale=function(s,r){e.scale(s,r),this.__originalScale(s,r)},n.transform=function(s,r,o,a,u,d){e.transform(s,r,o,a,u,d),this.__originalTransform(s,r,o,a,u,d)},n.setTransform=function(s,r,o,a,u,d){e.setTransform(s,r,o,a,u,d),this.__originalSetTransform(s,r,o,a,u,d)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,o,a,u){e.bezierCurveTo(t,s,r,o,a,u),this.__originalBezierCurveTo(t,s,r,o,a,u)},n.rect=function(t,s,r,o){e.rect(t,s,r,o),this.__originalRect(t,s,r,o)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class HG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function qg(n,e,t,s,r,o,a,u,d,h){const[m,g,x,v,w,b]=Pt(n);if(g===0&&x===0){const N=a*m+w,k=Math.round(N),P=u*v+b,R=Math.round(P),M=(a+d)*m+w,O=Math.abs(Math.round(M)-k)||1,F=(u+h)*v+b,D=Math.abs(Math.round(F)-R)||1;return n.setTransform(Math.sign(m),0,0,Math.sign(v),k,R),n.drawImage(e,t,s,r,o,0,0,O,D),n.setTransform(m,g,x,v,w,b),[O,D]}if(m===0&&v===0){const N=u*x+w,k=Math.round(N),P=a*g+b,R=Math.round(P),M=(u+h)*x+w,O=Math.abs(Math.round(M)-k)||1,F=(a+d)*g+b,D=Math.abs(Math.round(F)-R)||1;return n.setTransform(0,Math.sign(g),Math.sign(x),0,k,R),n.drawImage(e,t,s,r,o,0,0,D,O),n.setTransform(m,g,x,v,w,b),[D,O]}n.drawImage(e,t,s,r,o,a,u,d,h);const C=Math.hypot(m,g),E=Math.hypot(x,v);return[C*d,E*h]}function WG(n){const{width:e,height:t}=n;if(e>zk||t>zk)return null;const s=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let a=new Uint8Array(o*(t+1)),u,d,h;const m=e+7&-8;let g=new Uint8Array(m*t),x=0;for(const E of n.data){let N=128;for(;N>0;)g[x++]=E&N?0:255,N>>=1}let v=0;for(x=0,g[x]!==0&&(a[0]=1,++v),d=1;d<e;d++)g[x]!==g[x+1]&&(a[d]=g[x]?2:1,++v),x++;for(g[x]!==0&&(a[d]=2,++v),u=1;u<t;u++){x=u*m,h=u*o,g[x-m]!==g[x]&&(a[h]=g[x]?1:8,++v);let E=(g[x]?4:0)+(g[x-m]?8:0);for(d=1;d<e;d++)E=(E>>2)+(g[x+1]?4:0)+(g[x-m+1]?8:0),r[E]&&(a[h+d]=r[E],++v),x++;if(g[x-m]!==g[x]&&(a[h+d]=g[x]?2:4,++v),v>s)return null}for(x=m*(t-1),h=u*o,g[x]!==0&&(a[h]=8,++v),d=1;d<e;d++)g[x]!==g[x+1]&&(a[h+d]=g[x]?4:8,++v),x++;if(g[x]!==0&&(a[h+d]=4,++v),v>s)return null;const w=new Int32Array([0,o,-1,0,-o,0,0,0,1]),b=new Path2D;for(u=0;v&&u<=t;u++){let E=u*o;const N=E+e;for(;E<N&&!a[E];)E++;if(E===N)continue;b.moveTo(E%o,u);const k=E;let P=a[E];do{const R=w[P];do E+=R;while(!a[E]);const M=a[E];M!==5&&M!==10?(P=M,a[E]=0):(P=M&51*P>>4,a[E]&=P>>2|P<<2),b.lineTo(E%o,E/o|0),a[E]||--v}while(k!==E);--u}return g=null,a=null,function(E){E.save(),E.scale(1/e,-1/t),E.translate(0,-t),E.fill(b),E.beginPath(),E.restore()}}class Hk{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=T2,this.textMatrixScale=1,this.fontMatrix=vw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Tn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=Ae.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=Ae.applyTransform(t,e),r=Ae.applyTransform(t.slice(2),e),o=Ae.applyTransform([t[0],t[3]],e),a=Ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],r[0],o[0],a[0]),this.minY=Math.min(this.minY,s[1],r[1],o[1],a[1]),this.maxX=Math.max(this.maxX,s[0],r[0],o[0],a[0]),this.maxY=Math.max(this.maxY,s[1],r[1],o[1],a[1])}updateScalingPathMinMax(e,t){Ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,r,o,a,u,d,h,m){const g=Ae.bezierBoundingBox(t,s,r,o,a,u,d,h,m);m||this.updateRectMinMax(e,g)}getPathBoundingBox(e=qn.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===qn.STROKE){t||bt("Stroke bounding box must include transform.");const r=Ae.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;s[0]-=o,s[1]-=a,s[2]+=o,s[3]+=a}return s}updateClipFromPath(){const e=Ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=qn.FILL,t=null){return Ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Wk(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%fs,o=(t-r)/fs,a=r===0?o:o+1,u=n.createImageData(s,fs);let d=0,h;const m=e.data,g=u.data;let x,v,w,b;if(e.kind===lx.GRAYSCALE_1BPP){const C=m.byteLength,E=new Uint32Array(g.buffer,0,g.byteLength>>2),N=E.length,k=s+7>>3,P=4294967295,R=Yn.isLittleEndian?4278190080:255;for(x=0;x<a;x++){for(w=x<o?fs:r,h=0,v=0;v<w;v++){const M=C-d;let O=0;const F=M>k?s:M*8-7,D=F&-8;let U=0,K=0;for(;O<D;O+=8)K=m[d++],E[h++]=K&128?P:R,E[h++]=K&64?P:R,E[h++]=K&32?P:R,E[h++]=K&16?P:R,E[h++]=K&8?P:R,E[h++]=K&4?P:R,E[h++]=K&2?P:R,E[h++]=K&1?P:R;for(;O<F;O++)U===0&&(K=m[d++],U=128),E[h++]=K&U?P:R,U>>=1}for(;h<N;)E[h++]=0;n.putImageData(u,0,x*fs)}}else if(e.kind===lx.RGBA_32BPP){for(v=0,b=s*fs*4,x=0;x<o;x++)g.set(m.subarray(d,d+b)),d+=b,n.putImageData(u,0,v),v+=fs;x<a&&(b=s*r*4,g.set(m.subarray(d,d+b)),n.putImageData(u,0,v))}else if(e.kind===lx.RGB_24BPP)for(w=fs,b=s*w,x=0;x<a;x++){for(x>=o&&(w=r,b=s*w),h=0,v=b;v--;)g[h++]=m[d++],g[h++]=m[d++],g[h++]=m[d++],g[h++]=255;n.putImageData(u,0,x*fs)}else throw new Error(`bad image kind: ${e.kind}`)}function Gk(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%fs,o=(t-r)/fs,a=r===0?o:o+1,u=n.createImageData(s,fs);let d=0;const h=e.data,m=u.data;for(let g=0;g<a;g++){const x=g<o?fs:r;({srcPos:d}=VG({src:h,srcPos:d,dest:m,width:s,height:x,nonBlackColor:0})),n.putImageData(u,0,g*fs)}}function ef(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Xg(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Bn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Kk(n,e){if(e)return!0;const t=Ae.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Fa.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const GG=["butt","round","square"],KG=["miter","round","bevel"],qG={},qk={};var Va,qw,Xw;const vA=class vA{constructor(e,t,s,r,o,{optionalContentConfig:a,markedContentStack:u=null},d,h){I(this,Va);this.ctx=e,this.current=new Hk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new HG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,a),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),Xg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(e,t,s,r){const o=e.argsArray,a=e.fnArray;let u=t||0;const d=o.length;if(d===u)return u;const h=d-u>Uk&&typeof s=="function",m=h?Date.now()+UG:0;let g=0;const x=this.commonObjs,v=this.objs;let w;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,s),u;if(w=a[u],w!==vr.dependency)this[w].apply(this,o[u]);else for(const b of o[u]){const C=b.startsWith("g_")?x:v;if(!C.has(b))return C.get(b,s),u}if(u++,u===d)return u;if(h&&++g>Uk){if(Date.now()>m)return s(),u;g=0}}}endDrawing(){_(this,Va,qw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,Va,Xw).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),u=s,d=r,h="prescale1",m,g;for(;o>2&&u>1||a>2&&d>1;){let x=u,v=d;o>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/x),a>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/v),m=this.cachedCanvases.getCanvas(h,x,v),g=m.context,g.clearRect(0,0,x,v),g.drawImage(e,0,0,u,d,0,0,x,v),e=m.canvas,u=x,d=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,a=this.current.patternFill,u=Pt(t);let d,h,m,g;if((e.bitmap||e.data)&&e.count>1){const F=e.bitmap||e.data.buffer;h=JSON.stringify(a?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(F),d||(d=new Map,this._cachedBitmapsMap.set(F,d));const D=d.get(h);if(D&&!a){const U=Math.round(Math.min(u[0],u[2])+u[4]),K=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:D,offsetX:U,offsetY:K}}m=D}m||(g=this.cachedCanvases.getCanvas("maskCanvas",s,r),Gk(g.context,e));let x=Ae.transform(u,[1/s,0,0,-1/r,0,0]);x=Ae.transform(x,[1,0,0,1,0,-r]);const[v,w,b,C]=Ae.getAxialAlignedBoundingBox([0,0,s,r],x),E=Math.round(b-v)||1,N=Math.round(C-w)||1,k=this.cachedCanvases.getCanvas("fillCanvas",E,N),P=k.context,R=v,M=w;P.translate(-R,-M),P.transform(...x),m||(m=this._scaleImage(g.canvas,Li(P)),m=m.img,d&&a&&d.set(h,m)),P.imageSmoothingEnabled=Kk(Pt(P),e.interpolate),qg(P,m,0,0,m.width,m.height,0,0,s,r),P.globalCompositeOperation="source-in";const O=Ae.transform(Li(P),[1,0,0,1,-R,-M]);return P.fillStyle=a?o.getPattern(t,this,O,qn.FILL):o,P.fillRect(0,0,s,r),d&&!a&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,k.canvas)),{canvas:k.canvas,offsetX:Math.round(R),offsetY:Math.round(M)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=GG[e]}setLineJoin(e){this.ctx.lineJoin=KG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...Pt(this.suspendedCtx)),ef(this.suspendedCtx,o),zG(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ef(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const o=r[0],a=r[1],u=r[2]-o,d=r[3]-a;u===0||d===0||(this.genericComposeSMask(t.context,s,u,d,t.subtype,t.backdrop,t.transferMap,o,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,o,a,u,d,h,m,g){let x=e.canvas,v=d-m,w=h-g;if(a){const C=Ae.makeHexColor(...a);if(v<0||w<0||v+s>x.width||w+r>x.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,r),N=E.context;N.drawImage(x,-v,-w),N.globalCompositeOperation="destination-atop",N.fillStyle=C,N.fillRect(0,0,s,r),N.globalCompositeOperation="source-over",x=E.canvas,v=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(v,w,s,r),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(v,w,s,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const b=new Path2D;b.rect(d,h,s,r),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(x,v,w,s,r,d,h,s,r),t.restore()}save(){this.inSMaskMode?(ef(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ef(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,r,o,a){this.ctx.transform(e,t,s,r,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const r=this.ctx,o=this.current;let a=o.x,u=o.y,d,h;const m=Pt(r),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,x=g?s.slice(0):null;for(let v=0,w=0,b=e.length;v<b;v++)switch(e[v]|0){case vr.rectangle:a=t[w++],u=t[w++];const C=t[w++],E=t[w++],N=a+C,k=u+E;r.moveTo(a,u),C===0||E===0?r.lineTo(N,k):(r.lineTo(N,u),r.lineTo(N,k),r.lineTo(a,k)),g||o.updateRectMinMax(m,[a,u,N,k]),r.closePath();break;case vr.moveTo:a=t[w++],u=t[w++],r.moveTo(a,u),g||o.updatePathMinMax(m,a,u);break;case vr.lineTo:a=t[w++],u=t[w++],r.lineTo(a,u),g||o.updatePathMinMax(m,a,u);break;case vr.curveTo:d=a,h=u,a=t[w+4],u=t[w+5],r.bezierCurveTo(t[w],t[w+1],t[w+2],t[w+3],a,u),o.updateCurvePathMinMax(m,d,h,t[w],t[w+1],t[w+2],t[w+3],a,u,x),w+=6;break;case vr.curveTo2:d=a,h=u,r.bezierCurveTo(a,u,t[w],t[w+1],t[w+2],t[w+3]),o.updateCurvePathMinMax(m,d,h,a,u,t[w],t[w+1],t[w+2],t[w+3],x),a=t[w+2],u=t[w+3],w+=4;break;case vr.curveTo3:d=a,h=u,a=t[w+2],u=t[w+3],r.bezierCurveTo(t[w],t[w+1],a,u,a,u),o.updateCurvePathMinMax(m,d,h,t[w],t[w+1],a,u,a,u,x),w+=4;break;case vr.closePath:r.closePath();break}g&&o.updateScalingPathMinMax(m,x),o.setCurrentPoint(a,u)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,Li(t),qn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=s.getPattern(t,this,Li(t),qn.FILL),o=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=qG}eoClip(){this.pendingClip=qk}beginText(){this.current.textMatrix=T2,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||vw,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&We("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const o=s.loadedName||"sans-serif",a=((m=s.systemFontInfo)==null?void 0:m.css)||`"${o}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const d=s.italic?"italic":"normal";let h=t;t<$k?h=$k:t>Vk&&(h=Vk),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${u} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,r,o,a){this.current.textMatrix=[e,t,s,r,o,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,r){const o=this.ctx,a=this.current,u=a.font,d=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,m=d&Tn.FILL_STROKE_MASK,g=!!(d&Tn.ADD_TO_PATH_FLAG),x=a.patternFill&&!u.missingFile;let v;(u.disableFontFace||g||x)&&(v=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||x?(o.save(),o.translate(t,s),o.beginPath(),v(o,h),r&&o.setTransform(...r),(m===Tn.FILL||m===Tn.FILL_STROKE)&&o.fill(),(m===Tn.STROKE||m===Tn.FILL_STROKE)&&o.stroke(),o.restore()):((m===Tn.FILL||m===Tn.FILL_STROKE)&&o.fillText(e,t,s),(m===Tn.STROKE||m===Tn.FILL_STROKE)&&o.strokeText(e,t,s)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pt(o),x:t,y:s,fontSize:h,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Je(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,a=t.fontSizeScale,u=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,m=t.textHScale*h,g=e.length,x=s.vertical,v=x?1:-1,w=s.defaultVMetrics,b=r*t.fontMatrix[0],C=t.textRenderingMode===Tn.FILL&&!s.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),h>0?o.scale(m,-1):o.scale(m,1);let E;if(t.patternFill){o.save();const M=t.fillColor.getPattern(o,this,Li(o),qn.FILL);E=Pt(o),o.restore(),o.fillStyle=M}let N=t.lineWidth;const k=t.textMatrixScale;if(k===0||N===0){const M=t.textRenderingMode&Tn.FILL_STROKE_MASK;(M===Tn.STROKE||M===Tn.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=k;if(a!==1&&(o.scale(a,a),N/=a),o.lineWidth=N,s.isInvalidPDFjsFont){const M=[];let O=0;for(const F of e)M.push(F.unicode),O+=F.width;o.fillText(M.join(""),0,0),t.x+=O*b*m,o.restore(),this.compose();return}let P=0,R;for(R=0;R<g;++R){const M=e[R];if(typeof M=="number"){P+=v*M*r/1e3;continue}let O=!1;const F=(M.isSpace?d:0)+u,D=M.fontChar,U=M.accent;let K,X,ee=M.width;if(x){const ae=M.vmetric||w,Y=-(M.vmetric?ae[1]:ee*.5)*b,G=ae[2]*b;ee=ae?-ae[0]:ee,K=Y/a,X=(P+G)/a}else K=P/a,X=0;if(s.remeasure&&ee>0){const ae=o.measureText(D).width*1e3/r*a;if(ee<ae&&this.isFontSubpixelAAEnabled){const Y=ee/ae;O=!0,o.save(),o.scale(Y,1),K/=Y}else ee!==ae&&(K+=(ee-ae)/2e3*r/a)}if(this.contentVisible&&(M.isInFont||s.missingFile)){if(C&&!U)o.fillText(D,K,X);else if(this.paintChar(D,K,X,E),U){const ae=K+r*U.offset.x/a,Y=X-r*U.offset.y/a;this.paintChar(U.fontChar,ae,Y,E)}}const J=x?ee*b-F*h:ee*b+F*h;P+=J,O&&o.restore()}x?t.y-=P:t.x+=P*m,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,o=s.fontSize,a=s.fontDirection,u=r.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,m=s.textHScale*a,g=s.fontMatrix||vw,x=e.length,v=s.textRenderingMode===Tn.INVISIBLE;let w,b,C,E;if(!(v||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(m,a),w=0;w<x;++w){if(b=e[w],typeof b=="number"){E=u*b*o/1e3,this.ctx.translate(E,0),s.x+=E*m;continue}const N=(b.isSpace?h:0)+d,k=r.charProcOperatorList[b.operatorListId];if(!k){We(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(o,o),t.transform(...g),this.executeOperatorList(k),this.restore()),C=Ae.applyTransform([b.width,0],g)[0]*o+N,t.translate(C,0),s.x+=C*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,o,a){this.ctx.rect(s,r,o-s,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],r=this.baseTransform||Pt(this.ctx),o={createCanvasGraphics:a=>new vA(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Kw(e,s,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=Ae.makeHexColor(e,t,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=Ae.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=$G(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Li(t),qn.SHADING);const r=Li(t);if(r){const{width:o,height:a}=t.canvas,[u,d,h,m]=Ae.getAxialAlignedBoundingBox([0,0,o,a],r);this.ctx.fillRect(u,d,h-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Pt(this.ctx),t)){const s=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],s,r),this.current.updateRectMinMax(Pt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Wy("TODO: Support non-isolated groups."),e.knockout&&We("Knockout groups not supported.");const s=Pt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Ae.getAxialAlignedBoundingBox(e.bbox,Pt(t));const o=[0,0,t.canvas.width,t.canvas.height];r=Ae.intersect(r,o)||[0,0,0,0];const a=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-a,1),h=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,h]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,h),x=g.context;x.translate(-a,-u),x.transform(...s),e.smask?this.smaskStack.push({canvas:g.canvas,context:x,offsetX:a,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,u),t.save()),ef(t,x),this.ctx=x,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=Ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,s,r,o){if(_(this,Va,qw).call(this),Xg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],u=t[3]-t[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=u;const[d,h]=Ae.singularValueDecompose2dScale(Pt(this.ctx)),{viewportScale:m}=this,g=Math.ceil(a*this.outputScaleX*m),x=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,x);const{canvas:v,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(d,0,0,-h,0,u*h),Xg(this.ctx)}else Xg(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new Hk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,Va,Xw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=WG(e)),r.compiled)){r.compiled(s);return}const o=this._createMaskCanvas(e),a=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,o.offsetX,o.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,o,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const d=Pt(u);u.transform(t,s,r,o,0,0);const h=this._createMaskCanvas(e);u.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let m=0,g=a.length;m<g;m+=2){const x=Ae.transform(d,[t,s,r,o,a[m],a[m+1]]),[v,w]=Ae.applyTransform([0,0],x);u.drawImage(h.canvas,v,w)}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:a,width:u,height:d,transform:h}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),g=m.context;g.save();const x=this.getObject(a,o);Gk(g,x),g.globalCompositeOperation="source-in",g.fillStyle=r?s.getPattern(g,this,Li(t),qn.FILL):s,g.fillRect(0,0,u,d),g.restore(),t.save(),t.transform(...h),t.scale(1,-1),qg(t,m.canvas,0,0,u,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){We("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){We("Dependent image isn't ready yet");return}const a=o.width,u=o.height,d=[];for(let h=0,m=r.length;h<m;h+=2)d.push({transform:[t,0,0,s,r[h],r[h+1]],x:0,y:0,w:a,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",s,r),a=o.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;if(this.save(),!Bn){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/t,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Wk(d,e),o=this.applyTransferMapsToCanvas(d)}const a=this._scaleImage(o,Li(r));r.imageSmoothingEnabled=Kk(Pt(r),e.interpolate),qg(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,a=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,a).context;Wk(d,e),r=this.applyTransferMapsToCanvas(d)}for(const o of t)s.save(),s.transform(...o.transform),s.scale(1,-1),qg(s,r,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===qk?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:o}=this.ctx.getTransform();let a,u;if(s===0&&r===0){const d=Math.abs(t),h=Math.abs(o);if(d===h)if(e===0)a=u=1/d;else{const m=d*e;a=u=m<1?1/m:1}else if(e===0)a=1/d,u=1/h;else{const m=d*e,g=h*e;a=m<1?1/m:1,u=g<1?1/g:1}}else{const d=Math.abs(t*o-s*r),h=Math.hypot(t,s),m=Math.hypot(r,o);if(e===0)a=m/d,u=h/d;else{const g=e*d;a=m>g?m/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=s||1,r===1&&o===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,o),a.length>0){const u=Math.max(r,o);t.setLineDash(a.map(d=>d/u)),t.lineDashOffset/=u}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Va=new WeakSet,qw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xw=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Iu=vA;for(const n in vr)Iu.prototype[n]!==void 0&&(Iu.prototype[vr[n]]=Iu.prototype[n]);var mp,gp;class co{static get workerPort(){return f(this,mp)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,mp,e)}static get workerSrc(){return f(this,gp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,gp,e)}}mp=new WeakMap,gp=new WeakMap,I(co,mp,null),I(co,gp,"");const Yg={DATA:1,ERROR:2},Ht={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Es(n){switch(n instanceof Error||typeof n=="object"&&n!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Dc(n.message);case"MissingPDFException":return new Mc(n.message);case"PasswordException":return new bw(n.message,n.code);case"UnexpectedResponseException":return new Gy(n.message,n.status);case"UnknownErrorException":return new ww(n.message,n.details);default:return new ww(n.message,n.toString())}}var dd,or,fL,pL,mL,gx;class mf{constructor(e,t,s){I(this,or);I(this,dd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",_(this,or,fL).bind(this),{signal:f(this,dd).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(a){o.reject(a)}return o.promise}sendWithStream(e,t,s,r){const o=this.streamId++,a=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:h,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:u,action:e,streamId:o,data:t,desiredSize:h.desiredSize},r),m.promise},pull:h=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:a,targetName:u,stream:Ht.PULL,streamId:o,desiredSize:h.desiredSize}),m.promise},cancel:h=>{nn(h instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:a,targetName:u,stream:Ht.CANCEL,streamId:o,reason:Es(h)}),m.promise}},s)}destroy(){var e;(e=f(this,dd))==null||e.abort(),T(this,dd,null)}}dd=new WeakMap,or=new WeakSet,fL=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){_(this,or,mL).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Yg.DATA)r.resolve(e.data);else if(e.callback===Yg.ERROR)r.reject(Es(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,o=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){o.postMessage({sourceName:s,targetName:r,callback:Yg.DATA,callbackId:e.callbackId,data:a})},function(a){o.postMessage({sourceName:s,targetName:r,callback:Yg.ERROR,callbackId:e.callbackId,reason:Es(a)})});return}if(e.streamId){_(this,or,pL).call(this,e);return}t(e.data)},pL=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,o=this.comObj,a=this,u=this.actionHandler[e.action],d={enqueue(h,m=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=m,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:Ht.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:Ht.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){nn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:Ht.ERROR,streamId:t,reason:Es(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(h){h(u(e.data,d))}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Ht.START_COMPLETE,streamId:t,success:!0})},function(h){o.postMessage({sourceName:s,targetName:r,stream:Ht.START_COMPLETE,streamId:t,reason:Es(h)})})},mL=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,o=this.comObj,a=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Ht.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Es(e.reason));break;case Ht.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Es(e.reason));break;case Ht.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:Ht.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise(function(d){var h;d((h=u.onPull)==null?void 0:h.call(u))}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Ht.PULL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:s,targetName:r,stream:Ht.PULL_COMPLETE,streamId:t,reason:Es(d)})});break;case Ht.ENQUEUE:if(nn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Ht.CLOSE:if(nn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),_(this,or,gx).call(this,a,t);break;case Ht.ERROR:nn(a,"error should have stream controller"),a.controller.error(Es(e.reason)),_(this,or,gx).call(this,a,t);break;case Ht.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Es(e.reason)),_(this,or,gx).call(this,a,t);break;case Ht.CANCEL:if(!u)break;new Promise(function(d){var h;d((h=u.onCancel)==null?void 0:h.call(u,Es(e.reason)))}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:Ht.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:s,targetName:r,stream:Ht.CANCEL_COMPLETE,streamId:t,reason:Es(d)})}),u.sinkCapability.reject(Es(e.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},gx=async function(e,t){var s,r,o;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Wl,xp;class XG{constructor({parsedData:e,rawData:t}){I(this,Wl);I(this,xp);T(this,Wl,e),T(this,xp,t)}getRaw(){return f(this,xp)}get(e){return f(this,Wl).get(e)??null}getAll(){return rA(f(this,Wl))}has(e){return f(this,Wl).has(e)}}Wl=new WeakMap,xp=new WeakMap;const bu=Symbol("INTERNAL");var yp,vp,bp,hd;class YG{constructor(e,{name:t,intent:s,usage:r,rbGroups:o}){I(this,yp,!1);I(this,vp,!1);I(this,bp,!1);I(this,hd,!0);T(this,yp,!!(e&Ls.DISPLAY)),T(this,vp,!!(e&Ls.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(f(this,bp))return f(this,hd);if(!f(this,hd))return!1;const{print:e,view:t}=this.usage;return f(this,yp)?(t==null?void 0:t.viewState)!=="OFF":f(this,vp)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==bu&&bt("Internal method `_setVisible` called."),T(this,bp,s),T(this,hd,t)}}yp=new WeakMap,vp=new WeakMap,bp=new WeakMap,hd=new WeakMap;var ma,lt,fd,pd,wp,Yw;class QG{constructor(e,t=Ls.DISPLAY){I(this,wp);I(this,ma,null);I(this,lt,new Map);I(this,fd,null);I(this,pd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,pd,e.order);for(const s of e.groups)f(this,lt).set(s.id,new YG(t,s));if(e.baseState==="OFF")for(const s of f(this,lt).values())s._setVisible(bu,!1);for(const s of e.on)f(this,lt).get(s)._setVisible(bu,!0);for(const s of e.off)f(this,lt).get(s)._setVisible(bu,!1);T(this,fd,this.getHash())}}isVisible(e){if(f(this,lt).size===0)return!0;if(!e)return Wy("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,lt).has(e.id)?f(this,lt).get(e.id).visible:(We(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,wp,Yw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,lt).has(t))return We(`Optional content group not found: ${t}`),!0;if(f(this,lt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,lt).has(t))return We(`Optional content group not found: ${t}`),!0;if(!f(this,lt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,lt).has(t))return We(`Optional content group not found: ${t}`),!0;if(!f(this,lt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,lt).has(t))return We(`Optional content group not found: ${t}`),!0;if(f(this,lt).get(t).visible)return!1}return!0}return We(`Unknown optional content policy ${e.policy}.`),!0}return We(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var o;const r=f(this,lt).get(e);if(!r){We(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const u of a)u!==e&&((o=f(this,lt).get(u))==null||o._setVisible(bu,!1,!0));r._setVisible(bu,!!t,!0),T(this,ma,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=f(this,lt).get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}T(this,ma,null)}get hasInitialVisibility(){return f(this,fd)===null||this.getHash()===f(this,fd)}getOrder(){return f(this,lt).size?f(this,pd)?f(this,pd).slice():[...f(this,lt).keys()]:null}getGroups(){return f(this,lt).size>0?rA(f(this,lt)):null}getGroup(e){return f(this,lt).get(e)||null}getHash(){if(f(this,ma)!==null)return f(this,ma);const e=new nL;for(const[t,s]of f(this,lt))e.update(`${t}:${s.visible}`);return T(this,ma,e.hexdigest())}}ma=new WeakMap,lt=new WeakMap,fd=new WeakMap,pd=new WeakMap,wp=new WeakSet,Yw=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const o=e[r];let a;if(Array.isArray(o))a=_(this,wp,Yw).call(this,o);else if(f(this,lt).has(o))a=f(this,lt).get(o).visible;else return We(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class JG{constructor(e,{disableRange:t=!1,disableStream:s=!1}){nn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:a,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(s),!0)});nn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,o;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){nn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ZG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new e7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class ZG{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=aA(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class e7{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function t7(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let m=u(t);return m=unescape(m),m=d(m),m=h(m),o(m)}if(t=a(n),t){const m=h(t);return o(m)}if(t=s("filename","i").exec(n),t){t=t[1];let m=u(t);return m=h(m),o(m)}function s(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(m,{fatal:!0}),v=Ky(g);g=x.decode(v),e=!1}catch{}}return g}function o(m){return e&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),e&&(m=r("iso-8859-1",m))),m}function a(m){const g=[];let x;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=v.exec(m))!==null;){let[,b,C,E]=x;if(b=parseInt(b,10),b in g){if(b===0)break;continue}g[b]=[C,E]}const w=[];for(let b=0;b<g.length&&b in g;++b){let[C,E]=g[b];E=u(E),C&&(E=unescape(E),b===0&&(E=d(E))),w.push(E)}return w.join("")}function u(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let x=0;x<g.length;++x){const v=g[x].indexOf('"');v!==-1&&(g[x]=g[x].slice(0,v),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function d(m){const g=m.indexOf("'");if(g===-1)return m;const x=m.slice(0,g),w=m.slice(g+1).replace(/^[^']*'/,"");return r(x,w)}function h(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,C){return String.fromCharCode(parseInt(C,16))}),r(x,w);try{w=atob(w)}catch{}return r(x,w)})}return""}function hA(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function fA({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function pA(n){const e=n.get("Content-Disposition");if(e){let t=t7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(aA(t))return t}return null}function Yy(n,e){return n===404||n===0&&e.startsWith("file:")?new Mc('Missing PDF "'+e+'".'):new Gy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function gL(n){return n===200||n===206}function xL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function yL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(We(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Xk{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=hA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return nn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new s7(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class n7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,xL(s,this._withCredentials,this._abortController)).then(o=>{if(!gL(o.status))throw Yy(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const a=o.headers,{allowRangeRequests:u,suggestedLength:d}=fA({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=pA(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Dc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:yL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class s7{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${s-1}`);const a=r.url;fetch(a,xL(o,this._withCredentials,this._abortController)).then(u=>{if(!gL(u.status))throw Yy(u.status,a);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:yL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Nb=200,jb=206;function r7(n){const e=n.response;return typeof e!="string"?e:Ky(e).buffer}class i7{constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=hA(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const r={begin:e,end:t};for(const o in s)r[o]=s[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,a]of this.headers)t.setRequestHeader(o,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=jb):r.expectedStatus=Nb,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){var d,h,m;const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(d=s.onError)==null||d.call(s,r.status);return}const o=r.status||Nb;if(!(o===Nb&&s.expectedStatus===jb)&&o!==s.expectedStatus){(h=s.onError)==null||h.call(s,r.status);return}const u=r7(r);if(o===jb){const g=r.getResponseHeader("Content-Range"),x=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);s.onDone({begin:parseInt(x[1],10),chunk:u})}else u?s.onDone({begin:0,chunk:u}):(m=s.onError)==null||m.call(s,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class o7{constructor(e){this._source=e,this._manager=new i7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return nn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new l7(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class a7{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[u,...d]=a.split(": ");return[u,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=fA({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=pA(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l7{constructor(e,t,s){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Yy(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const c7=/^[a-z][a-z0-9\-+.]+:/i;function u7(n){if(c7.test(n))return new URL(n);const e=Ba.get("url");return new URL(e.pathToFileURL(n))}function vL(n,e,t){return n.protocol==="http:"?Ba.get("http").request(n,{headers:e},t):Ba.get("https").request(n,{headers:e},t)}class d7{constructor(e){this.source=e,this.url=u7(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=hA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return nn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p7(this):new h7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new m7(this,e,t):new f7(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class bL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Dc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class h7 extends bL{constructor(e){super(e);const t=Object.fromEntries(e.headers),s=r=>{if(r.statusCode===404){const d=new Mc(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:u}=fA({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=pA(o)};this._request=vL(this._url,t,s),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class f7 extends wL{constructor(e,t,s){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${s-1}`;const o=a=>{if(a.statusCode===404){const u=new Mc(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(a)};this._request=vL(this._url,r,o),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class p7 extends bL{constructor(e){super(e);const t=Ba.get("fs");t.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Mc(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class m7 extends wL{constructor(e,t,s){super(e);const r=Ba.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}}const g7=1e5,as=30,x7=.8;var bT,ga,ds,Sp,Ap,Gl,Wi,Ep,Cp,Kl,md,gd,xa,xd,Np,yd,ql,jp,kp,Mt,Xl,Yl,Tp,ya,vd,wo,SL,AL,Jw,Fs,xx,Zw,EL,CL;let Qw=(Mt=class{constructor({textContentSource:e,container:t,viewport:s}){I(this,wo);I(this,ga,Promise.withResolvers());I(this,ds,null);I(this,Sp,!1);I(this,Ap,!!((bT=globalThis.FontInspector)!=null&&bT.enabled));I(this,Gl,null);I(this,Wi,null);I(this,Ep,0);I(this,Cp,0);I(this,Kl,null);I(this,md,null);I(this,gd,0);I(this,xa,0);I(this,xd,Object.create(null));I(this,Np,[]);I(this,yd,null);I(this,ql,[]);I(this,jp,new WeakMap);I(this,kp,null);var d;if(e instanceof ReadableStream)T(this,yd,e);else if(typeof e=="object")T(this,yd,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,ds,T(this,md,t)),T(this,xa,s.scale*(globalThis.devicePixelRatio||1)),T(this,gd,s.rotation),T(this,Wi,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:a,pageY:u}=s.rawDims;T(this,kp,[1,0,0,-1,-a,u+o]),T(this,Cp,r),T(this,Ep,o),_(d=Mt,Fs,EL).call(d),kc(t,s),f(this,ga).promise.finally(()=>{f(Mt,vd).delete(this),T(this,Wi,null),T(this,xd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Yn.platform;return Je(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{f(this,Kl).read().then(({value:t,done:s})=>{if(s){f(this,ga).resolve();return}f(this,Gl)??T(this,Gl,t.lang),Object.assign(f(this,xd),t.styles),_(this,wo,SL).call(this,t.items),e()},f(this,ga).reject)};return T(this,Kl,f(this,yd).getReader()),f(Mt,vd).add(this),e(),f(this,ga).promise}update({viewport:e,onBefore:t=null}){var o;const s=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==f(this,gd)&&(t==null||t(),T(this,gd,r),kc(f(this,md),{rotation:r})),s!==f(this,xa)){t==null||t(),T(this,xa,s);const a={div:null,properties:null,ctx:_(o=Mt,Fs,xx).call(o,f(this,Gl))};for(const u of f(this,ql))a.properties=f(this,jp).get(u),a.div=u,_(this,wo,Jw).call(this,a)}}cancel(){var t;const e=new Dc("TextLayer task cancelled.");(t=f(this,Kl))==null||t.cancel(e).catch(()=>{}),T(this,Kl,null),f(this,ga).reject(e)}get textDivs(){return f(this,ql)}get textContentItemsStr(){return f(this,Np)}static cleanup(){if(!(f(this,vd).size>0)){f(this,Xl).clear();for(const{canvas:e}of f(this,Yl).values())e.remove();f(this,Yl).clear()}}},ga=new WeakMap,ds=new WeakMap,Sp=new WeakMap,Ap=new WeakMap,Gl=new WeakMap,Wi=new WeakMap,Ep=new WeakMap,Cp=new WeakMap,Kl=new WeakMap,md=new WeakMap,gd=new WeakMap,xa=new WeakMap,xd=new WeakMap,Np=new WeakMap,yd=new WeakMap,ql=new WeakMap,jp=new WeakMap,kp=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Tp=new WeakMap,ya=new WeakMap,vd=new WeakMap,wo=new WeakSet,SL=function(e){var r,o;if(f(this,Sp))return;(o=f(this,Wi)).ctx??(o.ctx=_(r=Mt,Fs,xx).call(r,f(this,Gl)));const t=f(this,ql),s=f(this,Np);for(const a of e){if(t.length>g7){We("Ignoring additional textDivs for performance reasons."),T(this,Sp,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=f(this,ds);T(this,ds,document.createElement("span")),f(this,ds).classList.add("markedContent"),a.id!==null&&f(this,ds).setAttribute("id",`${a.id}`),u.append(f(this,ds))}else a.type==="endMarkedContent"&&T(this,ds,f(this,ds).parentNode);continue}s.push(a.str),_(this,wo,AL).call(this,a)}},AL=function(e){var b;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,ql).push(t);const r=Ae.transform(f(this,kp),e.transform);let o=Math.atan2(r[1],r[0]);const a=f(this,xd)[e.fontName];a.vertical&&(o+=Math.PI/2);let u=f(this,Ap)&&a.fontSubstitution||a.fontFamily;u=Mt.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),h=d*_(b=Mt,Fs,CL).call(b,u,f(this,Gl));let m,g;o===0?(m=r[4],g=r[5]-h):(m=r[4]+h*Math.sin(o),g=r[5]-h*Math.cos(o));const x="calc(var(--scale-factor)*",v=t.style;f(this,ds)===f(this,md)?(v.left=`${(100*m/f(this,Cp)).toFixed(2)}%`,v.top=`${(100*g/f(this,Ep)).toFixed(2)}%`):(v.left=`${x}${m.toFixed(2)}px)`,v.top=`${x}${g.toFixed(2)}px)`),v.fontSize=`${x}${(f(Mt,ya)*d).toFixed(2)}px)`,v.fontFamily=u,s.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,Ap)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);C!==E&&Math.max(C,E)/Math.min(C,E)>1.5&&(w=!0)}if(w&&(s.canvasWidth=a.vertical?e.height:e.width),f(this,jp).set(t,s),f(this,Wi).div=t,f(this,Wi).properties=s,_(this,wo,Jw).call(this,f(this,Wi)),s.hasText&&f(this,ds).append(t),s.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),f(this,ds).append(C)}},Jw=function(e){var u;const{div:t,properties:s,ctx:r}=e,{style:o}=t;let a="";if(f(Mt,ya)>1&&(a=`scale(${1/f(Mt,ya)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:d}=o,{canvasWidth:h,fontSize:m}=s;_(u=Mt,Fs,Zw).call(u,r,m*f(this,xa),d);const{width:g}=r.measureText(t.textContent);g>0&&(a=`scaleX(${h*f(this,xa)/g}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(o.transform=a)},Fs=new WeakSet,xx=function(e=null){let t=f(this,Yl).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,Yl).set(e,t),f(this,Tp).set(t,{size:0,family:""})}return t},Zw=function(e,t,s){const r=f(this,Tp).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},EL=function(){if(f(this,ya)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),T(this,ya,e.getBoundingClientRect().height),e.remove()},CL=function(e,t){const s=f(this,Xl).get(e);if(s)return s;const r=_(this,Fs,xx).call(this,t);r.canvas.width=r.canvas.height=as,_(this,Fs,Zw).call(this,r,as,e);const o=r.measureText("");let a=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(a){const m=a/(a+u);return f(this,Xl).set(e,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,as,as),r.strokeText("g",0,0);let d=r.getImageData(0,0,as,as).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/as);break}r.clearRect(0,0,as,as),r.strokeText("A",0,as),d=r.getImageData(0,0,as,as).data,a=0;for(let m=0,g=d.length;m<g;m+=4)if(d[m]>0){a=as-Math.floor(m/4/as);break}r.canvas.width=r.canvas.height=0;const h=a?a/(a+u):x7;return f(this,Xl).set(e,h),h},I(Mt,Fs),I(Mt,Xl,new Map),I(Mt,Yl,new Map),I(Mt,Tp,new WeakMap),I(Mt,ya,null),I(Mt,vd,new Set),Mt);class zf{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(o){var d;if(!o)return;let a=null;const u=o.name;if(u==="#text")a=o.value;else if(zf.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?a=o.attributes.textContent:o.value&&(a=o.value);else return;if(a!==null&&t.push({str:a}),!!o.children)for(const h of o.children)r(h)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const y7=65536,v7=100,b7=5e3,w7=Bn?LG:PG,S7=Bn?IG:aL,A7=Bn?RG:_G,E7=Bn?MG:dL;function C7(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new eS,{docId:t}=e,s=n.url?N7(n.url):null,r=n.data?j7(n.data):null,o=n.httpHeaders||null,a=n.withCredentials===!0,u=n.password??null,d=n.range instanceof NL?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:y7;let m=n.worker instanceof Mu?n.worker:null;const g=n.verbosity,x=typeof n.docBaseUrl=="string"&&!Xy(n.docBaseUrl)?n.docBaseUrl:null,v=typeof n.cMapUrl=="string"?n.cMapUrl:null,w=n.cMapPacked!==!1,b=n.CMapReaderFactory||S7,C=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,E=n.StandardFontDataFactory||E7,N=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Bn,M=typeof n.isChrome=="boolean"?n.isChrome:!Yn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:Bn,D=n.fontExtraProperties===!0,U=n.enableXfa===!0,K=n.ownerDocument||globalThis.document,X=n.disableRange===!0,ee=n.disableStream===!0,J=n.disableAutoFetch===!0,ae=n.pdfBug===!0,Y=n.CanvasFactory||w7,G=n.FilterFactory||A7,z=n.enableHWA===!0,te=d?d.length:n.length??NaN,ne=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Bn&&!F,$=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:b===aL&&E===dL&&v&&C&&lf(v,document.baseURI)&&lf(C,document.baseURI);n.canvasFactory&&Ok("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&Ok("`filterFactory`-instance option, please use `FilterFactory` instead.");const Z=null;aG(g);const he={canvasFactory:new Y({ownerDocument:K,enableHWA:z}),filterFactory:new G({docId:t,ownerDocument:K}),cMapReaderFactory:$?null:new b({baseUrl:v,isCompressed:w}),standardFontDataFactory:$?null:new E({baseUrl:C})};if(!m){const ye={verbosity:g,port:co.workerPort};m=ye.port?Mu.fromPort(ye):new Mu(ye),e._worker=m}const ve={docId:t,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:J,rangeChunkSize:h,length:te,docBaseUrl:x,enableXfa:U,evaluatorOptions:{maxImageSize:k,disableFontFace:F,ignoreErrors:N,isEvalSupported:P,isOffscreenCanvasSupported:R,isChrome:M,canvasMaxAreaInBytes:O,fontExtraProperties:D,useSystemFonts:ne,cMapUrl:$?v:null,standardFontDataUrl:$?C:null}},Ee={disableFontFace:F,fontExtraProperties:D,ownerDocument:K,pdfBug:ae,styleElement:Z,loadingParams:{disableAutoFetch:J,enableXfa:U}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ye=m.messageHandler.sendWithPromise("GetDocRequest",ve,r?[r.buffer]:null);let se;if(d)se=new JG(d,{disableRange:X,disableStream:ee});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");let me;Bn?me=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&lf(s)?Xk:d7:me=lf(s)?Xk:o7,se=new me({url:s,length:te,httpHeaders:o,withCredentials:a,rangeChunkSize:h,disableRange:X,disableStream:ee})}return ye.then(me=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ne=new mf(t,me,m.port),ce=new _7(Ne,e,se,Ee,he);e._transport=ce,Ne.send("Ready",null)})}).catch(e._capability.reject),e}function N7(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Bn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function j7(n){if(Bn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Ky(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Yk(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var gy;const xy=class xy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ln(xy,gy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};gy=new WeakMap,I(xy,gy,0);let eS=xy,NL=class{constructor(e,t,s=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class k7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Je(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var va,Gi,rr,wu,yx;class T7{constructor(e,t,s,r=!1){I(this,rr);I(this,va,null);I(this,Gi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new Dk:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new jL,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new wm({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Je(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:r=Xo.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:m=null,isEditing:g=!1}){var P,R;(P=this._stats)==null||P.time("Overall");const x=this._transport.getRenderingIntent(s,r,m,g),{renderingIntent:v,cacheKey:w}=x;T(this,Gi,!1),_(this,rr,yx).call(this),u||(u=this._transport.getOptionalContentConfig(v));let b=this._intentStates.get(w);b||(b=Object.create(null),this._intentStates.set(w,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const C=!!(v&Ls.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(x));const E=M=>{var O;b.renderTasks.delete(N),(this._maybeCleanupAfterRender||C)&&T(this,Gi,!0),_(this,rr,wu).call(this,!C),M?(N.capability.reject(M),this._abortOperatorList({intentState:b,reason:M instanceof Error?M:new Error(M)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(O=globalThis.Stats)!=null&&O.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new nS({callback:E,params:{canvasContext:e,viewport:t,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:h});(b.renderTasks||(b.renderTasks=new Set)).add(N);const k=N.task;return Promise.all([b.displayReadyCapability.promise,u]).then(([M,O])=>{var F;if(this.destroyed){E();return}if((F=this._stats)==null||F.time("Rendering"),!(O.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:M,optionalContentConfig:O}),N.operatorListChanged()}).catch(E),k}getOperatorList({intent:e="display",annotationMode:t=Xo.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var h;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,s,r,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>zf.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function o(){a.read().then(function({value:d,done:h}){if(h){s(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const a=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),T(this,Gi,!1),_(this,rr,yx).call(this),Promise.all(e)}cleanup(e=!1){T(this,Gi,!0);const t=_(this,rr,wu).call(this,!1);return e&&t&&this._stats&&(this._stats=new Dk),t}_startRenderPage(e,t){var r,o;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=s.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&_(this,rr,wu).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:a}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const m=()=>{d.read().then(({value:g,done:x})=>{if(x){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),m())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const x of h.renderTasks)x.operatorListChanged();_(this,rr,wu).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof oA){let r=v7;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Dc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}va=new WeakMap,Gi=new WeakMap,rr=new WeakSet,wu=function(e=!1){if(_(this,rr,yx).call(this),!f(this,Gi)||this.destroyed)return!1;if(e)return T(this,va,setTimeout(()=>{T(this,va,null),_(this,rr,wu).call(this,!1)},b7)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Gi,!1),!0},yx=function(){f(this,va)&&(clearTimeout(f(this,va)),T(this,va,null))};var Ki,yy;class P7{constructor(){I(this,Ki,new Map);I(this,yy,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};f(this,yy).then(()=>{for(const[r]of f(this,Ki))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:o}=s;if(o.aborted){We("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",a),o.addEventListener("abort",a)}f(this,Ki).set(t,r)}removeEventListener(e,t){const s=f(this,Ki).get(t);s==null||s(),f(this,Ki).delete(t)}terminate(){for(const[,e]of f(this,Ki))e==null||e();f(this,Ki).clear()}}Ki=new WeakMap,yy=new WeakMap;var vy,Ql,Jl,bd,vx,wd,bx;const At=class At{constructor({name:e=null,port:t=null,verbosity:s=lG()}={}){I(this,bd);var r;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=f(At,Jl))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(f(At,Jl)||T(At,Jl,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Bn?Promise.all([Ba.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new mf("main","worker",e),this._messageHandler.on("ready",function(){}),_(this,bd,vx).call(this)}_initialize(){if(f(At,Ql)||f(At,wd,bx)){this._setupFakeWorker();return}let{workerSrc:e}=At;try{At._isSameOrigin(window.location.href,e)||(e=At._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new mf("main","worker",t),r=()=>{o.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}this._messageHandler=s,this._port=t,this._webWorker=t,_(this,bd,vx).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};a();return}catch{Wy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){f(At,Ql)||(We("Setting up fake worker."),T(At,Ql,!0)),At._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new P7;this._port=t;const s=`fake${ln(At,vy)._++}`,r=new mf(s+"_worker",s,t);e.setup(r,t),this._messageHandler=new mf(s,s+"_worker",t),_(this,bd,vx).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=f(At,Jl))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=f(this,Jl))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new At(e)}static get workerSrc(){if(co.workerSrc)return co.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Je(this,"_setupFakeWorkerGlobal",(async()=>f(this,wd,bx)?f(this,wd,bx):(await import(this.workerSrc)).WorkerMessageHandler)())}};vy=new WeakMap,Ql=new WeakMap,Jl=new WeakMap,bd=new WeakSet,vx=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wd=new WeakSet,bx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},I(At,wd),I(At,vy,0),I(At,Ql,!1),I(At,Jl),Bn&&(T(At,Ql,!0),co.workerSrc||(co.workerSrc="./pdf.worker.mjs")),At._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const r=new URL(t,s);return s.origin===r.origin},At._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Mu=At;var qi,ci,Sd,Ad,ui,Zl,gf;class _7{constructor(e,t,s,r,o){I(this,Zl);I(this,qi,new Map);I(this,ci,new Map);I(this,Sd,new Map);I(this,Ad,new Map);I(this,ui,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new jL,this.fontLoader=new kG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Je(this,"annotationStorage",new uA)}getRenderingIntent(e,t=Xo.ENABLE,s=null,r=!1,o=!1){let a=Ls.DISPLAY,u=Uw;switch(e){case"any":a=Ls.ANY;break;case"display":break;case"print":a=Ls.PRINT;break;default:We(`getRenderingIntent - invalid intent: ${e}`)}const d=a&Ls.PRINT&&s instanceof rL?s:this.annotationStorage;switch(t){case Xo.DISABLE:a+=Ls.ANNOTATIONS_DISABLE;break;case Xo.ENABLE:break;case Xo.ENABLE_FORMS:a+=Ls.ANNOTATIONS_FORMS;break;case Xo.ENABLE_STORAGE:a+=Ls.ANNOTATIONS_STORAGE,u=d.serializable;break;default:We(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Ls.IS_EDITING),o&&(a+=Ls.OPLIST);const{ids:h,hash:m}=d.modifiedIds,g=[a,u.hash,m];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=f(this,ui))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of f(this,ci).values())e.push(r._destroy());f(this,ci).clear(),f(this,Sd).clear(),f(this,Ad).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),f(this,qi).clear(),this.filterFactory.destroy(),Qw.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Dc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{nn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:a}){if(a){r.close();return}nn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:a}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:a}}),e.on("GetRangeReader",(s,r)=>{nn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:a,done:u}){if(u){r.close();return}nn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{o.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new k7(s,this))}),e.on("DocException",function(s){let r;switch(s.name){case"PasswordException":r=new bw(s.message,s.code);break;case"InvalidPDFException":r=new P2(s.message);break;case"MissingPDFException":r=new Mc(s.message);break;case"UnexpectedResponseException":r=new Gy(s.message,s.status);break;case"UnknownErrorException":r=new ww(s.message,s.details);break;default:bt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",s=>{if(T(this,ui,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?f(this,ui).reject(o):f(this,ui).resolve({password:o})};try{t.onPassword(r,s.code)}catch(o){f(this,ui).reject(o)}}else f(this,ui).reject(new bw(s.message,s.code));return f(this,ui).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;f(this,ci).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,o])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:h}=this._params;if("error"in o){const v=o.error;We(`Error during font loading: ${v}`),this.commonObjs.resolve(s,v);break}const m=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(v,w)=>globalThis.FontInspector.fontAdded(v,w):null,g=new TG(o,{disableFontFace:u,inspectFont:m});this.fontLoader.bind(g).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d&&g.data&&(g.data=null),this.commonObjs.resolve(s,g)});break;case"CopyLocalImage":const{imageRef:x}=o;nn(x,"The imageRef must be defined.");for(const v of f(this,ci).values())for(const[,w]of v.objs)if((w==null?void 0:w.ref)===x)return w.dataLen?(this.commonObjs.resolve(s,structuredClone(w)),w.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,o,a])=>{var d;if(this.destroyed)return;const u=f(this,ci).get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){(d=a==null?void 0:a.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(s,a),(a==null?void 0:a.dataLen)>sG&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&We("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=f(this,Sd).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&f(this,Ad).set(o.refStr,e);const a=new T7(t,o,this,this._params.pdfBug);return f(this,ci).set(t,a),a});return f(this,Sd).set(t,r),r}getPageIndex(e){return Yk(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _(this,Zl,gf).call(this,"GetFieldObjects")}hasJSActions(){return _(this,Zl,gf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,Zl,gf).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,Zl,gf).call(this,"GetOptionalContentConfig").then(t=>new QG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,qi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,a;return{info:r[0],metadata:r[1]?new XG(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return f(this,qi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,ci).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,qi).clear(),this.filterFactory.destroy(!0),Qw.cleanup()}}cachedPageNumber(e){if(!Yk(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,Ad).get(t)??null}}qi=new WeakMap,ci=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,ui=new WeakMap,Zl=new WeakSet,gf=function(e,t=null){const s=f(this,qi).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return f(this,qi).set(e,r),r};const Qg=Symbol("INITIAL_DATA");var jr,Pp,tS;class jL{constructor(){I(this,Pp);I(this,jr,Object.create(null))}get(e,t=null){if(t){const r=_(this,Pp,tS).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=f(this,jr)[e];if(!s||s.data===Qg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=f(this,jr)[e];return!!t&&t.data!==Qg}resolve(e,t=null){const s=_(this,Pp,tS).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in f(this,jr)){const{data:s}=f(this,jr)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}T(this,jr,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,jr)){const{data:t}=f(this,jr)[e];t!==Qg&&(yield[e,t])}}}jr=new WeakMap,Pp=new WeakSet,tS=function(e){var t;return(t=f(this,jr))[e]||(t[e]={...Promise.withResolvers(),data:Qg})};var ba;class R7{constructor(e){I(this,ba,null);T(this,ba,e),this.onContinue=null}get promise(){return f(this,ba).capability.promise}cancel(e=0){f(this,ba).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,ba).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,ba);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ba=new WeakMap;var wa,ec;const gl=class gl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:a,pageIndex:u,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:x=null}){I(this,wa,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new R7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(f(gl,ec).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(gl,ec).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:o,background:a}=this.params;this.gfx=new Iu(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),f(this,wa)&&(window.cancelAnimationFrame(f(this,wa)),T(this,wa,null)),f(gl,ec).delete(this._canvas),this.callback(e||new oA(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,wa,window.requestAnimationFrame(()=>{T(this,wa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(gl,ec).delete(this._canvas),this.callback())))}};wa=new WeakMap,ec=new WeakMap,I(gl,ec,new WeakSet);let nS=gl;const L7="4.8.69",I7="3634dab10";function Qk(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function tf(n){return Math.max(0,Math.min(255,255*n))}class Jk{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=tf(e),[e,e,e]}static G_HTML([e]){const t=Qk(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(tf)}static RGB_HTML(e){return`#${e.map(Qk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[tf(1-Math.min(1,e+r)),tf(1-Math.min(1,s+r)),tf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,o=1-t,a=1-s,u=Math.min(r,o,a);return["CMYK",r,o,a,u]}}class M7{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bt("Abstract method `_createSVG` called.")}}class mA extends M7{_createSVG(e){return document.createElementNS(Mi,e)}}class kL{static setupStorage(e,t,s,r,o){const a=r.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const u of s.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:o}){const{attributes:a}=t,u=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}u&&o.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var g,x;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,o=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:o,linkService:s});const u=o!=="richText",d=e.div;if(d.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=v}u&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),u&&zf.shouldBuildText(r.name)&&h.push(v)}return{textDivs:h}}const m=[[r,-1,a]];for(;m.length>0;){const[v,w,b]=m.at(-1);if(w+1===v.children.length){m.pop();continue}const C=v.children[++m.at(-1)[1]];if(C===null)continue;const{name:E}=C;if(E==="#text"){const k=document.createTextNode(C.value);h.push(k),b.append(k);continue}const N=(g=C==null?void 0:C.attributes)!=null&&g.xmlns?document.createElementNS(C.attributes.xmlns,E):document.createElement(E);if(b.append(N),C.attributes&&this.setAttributes({html:N,element:C,storage:t,intent:o,linkService:s}),((x=C.children)==null?void 0:x.length)>0)m.push([C,-1,N]);else if(C.value){const k=document.createTextNode(C.value);u&&zf.shouldBuildText(E)&&h.push(k),N.append(k)}}for(const v of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Am=1e3,D7=9,Pc=new WeakSet;function po(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class O7{static create(e){switch(e.data.annotationType){case Jt.LINK:return new TL(e);case Jt.TEXT:return new F7(e);case Jt.WIDGET:switch(e.data.fieldType){case"Tx":return new B7(e);case"Btn":return e.data.radioButton?new RL(e):e.data.checkBox?new V7(e):new U7(e);case"Ch":return new z7(e);case"Sig":return new $7(e)}return new Oc(e);case Jt.POPUP:return new rS(e);case Jt.FREETEXT:return new OL(e);case Jt.LINE:return new W7(e);case Jt.SQUARE:return new G7(e);case Jt.CIRCLE:return new K7(e);case Jt.POLYLINE:return new FL(e);case Jt.CARET:return new X7(e);case Jt.INK:return new gA(e);case Jt.POLYGON:return new q7(e);case Jt.HIGHLIGHT:return new BL(e);case Jt.UNDERLINE:return new Y7(e);case Jt.SQUIGGLY:return new Q7(e);case Jt.STRIKEOUT:return new J7(e);case Jt.STAMP:return new $L(e);case Jt.FILEATTACHMENT:return new Z7(e);default:return new Vt(e)}}}var tc,Ed,Cd,_p,sS;const bA=class bA{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){I(this,_p);I(this,tc,null);I(this,Ed,!1);I(this,Cd,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return bA._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;f(this,tc)||T(this,tc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&_(this,_p,sS).call(this,t),(s=f(this,Cd))==null||s.popup.updateEdited(e)}resetEdited(){var e;f(this,tc)&&(_(this,_p,sS).call(this,f(this,tc).rect),(e=f(this,Cd))==null||e.popup.resetEdited(),T(this,tc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Oc||(o.tabIndex=Am);const{style:a}=o;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof rS){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,o),o}const{width:u,height:d}=po(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(b>0||C>0){const N=`calc(${b}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;a.borderRadius=N}else if(this instanceof RL){const N=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;a.borderRadius=N}switch(t.borderStyle.style){case Zh.SOLID:a.borderStyle="solid";break;case Zh.DASHED:a.borderStyle="dashed";break;case Zh.BEVELED:We("Unimplemented border style: beveled");break;case Zh.INSET:We("Unimplemented border style: inset");break;case Zh.UNDERLINE:a.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(T(this,Ed,!0),a.borderColor=Ae.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):a.borderWidth=0}const h=Ae.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:g,pageX:x,pageY:v}=r.rawDims;a.left=`${100*(h[0]-x)/m}%`,a.top=`${100*(h[1]-v)/g}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(a.width=`${100*u/m}%`,a.height=`${100*d/g}%`):this.setRotation(w,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:a}=po(this.data.rect);let u,d;e%180===0?(u=100*o/s,d=100*a/r):(u=100*a/s,d=100*o/r),t.style.width=`${u}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const o=r.detail[t],a=o[0],u=o.slice(1);r.target.style[s]=Jk[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Jk[`${a}_rgb`](u)})};return Je(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||s[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,o]of Object.entries(t)){const a=s[r];if(a){const u={detail:{[r]:o},target:e};a(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,o]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,C,E,N]=e.subarray(2,6);if(r===b&&o===C&&t===E&&s===N)return}const{style:a}=this.container;let u;if(f(this,Ed)){const{borderColor:b,borderWidth:C}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=r-t,h=o-s,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const x=m.createElement("defs");g.append(x);const v=m.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),x.append(v);for(let b=2,C=e.length;b<C;b+=8){const E=e[b],N=e[b+1],k=e[b+2],P=e[b+3],R=m.createElement("rect"),M=(k-t)/d,O=(o-N)/h,F=(E-k)/d,D=(N-P)/h;R.setAttribute("x",M),R.setAttribute("y",O),R.setAttribute("width",F),R.setAttribute("height",D),v.append(R),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${O}" width="${F}" height="${D}"/>`)}f(this,Ed)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=T(this,Cd,new rS({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:a,exportValues:u}of r){if(o===-1||a===t)continue;const d=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Pc.has(h)){We(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:d,domElement:h})}return s}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,a=r.getAttribute("data-element-id");a!==t&&Pc.has(r)&&s.push({id:a,exportValue:o,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};tc=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,_p=new WeakSet,sS=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:a,pageX:u,pageY:d}}}}=this;s==null||s.splice(0,4,...e);const{width:h,height:m}=po(e);t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(a-e[3]+d)/a}%`,r===0?(t.width=`${100*h/o}%`,t.height=`${100*m/a}%`):this.setRotation(r)};let Vt=bA;var Ms,dl,PL,_L;class TL extends Vt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});I(this,Ms);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(_(this,Ms,PL).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(_(this,Ms,_L).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&_(this,Ms,dl).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),_(this,Ms,dl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(s.actions)){const a=r.get(o);a&&(t[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),_(this,Ms,dl).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),_(this,Ms,dl).call(this),!this._fieldObjects){We('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var g;r==null||r();const{fields:o,refs:a,include:u}=s,d=[];if(o.length!==0||a.length!==0){const x=new Set(a);for(const v of o){const w=this._fieldObjects[v]||[];for(const{id:b}of w)x.add(b)}for(const v of Object.values(this._fieldObjects))for(const w of v)x.has(w.id)===u&&d.push(w)}else for(const x of Object.values(this._fieldObjects))d.push(...x);const h=this.annotationStorage,m=[];for(const x of d){const{id:v}=x;switch(m.push(v),x.type){case"text":{const b=x.defaultValue||"";h.setValue(v,{value:b});break}case"checkbox":case"radiobutton":{const b=x.defaultValue===x.exportValues;h.setValue(v,{value:b});break}case"combobox":case"listbox":{const b=x.defaultValue||"";h.setValue(v,{value:b});break}default:continue}const w=document.querySelector(`[data-element-id="${v}"]`);if(w){if(!Pc.has(w)){We(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Ms=new WeakSet,dl=function(){this.container.setAttribute("data-internal-link","")},PL=function(t,s,r=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,r),!1},_(this,Ms,dl).call(this)},_L=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),_(this,Ms,dl).call(this)};class F7 extends Vt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Oc extends Vt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Yn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,o){s.includes("mouse")?e.addEventListener(s,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var u;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(a)}}))})}_setEventListeners(e,t,s,r){var o,a,u;for(const[d,h]of s)(h==="Action"||(o=this.data.actions)!=null&&o[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,r),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||D7,o=e.style;let a;const u=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(h/(Sb*r))||1,g=h/m;a=Math.min(r,d(g/Sb))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(r,d(h/Sb))}o.fontSize=`calc(${a}px * var(--scale-factor))`,o.color=Ae.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class B7 extends Oc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const o=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),o.setValue(a.id,{[r]:s})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let u=a.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let h=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const m={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??u,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",h??u),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Pc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Am,this._setRequired(s,this.data.required),d&&(s.maxLength=d),s.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(s,"value",x.target.value,"value"),m.formattedValue=null}),s.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue??"";s.value=m.userValue=v,m.formattedValue=null});let g=x=>{const{formattedValue:v}=m;v!=null&&(x.target.value=v),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var b;if(m.focused)return;const{target:w}=v;m.userValue&&(w.value=m.userValue),m.lastCommittedValue=w.value,m.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(m.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const w={value(b){m.userValue=b.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),b.target.value=m.userValue},formattedValue(b){const{formattedValue:C}=b.detail;m.formattedValue=C,C!=null&&b.target!==document.activeElement&&(b.target.value=C),e.setValue(t,{formattedValue:C})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var k;const{charLimit:C}=b.detail,{target:E}=b;if(C===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",C);let N=m.userValue;!N||N.length<=C||(N=N.slice(0,C),E.value=m.userValue=N,e.setValue(t,{value:N}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),s.addEventListener("keydown",v=>{var C;m.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(m.commitKey=3),w===-1)return;const{value:b}=v.target;m.lastCommittedValue!==b&&(m.lastCommittedValue=b,m.userValue=b,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const x=g;g=null,s.addEventListener("blur",v=>{var b,C;if(!m.focused||!v.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(m.focused=!1);const{value:w}=v.target;m.userValue=w,m.lastCommittedValue!==w&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),x(v)}),(o=this.data.actions)!=null&&o.Keystroke&&s.addEventListener("beforeinput",v=>{var R;m.lastCommittedValue=null;const{data:w,target:b}=v,{value:C,selectionStart:E,selectionEnd:N}=b;let k=E,P=N;switch(v.inputType){case"deleteWordBackward":{const M=C.substring(0,E).match(/\w*[^\w]*$/);M&&(k-=M[0].length);break}case"deleteWordForward":{const M=C.substring(E).match(/^[^\w]*\w*/);M&&(P+=M[0].length);break}case"deleteContentBackward":E===N&&(k-=1);break;case"deleteContentForward":E===N&&(P+=1);break}v.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:w||"",willCommit:!1,selStart:k,selEnd:P}})}),this._setEventListeners(s,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/d;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $7 extends Oc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V7 extends Oc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Pc.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Am,o.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,s)){const m=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=m),e.setValue(h.id,{value:m})}e.setValue(s,{value:d})}),o.addEventListener("resetform",a=>{const u=t.defaultFieldValue||"Off";a.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",a=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class RL extends Oc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const o=document.createElement("input");if(Pc.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Am,o.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:d})}),o.addEventListener("resetform",a=>{const u=t.defaultFieldValue;a.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:h=>{const m=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const x=m&&g.id===s;g.domElement&&(g.domElement.checked=x),e.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class U7 extends TL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class z7 extends Oc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Pc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Am;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const x of r.options)x.selected=x.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,s.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),o=!1),r.append(g)}let a=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),a=()=>{m.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const u=m=>{const g=m?"value":"textContent",{options:x,multiple:v}=r;return v?Array.prototype.filter.call(x,w=>w.selected).map(w=>w[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let d=u(!1);const h=m=>{const g=m.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const g={value(x){a==null||a();const v=x.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const b of r.options)b.selected=w.has(b.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(x){r.multiple=!0},remove(x){const v=r.options,w=x.detail.remove;v[w].selected=!1,r.remove(w),v.length>0&&Array.prototype.findIndex.call(v,C=>C.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:h(x)}),d=u(!1)},clear(x){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(x){const{index:v,displayValue:w,exportValue:b}=x.detail.insert,C=r.children[v],E=document.createElement("option");E.textContent=w,E.value=b,C?C.before(E):r.append(E),e.setValue(t,{value:u(!0),items:h(x)}),d=u(!1)},items(x){const{items:v}=x.detail;for(;r.length!==0;)r.remove(0);for(const w of v){const{displayValue:b,exportValue:C}=w,E=document.createElement("option");E.textContent=b,E.value=C,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:h(x)}),d=u(!1)},indices(x){const v=new Set(x.detail.indices);for(const w of x.target.options)w.selected=v.has(w.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,m)}),r.addEventListener("input",m=>{var v;const g=u(!0),x=u(!1);e.setValue(t,{value:g}),m.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rS extends Vt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Vt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new H7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${iA}${s}`).join(",")),this.container}}var Nd,by,wy,jd,nc,It,Xi,kd,Rp,Lp,Td,Yi,kr,Qi,Ip,Ji,Mp,sc,rc,ht,wx,iS,LL,IL,ML,DL,Sx,Ax,oS;class H7{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:o,contentsObj:a,richText:u,parent:d,rect:h,parentRect:m,open:g}){I(this,ht);I(this,Nd,_(this,ht,ML).bind(this));I(this,by,_(this,ht,oS).bind(this));I(this,wy,_(this,ht,Ax).bind(this));I(this,jd,_(this,ht,Sx).bind(this));I(this,nc,null);I(this,It,null);I(this,Xi,null);I(this,kd,null);I(this,Rp,null);I(this,Lp,null);I(this,Td,null);I(this,Yi,!1);I(this,kr,null);I(this,Qi,null);I(this,Ip,null);I(this,Ji,null);I(this,Mp,null);I(this,sc,null);I(this,rc,!1);var x;T(this,It,e),T(this,Mp,r),T(this,Xi,a),T(this,Ji,u),T(this,Lp,d),T(this,nc,t),T(this,Ip,h),T(this,Td,m),T(this,Rp,s),T(this,kd,lA.toDateObject(o)),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",f(this,jd)),v.addEventListener("mouseenter",f(this,wy)),v.addEventListener("mouseleave",f(this,by)),v.classList.add("popupTriggerArea");for(const v of s)(x=v.container)==null||x.addEventListener("keydown",f(this,Nd));f(this,It).hidden=!0,g&&_(this,ht,Sx).call(this)}render(){if(f(this,kr))return;const e=T(this,kr,document.createElement("div"));if(e.className="popup",f(this,nc)){const o=e.style.outlineColor=Ae.makeHexColor(...f(this,nc));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ae.makeHexColor(...f(this,nc).map(u=>Math.floor(.7*(255-u)+u)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=f(this,Mp),e.append(t),f(this,kd)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,kd).valueOf()})),t.append(o)}const r=f(this,ht,wx);if(r)kL.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(f(this,Xi));e.append(o)}f(this,It).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,a=r.length;o<a;++o){const u=r[o];s.append(document.createTextNode(u)),o<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;f(this,sc)||T(this,sc,{contentsObj:f(this,Xi),richText:f(this,Ji)}),e&&T(this,Qi,null),t&&(T(this,Ji,_(this,ht,IL).call(this,t)),T(this,Xi,null)),(s=f(this,kr))==null||s.remove(),T(this,kr,null)}resetEdited(){var e;f(this,sc)&&({contentsObj:ln(this,Xi)._,richText:ln(this,Ji)._}=f(this,sc),T(this,sc,null),(e=f(this,kr))==null||e.remove(),T(this,kr,null),T(this,Qi,null))}forceHide(){T(this,rc,this.isVisible),f(this,rc)&&(f(this,It).hidden=!0)}maybeShow(){f(this,rc)&&(f(this,kr)||_(this,ht,Ax).call(this),T(this,rc,!1),f(this,It).hidden=!1)}get isVisible(){return f(this,It).hidden===!1}}Nd=new WeakMap,by=new WeakMap,wy=new WeakMap,jd=new WeakMap,nc=new WeakMap,It=new WeakMap,Xi=new WeakMap,kd=new WeakMap,Rp=new WeakMap,Lp=new WeakMap,Td=new WeakMap,Yi=new WeakMap,kr=new WeakMap,Qi=new WeakMap,Ip=new WeakMap,Ji=new WeakMap,Mp=new WeakMap,sc=new WeakMap,rc=new WeakMap,ht=new WeakSet,wx=function(){const e=f(this,Ji),t=f(this,Xi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,Ji).html||null},iS=function(){var e,t,s;return((s=(t=(e=f(this,ht,wx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},LL=function(){var e,t,s;return((s=(t=(e=f(this,ht,wx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},IL=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:f(this,ht,LL),fontSize:f(this,ht,iS)?`calc(${f(this,ht,iS)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return s},ML=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,Yi))&&_(this,ht,Sx).call(this)},DL=function(){if(f(this,Qi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:o}}}=f(this,Lp);let a=!!f(this,Td),u=a?f(this,Td):f(this,Ip);for(const w of f(this,Rp))if(!u||Ae.intersect(w.data.rect,u)!==null){u=w.data.rect,a=!0;break}const d=Ae.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),m=a?u[2]-u[0]+5:0,g=d[0]+m,x=d[1];T(this,Qi,[100*(g-r)/t,100*(x-o)/s]);const{style:v}=f(this,It);v.left=`${f(this,Qi)[0]}%`,v.top=`${f(this,Qi)[1]}%`},Sx=function(){T(this,Yi,!f(this,Yi)),f(this,Yi)?(_(this,ht,Ax).call(this),f(this,It).addEventListener("click",f(this,jd)),f(this,It).addEventListener("keydown",f(this,Nd))):(_(this,ht,oS).call(this),f(this,It).removeEventListener("click",f(this,jd)),f(this,It).removeEventListener("keydown",f(this,Nd)))},Ax=function(){f(this,kr)||this.render(),this.isVisible?f(this,Yi)&&f(this,It).classList.add("focused"):(_(this,ht,DL).call(this),f(this,It).hidden=!1,f(this,It).style.zIndex=parseInt(f(this,It).style.zIndex)+1e3)},oS=function(){f(this,It).classList.remove("focused"),!(f(this,Yi)||!this.isVisible)&&(f(this,It).hidden=!0,f(this,It).style.zIndex=parseInt(f(this,It).style.zIndex)-1e3)};class OL extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ue.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Dp;class W7 extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,Dp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:r}=po(t.rect),o=this.svgFactory.create(s,r,!0),a=T(this,Dp,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dp=new WeakMap;var Op;class G7 extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,Op,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:r}=po(t.rect),o=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,u=T(this,Op,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",s-a),u.setAttribute("height",r-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Op)}addHighlightArea(){this.container.classList.add("highlightArea")}}Op=new WeakMap;var Fp;class K7 extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,Fp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:r}=po(t.rect),o=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,u=T(this,Fp,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",s/2),u.setAttribute("cy",r/2),u.setAttribute("rx",s/2-a/2),u.setAttribute("ry",r/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fp=new WeakMap;var Bp;class FL extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,Bp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:o}}=this;if(!s)return this.container;const{width:a,height:u}=po(t),d=this.svgFactory.create(a,u,!0);let h=[];for(let g=0,x=s.length;g<x;g+=2){const v=s[g]-t[0],w=t[3]-s[g+1];h.push(`${v},${w}`)}h=h.join(" ");const m=T(this,Bp,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",h),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Bp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bp=new WeakMap;class q7 extends FL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X7 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $p;class gA extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,$p,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ue.HIGHLIGHT:Ue.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:s,borderStyle:r,popupRef:o}}=this,{width:a,height:u}=po(t),d=this.svgFactory.create(a,u,!0);for(const h of s){let m=[];for(let x=0,v=h.length;x<v;x+=2){const w=h[x]-t[0],b=t[3]-h[x+1];m.push(`${w},${b}`)}m=m.join(" ");const g=this.svgFactory.createElement(this.svgElementName);f(this,$p).push(g),g.setAttribute("points",m),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return f(this,$p)}addHighlightArea(){this.container.classList.add("highlightArea")}}$p=new WeakMap;class BL extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ue.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Y7 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Q7 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class J7 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class $L extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ue.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Vp,Up,aS;class Z7 extends Vt{constructor(t){var r;super(t,{isRenderable:!0});I(this,Up);I(this,Vp,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",_(this,Up,aS).bind(this)),T(this,Vp,r);const{isMac:o}=Yn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(o?a.metaKey:a.ctrlKey)&&_(this,Up,aS).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return f(this,Vp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vp=new WeakMap,Up=new WeakSet,aS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var zp,ic,oc,Hp,Rc,VL,lS,wT;let eK=(wT=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:a,structTreeLayer:u}){I(this,Rc);I(this,zp,null);I(this,ic,null);I(this,oc,new Map);I(this,Hp,null);this.div=e,T(this,zp,t),T(this,ic,s),T(this,Hp,u||null),this.page=o,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return f(this,oc).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;kc(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new mA,annotationStorage:e.annotationStorage||new uA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===Jt.POPUP;if(d){const g=r.get(u.id);if(!g)continue;o.elements=g}else{const{width:g,height:x}=po(u.rect);if(g<=0||x<=0)continue}o.data=u;const h=O7.create(o);if(!h.isRenderable)continue;if(!d&&u.popupRef){const g=r.get(u.popupRef);g?g.push(h):r.set(u.popupRef,[h])}const m=h.render();u.hidden&&(m.style.visibility="hidden"),await _(this,Rc,VL).call(this,m,u.id),h._isEditable&&(f(this,oc).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}_(this,Rc,lS).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,kc(t,{rotation:e.rotation}),_(this,Rc,lS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,oc).values())}getEditableAnnotation(e){return f(this,oc).get(e)}},zp=new WeakMap,ic=new WeakMap,oc=new WeakMap,Hp=new WeakMap,Rc=new WeakSet,VL=async function(e,t){var a,u;const s=e.firstChild||e,r=s.id=`${iA}${t}`,o=await((a=f(this,Hp))==null?void 0:a.getAriaAttributes(r));if(o)for(const[d,h]of o)s.setAttribute(d,h);this.div.append(e),(u=f(this,zp))==null||u.moveElementInDOM(this.div,e,s,!1)},lS=function(){if(!f(this,ic))return;const e=this.div;for(const[t,s]of f(this,ic)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s)}f(this,ic).clear()},wT);const Jg=/\r\n?|\n/g;var Tr,js,Wp,ac,ks,Kt,UL,zL,HL,Ex,go,Cx,Nx,WL,uS,GL;const gt=class gt extends ct{constructor(t){super({...t,name:"freeTextEditor"});I(this,Kt);I(this,Tr);I(this,js,"");I(this,Wp,`${this.id}-editor`);I(this,ac,null);I(this,ks);T(this,Tr,t.color||gt._defaultColor||ct._defaultLineColor),T(this,ks,t.fontSize||gt._defaultFontSize)}static get _keyboardManager(){const t=gt.prototype,s=a=>a.isEmpty(),r=Tc.TRANSLATE_SMALL,o=Tc.TRANSLATE_BIG;return Je(this,"_keyboardManager",new Sm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:s}]]))}static initialize(t,s){ct.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case De.FREETEXT_SIZE:gt._defaultFontSize=s;break;case De.FREETEXT_COLOR:gt._defaultColor=s;break}}updateParams(t,s){switch(t){case De.FREETEXT_SIZE:_(this,Kt,UL).call(this,s);break;case De.FREETEXT_COLOR:_(this,Kt,zL).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[De.FREETEXT_SIZE,gt._defaultFontSize],[De.FREETEXT_COLOR,gt._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[De.FREETEXT_SIZE,f(this,ks)],[De.FREETEXT_COLOR,f(this,Tr)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-gt._internalPadding*t,-(gt._internalPadding+f(this,ks))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ue.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,ac,new AbortController);const t=this._uiManager.combinedSignal(f(this,ac));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,Wp)),this._isDraggable=!0,(t=f(this,ac))==null||t.abort(),T(this,ac,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,js),s=T(this,js,_(this,Kt,HL).call(this).trimEnd());if(t===s)return;const r=o=>{if(T(this,js,o),!o){this.remove();return}_(this,Kt,Nx).call(this),this._uiManager.rebuild(this),_(this,Kt,Ex).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),_(this,Kt,Ex).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){gt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,Wp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${f(this,ks)}px * var(--scale-factor))`,r.color=f(this,Tr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),ny(this,this.div,["dblclick","keydown"]),this.width){const[o,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[m,g]=this.pageDimensions,[x,v]=this.pageTranslation;let w,b;switch(this.rotation){case 0:w=t+(u[0]-x)/m,b=s+this.height-(u[1]-v)/g;break;case 90:w=t+(u[0]-x)/m,b=s-(u[1]-v)/g,[d,h]=[h,-d];break;case 180:w=t-this.width+(u[0]-x)/m,b=s-(u[1]-v)/g,[d,h]=[-d,-h];break;case 270:w=t+(u[0]-x-this.height*g)/m,b=s+(u[1]-v-this.width*m)/g,[d,h]=[-h,d];break}this.setAt(w*o,b*a,d,h)}else this.setAt(t*o,s*a,this.width*o,this.height*a);_(this,Kt,Nx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,b,C;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=_(w=gt,go,uS).call(w,s.getData("text")||"").replaceAll(Jg,`
`);if(!o)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:d,startOffset:h}=u,m=[],g=[];if(d.nodeType===Node.TEXT_NODE){const E=d.parentElement;if(g.push(d.nodeValue.slice(h).replaceAll(Jg,"")),E!==this.editorDiv){let N=m;for(const k of this.editorDiv.childNodes){if(k===E){N=g;continue}N.push(_(b=gt,go,Cx).call(b,k))}}m.push(d.nodeValue.slice(0,h).replaceAll(Jg,""))}else if(d===this.editorDiv){let E=m,N=0;for(const k of this.editorDiv.childNodes)N++===h&&(E=g),E.push(_(C=gt,go,Cx).call(C,k))}T(this,js,`${m.join(`
`)}${o}${g.join(`
`)}`),_(this,Kt,Nx).call(this);const x=new Range;let v=m.reduce((E,N)=>E+N.length,0);for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const N=E.nodeValue.length;if(v<=N){x.setStart(E,v),x.setEnd(E,v);break}v-=N}a.removeAllRanges(),a.addRange(x)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,r){var u;let o=null;if(t instanceof OL){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:m,rotation:g,id:x,popupRef:v},textContent:w,textPosition:b,parent:{page:{pageNumber:C}}}=t;if(!w||w.length===0)return null;o=t={annotationType:Ue.FREETEXT,color:Array.from(h),fontSize:d,value:w.join(`
`),position:b,pageIndex:C-1,rect:m.slice(0),rotation:g,id:x,deleted:!1,popupRef:v}}const a=await super.deserialize(t,s,r);return T(a,ks,t.fontSize),T(a,Tr,Ae.makeHexColor(...t.color)),T(a,js,_(u=gt,go,uS).call(u,t.value)),a.annotationElementId=t.id||null,a._initialData=o,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=gt._internalPadding*this.parentScale,r=this.getRect(s,s),o=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,Tr)),a={annotationType:Ue.FREETEXT,color:o,fontSize:f(this,ks),value:_(this,Kt,WL).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!_(this,Kt,GL).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:r}=s;r.fontSize=`calc(${f(this,ks)}px * var(--scale-factor))`,r.color=f(this,Tr),s.replaceChildren();for(const a of f(this,js).split(`
`)){const u=document.createElement("div");u.append(a?document.createTextNode(a):document.createElement("br")),s.append(u)}const o=gt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:f(this,js)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Tr=new WeakMap,js=new WeakMap,Wp=new WeakMap,ac=new WeakMap,ks=new WeakMap,Kt=new WeakSet,UL=function(t){const s=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-f(this,ks))*this.parentScale),T(this,ks,o),_(this,Kt,Ex).call(this)},r=f(this,ks);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zL=function(t){const s=o=>{T(this,Tr,this.editorDiv.style.color=o)},r=f(this,Tr);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},HL=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const o of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(_(r=gt,go,Cx).call(r,o)),s=o);return t.join(`
`)},Ex=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:a}=this,u=a.style.display,d=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",o.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},go=new WeakSet,Cx=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Jg,"")},Nx=function(){if(this.editorDiv.replaceChildren(),!!f(this,js))for(const t of f(this,js).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},WL=function(){return f(this,js).replaceAll(" "," ")},uS=function(t){return t.replaceAll(" "," ")},GL=function(t){const{value:s,fontSize:r,color:o,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((u,d)=>u!==o[d])||t.pageIndex!==a},I(gt,go),Me(gt,"_freeTextDefaultContent",""),Me(gt,"_internalPadding",0),Me(gt,"_defaultColor",null),Me(gt,"_defaultFontSize",10),Me(gt,"_type","freetext"),Me(gt,"_editorType",Ue.FREETEXT);let cS=gt;class KL{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(e,t){bt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){bt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){bt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Ts,Pr,Pd,_d,di,Ke,lc,cc,Gp,Kp,Rd,Ld,Sa,qp,Sy,Ay,sn,xf,qL,XL,YL,QL,JL,ZL;const Oi=class Oi{constructor({x:e,y:t},s,r,o,a,u=0){I(this,sn);I(this,Ts);I(this,Pr,[]);I(this,Pd);I(this,_d);I(this,di,[]);I(this,Ke,new Float64Array(18));I(this,lc);I(this,cc);I(this,Gp);I(this,Kp);I(this,Rd);I(this,Ld);I(this,Sa,[]);T(this,Ts,s),T(this,Ld,o*r),T(this,_d,a),f(this,Ke).set([NaN,NaN,NaN,NaN,e,t],6),T(this,Pd,u),T(this,Kp,f(Oi,qp)*r),T(this,Gp,f(Oi,Ay)*r),T(this,Rd,r),f(this,Sa).push(e,t)}isEmpty(){return isNaN(f(this,Ke)[8])}add({x:e,y:t}){var D;T(this,lc,e),T(this,cc,t);const[s,r,o,a]=f(this,Ts);let[u,d,h,m]=f(this,Ke).subarray(8,12);const g=e-h,x=t-m,v=Math.hypot(g,x);if(v<f(this,Gp))return!1;const w=v-f(this,Kp),b=w/v,C=b*g,E=b*x;let N=u,k=d;u=h,d=m,h+=C,m+=E,(D=f(this,Sa))==null||D.push(e,t);const P=-E/w,R=C/w,M=P*f(this,Ld),O=R*f(this,Ld);return f(this,Ke).set(f(this,Ke).subarray(2,8),0),f(this,Ke).set([h+M,m+O],4),f(this,Ke).set(f(this,Ke).subarray(14,18),12),f(this,Ke).set([h-M,m-O],16),isNaN(f(this,Ke)[6])?(f(this,di).length===0&&(f(this,Ke).set([u+M,d+O],2),f(this,di).push(NaN,NaN,NaN,NaN,(u+M-s)/o,(d+O-r)/a),f(this,Ke).set([u-M,d-O],14),f(this,Pr).push(NaN,NaN,NaN,NaN,(u-M-s)/o,(d-O-r)/a)),f(this,Ke).set([N,k,u,d,h,m],6),!this.isEmpty()):(f(this,Ke).set([N,k,u,d,h,m],6),Math.abs(Math.atan2(k-d,N-u)-Math.atan2(E,C))<Math.PI/2?([u,d,h,m]=f(this,Ke).subarray(2,6),f(this,di).push(NaN,NaN,NaN,NaN,((u+h)/2-s)/o,((d+m)/2-r)/a),[u,d,N,k]=f(this,Ke).subarray(14,18),f(this,Pr).push(NaN,NaN,NaN,NaN,((N+u)/2-s)/o,((k+d)/2-r)/a),!0):([N,k,u,d,h,m]=f(this,Ke).subarray(0,6),f(this,di).push(((N+5*u)/6-s)/o,((k+5*d)/6-r)/a,((5*u+h)/6-s)/o,((5*d+m)/6-r)/a,((u+h)/2-s)/o,((d+m)/2-r)/a),[h,m,u,d,N,k]=f(this,Ke).subarray(12,18),f(this,Pr).push(((N+5*u)/6-s)/o,((k+5*d)/6-r)/a,((5*u+h)/6-s)/o,((5*d+m)/6-r)/a,((u+h)/2-s)/o,((d+m)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,di),t=f(this,Pr);if(isNaN(f(this,Ke)[6])&&!this.isEmpty())return _(this,sn,qL).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);_(this,sn,YL).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return _(this,sn,XL).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,o,a){return new eI(e,t,s,r,o,a)}getOutlines(){var g;const e=f(this,di),t=f(this,Pr),s=f(this,Ke),[r,o,a,u]=f(this,Ts),d=new Float64Array((((g=f(this,Sa))==null?void 0:g.length)??0)+2);for(let x=0,v=d.length-2;x<v;x+=2)d[x]=(f(this,Sa)[x]-r)/a,d[x+1]=(f(this,Sa)[x+1]-o)/u;if(d[d.length-2]=(f(this,lc)-r)/a,d[d.length-1]=(f(this,cc)-o)/u,isNaN(s[6])&&!this.isEmpty())return _(this,sn,QL).call(this,d);const h=new Float64Array(f(this,di).length+24+f(this,Pr).length);let m=e.length;for(let x=0;x<m;x+=2){if(isNaN(e[x])){h[x]=h[x+1]=NaN;continue}h[x]=e[x],h[x+1]=e[x+1]}m=_(this,sn,ZL).call(this,h,m);for(let x=t.length-6;x>=6;x-=6)for(let v=0;v<6;v+=2){if(isNaN(t[x+v])){h[m]=h[m+1]=NaN,m+=2;continue}h[m]=t[x+v],h[m+1]=t[x+v+1],m+=2}return _(this,sn,JL).call(this,h,m),this.newFreeDrawOutline(h,d,f(this,Ts),f(this,Rd),f(this,Pd),f(this,_d))}};Ts=new WeakMap,Pr=new WeakMap,Pd=new WeakMap,_d=new WeakMap,di=new WeakMap,Ke=new WeakMap,lc=new WeakMap,cc=new WeakMap,Gp=new WeakMap,Kp=new WeakMap,Rd=new WeakMap,Ld=new WeakMap,Sa=new WeakMap,qp=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,sn=new WeakSet,xf=function(){const e=f(this,Ke).subarray(4,6),t=f(this,Ke).subarray(16,18),[s,r,o,a]=f(this,Ts);return[(f(this,lc)+(e[0]-t[0])/2-s)/o,(f(this,cc)+(e[1]-t[1])/2-r)/a,(f(this,lc)+(t[0]-e[0])/2-s)/o,(f(this,cc)+(t[1]-e[1])/2-r)/a]},qL=function(){const[e,t,s,r]=f(this,Ts),[o,a,u,d]=_(this,sn,xf).call(this);return`M${(f(this,Ke)[2]-e)/s} ${(f(this,Ke)[3]-t)/r} L${(f(this,Ke)[4]-e)/s} ${(f(this,Ke)[5]-t)/r} L${o} ${a} L${u} ${d} L${(f(this,Ke)[16]-e)/s} ${(f(this,Ke)[17]-t)/r} L${(f(this,Ke)[14]-e)/s} ${(f(this,Ke)[15]-t)/r} Z`},XL=function(e){const t=f(this,Pr);e.push(`L${t[4]} ${t[5]} Z`)},YL=function(e){const[t,s,r,o]=f(this,Ts),a=f(this,Ke).subarray(4,6),u=f(this,Ke).subarray(16,18),[d,h,m,g]=_(this,sn,xf).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-s)/o} L${d} ${h} L${m} ${g} L${(u[0]-t)/r} ${(u[1]-s)/o}`)},QL=function(e){const t=f(this,Ke),[s,r,o,a]=f(this,Ts),[u,d,h,m]=_(this,sn,xf).call(this),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-s)/o,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-s)/o,(t[5]-r)/a,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,m,NaN,NaN,NaN,NaN,(t[16]-s)/o,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-s)/o,(t[15]-r)/a],0),this.newFreeDrawOutline(g,e,f(this,Ts),f(this,Rd),f(this,Pd),f(this,_d))},JL=function(e,t){const s=f(this,Pr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},ZL=function(e,t){const s=f(this,Ke).subarray(4,6),r=f(this,Ke).subarray(16,18),[o,a,u,d]=f(this,Ts),[h,m,g,x]=_(this,sn,xf).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-a)/d,NaN,NaN,NaN,NaN,h,m,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-a)/d],t),t+=24},I(Oi,qp,8),I(Oi,Sy,2),I(Oi,Ay,f(Oi,qp)+f(Oi,Sy));let ry=Oi;var Id,uc,Zi,Xp,Ps,Yp,Bt,ms,yf,vf,tI;class eI extends KL{constructor(t,s,r,o,a,u){super();I(this,ms);I(this,Id);I(this,uc,null);I(this,Zi);I(this,Xp);I(this,Ps);I(this,Yp);I(this,Bt);T(this,Bt,t),T(this,Ps,s),T(this,Id,r),T(this,Yp,o),T(this,Zi,a),T(this,Xp,u),_(this,ms,tI).call(this,u);const{x:d,y:h,width:m,height:g}=f(this,uc);for(let x=0,v=t.length;x<v;x+=2)t[x]=(t[x]-d)/m,t[x+1]=(t[x+1]-h)/g;for(let x=0,v=s.length;x<v;x+=2)s[x]=(s[x]-d)/m,s[x+1]=(s[x+1]-h)/g}toSVGPath(){const t=[`M${f(this,Bt)[4]} ${f(this,Bt)[5]}`];for(let s=6,r=f(this,Bt).length;s<r;s+=6){if(isNaN(f(this,Bt)[s])){t.push(`L${f(this,Bt)[s+4]} ${f(this,Bt)[s+5]}`);continue}t.push(`C${f(this,Bt)[s]} ${f(this,Bt)[s+1]} ${f(this,Bt)[s+2]} ${f(this,Bt)[s+3]} ${f(this,Bt)[s+4]} ${f(this,Bt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,o],a){const u=r-t,d=o-s;let h,m;switch(a){case 0:h=_(this,ms,yf).call(this,f(this,Bt),t,o,u,-d),m=_(this,ms,yf).call(this,f(this,Ps),t,o,u,-d);break;case 90:h=_(this,ms,vf).call(this,f(this,Bt),t,s,u,d),m=_(this,ms,vf).call(this,f(this,Ps),t,s,u,d);break;case 180:h=_(this,ms,yf).call(this,f(this,Bt),r,s,-u,d),m=_(this,ms,yf).call(this,f(this,Ps),r,s,-u,d);break;case 270:h=_(this,ms,vf).call(this,f(this,Bt),r,o,-u,-d),m=_(this,ms,vf).call(this,f(this,Ps),r,o,-u,-d);break}return{outline:Array.from(h),points:[Array.from(m)]}}get box(){return f(this,uc)}newOutliner(t,s,r,o,a,u=0){return new ry(t,s,r,o,a,u)}getNewOutline(t,s){const{x:r,y:o,width:a,height:u}=f(this,uc),[d,h,m,g]=f(this,Id),x=a*m,v=u*g,w=r*m+d,b=o*g+h,C=this.newOutliner({x:f(this,Ps)[0]*x+w,y:f(this,Ps)[1]*v+b},f(this,Id),f(this,Yp),t,f(this,Xp),s??f(this,Zi));for(let E=2;E<f(this,Ps).length;E+=2)C.add({x:f(this,Ps)[E]*x+w,y:f(this,Ps)[E+1]*v+b});return C.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Id=new WeakMap,uc=new WeakMap,Zi=new WeakMap,Xp=new WeakMap,Ps=new WeakMap,Yp=new WeakMap,Bt=new WeakMap,ms=new WeakSet,yf=function(t,s,r,o,a){const u=new Float64Array(t.length);for(let d=0,h=t.length;d<h;d+=2)u[d]=s+t[d]*o,u[d+1]=r+t[d+1]*a;return u},vf=function(t,s,r,o,a){const u=new Float64Array(t.length);for(let d=0,h=t.length;d<h;d+=2)u[d]=s+t[d+1]*o,u[d+1]=r+t[d]*a;return u},tI=function(t){const s=f(this,Bt);let r=s[4],o=s[5],a=r,u=o,d=r,h=o,m=r,g=o;const x=t?Math.max:Math.min;for(let E=6,N=s.length;E<N;E+=6){if(isNaN(s[E]))a=Math.min(a,s[E+4]),u=Math.min(u,s[E+5]),d=Math.max(d,s[E+4]),h=Math.max(h,s[E+5]),g<s[E+5]?(m=s[E+4],g=s[E+5]):g===s[E+5]&&(m=x(m,s[E+4]));else{const k=Ae.bezierBoundingBox(r,o,...s.slice(E,E+6));a=Math.min(a,k[0]),u=Math.min(u,k[1]),d=Math.max(d,k[2]),h=Math.max(h,k[3]),g<k[3]?(m=k[2],g=k[3]):g===k[3]&&(m=x(m,k[2]))}r=s[E+4],o=s[E+5]}const v=a-f(this,Zi),w=u-f(this,Zi),b=d-a+2*f(this,Zi),C=h-u+2*f(this,Zi);T(this,uc,{x:v,y:w,width:b,height:C,lastPoint:[m,g]})};var Qp,Aa,_r,Jn,nI,jx,sI,rI,dS;class Zk{constructor(e,t=0,s=0,r=!0){I(this,Jn);I(this,Qp);I(this,Aa,[]);I(this,_r,[]);let o=1/0,a=-1/0,u=1/0,d=-1/0;const h=10**-4;for(const{x:C,y:E,width:N,height:k}of e){const P=Math.floor((C-t)/h)*h,R=Math.ceil((C+N+t)/h)*h,M=Math.floor((E-t)/h)*h,O=Math.ceil((E+k+t)/h)*h,F=[P,M,O,!0],D=[R,M,O,!1];f(this,Aa).push(F,D),o=Math.min(o,P),a=Math.max(a,R),u=Math.min(u,M),d=Math.max(d,O)}const m=a-o+2*s,g=d-u+2*s,x=o-s,v=u-s,w=f(this,Aa).at(r?-1:-2),b=[w[0],w[2]];for(const C of f(this,Aa)){const[E,N,k]=C;C[0]=(E-x)/m,C[1]=(N-v)/g,C[2]=(k-v)/g}T(this,Qp,{x,y:v,width:m,height:g,lastPoint:b})}getOutlines(){f(this,Aa).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of f(this,Aa))t[3]?(e.push(..._(this,Jn,dS).call(this,t)),_(this,Jn,sI).call(this,t)):(_(this,Jn,rI).call(this,t),e.push(..._(this,Jn,dS).call(this,t)));return _(this,Jn,nI).call(this,e)}}Qp=new WeakMap,Aa=new WeakMap,_r=new WeakMap,Jn=new WeakSet,nI=function(e){const t=[],s=new Set;for(const a of e){const[u,d,h]=a;t.push([u,d,a],[u,h,a])}t.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=t.length;a<u;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),s.add(d),s.add(h)}const r=[];let o;for(;s.size>0;){const a=s.values().next().value;let[u,d,h,m,g]=a;s.delete(a);let x=u,v=d;for(o=[u,h],r.push(o);;){let w;if(s.has(m))w=m;else if(s.has(g))w=g;else break;s.delete(w),[u,d,h,m,g]=w,x!==u&&(o.push(x,v,u,v===d?d:h),x=u),v=v===d?h:d}o.push(x,v)}return new tK(r,f(this,Qp))},jx=function(e){const t=f(this,_r);let s=0,r=t.length-1;for(;s<=r;){const o=s+r>>1,a=t[o][0];if(a===e)return o;a<e?s=o+1:r=o-1}return r+1},sI=function([,e,t]){const s=_(this,Jn,jx).call(this,e);f(this,_r).splice(s,0,[e,t])},rI=function([,e,t]){const s=_(this,Jn,jx).call(this,e);for(let r=s;r<f(this,_r).length;r++){const[o,a]=f(this,_r)[r];if(o!==e)break;if(o===e&&a===t){f(this,_r).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,a]=f(this,_r)[r];if(o!==e)break;if(o===e&&a===t){f(this,_r).splice(r,1);return}}},dS=function(e){const[t,s,r]=e,o=[[t,s,r]],a=_(this,Jn,jx).call(this,r);for(let u=0;u<a;u++){const[d,h]=f(this,_r)[u];for(let m=0,g=o.length;m<g;m++){const[,x,v]=o[m];if(!(h<=x||v<=d)){if(x>=d){if(v>h)o[m][1]=h;else{if(g===1)return[];o.splice(m,1),m--,g--}continue}o[m][2]=d,v>h&&o.push([t,h,v])}}}return o};var Jp,Md;class tK extends KL{constructor(t,s){super();I(this,Jp);I(this,Md);T(this,Md,t),T(this,Jp,s)}toSVGPath(){const t=[];for(const s of f(this,Md)){let[r,o]=s;t.push(`M${r} ${o}`);for(let a=2;a<s.length;a+=2){const u=s[a],d=s[a+1];u===r?(t.push(`V${d}`),o=d):d===o&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,s,r,o],a){const u=[],d=r-t,h=o-s;for(const m of f(this,Md)){const g=new Array(m.length);for(let x=0;x<m.length;x+=2)g[x]=t+m[x]*d,g[x+1]=o-m[x+1]*h;u.push(g)}return u}get box(){return f(this,Jp)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Jp=new WeakMap,Md=new WeakMap;class hS extends ry{newFreeDrawOutline(e,t,s,r,o,a){return new nK(e,t,s,r,o,a)}get classNamesForDrawing(){return["highlight","free"]}}class nK extends eI{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,s,r,o,a=0){return new hS(e,t,s,r,o,a)}}var Rr,dc,Dd,en,Zp,Od,em,tm,Ea,Lr,Fd,nm,dt,fS,pS,mS,hl,iI,qo;const ls=class ls{constructor({editor:e=null,uiManager:t=null}){I(this,dt);I(this,Rr,null);I(this,dc,null);I(this,Dd);I(this,en,null);I(this,Zp,!1);I(this,Od,!1);I(this,em,null);I(this,tm);I(this,Ea,null);I(this,Lr,null);I(this,Fd);var s;e?(T(this,Od,!1),T(this,Fd,De.HIGHLIGHT_COLOR),T(this,em,e)):(T(this,Od,!0),T(this,Fd,De.HIGHLIGHT_DEFAULT_COLOR)),T(this,Lr,(e==null?void 0:e._uiManager)||t),T(this,tm,f(this,Lr)._eventBus),T(this,Dd,(e==null?void 0:e.color)||((s=f(this,Lr))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),f(ls,nm)||T(ls,nm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Je(this,"_keyboardManager",new Sm([[["Escape","mac+Escape"],ls.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ls.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ls.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ls.prototype._moveToPrevious],[["Home","mac+Home"],ls.prototype._moveToBeginning],[["End","mac+End"],ls.prototype._moveToEnd]]))}renderButton(){const e=T(this,Rr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=f(this,Lr)._signal;e.addEventListener("click",_(this,dt,hl).bind(this),{signal:t}),e.addEventListener("keydown",_(this,dt,mS).bind(this),{signal:t});const s=T(this,dc,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=f(this,Dd),e.append(s),e}renderMainDropdown(){const e=T(this,en,_(this,dt,fS).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===f(this,Rr)){_(this,dt,hl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&_(this,dt,pS).call(this,t,e)}_moveToNext(e){var t,s;if(!f(this,dt,qo)){_(this,dt,hl).call(this,e);return}if(e.target===f(this,Rr)){(t=f(this,en).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=f(this,en))==null?void 0:t.firstChild)||e.target===f(this,Rr)){f(this,dt,qo)&&this._hideDropdownFromKeyboard();return}f(this,dt,qo)||_(this,dt,hl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!f(this,dt,qo)){_(this,dt,hl).call(this,e);return}(t=f(this,en).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,dt,qo)){_(this,dt,hl).call(this,e);return}(t=f(this,en).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=f(this,en))==null||e.classList.add("hidden"),(t=f(this,Ea))==null||t.abort(),T(this,Ea,null)}_hideDropdownFromKeyboard(){var e;if(!f(this,Od)){if(!f(this,dt,qo)){(e=f(this,em))==null||e.unselect();return}this.hideDropdown(),f(this,Rr).focus({preventScroll:!0,focusVisible:f(this,Zp)})}}updateColor(e){if(f(this,dc)&&(f(this,dc).style.backgroundColor=e),!f(this,en))return;const t=f(this,Lr).highlightColors.values();for(const s of f(this,en).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=f(this,Rr))==null||e.remove(),T(this,Rr,null),T(this,dc,null),(t=f(this,en))==null||t.remove(),T(this,en,null)}};Rr=new WeakMap,dc=new WeakMap,Dd=new WeakMap,en=new WeakMap,Zp=new WeakMap,Od=new WeakMap,em=new WeakMap,tm=new WeakMap,Ea=new WeakMap,Lr=new WeakMap,Fd=new WeakMap,nm=new WeakMap,dt=new WeakSet,fS=function(){const e=document.createElement("div"),t=f(this,Lr)._signal;e.addEventListener("contextmenu",ar,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of f(this,Lr).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",f(ls,nm)[s]);const a=document.createElement("span");o.append(a),a.className="swatch",a.style.backgroundColor=r,o.setAttribute("aria-selected",r===f(this,Dd)),o.addEventListener("click",_(this,dt,pS).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",_(this,dt,mS).bind(this),{signal:t}),e},pS=function(e,t){t.stopPropagation(),f(this,tm).dispatch("switchannotationeditorparams",{source:this,type:f(this,Fd),value:e})},mS=function(e){ls._keyboardManager.exec(this,e)},hl=function(e){if(f(this,dt,qo)){this.hideDropdown();return}if(T(this,Zp,e.detail===0),f(this,Ea)||(T(this,Ea,new AbortController),window.addEventListener("pointerdown",_(this,dt,iI).bind(this),{signal:f(this,Lr).combinedSignal(f(this,Ea))})),f(this,en)){f(this,en).classList.remove("hidden");return}const t=T(this,en,_(this,dt,fS).call(this));f(this,Rr).append(t)},iI=function(e){var t;(t=f(this,en))!=null&&t.contains(e.target)||this.hideDropdown()},qo=function(){return f(this,en)&&!f(this,en).classList.contains("hidden")},I(ls,nm,null);let iy=ls;var Bd,sm,eo,hc,$d,er,rm,im,fc,Ir,In,hs,Vd,to,tn,Ud,tr,om,$e,gS,kx,oI,aI,lI,xS,fl,ir,Su,cI,Tx,bf,uI,dI,hI,fI,pI;const nt=class nt extends ct{constructor(t){super({...t,name:"highlightEditor"});I(this,$e);I(this,Bd,null);I(this,sm,0);I(this,eo);I(this,hc,null);I(this,$d,null);I(this,er,null);I(this,rm,null);I(this,im,0);I(this,fc,null);I(this,Ir,null);I(this,In,null);I(this,hs,!1);I(this,Vd,null);I(this,to);I(this,tn,null);I(this,Ud,"");I(this,tr);I(this,om,"");this.color=t.color||nt._defaultColor,T(this,tr,t.thickness||nt._defaultThickness),T(this,to,t.opacity||nt._defaultOpacity),T(this,eo,t.boxes||null),T(this,om,t.methodOfCreation||""),T(this,Ud,t.text||""),this._isDraggable=!1,t.highlightId>-1?(T(this,hs,!0),_(this,$e,kx).call(this,t),_(this,$e,fl).call(this)):f(this,eo)&&(T(this,Bd,t.anchorNode),T(this,sm,t.anchorOffset),T(this,rm,t.focusNode),T(this,im,t.focusOffset),_(this,$e,gS).call(this),_(this,$e,fl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=nt.prototype;return Je(this,"_keyboardManager",new Sm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,hs)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,tr),methodOfCreation:f(this,om)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;ct.initialize(t,s),nt._defaultColor||(nt._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case De.HIGHLIGHT_DEFAULT_COLOR:nt._defaultColor=s;break;case De.HIGHLIGHT_THICKNESS:nt._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return f(this,Vd)}updateParams(t,s){switch(t){case De.HIGHLIGHT_COLOR:_(this,$e,oI).call(this,s);break;case De.HIGHLIGHT_THICKNESS:_(this,$e,aI).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[De.HIGHLIGHT_DEFAULT_COLOR,nt._defaultColor],[De.HIGHLIGHT_THICKNESS,nt._defaultThickness]]}get propertiesToUpdate(){return[[De.HIGHLIGHT_COLOR,this.color||nt._defaultColor],[De.HIGHLIGHT_THICKNESS,f(this,tr)||nt._defaultThickness],[De.HIGHLIGHT_FREE,f(this,hs)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(T(this,$d,new iy({editor:this})),t.addColorPicker(f(this,$d))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,$e,bf).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,_(this,$e,bf).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,$e,xS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,$e,fl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?_(this,$e,xS).call(this):t&&(_(this,$e,fl).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var o,a,u;const{drawLayer:s}=this.parent;let r;f(this,hs)?(t=(t-this.rotation+360)%360,r=_(o=nt,ir,Su).call(o,f(this,Ir).box,t)):r=_(a=nt,ir,Su).call(a,this,t),s.rotate(f(this,In),t),s.rotate(f(this,tn),t),s.updateBox(f(this,In),r),s.updateBox(f(this,tn),_(u=nt,ir,Su).call(u,f(this,er).box,t))}render(){if(this.div)return this.div;const t=super.render();f(this,Ud)&&(t.setAttribute("aria-label",f(this,Ud)),t.setAttribute("role","mark")),f(this,hs)?t.classList.add("free"):this.div.addEventListener("keydown",_(this,$e,cI).bind(this),{signal:this._uiManager._signal});const s=T(this,fc,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=f(this,hc);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),ny(this,f(this,fc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(f(this,tn),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(f(this,tn),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:_(this,$e,Tx).call(this,!0);break;case 1:case 3:_(this,$e,Tx).call(this,!1);break}}select(){var t,s;super.select(),f(this,tn)&&((t=this.parent)==null||t.drawLayer.removeClass(f(this,tn),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(f(this,tn),"selected"))}unselect(){var t;super.unselect(),f(this,tn)&&((t=this.parent)==null||t.drawLayer.removeClass(f(this,tn),"selected"),f(this,hs)||_(this,$e,Tx).call(this,!1))}get _mustFixPosition(){return!f(this,hs)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(f(this,In),t),this.parent.drawLayer.show(f(this,tn),t))}static startHighlighting(t,s,{target:r,x:o,y:a}){const{x:u,y:d,width:h,height:m}=r.getBoundingClientRect(),g=new AbortController,x=t.combinedSignal(g),v=b=>{b.preventDefault(),b.stopPropagation()},w=b=>{g.abort(),_(this,ir,fI).call(this,t,b)};window.addEventListener("blur",w,{signal:x}),window.addEventListener("pointerup",w,{signal:x}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",ar,{signal:x}),r.addEventListener("pointermove",_(this,ir,hI).bind(this,t),{signal:x}),this._freeHighlight=new hS({x:o,y:a},[u,d,h,m],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,s,r){var b,C,E,N;let o=null;if(t instanceof BL){const{data:{quadPoints:k,rect:P,rotation:R,id:M,color:O,opacity:F,popupRef:D},parent:{page:{pageNumber:U}}}=t;o=t={annotationType:Ue.HIGHLIGHT,color:Array.from(O),opacity:F,quadPoints:k,boxes:null,pageIndex:U-1,rect:P.slice(0),rotation:R,id:M,deleted:!1,popupRef:D}}else if(t instanceof gA){const{data:{inkLists:k,rect:P,rotation:R,id:M,color:O,borderStyle:{rawWidth:F},popupRef:D},parent:{page:{pageNumber:U}}}=t;o=t={annotationType:Ue.HIGHLIGHT,color:Array.from(O),thickness:F,inkLists:k,boxes:null,pageIndex:U-1,rect:P.slice(0),rotation:R,id:M,deleted:!1,popupRef:D}}const{color:a,quadPoints:u,inkLists:d,opacity:h}=t,m=await super.deserialize(t,s,r);m.color=Ae.makeHexColor(...a),T(m,to,h||1),d&&T(m,tr,t.thickness),m.annotationElementId=t.id||null,m._initialData=o;const[g,x]=m.pageDimensions,[v,w]=m.pageTranslation;if(u){const k=T(m,eo,[]);for(let P=0;P<u.length;P+=8)k.push({x:(u[P]-v)/g,y:1-(u[P+1]-w)/x,width:(u[P+2]-u[P])/g,height:(u[P+1]-u[P+5])/x});_(b=m,$e,gS).call(b),_(C=m,$e,fl).call(C),m.rotate(m.rotation)}else if(d){T(m,hs,!0);const k=d[0],P={x:k[0]-v,y:x-(k[1]-w)},R=new hS(P,[0,0,g,x],1,f(m,tr)/2,!0,.001);for(let F=0,D=k.length;F<D;F+=2)P.x=k[F]-v,P.y=x-(k[F+1]-w),R.add(P);const{id:M,clipPathId:O}=s.drawLayer.draw(R,m.color,m._defaultOpacity,!0);_(E=m,$e,kx).call(E,{highlightOutlines:R.getOutlines(),highlightId:M,clipPathId:O}),_(N=m,$e,fl).call(N)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=ct._colorManager.convert(this.color),o={annotationType:Ue.HIGHLIGHT,color:r,opacity:f(this,to),thickness:f(this,tr),quadPoints:_(this,$e,uI).call(this),outlines:_(this,$e,dI).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:_(this,$e,bf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!_(this,$e,pI).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Bd=new WeakMap,sm=new WeakMap,eo=new WeakMap,hc=new WeakMap,$d=new WeakMap,er=new WeakMap,rm=new WeakMap,im=new WeakMap,fc=new WeakMap,Ir=new WeakMap,In=new WeakMap,hs=new WeakMap,Vd=new WeakMap,to=new WeakMap,tn=new WeakMap,Ud=new WeakMap,tr=new WeakMap,om=new WeakMap,$e=new WeakSet,gS=function(){const t=new Zk(f(this,eo),.001);T(this,Ir,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=f(this,Ir).box;const s=new Zk(f(this,eo),.0025,.001,this._uiManager.direction==="ltr");T(this,er,s.getOutlines());const{lastPoint:r}=f(this,er).box;T(this,Vd,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},kx=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var g,x;if(T(this,Ir,t),T(this,er,t.getNewOutline(f(this,tr)/2+1.5,.0025)),s>=0)T(this,In,s),T(this,hc,r),this.parent.drawLayer.finalizeLine(s,t),T(this,tn,this.parent.drawLayer.drawOutline(f(this,er)));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(f(this,In),t),this.parent.drawLayer.updateBox(f(this,In),_(g=nt,ir,Su).call(g,f(this,Ir).box,(v-this.rotation+360)%360)),this.parent.drawLayer.updateLine(f(this,tn),f(this,er)),this.parent.drawLayer.updateBox(f(this,tn),_(x=nt,ir,Su).call(x,f(this,er).box,v))}const{x:a,y:u,width:d,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=d,this.height=h;break;case 90:{const[v,w]=this.parentDimensions;this.x=u,this.y=1-a,this.width=d*w/v,this.height=h*v/w;break}case 180:this.x=1-a,this.y=1-u,this.width=d,this.height=h;break;case 270:{const[v,w]=this.parentDimensions;this.x=1-u,this.y=a,this.width=d*w/v,this.height=h*v/w;break}}const{lastPoint:m}=f(this,er).box;T(this,Vd,[(m[0]-a)/d,(m[1]-u)/h])},oI=function(t){const s=(a,u)=>{var d,h,m;this.color=a,(d=this.parent)==null||d.drawLayer.changeColor(f(this,In),a),(h=f(this,$d))==null||h.updateColor(a),T(this,to,u),(m=this.parent)==null||m.drawLayer.changeOpacity(f(this,In),u)},r=this.color,o=f(this,to);this.addCommands({cmd:s.bind(this,t,nt._defaultOpacity),undo:s.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},aI=function(t){const s=f(this,tr),r=o=>{T(this,tr,o),_(this,$e,lI).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},lI=function(t){if(!f(this,hs))return;_(this,$e,kx).call(this,{highlightOutlines:f(this,Ir).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},xS=function(){f(this,In)===null||!this.parent||(this.parent.drawLayer.remove(f(this,In)),T(this,In,null),this.parent.drawLayer.remove(f(this,tn)),T(this,tn,null))},fl=function(t=this.parent){f(this,In)===null&&({id:ln(this,In)._,clipPathId:ln(this,hc)._}=t.drawLayer.draw(f(this,Ir),this.color,f(this,to)),T(this,tn,t.drawLayer.drawOutline(f(this,er))),f(this,fc)&&(f(this,fc).style.clipPath=f(this,hc)))},ir=new WeakSet,Su=function({x:t,y:s,width:r,height:o},a){switch(a){case 90:return{x:1-s-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-s-o,width:r,height:o};case 270:return{x:s,y:1-t-r,width:o,height:r}}return{x:t,y:s,width:r,height:o}},cI=function(t){nt._keyboardManager.exec(this,t)},Tx=function(t){if(!f(this,Bd))return;const s=window.getSelection();t?s.setPosition(f(this,Bd),f(this,sm)):s.setPosition(f(this,rm),f(this,im))},bf=function(){return f(this,hs)?this.rotation:0},uI=function(){if(f(this,hs))return null;const[t,s]=this.pageDimensions,[r,o]=this.pageTranslation,a=f(this,eo),u=new Float32Array(a.length*8);let d=0;for(const{x:h,y:m,width:g,height:x}of a){const v=h*t+r,w=(1-m-x)*s+o;u[d]=u[d+4]=v,u[d+1]=u[d+3]=w,u[d+2]=u[d+6]=v+g*t,u[d+5]=u[d+7]=w+x*s,d+=8}return u},dI=function(t){return f(this,Ir).serialize(t,_(this,$e,bf).call(this))},hI=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},fI=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},pI=function(t){const{color:s}=this._initialData;return t.color.some((r,o)=>r!==s[o])},I(nt,ir),Me(nt,"_defaultColor",null),Me(nt,"_defaultOpacity",1),Me(nt,"_defaultThickness",12),Me(nt,"_type","highlight"),Me(nt,"_editorType",Ue.HIGHLIGHT),Me(nt,"_freeHighlightId",-1),Me(nt,"_freeHighlight",null),Me(nt,"_freeHighlightClipId","");let oy=nt;var pc,mc,hi,no,nr,gc,xc,yc,so,zd,vc,bc,Ca,ue,mI,gI,xI,yI,vS,vI,bS,bI,wI,SI,AI,EI,pl,wS,SS,AS,Px,_x,Au,ES,Rx,So,CI,CS,NI,jI,NS,Lx,wf;const jt=class jt extends ct{constructor(t){super({...t,name:"inkEditor"});I(this,ue);I(this,pc,0);I(this,mc,0);I(this,hi,null);I(this,no,new Path2D);I(this,nr,!1);I(this,gc,null);I(this,xc,!1);I(this,yc,!1);I(this,so,null);I(this,zd,null);I(this,vc,0);I(this,bc,0);I(this,Ca,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,s){ct.initialize(t,s)}static updateDefaultParams(t,s){switch(t){case De.INK_THICKNESS:jt._defaultThickness=s;break;case De.INK_COLOR:jt._defaultColor=s;break;case De.INK_OPACITY:jt._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case De.INK_THICKNESS:_(this,ue,mI).call(this,s);break;case De.INK_COLOR:_(this,ue,gI).call(this,s);break;case De.INK_OPACITY:_(this,ue,xI).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[De.INK_THICKNESS,jt._defaultThickness],[De.INK_COLOR,jt._defaultColor||ct._defaultLineColor],[De.INK_OPACITY,Math.round(jt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[De.INK_THICKNESS,this.thickness||jt._defaultThickness],[De.INK_COLOR,this.color||jt._defaultColor||ct._defaultLineColor],[De.INK_OPACITY,Math.round(100*(this.opacity??jt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(_(this,ue,Px).call(this),_(this,ue,_x).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,ue,Au).call(this)),_(this,ue,wf).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,f(this,hi)&&(clearTimeout(f(this,hi)),T(this,hi,null)),(t=f(this,so))==null||t.disconnect(),T(this,so,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,r=this.width*t,o=this.height*s;this.setDimensions(r,o)}enableEditMode(){f(this,nr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,_(this,ue,wS).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),_(this,ue,SS).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){f(this,nr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),T(this,nr,!0),this.div.classList.add("disabled"),_(this,ue,wf).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||f(this,nr)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,ue,vI).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),_(this,ue,bS).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),_(this,ue,AS).call(this,t)}canvasPointerleave(t){_(this,ue,AS).call(this,t)}get isResizable(){return!this.isEmpty()&&f(this,nr)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,a,u]=_(this,ue,yI).call(this);if(this.setAt(r,o,0,0),this.setDims(a,u),_(this,ue,Px).call(this),this.width){const[d,h]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*h),this.setAt(t*d,s*h,this.width*d,this.height*h),T(this,yc,!0),_(this,ue,Au).call(this),this.setDims(this.width*d,this.height*h),_(this,ue,pl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,ue,_x).call(this),this.div}setDimensions(t,s){const r=Math.round(t),o=Math.round(s);if(f(this,vc)===r&&f(this,bc)===o)return;T(this,vc,r),T(this,bc,o),this.canvas.style.visibility="hidden";const[a,u]=this.parentDimensions;this.width=t/a,this.height=s/u,this.fixAndSetPosition(),f(this,nr)&&_(this,ue,ES).call(this,t,s),_(this,ue,Au).call(this),_(this,ue,pl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,s,r){var C,E,N;if(t instanceof gA)return null;const o=await super.deserialize(t,s,r);o.thickness=t.thickness,o.color=Ae.makeHexColor(...t.color),o.opacity=t.opacity;const[a,u]=o.pageDimensions,d=o.width*a,h=o.height*u,m=o.parentScale,g=t.thickness/2;T(o,nr,!0),T(o,vc,Math.round(d)),T(o,bc,Math.round(h));const{paths:x,rect:v,rotation:w}=t;for(let{bezier:k}of x){k=_(C=jt,So,NI).call(C,k,v,w);const P=[];o.paths.push(P);let R=m*(k[0]-g),M=m*(k[1]-g);for(let F=2,D=k.length;F<D;F+=6){const U=m*(k[F]-g),K=m*(k[F+1]-g),X=m*(k[F+2]-g),ee=m*(k[F+3]-g),J=m*(k[F+4]-g),ae=m*(k[F+5]-g);P.push([[R,M],[U,K],[X,ee],[J,ae]]),R=J,M=ae}const O=_(this,So,CI).call(this,P);o.bezierPath2D.push(O)}const b=_(E=o,ue,NS).call(E);return T(o,mc,Math.max(ct.MIN_SIZE,b[2]-b[0])),T(o,pc,Math.max(ct.MIN_SIZE,b[3]-b[1])),_(N=o,ue,ES).call(N,d,h),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=ct._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ue.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:_(this,ue,jI).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};pc=new WeakMap,mc=new WeakMap,hi=new WeakMap,no=new WeakMap,nr=new WeakMap,gc=new WeakMap,xc=new WeakMap,yc=new WeakMap,so=new WeakMap,zd=new WeakMap,vc=new WeakMap,bc=new WeakMap,Ca=new WeakMap,ue=new WeakSet,mI=function(t){const s=o=>{this.thickness=o,_(this,ue,wf).call(this)},r=this.thickness;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},gI=function(t){const s=o=>{this.color=o,_(this,ue,pl).call(this)},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xI=function(t){const s=o=>{this.opacity=o,_(this,ue,pl).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},yI=function(){const{parentRotation:t,parentDimensions:[s,r]}=this;switch(t){case 90:return[0,r,r,s];case 180:return[s,r,s,r];case 270:return[s,0,r,s];default:return[0,0,s,r]}},vS=function(){const{ctx:t,color:s,opacity:r,thickness:o,parentScale:a,scaleFactor:u}=this;t.lineWidth=o*a/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${EG(r)}`},vI=function(t,s){this.canvas.addEventListener("contextmenu",ar,{signal:this._uiManager._signal}),_(this,ue,SS).call(this),T(this,gc,new AbortController);const r=this._uiManager.combinedSignal(f(this,gc));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,f(this,yc)||(T(this,yc,!0),_(this,ue,Au).call(this),this.thickness||(this.thickness=jt._defaultThickness),this.color||(this.color=jt._defaultColor||ct._defaultLineColor),this.opacity??(this.opacity=jt._defaultOpacity)),this.currentPath.push([t,s]),T(this,xc,!1),_(this,ue,vS).call(this),T(this,Ca,()=>{_(this,ue,SI).call(this),f(this,Ca)&&window.requestAnimationFrame(f(this,Ca))}),window.requestAnimationFrame(f(this,Ca))},bS=function(t,s){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&s===o)return;const a=this.currentPath;let u=f(this,no);if(a.push([t,s]),T(this,xc,!0),a.length<=2){u.moveTo(...a[0]),u.lineTo(t,s);return}a.length===3&&(T(this,no,u=new Path2D),u.moveTo(...a[0])),_(this,ue,AI).call(this,u,...a.at(-3),...a.at(-2),t,s)},bI=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);f(this,no).lineTo(...t)},wI=function(t,s){T(this,Ca,null),t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),_(this,ue,bS).call(this,t,s),_(this,ue,bI).call(this);let r;if(this.currentPath.length!==1)r=_(this,ue,EI).call(this);else{const h=[t,s];r=[[h,h.slice(),h.slice(),h]]}const o=f(this,no),a=this.currentPath;this.currentPath=[],T(this,no,new Path2D);const u=()=>{this.allRawPaths.push(a),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,ue,Px).call(this),_(this,ue,_x).call(this)),_(this,ue,wf).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},SI=function(){if(!f(this,xc))return;T(this,xc,!1);const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),r=s.map(u=>u[0]),o=s.map(u=>u[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)a.stroke(u);a.stroke(f(this,no)),a.restore()},AI=function(t,s,r,o,a,u,d){const h=(s+o)/2,m=(r+a)/2,g=(o+u)/2,x=(a+d)/2;t.bezierCurveTo(h+2*(o-h)/3,m+2*(a-m)/3,g+2*(o-g)/3,x+2*(a-x)/3,g,x)},EI=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let r,[o,a]=t[0];for(r=1;r<t.length-2;r++){const[v,w]=t[r],[b,C]=t[r+1],E=(v+b)/2,N=(w+C)/2,k=[o+2*(v-o)/3,a+2*(w-a)/3],P=[E+2*(v-E)/3,N+2*(w-N)/3];s.push([[o,a],k,P,[E,N]]),[o,a]=[E,N]}const[u,d]=t[r],[h,m]=t[r+1],g=[o+2*(u-o)/3,a+2*(d-a)/3],x=[h+2*(u-h)/3,m+2*(d-m)/3];return s.push([[o,a],g,x,[h,m]]),s},pl=function(){if(this.isEmpty()){_(this,ue,Rx).call(this);return}_(this,ue,vS).call(this);const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),_(this,ue,Rx).call(this);for(const r of this.bezierPath2D)s.stroke(r)},wS=function(){if(f(this,zd))return;T(this,zd,new AbortController);const t=this._uiManager.combinedSignal(f(this,zd));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},SS=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},AS=function(t){var s;(s=f(this,gc))==null||s.abort(),T(this,gc,null),_(this,ue,wS).call(this),f(this,hi)&&clearTimeout(f(this,hi)),T(this,hi,setTimeout(()=>{T(this,hi,null),this.canvas.removeEventListener("contextmenu",ar)},10)),_(this,ue,wI).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Px=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},_x=function(){T(this,so,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),f(this,so).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=f(this,so))==null||t.disconnect(),T(this,so,null)},{once:!0})},Au=function(){if(!f(this,yc))return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),_(this,ue,Rx).call(this)},ES=function(t,s){const r=_(this,ue,Lx).call(this),o=(t-r)/f(this,mc),a=(s-r)/f(this,pc);this.scaleFactor=Math.min(o,a)},Rx=function(){const t=_(this,ue,Lx).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},So=new WeakSet,CI=function(t){const s=new Path2D;for(let r=0,o=t.length;r<o;r++){const[a,u,d,h]=t[r];r===0&&s.moveTo(...a),s.bezierCurveTo(u[0],u[1],d[0],d[1],h[0],h[1])}return s},CS=function(t,s,r){const[o,a,u,d]=s;switch(r){case 0:for(let h=0,m=t.length;h<m;h+=2)t[h]+=o,t[h+1]=d-t[h+1];break;case 90:for(let h=0,m=t.length;h<m;h+=2){const g=t[h];t[h]=t[h+1]+o,t[h+1]=g+a}break;case 180:for(let h=0,m=t.length;h<m;h+=2)t[h]=u-t[h],t[h+1]+=a;break;case 270:for(let h=0,m=t.length;h<m;h+=2){const g=t[h];t[h]=u-t[h+1],t[h+1]=d-g}break;default:throw new Error("Invalid rotation")}return t},NI=function(t,s,r){const[o,a,u,d]=s;switch(r){case 0:for(let h=0,m=t.length;h<m;h+=2)t[h]-=o,t[h+1]=d-t[h+1];break;case 90:for(let h=0,m=t.length;h<m;h+=2){const g=t[h];t[h]=t[h+1]-a,t[h+1]=g-o}break;case 180:for(let h=0,m=t.length;h<m;h+=2)t[h]=u-t[h],t[h+1]-=a;break;case 270:for(let h=0,m=t.length;h<m;h+=2){const g=t[h];t[h]=d-t[h+1],t[h+1]=u-g}break;default:throw new Error("Invalid rotation")}return t},jI=function(t,s,r,o){var m,g;const a=[],u=this.thickness/2,d=t*s+u,h=t*r+u;for(const x of this.paths){const v=[],w=[];for(let b=0,C=x.length;b<C;b++){const[E,N,k,P]=x[b];if(E[0]===P[0]&&E[1]===P[1]&&C===1){const ee=t*E[0]+d,J=t*E[1]+h;v.push(ee,J),w.push(ee,J);break}const R=t*E[0]+d,M=t*E[1]+h,O=t*N[0]+d,F=t*N[1]+h,D=t*k[0]+d,U=t*k[1]+h,K=t*P[0]+d,X=t*P[1]+h;b===0&&(v.push(R,M),w.push(R,M)),v.push(O,F,D,U,K,X),w.push(O,F),b===C-1&&w.push(K,X)}a.push({bezier:_(m=jt,So,CS).call(m,v,o,this.rotation),points:_(g=jt,So,CS).call(g,w,o,this.rotation)})}return a},NS=function(){let t=1/0,s=-1/0,r=1/0,o=-1/0;for(const a of this.paths)for(const[u,d,h,m]of a){const g=Ae.bezierBoundingBox(...u,...d,...h,...m);t=Math.min(t,g[0]),r=Math.min(r,g[1]),s=Math.max(s,g[2]),o=Math.max(o,g[3])}return[t,r,s,o]},Lx=function(){return f(this,nr)?Math.ceil(this.thickness*this.parentScale):0},wf=function(t=!1){if(this.isEmpty())return;if(!f(this,nr)){_(this,ue,pl).call(this);return}const s=_(this,ue,NS).call(this),r=_(this,ue,Lx).call(this);T(this,mc,Math.max(ct.MIN_SIZE,s[2]-s[0])),T(this,pc,Math.max(ct.MIN_SIZE,s[3]-s[1]));const o=Math.ceil(r+f(this,mc)*this.scaleFactor),a=Math.ceil(r+f(this,pc)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=o/u,this.height=a/d,this.setAspectRatio(o,a);const h=this.translationX,m=this.translationY;this.translationX=-s[0],this.translationY=-s[1],_(this,ue,Au).call(this),_(this,ue,pl).call(this),T(this,vc,o),T(this,bc,a),this.setDims(o,a);const g=t?r/this.scaleFactor/2:0;this.translate(h-this.translationX-g,m-this.translationY-g)},I(jt,So),Me(jt,"_defaultColor",null),Me(jt,"_defaultOpacity",1),Me(jt,"_defaultThickness",1),Me(jt,"_type","ink"),Me(jt,"_editorType",Ue.INK);let yS=jt;var Tt,bn,Na,ro,ja,Hd,fi,io,pi,_s,Wd,Ye,Sf,Af,Ix,kS,kI,Mx,TS,Dx,TI,PI;const Pf=class Pf extends ct{constructor(t){super({...t,name:"stampEditor"});I(this,Ye);I(this,Tt,null);I(this,bn,null);I(this,Na,null);I(this,ro,null);I(this,ja,null);I(this,Hd,"");I(this,fi,null);I(this,io,null);I(this,pi,null);I(this,_s,!1);I(this,Wd,!1);T(this,ro,t.bitmapUrl),T(this,ja,t.bitmapFile)}static initialize(t,s){ct.initialize(t,s)}static get supportedTypes(){return Je(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Je(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(Ue.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:a,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:o,width:a,height:u,channels:o.length/(a*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t,s;f(this,bn)&&(T(this,Tt,null),this._uiManager.imageManager.deleteId(f(this,bn)),(t=f(this,fi))==null||t.remove(),T(this,fi,null),(s=f(this,io))==null||s.disconnect(),T(this,io,null),f(this,pi)&&(clearTimeout(f(this,pi)),T(this,pi,null))),super.remove()}rebuild(){if(!this.parent){f(this,bn)&&_(this,Ye,Ix).call(this);return}super.rebuild(),this.div!==null&&(f(this,bn)&&f(this,fi)===null&&_(this,Ye,Ix).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(f(this,Na)||f(this,Tt)||f(this,ro)||f(this,ja)||f(this,bn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),f(this,Tt)?_(this,Ye,kS).call(this):_(this,Ye,Ix).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,s*o,this.width*r,this.height*o)}return this.div}copyCanvas(t,s,r=!1){var v;t||(t=224);const{width:o,height:a}=f(this,Tt),u=new Aw;let d=f(this,Tt),h=o,m=a,g=null;if(s){if(o>s||a>s){const F=Math.min(s/o,s/a);h=Math.floor(o*F),m=Math.floor(a*F)}g=document.createElement("canvas");const w=g.width=Math.ceil(h*u.sx),b=g.height=Math.ceil(m*u.sy);f(this,_s)||(d=_(this,Ye,Mx).call(this,w,b));const C=g.getContext("2d");C.filter=this._uiManager.hcmFilter;let E="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",N="#42414d");const k=15,P=k*u.sx,R=k*u.sy,M=new OffscreenCanvas(P*2,R*2),O=M.getContext("2d");O.fillStyle=E,O.fillRect(0,0,P*2,R*2),O.fillStyle=N,O.fillRect(0,0,P,R),O.fillRect(P,R,P,R),C.fillStyle=C.createPattern(M,"repeat"),C.fillRect(0,0,w,b),C.drawImage(d,0,0,d.width,d.height,0,0,w,b)}let x=null;if(r){let w,b;if(u.symmetric&&d.width<t&&d.height<t)w=d.width,b=d.height;else if(d=f(this,Tt),o>t||a>t){const N=Math.min(t/o,t/a);w=Math.floor(o*N),b=Math.floor(a*N),f(this,_s)||(d=_(this,Ye,Mx).call(this,w,b))}const E=new OffscreenCanvas(w,b).getContext("2d",{willReadFrequently:!0});E.drawImage(d,0,0,d.width,d.height,0,0,w,b),x={width:w,height:b,data:E.getImageData(0,0,w,b).data}}return{canvas:g,width:h,height:m,imageData:x}}getImageForAltText(){return f(this,fi)}static async deserialize(t,s,r){var b;let o=null;if(t instanceof $L){const{data:{rect:C,rotation:E,id:N,structParent:k,popupRef:P},container:R,parent:{page:{pageNumber:M}}}=t,O=R.querySelector("canvas"),F=r.imageManager.getFromCanvas(R.id,O);O.remove();const D=((b=await s._structTree.getAriaAttributes(`${iA}${N}`))==null?void 0:b.get("aria-label"))||"";o=t={annotationType:Ue.STAMP,bitmapId:F.id,bitmap:F.bitmap,pageIndex:M-1,rect:C.slice(0),rotation:E,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:k,popupRef:P}}const a=await super.deserialize(t,s,r),{rect:u,bitmap:d,bitmapUrl:h,bitmapId:m,isSvg:g,accessibilityData:x}=t;m&&r.imageManager.isValidId(m)?(T(a,bn,m),d&&T(a,Tt,d)):T(a,ro,h),T(a,_s,g);const[v,w]=a.pageDimensions;return a.width=(u[2]-u[0])/v,a.height=(u[3]-u[1])/w,a.annotationElementId=t.id||null,x&&(a.altTextData=x),a._initialData=o,T(a,Wd,!!o),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Ue.STAMP,bitmapId:f(this,bn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,_s),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=_(this,Ye,Dx).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:a}=this.serializeAltText(!1);if(!o&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const d=_(this,Ye,PI).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const u=f(this,_s)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(f(this,bn)))s.stamps.set(f(this,bn),{area:u,serialized:r}),r.bitmap=_(this,Ye,Dx).call(this,!1);else if(f(this,_s)){const d=s.stamps.get(f(this,bn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,Ye,Dx).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Tt=new WeakMap,bn=new WeakMap,Na=new WeakMap,ro=new WeakMap,ja=new WeakMap,Hd=new WeakMap,fi=new WeakMap,io=new WeakMap,pi=new WeakMap,_s=new WeakMap,Wd=new WeakMap,Ye=new WeakSet,Sf=function(t,s=!1){if(!t){this.remove();return}T(this,Tt,t.bitmap),s||(T(this,bn,t.id),T(this,_s,t.isSvg)),t.file&&T(this,Hd,t.file.name),_(this,Ye,kS).call(this)},Af=function(){if(T(this,Na,null),this._uiManager.enableWaiting(!1),!!f(this,fi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Tt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Tt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ix=function(){if(f(this,bn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,bn)).then(r=>_(this,Ye,Sf).call(this,r,!0)).finally(()=>_(this,Ye,Af).call(this));return}if(f(this,ro)){const r=f(this,ro);T(this,ro,null),this._uiManager.enableWaiting(!0),T(this,Na,this._uiManager.imageManager.getFromUrl(r).then(o=>_(this,Ye,Sf).call(this,o)).finally(()=>_(this,Ye,Af).call(this)));return}if(f(this,ja)){const r=f(this,ja);T(this,ja,null),this._uiManager.enableWaiting(!0),T(this,Na,this._uiManager.imageManager.getFromFile(r).then(o=>_(this,Ye,Sf).call(this,o)).finally(()=>_(this,Ye,Af).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Pf.supportedTypesStr;const s=this._uiManager._signal;T(this,Na,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,Ye,Sf).call(this,o)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>_(this,Ye,Af).call(this))),t.click()},kS=function(){const{div:t}=this;let{width:s,height:r}=f(this,Tt);const[o,a]=this.pageDimensions,u=.75;if(this.width)s=this.width*o,r=this.height*a;else if(s>u*o||r>u*a){const g=Math.min(u*o/s,u*a/r);s*=g,r*=g}const[d,h]=this.parentDimensions;this.setDims(s*d/o,r*h/a),this._uiManager.enableWaiting(!1);const m=T(this,fi,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),_(this,Ye,TS).call(this,s,r),_(this,Ye,TI).call(this),f(this,Wd)||(this.parent.addUndoableEditor(this),T(this,Wd,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,Hd)&&m.setAttribute("aria-label",f(this,Hd))},kI=function(t,s){var u;const[r,o]=this.parentDimensions;this.width=t/r,this.height=s/o,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,f(this,pi)!==null&&clearTimeout(f(this,pi)),T(this,pi,setTimeout(()=>{T(this,pi,null),_(this,Ye,TS).call(this,t,s)},200))},Mx=function(t,s){const{width:r,height:o}=f(this,Tt);let a=r,u=o,d=f(this,Tt);for(;a>2*t||u>2*s;){const h=a,m=u;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*s&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(a,u);g.getContext("2d").drawImage(d,0,0,h,m,0,0,a,u),d=g.transferToImageBitmap()}return d},TS=function(t,s){const r=new Aw,o=Math.ceil(t*r.sx),a=Math.ceil(s*r.sy),u=f(this,fi);if(!u||u.width===o&&u.height===a)return;u.width=o,u.height=a;const d=f(this,_s)?f(this,Tt):_(this,Ye,Mx).call(this,o,a),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,o,a)},Dx=function(t){if(t){if(f(this,_s)){const o=this._uiManager.imageManager.getSvgUrl(f(this,bn));if(o)return o}const s=document.createElement("canvas");return{width:s.width,height:s.height}=f(this,Tt),s.getContext("2d").drawImage(f(this,Tt),0,0),s.toDataURL()}if(f(this,_s)){const[s,r]=this.pageDimensions,o=Math.round(this.width*s*Fa.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Fa.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,a);return u.getContext("2d").drawImage(f(this,Tt),0,0,f(this,Tt).width,f(this,Tt).height,0,0,o,a),u.transferToImageBitmap()}return structuredClone(f(this,Tt))},TI=function(){this._uiManager._signal&&(T(this,io,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&_(this,Ye,kI).call(this,s.width,s.height)})),f(this,io).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=f(this,io))==null||t.disconnect(),T(this,io,null)},{once:!0}))},PI=function(t){var h;const{rect:s,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,a=t.rect.every((m,g)=>Math.abs(m-s[g])<1),u=t.pageIndex===r,d=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===o;return{isSame:a&&u&&d,isSameAltText:d}},Me(Pf,"_type","stamp"),Me(Pf,"_editorType",Ue.STAMP);let jS=Pf;var wc,Gd,mi,ka,oo,Rs,Ta,Kd,qd,Mn,ao,je,Pa,An,_I,_S,RS,LS,Ox;const yr=class yr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:a,drawLayer:u,textLayer:d,viewport:h,l10n:m}){I(this,An);I(this,wc);I(this,Gd,!1);I(this,mi,null);I(this,ka,null);I(this,oo,null);I(this,Rs,new Map);I(this,Ta,!1);I(this,Kd,!1);I(this,qd,!1);I(this,Mn,null);I(this,ao,null);I(this,je);const g=[...f(yr,Pa).values()];if(!yr._initialized){yr._initialized=!0;for(const x of g)x.initialize(m,e)}e.registerEditorTypes(g),T(this,je,e),this.pageIndex=t,this.div=s,T(this,wc,o),T(this,mi,a),this.viewport=h,T(this,Mn,d),this.drawLayer=u,this._structTree=r,f(this,je).addLayer(this)}get isEmpty(){return f(this,Rs).size===0}get isInvisible(){return this.isEmpty&&f(this,je).getMode()===Ue.NONE}updateToolbar(e){f(this,je).updateToolbar(e)}updateMode(e=f(this,je).getMode()){switch(_(this,An,Ox).call(this),e){case Ue.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ue.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ue.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of f(yr,Pa).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,Mn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(f(this,je).getMode()!==Ue.INK)return;if(!e){for(const s of f(this,Rs).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){f(this,je).setEditingState(e)}addCommands(e){f(this,je).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,mi))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of f(this,Rs).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(f(this,je).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!f(this,mi))return;const t=f(this,mi).getEditableAnnotations();for(const s of t){if(s.hide(),f(this,je).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;T(this,qd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of f(this,Rs).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(f(this,mi)){const o=f(this,mi).getEditableAnnotations();for(const a of o){const{id:u}=a.data;if(f(this,je).isDeletedAnnotationElement(u))continue;let d=t.get(u);if(d){d.resetAnnotationElement(a),d.show(!1),a.show();continue}d=e.get(u),d&&(f(this,je).addChangedExistingAnnotation(d),d.renderAnnotationElement(a)&&d.show(!1)),a.show()}}_(this,An,Ox).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const o of f(yr,Pa).values())s.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,qd,!1)}getEditableAnnotation(e){var t;return((t=f(this,mi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,je).getActive()!==e&&f(this,je).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=f(this,Mn))!=null&&e.div&&!f(this,ao)){T(this,ao,new AbortController);const t=f(this,je).combinedSignal(f(this,ao));f(this,Mn).div.addEventListener("pointerdown",_(this,An,_I).bind(this),{signal:t}),f(this,Mn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,Mn))!=null&&e.div&&f(this,ao)&&(f(this,ao).abort(),T(this,ao,null),f(this,Mn).div.classList.remove("highlighting"))}enableClick(){if(f(this,ka))return;T(this,ka,new AbortController);const e=f(this,je).combinedSignal(f(this,ka));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=f(this,ka))==null||e.abort(),T(this,ka,null)}attach(e){f(this,Rs).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,je).isDeletedAnnotationElement(t)&&f(this,je).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,Rs).delete(e.id),(t=f(this,wc))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,qd)&&e.annotationElementId&&f(this,je).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,je).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,f(this,Kd)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,je).addDeletedAnnotationElement(e.annotationElementId),ct.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,je).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),f(this,je).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,oo)&&(e._focusEventsAllowed=!1,T(this,oo,setTimeout(()=>{T(this,oo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,je)._signal}),t.focus())},0))),e._structTreeParentId=(s=f(this,wc))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return f(this,je).getId()}combinedSignal(e){return f(this,je).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=f(this,An,_S))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){f(this,je).updateToolbar(e),f(this,je).updateMode(e);const{offsetX:s,offsetY:r}=_(this,An,LS).call(this),o=this.getNextId(),a=_(this,An,RS).call(this,{parent:this,id:o,x:s,y:r,uiManager:f(this,je),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=f(yr,Pa).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,je)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),o=_(this,An,RS).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:f(this,je),isCentered:t,...s});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(_(this,An,LS).call(this),!0)}setSelected(e){f(this,je).setSelected(e)}toggleSelected(e){f(this,je).toggleSelected(e)}unselect(e){f(this,je).unselect(e)}pointerup(e){const{isMac:t}=Yn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&f(this,Ta)){if(T(this,Ta,!1),!f(this,Gd)){T(this,Gd,!0);return}if(f(this,je).getMode()===Ue.STAMP){f(this,je).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(f(this,je).getMode()===Ue.HIGHLIGHT&&this.enableTextSelection(),f(this,Ta)){T(this,Ta,!1);return}const{isMac:t}=Yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;T(this,Ta,!0);const s=f(this,je).getActive();T(this,Gd,!s||s.isEmpty())}findNewParent(e,t,s){const r=f(this,je).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=f(this,je).getActive())==null?void 0:e.parent)===this&&(f(this,je).commitOrRemove(),f(this,je).setActiveEditor(null)),f(this,oo)&&(clearTimeout(f(this,oo)),T(this,oo,null));for(const s of f(this,Rs).values())(t=f(this,wc))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,f(this,Rs).clear(),f(this,je).removeLayer(this)}render({viewport:e}){this.viewport=e,kc(this.div,e);for(const t of f(this,je).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,je).commitOrRemove(),_(this,An,Ox).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,kc(this.div,{rotation:s}),t!==s)for(const r of f(this,Rs).values())r.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,je).viewParameters.realScale}};wc=new WeakMap,Gd=new WeakMap,mi=new WeakMap,ka=new WeakMap,oo=new WeakMap,Rs=new WeakMap,Ta=new WeakMap,Kd=new WeakMap,qd=new WeakMap,Mn=new WeakMap,ao=new WeakMap,je=new WeakMap,Pa=new WeakMap,An=new WeakSet,_I=function(e){f(this,je).unselectAll();const{target:t}=e;if(t===f(this,Mn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&f(this,Mn).div.contains(t)){const{isMac:s}=Yn.platform;if(e.button!==0||e.ctrlKey&&s)return;f(this,je).showAllEditors("highlight",!0,!0),f(this,Mn).div.classList.add("free"),this.toggleDrawing(),oy.startHighlighting(this,f(this,je).direction==="ltr",{target:f(this,Mn).div,x:e.x,y:e.y}),f(this,Mn).div.addEventListener("pointerup",()=>{f(this,Mn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,je)._signal}),e.preventDefault()}},_S=function(){return f(yr,Pa).get(f(this,je).getMode())},RS=function(e){const t=f(this,An,_S);return t?new t.prototype.constructor(e):null},LS=function(){const{x:e,y:t,width:s,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),a=Math.max(0,t),u=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,t+r),h=(o+u)/2-e,m=(a+d)/2-t,[g,x]=this.viewport.rotation%180===0?[h,m]:[m,h];return{offsetX:g,offsetY:x}},Ox=function(){T(this,Kd,!0);for(const e of f(this,Rs).values())e.isEmpty()&&e.remove();T(this,Kd,!1)},Me(yr,"_initialized",!1),I(yr,Pa,new Map([cS,yS,jS,oy].map(e=>[e._editorType,e])));let PS=yr;var gi,am,Wt,lo,lm,MS,Lc,DS,RI;const xn=class xn{constructor({pageIndex:e}){I(this,Lc);I(this,gi,null);I(this,am,0);I(this,Wt,new Map);I(this,lo,new Map);this.pageIndex=e}setParent(e){if(!f(this,gi)){T(this,gi,e);return}if(f(this,gi)!==e){if(f(this,Wt).size>0)for(const t of f(this,Wt).values())t.remove(),e.append(t);T(this,gi,e)}}static get _svgFactory(){return Je(this,"_svgFactory",new mA)}draw(e,t,s,r=!1){const o=ln(this,am)._++,a=_(this,Lc,DS).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const u=xn._svgFactory.createElement("defs");a.append(u);const d=xn._svgFactory.createElement("path");u.append(d);const h=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",h),d.setAttribute("d",e.toSVGPath()),r&&f(this,lo).set(o,d);const m=_(this,Lc,RI).call(this,u,h),g=xn._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",t),a.setAttribute("fill-opacity",s),g.setAttribute("href",`#${h}`),f(this,Wt).set(o,a),{id:o,clipPathId:`url(#${m})`}}drawOutline(e){const t=ln(this,am)._++,s=_(this,Lc,DS).call(this,e.box);s.classList.add(...e.classNamesForOutlining);const r=xn._svgFactory.createElement("defs");s.append(r);const o=xn._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",a),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(e.mustRemoveSelfIntersections){const m=xn._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${t}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const g=xn._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const x=xn._svgFactory.createElement("use");m.append(x),x.setAttribute("href",`#${a}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const d=xn._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${a}`),u&&d.setAttribute("mask",`url(#${u})`);const h=d.cloneNode();return s.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),f(this,Wt).set(t,s),t}finalizeLine(e,t){const s=f(this,lo).get(e);f(this,lo).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){f(this,Wt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){f(this,lo).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;_(s=xn,lm,MS).call(s,f(this,Wt).get(e),t)}show(e,t){f(this,Wt).get(e).classList.toggle("hidden",!t)}rotate(e,t){f(this,Wt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){f(this,Wt).get(e).setAttribute("fill",t)}changeOpacity(e,t){f(this,Wt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){f(this,Wt).get(e).classList.add(t)}removeClass(e,t){f(this,Wt).get(e).classList.remove(t)}getSVGRoot(e){return f(this,Wt).get(e)}remove(e){f(this,lo).delete(e),f(this,gi)!==null&&(f(this,Wt).get(e).remove(),f(this,Wt).delete(e))}destroy(){T(this,gi,null);for(const e of f(this,Wt).values())e.remove();f(this,Wt).clear(),f(this,lo).clear()}};gi=new WeakMap,am=new WeakMap,Wt=new WeakMap,lo=new WeakMap,lm=new WeakSet,MS=function(e,{x:t=0,y:s=0,width:r=1,height:o=1}={}){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*o}%`},Lc=new WeakSet,DS=function(e){var s;const t=xn._svgFactory.create(1,1,!0);return f(this,gi).append(t),t.setAttribute("aria-hidden",!0),_(s=xn,lm,MS).call(s,t,e),t},RI=function(e,t){const s=xn._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=xn._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},I(xn,lm);let IS=xn;var sK=Oe.AbortException,rK=Oe.AnnotationEditorLayer,iK=Oe.AnnotationEditorParamsType,oK=Oe.AnnotationEditorType,aK=Oe.AnnotationEditorUIManager,LI=Oe.AnnotationLayer,II=Oe.AnnotationMode,lK=Oe.ColorPicker,cK=Oe.DOMSVGFactory,uK=Oe.DrawLayer,dK=Oe.FeatureTest,xA=Oe.GlobalWorkerOptions,hK=Oe.ImageKind,fK=Oe.InvalidPDFException,pK=Oe.MissingPDFException,mK=Oe.OPS,gK=Oe.OutputScale,xK=Oe.PDFDataRangeTransport,yK=Oe.PDFDateString,vK=Oe.PDFWorker,bK=Oe.PasswordResponses,wK=Oe.PermissionFlag,SK=Oe.PixelsPerInch,AK=Oe.RenderingCancelledException,MI=Oe.TextLayer,EK=Oe.UnexpectedResponseException,CK=Oe.Util,NK=Oe.VerbosityLevel,jK=Oe.XfaLayer,kK=Oe.build,TK=Oe.createValidAbsoluteUrl,PK=Oe.fetchData,DI=Oe.getDocument,_K=Oe.getFilenameFromUrl,RK=Oe.getPdfFilenameFromUrl,LK=Oe.getXfaPageViewport,IK=Oe.isDataScheme,MK=Oe.isPdfFile,DK=Oe.noContextMenu,OK=Oe.normalizeUnicode,FK=Oe.setLayerDimensions,BK=Oe.shadow,OI=Oe.version;const $K=Object.freeze(Object.defineProperty({__proto__:null,AbortException:sK,AnnotationEditorLayer:rK,AnnotationEditorParamsType:iK,AnnotationEditorType:oK,AnnotationEditorUIManager:aK,AnnotationLayer:LI,AnnotationMode:II,ColorPicker:lK,DOMSVGFactory:cK,DrawLayer:uK,FeatureTest:dK,GlobalWorkerOptions:xA,ImageKind:hK,InvalidPDFException:fK,MissingPDFException:pK,OPS:mK,OutputScale:gK,PDFDataRangeTransport:xK,PDFDateString:yK,PDFWorker:vK,PasswordResponses:bK,PermissionFlag:wK,PixelsPerInch:SK,RenderingCancelledException:AK,TextLayer:MI,UnexpectedResponseException:EK,Util:CK,VerbosityLevel:NK,XfaLayer:jK,build:kK,createValidAbsoluteUrl:TK,fetchData:PK,getDocument:DI,getFilenameFromUrl:_K,getPdfFilenameFromUrl:RK,getXfaPageViewport:LK,isDataScheme:IK,isPdfFile:MK,noContextMenu:DK,normalizeUnicode:OK,setLayerDimensions:FK,shadow:BK,version:OI},Symbol.toStringTag,{value:"Module"}));var cn=function(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,o;s<r;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return n.concat(o||Array.prototype.slice.call(e))},VK=["onCopy","onCut","onPaste"],UK=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],zK=["onFocus","onBlur"],HK=["onInput","onInvalid","onReset","onSubmit"],WK=["onLoad","onError"],GK=["onKeyDown","onKeyPress","onKeyUp"],KK=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],qK=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],XK=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],YK=["onSelect"],QK=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],JK=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],ZK=["onScroll"],e9=["onWheel"],t9=["onAnimationStart","onAnimationEnd","onAnimationIteration"],n9=["onTransitionEnd"],s9=["onToggle"],r9=["onChange"],i9=cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn([],VK,!0),UK,!0),zK,!0),HK,!0),WK,!0),GK,!0),KK,!0),qK,!0),XK,!0),YK,!0),QK,!0),JK,!0),ZK,!0),e9,!0),t9,!0),n9,!0),r9,!0),s9,!0);function FI(n,e){var t={};return i9.forEach(function(s){var r=n[s];r&&(e?t[s]=function(o){return r(o,e(s))}:t[s]=r)}),t}function Em(n){var e=!1,t=new Promise(function(s,r){n.then(function(o){return!e&&s(o)}).catch(function(o){return!e&&r(o)})});return{promise:t,cancel:function(){e=!0}}}var o9="Invariant failed";function pt(n,e){if(!n)throw new Error(o9)}var kb,eT;function a9(){if(eT)return kb;eT=1;var n=function(){};return kb=n,kb}var l9=a9();const On=Ey(l9);var tT=Object.prototype.hasOwnProperty;function nT(n,e,t){for(t of n.keys())if(Du(t,e))return t}function Du(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Du(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=nT(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=nT(e,r),!r)||!Du(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(tT.call(n,t)&&++s&&!tT.call(e,t)||!(t in e)||!Du(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}const BI=A.createContext(null);function Ou({children:n,type:e}){return c.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const c9="noopener noreferrer nofollow";class u9{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){pt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{pt(this.pdfDocument),pt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pt(Array.isArray(t));const s=t[0];new Promise(r=>{pt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{pt(!1)}):typeof s=="number"?r(s):pt(!1)}).then(r=>{const o=r+1;pt(this.pdfViewer),pt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;pt(this.pdfViewer),pt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||c9,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const sT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Qy=typeof window<"u",$I=Qy&&window.location.protocol==="file:";function d9(n){return typeof n<"u"}function ll(n){return d9(n)&&n!==null}function h9(n){return typeof n=="string"}function f9(n){return n instanceof ArrayBuffer}function p9(n){return pt(Qy),n instanceof Blob}function OS(n){return h9(n)&&/^data:/.test(n)}function rT(n){pt(OS(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function m9(){return Qy&&window.devicePixelRatio||1}const VI="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function iT(){On(!$I,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${VI}`)}function g9(){On(!$I,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${VI}`)}function _c(n){n!=null&&n.cancel&&n.cancel()}function FS(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function x9(n){return n.name==="RenderingCancelledException"}function y9(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}function v9(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Zd(){return A.useReducer(v9,{value:void 0,error:void 0})}var b9=function(n,e,t,s){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function u(m){try{h(s.next(m))}catch(g){a(g)}}function d(m){try{h(s.throw(m))}catch(g){a(g)}}function h(m){m.done?o(m.value):r(m.value).then(u,d)}h((s=s.apply(n,e||[])).next())})},oT=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const{PDFDataRangeTransport:w9}=$K,S9=(n,e)=>{switch(e){case sT.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case sT.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function aT(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const A9=A.forwardRef(function(e,t){var{children:s,className:r,error:o="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:u,file:d,inputRef:h,imageResourcesPath:m,loading:g="Loading PDF…",noData:x="No PDF file specified.",onItemClick:v,onLoadError:w,onLoadProgress:b,onLoadSuccess:C,onPassword:E=S9,onSourceError:N,onSourceSuccess:k,options:P,renderMode:R,rotate:M}=e,O=oT(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[F,D]=Zd(),{value:U,error:K}=F,[X,ee]=Zd(),{value:J,error:ae}=X,Y=A.useRef(new u9),G=A.useRef([]),z=A.useRef(void 0),te=A.useRef(void 0);d&&d!==z.current&&aT(d)&&(On(!Du(d,z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),z.current=d),P&&P!==te.current&&(On(!Du(P,te.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),te.current=P);const ne=A.useRef({scrollPageIntoView:Re=>{const{dest:qe,pageNumber:ft,pageIndex:Xe=ft-1}=Re;if(v){v({dest:qe,pageIndex:Xe,pageNumber:ft});return}const qt=G.current[Xe];if(qt){qt.scrollIntoView();return}On(!1,`An internal link leading to page ${ft} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(t,()=>({linkService:Y,pages:G,viewer:ne}),[]);function $(){k&&k()}function Z(){K&&(On(!1,K.toString()),N&&N(K))}function he(){D({type:"RESET"})}A.useEffect(he,[d,D]);const ve=A.useCallback(()=>b9(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return OS(d)?{data:rT(d)}:(iT(),{url:d});if(d instanceof w9)return{range:d};if(f9(d))return{data:d};if(Qy&&p9(d))return{data:yield y9(d)};if(pt(typeof d=="object"),pt(aT(d)),"url"in d&&typeof d.url=="string"){if(OS(d.url)){const{url:Re}=d,qe=oT(d,["url"]),ft=rT(Re);return Object.assign({data:ft},qe)}iT()}return d}),[d]);A.useEffect(()=>{const Re=Em(ve());return Re.promise.then(qe=>{D({type:"RESOLVE",value:qe})}).catch(qe=>{D({type:"REJECT",error:qe})}),()=>{_c(Re)}},[ve,D]),A.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){Z();return}$()}},[U]);function Ee(){J&&(C&&C(J),G.current=new Array(J.numPages),Y.current.setDocument(J))}function ye(){ae&&(On(!1,ae.toString()),w&&w(ae))}A.useEffect(function(){ee({type:"RESET"})},[ee,U]),A.useEffect(function(){if(!U)return;const qe=P?Object.assign(Object.assign({},U),P):U,ft=DI(qe);b&&(ft.onProgress=b),E&&(ft.onPassword=E);const Xe=ft,qt=Xe.promise.then(es=>{ee({type:"RESOLVE",value:es})}).catch(es=>{Xe.destroyed||ee({type:"REJECT",error:es})});return()=>{qt.finally(()=>Xe.destroy())}},[P,ee,U]),A.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){ye();return}Ee()}},[J]),A.useEffect(function(){Y.current.setViewer(ne.current),Y.current.setExternalLinkRel(a),Y.current.setExternalLinkTarget(u)},[a,u]);const se=A.useCallback((Re,qe)=>{G.current[Re]=qe},[]),me=A.useCallback(Re=>{delete G.current[Re]},[]),Ne=A.useMemo(()=>({imageResourcesPath:m,linkService:Y.current,onItemClick:v,pdf:J,registerPage:se,renderMode:R,rotate:M,unregisterPage:me}),[m,v,J,se,R,M,me]),ce=A.useMemo(()=>FI(O,()=>J),[O,J]);function Fe(){return c.jsx(BI.Provider,{value:Ne,children:s})}function He(){return d?J==null?c.jsx(Ou,{type:"loading",children:typeof g=="function"?g():g}):J===!1?c.jsx(Ou,{type:"error",children:typeof o=="function"?o():o}):Fe():c.jsx(Ou,{type:"no-data",children:typeof x=="function"?x():x})}return c.jsx("div",Object.assign({className:mm("react-pdf__Document",r),ref:h,style:{"--scale-factor":"1"}},ce,{children:He()}))});function UI(){return A.useContext(BI)}function zI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(o){t.forEach(function(a){typeof a=="function"?a(o):a&&(a.current=o)})}}const HI=A.createContext(null),WI={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},E9=/^H(\d+)$/;function C9(n){return n in WI}function Jy(n){return"children"in n}function GI(n){return Jy(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function N9(n){const e={};if(Jy(n)){const{role:t}=n,s=t.match(E9);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(C9(t)){const r=WI[t];r&&(e.role=r)}}return e}function KI(n){const e={};if(Jy(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),GI(n)){const[t]=n.children;if(t){const s=KI(t);return Object.assign(Object.assign({},e),s)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function j9(n){return n?Object.assign(Object.assign({},N9(n)),KI(n)):null}function qI({className:n,node:e}){const t=A.useMemo(()=>j9(e),[e]),s=A.useMemo(()=>!Jy(e)||GI(e)?null:e.children.map((r,o)=>c.jsx(qI,{node:r},o)),[e]);return c.jsx("span",Object.assign({className:n},t,{children:s}))}function Zy(){return A.useContext(HI)}function k9(){const n=Zy();pt(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=Zd(),{value:o,error:a}=s,{customTextRenderer:u,page:d}=n;function h(){o&&t&&t(o)}function m(){a&&(On(!1,a.toString()),e&&e(a))}return A.useEffect(function(){r({type:"RESET"})},[r,d]),A.useEffect(function(){if(u||!d)return;const x=Em(d.getStructTree()),v=x;return x.promise.then(w=>{r({type:"RESOLVE",value:w})}).catch(w=>{r({type:"REJECT",error:w})}),()=>_c(v)},[u,d,r]),A.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}h()}},[o]),o?c.jsx(qI,{className:"react-pdf__Page__structTree structTree",node:o}):null}const lT=II;function T9(n){const e=Zy();pt(e);const t=Object.assign(Object.assign({},e),n),{_className:s,canvasBackground:r,devicePixelRatio:o=m9(),onRenderError:a,onRenderSuccess:u,page:d,renderForms:h,renderTextLayer:m,rotate:g,scale:x}=t,{canvasRef:v}=n;pt(d);const w=A.useRef(null);function b(){d&&u&&u(FS(d,x))}function C(P){x9(P)||(On(!1,P.toString()),a&&a(P))}const E=A.useMemo(()=>d.getViewport({scale:x*o,rotation:g}),[o,d,g,x]),N=A.useMemo(()=>d.getViewport({scale:x,rotation:g}),[d,g,x]);A.useEffect(function(){if(!d)return;d.cleanup();const{current:R}=w;if(!R)return;R.width=E.width,R.height=E.height,R.style.width=`${Math.floor(N.width)}px`,R.style.height=`${Math.floor(N.height)}px`,R.style.visibility="hidden";const M={annotationMode:h?lT.ENABLE_FORMS:lT.ENABLE,canvasContext:R.getContext("2d",{alpha:!1}),viewport:E};r&&(M.background=r);const O=d.render(M),F=O;return O.promise.then(()=>{R.style.visibility="",b()}).catch(C),()=>_c(F)},[r,d,h,E,N]);const k=A.useCallback(()=>{const{current:P}=w;P&&(P.width=0,P.height=0)},[]);return A.useEffect(()=>k,[k]),c.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:zI(v,w),style:{display:"block",userSelect:"none"},children:m?c.jsx(k9,{}):null})}function P9(n){return"str"in n}function _9(){const n=Zy();pt(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:a,pageIndex:u,pageNumber:d,rotate:h,scale:m}=n;pt(a);const[g,x]=Zd(),{value:v,error:w}=g,b=A.useRef(null);On(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){v&&s&&s(v)}function E(){w&&(On(!1,w.toString()),t&&t(w))}A.useEffect(function(){x({type:"RESET"})},[a,x]),A.useEffect(function(){if(!a)return;const F=Em(a.getTextContent()),D=F;return F.promise.then(U=>{x({type:"RESOLVE",value:U})}).catch(U=>{x({type:"REJECT",error:U})}),()=>_c(D)},[a,x]),A.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}C()}},[v]);const N=A.useCallback(()=>{o&&o()},[o]),k=A.useCallback(O=>{On(!1,O.toString()),r&&r(O)},[r]);function P(){const O=b.current;O&&O.classList.add("selecting")}function R(){const O=b.current;O&&O.classList.remove("selecting")}const M=A.useMemo(()=>a.getViewport({scale:m,rotation:h}),[a,h,m]);return A.useLayoutEffect(function(){if(!a||!v)return;const{current:F}=b;if(!F)return;F.innerHTML="";const D=a.streamTextContent({includeMarkedContent:!0}),U={container:F,textContentSource:D,viewport:M},K=new MI(U),X=K;return K.render().then(()=>{const ee=document.createElement("div");ee.className="endOfContent",F.append(ee);const J=F.querySelectorAll('[role="presentation"]');if(e){let ae=0;v.items.forEach((Y,G)=>{if(!P9(Y))return;const z=J[ae];if(!z)return;const te=e(Object.assign({pageIndex:u,pageNumber:d,itemIndex:G},Y));z.innerHTML=te,ae+=Y.str&&Y.hasEOL?2:1})}N()}).catch(k),()=>_c(X)},[e,k,N,a,u,d,v,M]),c.jsx("div",{className:mm("react-pdf__Page__textContent","textLayer"),onMouseUp:R,onMouseDown:P,ref:b})}function R9(){const n=UI(),e=Zy();pt(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:h,pdf:m,renderForms:g,rotate:x,scale:v=1}=t;pt(m),pt(h),pt(r);const[w,b]=Zd(),{value:C,error:E}=w,N=A.useRef(null);On(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function k(){C&&a&&a(C)}function P(){E&&(On(!1,E.toString()),o&&o(E))}A.useEffect(function(){b({type:"RESET"})},[b,h]),A.useEffect(function(){if(!h)return;const D=Em(h.getAnnotations()),U=D;return D.promise.then(K=>{b({type:"RESOLVE",value:K})}).catch(K=>{b({type:"REJECT",error:K})}),()=>{_c(U)}},[b,h]),A.useEffect(()=>{if(C!==void 0){if(C===!1){P();return}k()}},[C]);function R(){d&&d()}function M(F){On(!1,`${F}`),u&&u(F)}const O=A.useMemo(()=>h.getViewport({scale:v,rotation:x}),[h,x,v]);return A.useEffect(function(){if(!m||!h||!r||!C)return;const{current:D}=N;if(!D)return;const U=O.clone({dontFlip:!0}),K={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:D,l10n:null,page:h,structTreeLayer:null,viewport:U},X={annotations:C,annotationStorage:m.annotationStorage,div:D,imageResourcesPath:s,linkService:r,page:h,renderForms:g,viewport:U};D.innerHTML="";try{new LI(K).render(X),R()}catch(ee){M(ee)}return()=>{}},[C,s,r,h,m,g,O]),c.jsx("div",{className:mm("react-pdf__Page__annotations","annotationLayer"),ref:N})}var L9=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const cT=1;function I9(n){const e=UI(),t=Object.assign(Object.assign({},e),n),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:a,children:u,className:d,customRenderer:h,customTextRenderer:m,devicePixelRatio:g,error:x="Failed to load the page.",height:v,inputRef:w,loading:b="Loading page…",noData:C="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:N,onGetStructTreeError:k,onGetStructTreeSuccess:P,onGetTextError:R,onGetTextSuccess:M,onLoadError:O,onLoadSuccess:F,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:U,onRenderError:K,onRenderSuccess:X,onRenderTextLayerError:ee,onRenderTextLayerSuccess:J,pageIndex:ae,pageNumber:Y,pdf:G,registerPage:z,renderAnnotationLayer:te=!0,renderForms:ne=!1,renderMode:$="canvas",renderTextLayer:Z=!0,rotate:he,scale:ve=cT,unregisterPage:Ee,width:ye}=t,se=L9(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[me,Ne]=Zd(),{value:ce,error:Fe}=me,He=A.useRef(null);pt(G);const Re=ll(Y)?Y-1:ae??null,qe=Y??(ll(ae)?ae+1:null),ft=he??(ce?ce.rotate:null),Xe=A.useMemo(()=>{if(!ce)return null;let $s=1;const Vs=ve??cT;if(ye||v){const Ur=ce.getViewport({scale:1,rotation:ft});ye?$s=ye/Ur.width:v&&($s=v/Ur.height)}return Vs*$s},[v,ce,ft,ve,ye]);A.useEffect(function(){return()=>{ll(Re)&&r&&Ee&&Ee(Re)}},[r,G,Re,Ee]);function qt(){if(F){if(!ce||!Xe)return;F(FS(ce,Xe))}if(r&&z){if(!ll(Re)||!He.current)return;z(Re,He.current)}}function es(){Fe&&(On(!1,Fe.toString()),O&&O(Fe))}A.useEffect(function(){Ne({type:"RESET"})},[Ne,G,Re]),A.useEffect(function(){if(!G||!qe)return;const Vs=Em(G.getPage(qe)),Ur=Vs;return Vs.promise.then(fe=>{Ne({type:"RESOLVE",value:fe})}).catch(fe=>{Ne({type:"REJECT",error:fe})}),()=>_c(Ur)},[Ne,G,qe]),A.useEffect(()=>{if(ce!==void 0){if(ce===!1){es();return}qt()}},[ce,Xe]);const vs=A.useMemo(()=>ce&&ll(Re)&&qe&&ll(ft)&&ll(Xe)?{_className:s,canvasBackground:o,customTextRenderer:m,devicePixelRatio:g,onGetAnnotationsError:E,onGetAnnotationsSuccess:N,onGetStructTreeError:k,onGetStructTreeSuccess:P,onGetTextError:R,onGetTextSuccess:M,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:U,onRenderError:K,onRenderSuccess:X,onRenderTextLayerError:ee,onRenderTextLayerSuccess:J,page:ce,pageIndex:Re,pageNumber:qe,renderForms:ne,renderTextLayer:Z,rotate:ft,scale:Xe}:null,[s,o,m,g,E,N,k,P,R,M,D,U,K,X,ee,J,ce,Re,qe,ne,Z,ft,Xe]),Vr=A.useMemo(()=>FI(se,()=>ce&&(Xe?FS(ce,Xe):void 0)),[se,ce,Xe]),$n=`${Re}@${Xe}/${ft}`;function Ka(){switch($){case"custom":return pt(h),c.jsx(h,{},`${$n}_custom`);case"none":return null;case"canvas":default:return c.jsx(T9,{canvasRef:a},`${$n}_canvas`)}}function Fc(){return Z?c.jsx(_9,{},`${$n}_text`):null}function Bc(){return te?c.jsx(R9,{},`${$n}_annotations`):null}function $c(){return c.jsxs(HI.Provider,{value:vs,children:[Ka(),Fc(),Bc(),u]})}function Vc(){return qe?G===null||ce===void 0||ce===null?c.jsx(Ou,{type:"loading",children:typeof b=="function"?b():b}):G===!1||ce===!1?c.jsx(Ou,{type:"error",children:typeof x=="function"?x():x}):$c():c.jsx(Ou,{type:"no-data",children:typeof C=="function"?C():C})}return c.jsx("div",Object.assign({className:mm(s,d),"data-page-number":qe,ref:zI(w,He),style:{"--scale-factor":`${Xe}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Vr,{children:Vc()}))}g9();xA.workerSrc="pdf.worker.mjs";function mu({label:n,checked:e,onToggle:t}){return c.jsxs("div",{onClick:t,className:"flex items-center justify-between p-3 border rounded-md cursor-pointer",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${e?"bg-[#0a2d6b]":"border border-gray-300"}`,children:e&&c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M5 12L10 17L19 8",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),c.jsx("div",{children:n})]}),c.jsx("div",{children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M9 18L15 12L9 6",stroke:"#999",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function M9({consents:n,toggleAll:e,toggleConsent:t}){return c.jsxs("div",{className:"space-y-4",children:[c.jsx(mu,{label:"전체동의",checked:n.all,onToggle:e}),c.jsx(mu,{label:"[필수] 개인정보 수집/이용 동의",checked:n.privacy,onToggle:()=>t("privacy")}),c.jsx(mu,{label:"[필수] 고유식별정보 처리 동의",checked:n.identification,onToggle:()=>t("identification")}),c.jsx(mu,{label:"[필수] 통신사 이용약관 동의",checked:n.telecom,onToggle:()=>t("telecom")}),c.jsx(mu,{label:"[필수] 서비스 이용약관 동의",checked:n.service,onToggle:()=>t("service")}),c.jsx(mu,{label:"[필수] 개인정보 제 3자 제공 동의",checked:n.thirdParty,onToggle:()=>t("thirdParty")})]})}function D9({protectionConfirmed:n,onConfirm:e,onDeny:t}){return c.jsxs("div",{className:"mt-8",children:[c.jsx("h3",{className:"text-lg font-medium mb-4",children:"예금자 보호 안내 및 이해 확인"}),c.jsxs("div",{className:"border p-4 rounded-md mb-4",children:[c.jsx("img",{src:"/finance-mark.png",alt:"Finance Mark",className:"w-16 h-16 object-contain mx-auto"}),c.jsx("p",{className:"text-sm",children:'이 예금은 예금자보호법에 따라 원금과 소정의 이자를 합하여 1인당 "5천만원까지"(본 은행의 여타 보호상품과 합산) 보호됩니다.'})]}),c.jsxs("p",{className:"mb-4",children:["예금자 보호에 대한 내용을  ",c.jsx("span",{className:"font-bold",children:"충분"}),"히 ",c.jsx("span",{className:"font-bold",children:"이해"}),"하고 확인하셨나요?"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:t,className:"flex-1 py-3 border border-[#0a2d6b] rounded-md text-center",children:"아니오"}),c.jsx("button",{onClick:e,className:`flex-1 py-3 rounded-md text-center ${n?"bg-[#0a2d6b] text-white":"bg-gray-200 border border-gray-200 text-gray-500"}`,children:"네"})]})]})}const O9="http://localhost:8080";async function F9(n){const e=sessionStorage.getItem("accessToken");if(!e)throw new Error("인증 토큰이 없습니다.");const t=await fetch(`${O9}/api/product/subscribe`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const s=await t.text();throw new Error(s||"상품 가입(구독) 요청 실패")}return t.json()}xA.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${OI}/pdf.worker.min.js`;function B9(){var Vs,Ur;const n=ke(),e=et(),t=xs(),s=Number(t.productId),[r,o]=A.useState(""),a=sessionStorage.getItem("accessToken"),u=uP(a),[d,h]=A.useState(0),[m,g]=A.useState(1),x=A.useRef(null),[v,w]=A.useState(0),[b,C]=A.useState(""),[E,N]=A.useState(""),[k,P]=A.useState(!1),[R,M]=A.useState(!1),[O,F]=A.useState(null),[D,U]=A.useState(null),[K,X]=A.useState(!1),[ee,J]=A.useState(!1),[ae,Y]=A.useState(""),[G,z]=A.useState("NONE"),[te,ne]=A.useState(""),$=((Vs=e.state)==null?void 0:Vs.signupState)||e.state||{},{productName:Z,bankName:he,tags:ve,productType:Ee,imageUrl:ye,guideFile:se,interestRange:me,step:Ne}=$;if(!$.productId)return alert("잘못된 접근입니다. 상세페이지로 이동합니다."),c.jsx(Ny,{to:`/token/onsale/products/${s||""}`,replace:!0});const[ce,Fe]=A.useState(()=>Ne||1);A.useEffect(()=>{(async()=>{try{if(u){const Xt=await fm();o(Xt.storeName)}else{const Xt=await t1();o(Xt.name)}}catch(Xt){console.error("사용자 정보 조회 실패:",Xt)}})()},[u]),A.useEffect(()=>{var fe;(fe=e.state)!=null&&fe.step&&Fe(e.state.step)},[(Ur=e.state)==null?void 0:Ur.step]),A.useEffect(()=>{const fe=()=>{x.current&&w(x.current.clientWidth)};return fe(),window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const He=({numPages:fe})=>{h(fe),g(1)},Re=fe=>{g(Xt=>{const zr=Xt+fe;return Math.min(Math.max(1,zr),d)})},qe=()=>Re(-1),ft=()=>Re(1),[Xe,qt]=A.useState({all:!1,privacy:!1,identification:!1,telecom:!1,service:!1,thirdParty:!1}),[es,vs]=A.useState(!1),Vr=Xe.privacy&&Xe.identification&&Xe.telecom&&Xe.service&&Xe.thirdParty,$n=()=>{if(ce===1){n("/id/verification",{state:{from:e.pathname,signupState:{productId:s,productName:Z,bankName:he,tags:ve,productType:Ee,imageUrl:ye,guideFile:se,interestRange:me}}});return}ce<5&&Fe(ce+1)},Ka=async()=>{try{P(!0);const fe=await x3();F(fe.annualIncome),U(fe.totalAsset),X(!0)}catch(fe){console.error("소득 조회 오류:",fe.message),alert(fe.message)}finally{P(!1)}},Fc=async()=>{if(!s){alert("상품 정보가 없습니다.");return}try{J(!0),await y3(s)?(alert("상품 가입 자격이 확인되었습니다."),Fe(5)):(alert("상품 가입 자격이 없습니다."),n(`/token/onsale/products/${s}`))}catch(fe){console.error("자격 확인 오류:",fe.message),alert(fe.message)}finally{J(!1)}},Bc=async()=>{try{const fe={productId:s,purpose:b};Ee==="VOUCHER"?fe.voucherQuantity=te?parseInt(te,10):0:(fe.initialDepositAmount=ae?parseFloat(ae):0,fe.selectedFreeDepositRate=G),console.log("subscribe request:",fe);const Xt=await F9(fe);alert("상품 가입이 완료되었습니다!"),n(`/token/onsale/products/${s}/signup-complete`,{state:{subscribeResponse:Xt}})}catch(fe){console.error("상품 가입 실패:",fe),alert(fe.message||"상품 가입 중 오류가 발생했습니다.")}},$c=()=>{const fe=!Xe.all;qt({all:fe,privacy:fe,identification:fe,telecom:fe,service:fe,thirdParty:fe})},Vc=fe=>{const Xt=!Xe[fe],zr={...Xe,[fe]:Xt},Cm=zr.privacy&&zr.identification&&zr.telecom&&zr.service&&zr.thirdParty;qt({...zr,all:Cm})},$s=se||"/product-info.pdf";return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"상품 가입"}),c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsxs("div",{className:"p-4",children:[c.jsx(k2,{imageUrl:ye}),c.jsx(N2,{productTitle:Z||"상품명 미지정",interestRange:me||"연 0%"}),c.jsx("div",{className:"flex gap-2 mt-2 mb-4",children:(ve||[]).map((fe,Xt)=>c.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${sA(fe)}`,children:fe},Xt))}),ce===1&&c.jsxs("div",{children:[c.jsx("div",{className:"mt-6 mb-4",children:c.jsx("h2",{className:"text-xl font-bold",children:"가입 전 꼭 알아야 할 내용도 확인해주세요."})}),c.jsx(M9,{consents:Xe,toggleAll:$c,toggleConsent:Vc}),c.jsx(D9,{protectionConfirmed:es,onConfirm:()=>vs(!0),onDeny:()=>vs(!1)})]}),(ce===2||ce===3)&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold mt-6 mb-4",children:"상품설명서"}),c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:qe,className:"px-3 py-1 bg-gray-200 rounded-md",disabled:m<=1,children:"이전"}),c.jsxs("span",{children:[m," / ",d]}),c.jsx("button",{onClick:ft,className:"px-3 py-1 bg-gray-200 rounded-md",disabled:m>=d,children:"다음"})]})}),c.jsx("div",{ref:x,className:"border rounded-md bg-gray-100 p-4",children:c.jsx(A9,{file:$s,onLoadSuccess:He,loading:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("p",{className:"text-gray-500",children:"PDF 불러오는 중..."})}),error:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("p",{className:"text-red-500",children:"PDF 로드에 실패했습니다."})}),noData:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("p",{className:"text-gray-500",children:"PDF 파일이 없습니다."})}),children:c.jsx(I9,{pageNumber:m,width:v,renderAnnotationLayer:!1,renderTextLayer:!1})})})]}),ce===4&&c.jsxs(Kn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsxs("div",{className:"mt-6 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"상품 가입 자격 확인이 필요해요."}),c.jsxs("h2",{className:"text-xl font-bold",children:[r,"님의 직업과 소득을 조회할게요."]})]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"직업 등록"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"text",placeholder:"직업 입력",value:E,onChange:fe=>N(fe.target.value),className:"flex-1 p-2 border border-gray-300 rounded"}),!R&&c.jsx("button",{onClick:async()=>{if(!E.trim()){alert("직업을 입력해주세요.");return}try{const fe=await g3(E.trim());alert(fe),M(!0)}catch(fe){alert(fe.message)}},className:"px-4 py-2 bg-blue text-white rounded-lg",children:"등록"})]})]}),R&&!K&&c.jsx(Kn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center mb-4",children:k?c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("div",{className:"relative w-20 h-20 mb-2",children:[c.jsx("div",{className:"absolute inset-0 border-4 border-gray-100 rounded-full"}),c.jsx("div",{className:"absolute inset-0 border-4 border-[#0a2e64] border-t-transparent rounded-full animate-spin"})]}),c.jsx("p",{className:"text-gray-800 text-sm",children:"소득 조회 중..."})]}):c.jsx("button",{onClick:Ka,className:"w-full py-2 bg-blue text-white rounded-lg flex justify-center items-center",children:"내 소득 조회하기"})}),K&&c.jsx(Kn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:c.jsxs("div",{className:"mb-5",children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"소득 데이터"}),c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("label",{className:"w-24 text-gray-700 text-sm font-medium",children:"연소득"}),c.jsx("input",{type:"text",placeholder:"연소득",readOnly:!0,value:O!==null?O.toLocaleString()+" 원":"",className:"flex-1 p-2 border border-gray-300 rounded"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("label",{className:"w-24 text-gray-700 text-sm font-medium",children:"총자산"}),c.jsx("input",{type:"text",placeholder:"총자산",readOnly:!0,value:D!==null?D.toLocaleString()+" 원":"",className:"flex-1 p-2 border border-gray-300 rounded"})]})]})})]}),ce===5&&c.jsxs("div",{children:[c.jsx("div",{className:"mt-6 mb-4",children:c.jsx("h2",{className:"text-xl font-bold",children:"가입 전 필수 정보를 입력해주세요."})}),Ee==="VOUCHER"?c.jsxs("div",{className:"space-y-6 px-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"자유납입 우대금리"}),c.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded",value:G,onChange:fe=>z(fe.target.value),children:[c.jsx("option",{value:"NONE",children:"자유 납입 없음"}),c.jsx("option",{value:"LEVEL1",children:"월 3회 이상 자유 납입"}),c.jsx("option",{value:"LEVEL2",children:"월 5회 이상 자유 납입"}),c.jsx("option",{value:"LEVEL3",children:"월 10회 이상 자유 납입"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"상품권 수량"}),c.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded",value:te,onChange:fe=>ne(fe.target.value)})]}),c.jsx(Xn,{label:"가입목적",value:b,onChange:fe=>C(fe.target.value),placeholder:"가입목적을 작성해주세요"})]}):Ee==="INSTALLMENT"||Ee==="SAVING"?c.jsxs("div",{className:"space-y-6 px-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"초기 납입액"}),c.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded",value:ae,onChange:fe=>Y(fe.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"자유납입 우대금리"}),c.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded",value:G,onChange:fe=>z(fe.target.value),children:[c.jsx("option",{value:"NONE",children:"자유 납입 없음"}),c.jsx("option",{value:"LEVEL1",children:"월 3회 이상 자유 납입"}),c.jsx("option",{value:"LEVEL2",children:"월 5회 이상 자유 납입"}),c.jsx("option",{value:"LEVEL3",children:"월 10회 이상 자유 납입"})]})]}),c.jsx(Xn,{label:"가입목적",value:b,onChange:fe=>C(fe.target.value),placeholder:"가입목적을 작성해주세요"})]}):c.jsx("div",{className:"px-1",children:c.jsx("p",{children:"유효하지 않은 상품 유형입니다."})})]})]})}),c.jsxs("div",{className:"p-4",children:[ce===1&&c.jsx("button",{onClick:$n,disabled:!Vr||!es,className:`w-full py-3 rounded-md ${Vr&&es?"bg-[#0a2d6b] text-white":"bg-gray-200 text-gray-400"}`,children:"다음"}),ce===2&&c.jsx(Be,{text:"다음",onClick:$n,fullWidth:!0,disabled:d>0&&m<d}),ce===3&&c.jsx(Be,{text:"확인했습니다",onClick:$n,fullWidth:!0}),ce===4&&c.jsx(Be,{text:"자격 확인하기",onClick:Fc,fullWidth:!0,disabled:ee}),ce===5&&c.jsx(Be,{text:"제출하기",onClick:Bc,fullWidth:!0})]})]})}function $9({bankName:n,imageUrl:e,name:t,subtitle:s,tags:r,statusText:o,statusIcon:a,statusIconColor:u,onClick:d}){return c.jsxs("div",{onClick:d,className:"border-b pb-4 cursor-pointer hover:bg-gray-50",children:[c.jsx("img",{src:e,alt:n,className:"w-12 h-12 rounded-full"}),c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"mt-2 font-bold text-2xl",children:t}),s&&c.jsx("div",{className:"text-1xl font-bold mb-2 text-blue",children:s}),a&&o&&c.jsxs("div",{className:"flex items-center mb-2 mt-2",children:[c.jsx(a,{size:20,className:u}),c.jsx("span",{className:"ml-1 text-sm text-red-500",children:o})]}),c.jsx("div",{className:"flex gap-2 mt-2 mb-4",children:r.map((h,m)=>c.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${h.color}`,children:h.text},m))})]})]})}function V9({items:n}){return c.jsx("div",{className:"space-y-6 p-3",children:n.map(e=>c.jsx($9,{...e},e.productId))})}function U9({categories:n,selected:e,onSelect:t}){return c.jsx("div",{className:"flex border-b mb-4",children:n.map(s=>c.jsx("button",{onClick:()=>t(s),className:`pb-2 px-4 ${e===s?"border-b-2 border-black font-bold":"text-gray-500"}`,children:s},s))})}function z9(n,e){return n===0?100:(n-e)/n*100}function H9(){const n=ke(),e=["전체","예금","적금","입출금","상품권"],[t,s]=A.useState("전체"),[r,o]=A.useState([]);A.useEffect(()=>{XW().then(o).catch(console.error)},[]);const a=r.map(u=>{const d=z9(u.totalParticipants,u.currentParticipants);return{productId:u.id,bankName:u.bankName,imageUrl:u.imageUrl,name:u.productName,subtitle:`연 ${u.minInterestRate}% ~ 연 ${u.maxInterestRate}%`,tags:u.tags.map(h=>({text:h,color:sA(h)})),statusText:d<=10?"마감 임박":void 0,statusIcon:d<=10?sP:void 0,statusIconColor:d<=10?"text-red-500":void 0,onClick:()=>n(`/token/onsale/products/${u.id}`,{state:{product:u}})}});return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"K-계좌"}),c.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[c.jsx("div",{className:"relative mb-6",children:c.jsx("input",{type:"text",placeholder:"상품 검색어를 입력해 주세요.",className:"w-full py-3 px-4 bg-gray-100 rounded-full"})}),c.jsx(U9,{categories:e,selected:t,onSelect:s}),c.jsx(V9,{items:a})]}),c.jsx(st,{})]})}function W9(){const n=ke(),e=A.useRef(null),[t,s]=A.useState(null),[r,o]=A.useState(""),[a,u]=A.useState(!1),[d,h]=A.useState(null),m=w=>{var E;const b=(E=w.target.files)==null?void 0:E[0];if(!b)return;o(b.name),u(!0);const C=new FileReader;C.onload=N=>{var P;const k=(P=N.target)==null?void 0:P.result;s(k),localStorage.setItem("businessImageBase64",k),u(!1)},C.readAsDataURL(b)},g=()=>{var w;(w=e.current)==null||w.click()},x=async()=>{if(t)try{u(!0);const b=await(await fetch(t)).blob(),C=new File([b],r||"license.png",{type:b.type}),E=await w3(C);localStorage.setItem("businessOcrResult",JSON.stringify(E)),n("/store/register/info")}catch(w){console.error("OCR 업로드 오류:",w),alert("OCR 처리 중 오류가 발생했습니다.")}finally{u(!1)}},v=()=>{s(null),o(""),h(null),localStorage.removeItem("businessImageBase64")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"사업자 정보확인"}),c.jsxs("div",{className:"bg-white pb-24 flex-1 flex flex-col mt-5",children:[c.jsx("div",{className:"p-4 flex items-center",children:c.jsx("h2",{className:"text-xl font-bold",children:"사업자등록증 업로드"})}),c.jsxs("div",{className:"px-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"사업자등록증을 업로드하여 OCR 검증을 진행해주세요."}),c.jsx("input",{type:"file",ref:e,onChange:m,accept:"image/*",className:"hidden"}),c.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-100 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"mr-2 mt-0.5 text-blue-500",children:c.jsx(tP,{size:16})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"업로드 가이드"}),c.jsxs("ul",{className:"mt-1 text-xs text-blue-700 list-disc pl-5 space-y-1",children:[c.jsx("li",{children:"사업자등록증 전체가 명확하게 보이도록 업로드해주세요"}),c.jsx("li",{children:"JPEG, PNG, PDF 파일 형식을 지원합니다"}),c.jsx("li",{children:"최대 10MB 크기까지 업로드 가능합니다"})]})]})]})}),t?c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"relative rounded-lg overflow-hidden mb-4",style:{height:"300px"},children:[c.jsx("img",{src:t,alt:"사업자등록증",className:"object-contain w-full h-full"}),c.jsx("button",{onClick:v,className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md",children:"✕"})]}),c.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["파일명: ",r]}),!d&&c.jsx("button",{onClick:x,disabled:a,className:"bg-[#002169] w-full h-12 text-white rounded-md font-medium",children:a?"OCR 검증 중...":"OCR 검증 요청"})]}):c.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 min-h-[300px] flex flex-col justify-center",onClick:g,children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"클릭하여 사업자등록증 업로드"}),c.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG 파일 등"})]})]})]})]})}const G9="http://localhost:8080";function K9(){const n=ke(),e=et(),{id:t}=xs(),s=e.pathname==="/store/menu/add",r=e.pathname==="/store/menu/edit"||e.pathname.startsWith("/store/menu/edit/"),[o,a]=A.useState({name:"",price:"",cryptoPrices:[{code:"XRP",amount:3.3},{code:"SOL",amount:3.3}],image:null});A.useEffect(()=>{r&&t&&a({id:t,name:"불고기 버거",price:"8000",cryptoPrices:[{code:"XRP",amount:3.2},{code:"SOL",amount:3.2}],image:null})},[r,t]);const u=x=>{a({...o,name:x.target.value})},d=x=>{const v=x.target.value.replace(/[^0-9]/g,"");a({...o,price:v})},h=x=>{a({...o,image:x})},m=async()=>{if(!o.name.trim()){alert("음식명을 입력해주세요.");return}if(!o.price.trim()){alert("가격을 입력해주세요.");return}if(!o.image){alert("음식 사진을 업로드해주세요.");return}try{if(!sessionStorage.getItem("accessToken")){alert("로그인 정보가 없습니다. 다시 로그인해주세요."),n("/login");return}const v=new FormData;v.append("menuData",new Blob([JSON.stringify({name:o.name,price:o.price})],{type:"application/json"})),v.append("menuImage",o.image);const w=await C3(v);if(!w.ok){const b=await w.text();throw new Error(b||"메뉴 등록에 실패했습니다.")}alert(s?"메뉴가 추가되었습니다.":"메뉴가 수정되었습니다."),n(-1)}catch(x){console.error("메뉴 등록 실패:",x),alert("메뉴 등록 중 오류가 발생했습니다.")}},g=async()=>{if(window.confirm("정말로 이 메뉴를 삭제하시겠습니까?"))try{const x=sessionStorage.getItem("accessToken");if(!x){alert("로그인 정보가 없습니다. 다시 로그인해주세요."),n("/login");return}const v=await fetch(`${G9}/store/menu/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${x}`}});if(!v.ok){const w=await v.text();throw new Error(w||"메뉴 삭제에 실패했습니다.")}alert("메뉴가 삭제되었습니다."),n(-1)}catch(x){console.error("메뉴 삭제 실패:",x),alert("메뉴 삭제 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:s?"메뉴 추가":"메뉴 수정"}),c.jsxs("main",{className:"flex-1 p-4 bg-white overflow-auto",children:[c.jsx("div",{className:"mb-4 mt-5",children:c.jsx(Xn,{label:"음식명",value:o.name,onChange:u,placeholder:"음식명을 입력해주세요."})}),c.jsx("div",{className:"mb-4",children:c.jsx(Xn,{label:"가격",value:o.price,onChange:d,placeholder:"가격을 입력해주세요.",type:"text"})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-lg font-medium mb-2",children:"각 코인 금액"}),c.jsxs("div",{className:"space-y-3",children:[o.cryptoPrices.map(x=>c.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[c.jsx("span",{className:`px-3 py-1.5 rounded text-sm font-medium ${x.code==="XRP"?"bg-gray-200 text-blue-700":"bg-purple-100 text-purple-700"}`,children:x.code}),c.jsxs("span",{className:"font-medium",children:[o.price?(parseFloat(o.price)/2500).toFixed(2):"0.00"," ",x.code]})]},x.code)),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"* 원화 가격 입력 시 자동으로 코인 가격이 계산됩니다."})]})]}),c.jsx("div",{className:"mb-6",children:c.jsx(s1,{label:"음식사진 업로드",previewLabel:"선택된 이미지",onChange:h,value:o.image})}),c.jsxs("div",{className:"space-y-3 mt-6",children:[r&&c.jsx(Be,{text:"삭제하기",onClick:g,className:"w-full bg-red-500 text-white py-3 rounded-lg"}),c.jsx(Be,{text:s?"추가하기":"수정하기",onClick:m,className:"w-full bg-[#0a2e65] text-white py-3 rounded-lg"})]})]}),c.jsx(st,{})]})}function q9(){const n=ke(),{menuId:e}=xs(),[t,s]=A.useState({name:"",price:"",imageFile:null,imageUrl:""}),r=async()=>{if(e)try{if(!sessionStorage.getItem("accessToken")){alert("로그인이 필요합니다."),n("/login");return}const g=await E3(e);s({id:g.menuId,name:g.menuName,price:g.menuPrice.toString(),imageUrl:g.menuImage||"",imageFile:null})}catch(m){console.error("메뉴 조회 실패:",m),alert("메뉴 조회 중 오류가 발생했습니다.")}};A.useEffect(()=>{r()},[e]);const o=m=>{s({...t,name:m.target.value})},a=m=>{const g=m.target.value.replace(/[^0-9]/g,"");s({...t,price:g})},u=m=>{s({...t,imageFile:m})},d=async()=>{if(!e){alert("메뉴 혹은 가게 ID가 유효하지 않습니다.");return}if(!t.name.trim()||!t.price.trim()){alert("이름과 가격을 입력해주세요.");return}try{if(!sessionStorage.getItem("accessToken")){alert("로그인이 필요합니다."),n("/login");return}const g=new FormData;if(g.append("menuData",new Blob([JSON.stringify({name:t.name,price:parseInt(t.price,10)})],{type:"application/json"})),t.imageFile)g.append("menuImage",t.imageFile);else if(t.imageUrl){const v=await(await fetch(t.imageUrl)).blob();g.append("menuImage",v,"existing_image.jpg")}await j3(e,g),alert("메뉴가 수정되었습니다."),n(-1)}catch(m){console.error("메뉴 수정 실패:",m),alert("메뉴 수정 중 오류가 발생했습니다.")}},h=async()=>{if(!e){alert("메뉴 ID가 없습니다.");return}if(window.confirm("정말 이 메뉴를 삭제하시겠습니까?"))try{if(!sessionStorage.getItem("accessToken")){alert("로그인이 필요합니다."),n("/login");return}await k3(e),alert("메뉴가 삭제되었습니다."),n(-1)}catch(m){console.error("메뉴 삭제 실패:",m),alert("메뉴 삭제 중 오류가 발생했습니다.")}};return c.jsxs("div",{className:"flex flex-col h-screen",children:[c.jsx(Ie,{title:"메뉴 수정"}),c.jsxs("main",{className:"flex-1 p-4 bg-white overflow-auto",children:[c.jsx("div",{className:"mb-4 mt-5",children:c.jsx(Xn,{label:"음식명",value:t.name,onChange:o,placeholder:"음식명을 입력해주세요."})}),c.jsx("div",{className:"mb-4",children:c.jsx(Xn,{label:"가격",value:t.price,onChange:a,placeholder:"가격을 입력해주세요.",type:"text"})}),c.jsx("div",{className:"mb-6",children:c.jsx(s1,{label:"음식 사진",previewLabel:"선택된 이미지",onChange:u,value:t.imageFile||void 0})}),c.jsxs("div",{className:"space-y-3 mt-6",children:[c.jsx(Be,{text:"메뉴 삭제",onClick:h,className:"w-full bg-red-500 text-white py-3 rounded-lg"}),c.jsx(Be,{text:"메뉴 수정",onClick:d,className:"w-full bg-[#0a2e65] text-white py-3 rounded-lg"})]})]}),c.jsx(st,{})]})}function X9(){const[n,e]=A.useState(""),[t,s]=A.useState(""),[r,o]=A.useState({all:!1,terms:!1,privacy:!1}),[a,u]=A.useState(!1),[d,h]=A.useState(!1),m=et(),g=ke(),x=()=>{const N=!r.all;o({all:N,terms:N,privacy:N})},v=N=>{const k={...r,[N]:!r[N]};k.all=k.terms&&k.privacy,o(k)},w=r.terms&&r.privacy,b=async()=>{try{if(!n){alert("휴대폰번호를 입력해주세요.");return}if(!(await dP(n,"SUBSCRIBE_PRODUCT")).ok){alert("인증번호 요청에 실패했습니다.");return}alert("인증번호가 요청되었습니다."),u(!0)}catch(N){console.error(N),alert("인증번호 요청 중 오류가 발생했습니다.")}},C=async()=>{try{if(!t){alert("인증번호를 입력해주세요.");return}if(!(await hP(t,n,"SUBSCRIBE_PRODUCT")).ok){alert("인증번호가 일치하지 않습니다.");return}alert("인증이 완료되었습니다."),h(!0)}catch(N){console.error(N),alert("인증 확인 중 오류가 발생했습니다.")}},E=()=>{var P;const N=((P=m.state)==null?void 0:P.signupState)||{},{productId:k}=N;g(`/token/onsale/products/${k}/signup`,{state:{...N,step:2}})};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"본인확인"}),c.jsxs("main",{className:"flex-1 px-5 flex flex-col",children:[c.jsxs("div",{className:"rounded-lg p-3 mt-4",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"약관에 동의해주세요."}),c.jsxs("div",{className:"flex items-center py-2 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:x,children:[c.jsx(_a,{checked:r.all}),c.jsx("span",{className:"ml-3 text-base font-medium text-gray-800",children:"모든 약관에 동의합니다."})]}),c.jsx("div",{className:"h-px bg-gray-200 my-1 mx-1"}),c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:()=>v("terms"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_a,{checked:r.terms}),c.jsxs("span",{className:"ml-3 text-base text-gray-800",children:["이용약관 ",c.jsx("span",{className:"text-gray-500 font-medium",children:"(필수)"})]})]}),c.jsx(If,{className:"text-gray-400"})]}),c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer hover:bg-gray-100 rounded-lg px-3 transition-colors",onClick:()=>v("privacy"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_a,{checked:r.privacy}),c.jsxs("span",{className:"ml-3 text-base text-gray-800",children:["개인정보 처리방침"," ",c.jsx("span",{className:"text-gray-500 font-medium",children:"(필수)"})]})]}),c.jsx(If,{className:"text-gray-400"})]})]}),c.jsxs("div",{className:"px-3 pt-5",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"인증정보 입력"}),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"휴대폰"}),c.jsx("div",{className:"relative",children:c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"})})]}),c.jsx("div",{className:"flex mb-3",children:c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"휴대폰번호 입력",value:n,onChange:N=>e(N.target.value),className:"w-full p-2 border border-gray-300 rounded"})})}),c.jsx("button",{onClick:b,className:"w-full py-2 bg-blue text-white rounded-lg mb-4",children:"인증번호 요청"}),c.jsxs("div",{className:"mb-5 mt-5",children:[c.jsx("label",{className:"block text-gray-500 text-sm mb-1",children:"인증번호"}),c.jsx("input",{type:"text",placeholder:"숫자 6자리 입력",value:t,onChange:N=>s(N.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),c.jsx("button",{onClick:C,className:"w-full py-2 bg-blue text-white rounded-lg mb-4",children:"인증번호 확인"})]})]}),c.jsx("div",{className:"p-5 bg-white",children:c.jsx(Be,{text:"본인 인증 완료",onClick:E,className:`w-full py-3.5 rounded-lg font-medium text-white ${w?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"}`,disabled:!w||!d})})]})}function Y9({buttonClassName:n}){const e=ke(),t=()=>{e(-1)},s=()=>{e("/welcome")};return c.jsxs("div",{className:"min-h-screen flex flex-col px-5 pt-8 pb-10 bg-gradient-to-br",children:[c.jsx("div",{className:"relative z-10",children:c.jsx("img",{src:"/crepe-newlogo2.png",alt:"Logo",className:"object-contain w-[400px] aspect-[2.51] mx-auto  animate-pulse"})}),c.jsxs("div",{className:"mt-8 w-full relative z-10",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-3xl border border-white/50 shadow-2xl w-full text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-100/30 via-pink-100/30 to-orange-100/30 rounded-3xl"}),c.jsx("div",{className:"flex justify-center mb-6 relative z-10",children:c.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 p-5 rounded-full shadow-lg animate-bounce",children:c.jsx(ZS,{size:36,className:"text-white animate-spin",style:{animationDuration:"3s"}})})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 relative z-10",children:"🚀 개발 중입니다!"}),c.jsxs("p",{className:"text-gray-700 text-base leading-relaxed mb-6 relative z-10",children:[c.jsx("span",{className:"inline-block animate-bounce",children:"✨"})," 더 멋진 서비스를 위해 ",c.jsx("span",{className:"inline-block animate-bounce delay-100",children:"💻"}),c.jsx("br",{}),"열심히 코딩하고 있어요! ",c.jsx("span",{className:"inline-block animate-bounce delay-200",children:"🔥"})]}),c.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 p-4 rounded-2xl mb-6 border border-blue-200/50 relative z-10",children:c.jsxs("div",{className:"flex items-center justify-center text-blue-700 text-base font-medium",children:[c.jsx("div",{className:"bg-blue-500 p-2 rounded-full mr-3 animate-pulse",children:c.jsx(sP,{size:18,className:"text-white"})}),c.jsx("span",{className:"animate-pulse",children:"곧 만나요! 🎉"})]})})]}),c.jsxs("div",{className:"mt-10",children:[c.jsx(Be,{text:"이전 페이지로",onClick:t,className:`w-full rounded-[9px] font-medium bg-[#0C2B5F] text-white ${n}`}),c.jsx("div",{className:"flex justify-center mt-4 text-sm text-gray-500",children:c.jsx("button",{onClick:s,className:"hover:underline",children:"홈으로 돌아가기"})})]})]})]})}function Q9({title:n,description:e}){return c.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[c.jsx(k5,{size:64,color:"#16a34a",className:"mb-4"}),c.jsx("h2",{className:"text-2xl font-bold mb-2",children:n}),c.jsx("p",{className:"text-gray-600 text-center",children:e})]})}function J9({productName:n,startDate:e,endDate:t,monthlyAmount:s,baseRate:r,preferentialRate:o,finalRate:a}){return c.jsxs(Kn.div,{className:"border rounded-md p-4 mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsx("h3",{className:"font-medium mb-3",children:"가입 상품 정보"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"상품명"}),c.jsx("div",{className:"font-medium",children:n})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"가입일"}),c.jsx("div",{children:e})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"만기일"}),c.jsx("div",{children:t})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"월 납입금액"}),c.jsx("div",{children:s})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"기본금리"}),c.jsx("div",{children:r})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"우대금리"}),c.jsx("div",{children:o})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("div",{className:"text-gray-600",children:"최종금리"}),c.jsx("div",{className:"font-medium",children:a})]})]})]})}function uT(n){const e=new Date(n);return`${e.getFullYear()}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getDate().toString().padStart(2,"0")}`}function Z9(){const n=ke(),t=et().state;if(!(t!=null&&t.subscribeResponse))return alert("상품 가입 정보가 없습니다. 상세 페이지로 이동합니다."),c.jsx(Ny,{to:"/token/onsale/products",replace:!0});const{subscribeResponse:s}=t,r={productName:s.productName,productId:s.productId,bankName:s.bankName,startDate:uT(s.subscribeDate),endDate:uT(s.expiredDate),monthlyAmount:`${s.balance.toLocaleString()}원`,baseRate:`연 ${s.interestRate}%`,preferentialRate:s.additionalMessage||"-",finalRate:s.potentialMaxRate!==void 0?`연 ${(s.interestRate+s.potentialMaxRate).toFixed(1)}%`:`연 ${s.interestRate}%`,voucherCode:s.voucherCode};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(Ie,{title:"가입 완료"}),c.jsxs(Kn.div,{className:"flex-1 overflow-auto p-4 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsx(Q9,{title:"상품 가입이 완료되었습니다",description:`${r.productName} 상품이 성공적으로 가입되었습니다.`}),c.jsx(J9,{...r}),r.voucherCode&&c.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[c.jsx("p",{className:"text-gray-700",children:"발급된 상품권 코드:"}),c.jsx("p",{className:"font-mono break-all",children:r.voucherCode})]})]}),c.jsx(Kn.div,{className:"p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},children:c.jsx(Be,{text:"홈으로 이동",onClick:()=>n("/my/coin"),fullWidth:!0})})]})}const eq=()=>!!sessionStorage.getItem("accessToken")?c.jsx(TF,{}):c.jsx(Ny,{to:"/login",replace:!0});function tq(){const[n,e]=A.useState([]),[t,s]=A.useState(null),r=a=>({PENDING:"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 border border-amber-200",REFUND:"bg-gradient-to-r from-red-50 to-rose-50 text-red-700 border border-red-200",PAID:"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 border border-emerald-200"})[a]||"bg-gray-50 text-gray-600 border border-gray-200",o=a=>({PENDING:"수락 대기",REFUND:"환불 완료",PAID:"결제 완료"})[a]||a;return A.useEffect(()=>{v3().then(a=>{e(a.content)}).catch(a=>{console.error(a),s("결제 내역을 불러오는 데 실패했습니다.")})},[]),c.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[c.jsx(Ie,{title:"결제 내역"}),c.jsxs("div",{className:"px-4 py-4 flex-1 flex flex-col",children:[c.jsx("div",{className:"mt-8 bg-gradient-to-r from-slate-50 to-slate-100 rounded-t-xl px-6 py-4 border border-slate-200",children:c.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-slate-700",children:[c.jsx("div",{className:"col-span-2",children:"가게명"}),c.jsx("div",{className:"col-span-2 text-center",children:"결제 날짜"}),c.jsx("div",{className:"col-span-2 text-center",children:"결제 ID"}),c.jsx("div",{className:"col-span-2 text-center",children:"상세"}),c.jsx("div",{className:"col-span-2 text-center",children:"금액"}),c.jsx("div",{className:"col-span-2 text-center",children:"상태"})]})}),c.jsx("div",{className:"bg-white border-x border-b border-slate-200 rounded-b-xl divide-y divide-slate-100 shadow-sm",children:n.map((a,u)=>c.jsx("div",{className:`px-6 py-5 hover:bg-slate-50 transition-all duration-200 ${u===n.length-1?"rounded-b-xl":""}`,children:c.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[c.jsx("div",{className:"col-span-2",children:c.jsx("div",{className:"font-semibold text-slate-900 truncate text-sm",children:a.storeName})}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("div",{className:"text-slate-600 text-sm",children:new Date(a.payDate).toLocaleDateString("ko-KR")}),c.jsx("div",{className:"text-slate-400 text-xs mt-0.5",children:new Date(a.payDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.jsx("div",{className:"col-span-2",children:c.jsx("div",{className:"font-mono text-xs text-slate-600 bg-slate-50 px-2 py-1 rounded-md truncate border",children:a.orderId})}),c.jsx("div",{className:"col-span-2",children:c.jsx("div",{className:"text-slate-700 text-sm truncate",title:a.orderDetail,children:a.orderDetail})}),c.jsxs("div",{className:"col-span-2 text-right",children:[c.jsxs("div",{className:"text-slate-900 font-bold text-sm",children:[a.payKRWAmount.toLocaleString(),c.jsx("span",{className:"text-slate-700 font-semibold text-[12px] ml-1",children:"KRW"})]}),c.jsxs("div",{className:"text-xs text-slate-600 mt-0.5 bg-slate-50 px-2 py-0.5 rounded inline-block",children:[a.payCoinAmount," ",a.coinCurrency]})]}),c.jsx("div",{className:"col-span-2 flex justify-center",children:c.jsx("span",{className:`inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-full ${r(a.payType)}`,children:o(a.payType)})})]})},a.payId))}),c.jsxs("div",{className:"mt-4 text-center text-xs text-slate-500",children:["총 ",n.length,"건의 결제 내역"]}),c.jsx("div",{className:"mt-auto flex justify-end text-xs text-gray-500",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{disabled:!0,className:"h-8 w-8 p-0 rounded-md border border-gray-300 bg-white text-gray-400 cursor-not-allowed",children:"<"}),c.jsx("button",{className:"h-8 w-8 p-0 rounded-md bg-[#FF7B25] text-white hover:bg-[#FF7B25]",children:"1"}),c.jsx("button",{disabled:!0,className:"h-8 w-8 p-0 rounded-md border border-gray-300 bg-white text-gray-400 cursor-not-allowed",children:">"})]})})]}),c.jsx(st,{})]})}function nq(){const n="http://localhost:8080",e=ke(),t=et(),[s,r]=A.useState("..."),[o,a]=A.useState(""),[u,d]=A.useState(!1),[h,m]=A.useState(!0),[g,x]=A.useState(!1),v=sessionStorage.getItem("accessToken"),{logout:w}=n1(),b=t.pathname.includes("/store"),C=()=>{e(b?"/store/my/edit":"/user/my/edit")},E=async F=>{try{if(console.log("🔍 OTP 상태 조회 시작:",{email:F,BASE_URL:n}),console.log("🔑 사용할 토큰:",v?`${v.substring(0,20)}...`:"null"),!v){console.error("❌ 토큰이 없습니다. 로그인이 필요합니다."),d(!1),x(!0);return}const D=await fetch(`${n}/api/otp/status`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({email:F})});if(console.log("📨 OTP 상태 응답:",{status:D.status,statusText:D.statusText,url:D.url,headers:Object.fromEntries(D.headers.entries())}),D.status===401){console.error("❌ 인증 실패 (401): 토큰이 유효하지 않거나 만료되었습니다."),w(),e("/login",{replace:!0});return}if(!D.ok){const K=await D.text();console.error("❌ OTP 상태 조회 HTTP 오류:",{status:D.status,statusText:D.statusText,errorText:K});return}const U=await D.json();console.log("✅ OTP 상태 응답 데이터:",U),U.status==="success"?U.data&&U.data.enabled?(d(!0),x(!1),console.log("🛡️ OTP 활성화됨")):(d(!1),x(!0),console.log("🔓 OTP 비활성화 또는 미설정")):(console.warn("⚠️ OTP 상태 조회 실패:",U.message),d(!1),x(!0))}catch(D){console.error("❌ OTP 상태 조회 네트워크 오류:",D),d(!1),x(!0)}},N=async()=>{if(!o){alert("이메일 정보가 없습니다.");return}if(confirm(`⚠️ 2차 인증을 해제하시겠습니까?

해제하면 계정 보안이 약화됩니다.
정말로 해제하시겠습니까?`))try{const D=await fetch(`${n}/api/otp/disable`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const U=await D.json();U.status==="success"?(alert("2차 인증이 성공적으로 해제되었습니다."),d(!1),x(!0)):alert(U.message||"OTP 해제에 실패했습니다.")}catch(D){console.error("OTP 해제 오류:",D),alert("네트워크 오류가 발생했습니다.")}};A.useEffect(()=>{(async()=>{try{if(!v){console.warn("⚠️ 토큰이 없어서 사용자 데이터 조회를 건너뜁니다."),x(!0);return}if(console.log("👤 사용자 데이터 조회 시작...",{isSeller:b}),b){const D=await fm();console.log("🏪 스토어 데이터:",D),r(D.storeName),a(D.email),D.email?await E(D.email):(console.warn("⚠️ 스토어 이메일 정보가 없습니다."),x(!0))}else{const D=await t1();console.log("👤 사용자 데이터:",D),r(D.nickname),a(D.email),D.email?await E(D.email):(console.warn("⚠️ 사용자 이메일 정보가 없습니다."),x(!0))}}catch(D){console.error("❌ 사용자 정보 조회 실패:",D),x(!0)}finally{m(!1)}})()},[v,b,n]);const k=()=>{console.log("🚪 로그아웃 버튼 클릭"),w(),e("/login",{replace:!0})},P=()=>{e("/otp/setup")},R=()=>{let F;u?(F=confirm(`2차 인증 관리

• 확인: 2차 인증 해제
• 취소: 2차 인증 재설정

어떤 작업을 하시겠습니까?`),F?N():P()):P()},M=()=>{x(!1)},O=()=>{const F=[{label:"내 정보 수정",onClick:C,icon:c.jsx(ZS,{size:18,color:"#6366f1"})}];return F.push({label:u?"2차 인증 관리":"2차 인증 설정",onClick:R,icon:u?c.jsx(Vx,{size:18,color:"#10b981"}):c.jsx(Vx,{size:18,color:"#6b7280"}),badge:u?"활성화됨":"미설정"}),b?F.push({label:"결산리포트",onClick:()=>e("/settlement"),icon:c.jsx(eP,{size:18,color:"#10b981"})}):F.push({label:"내 주문 내역",onClick:()=>e("/my/orders"),icon:c.jsx(Ty,{size:18,color:"#10b981"})},{label:"결제 내역",onClick:()=>e("/my/payments"),icon:c.jsx(rP,{size:18,color:"#f59e0b"})}),F.push({label:"고객 센터",onClick:()=>e(b?"/store/my/customer-support":"/home/my/customer-support"),icon:c.jsx(nP,{size:18,color:"#0ea5e9"})}),F};return h?c.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[c.jsx(Ie,{title:b?"판매자 페이지":"마이페이지"}),c.jsx("main",{className:"flex-1 overflow-y-auto min-h-0",children:c.jsx("div",{className:"min-h-full p-4 pb-8 bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}),c.jsx(st,{})]}):c.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[c.jsx(Ie,{title:b?"판매자 페이지":"마이페이지"}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 min-h-0",children:c.jsxs("div",{className:"p-4 pb-8",children:[g&&!u&&c.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 p-4 mb-4 rounded-lg shadow-sm",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(e1,{className:"h-5 w-5 text-amber-400"})}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"🔒 계정 보안 강화가 필요합니다"}),c.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[c.jsxs("p",{className:"mb-2",children:[c.jsx("strong",{children:"2차 인증(OTP)"}),"을 설정하여 계정을 더욱 안전하게 보호하세요!"]}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"해킹 시도로부터 계정 보호"}),c.jsx("li",{children:"무단 로그인 방지"}),c.jsxs("li",{children:["개인정보 및 ",b?"판매":"결제"," 정보 보안 강화"]})]})]}),c.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[c.jsx("button",{onClick:P,className:"bg-amber-600 text-white px-3 py-1.5 rounded text-xs font-medium hover:bg-amber-700 transition-colors",children:"지금 설정하기"}),c.jsx("button",{onClick:M,className:"bg-gray-200 text-gray-600 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-300 transition-colors",children:"나중에"})]})]})]})}),c.jsx(lP,{username:s,onLogout:k,hasOtpEnabled:u}),c.jsx(cP,{menuItems:O()})]})}),c.jsx(st,{})]})}function sq({buttonColor:n,toggleButtonColor:e}){return A.useEffect(()=>{if(window.location.pathname==="/"){const t=setTimeout(()=>{window.location.pathname="/welcome"},2e3);return()=>clearTimeout(t)}},[]),c.jsx(t5,{children:c.jsxs(_F,{children:[c.jsx(Ce,{path:"/",element:c.jsx(h5,{})}),c.jsx(Ce,{path:"/welcome",element:c.jsx(W3,{})}),c.jsx(Ce,{path:"/terms",element:c.jsx(DN,{})}),c.jsx(Ce,{path:"/email",element:c.jsx(ON,{})}),c.jsx(Ce,{path:"/phone",element:c.jsx(FN,{})}),c.jsx(Ce,{path:"/phone/verification",element:c.jsx(BN,{})}),c.jsx(Ce,{path:"/additional/info",element:c.jsx(X3,{})}),c.jsx(Ce,{path:"/signup-complete",element:c.jsx(Q3,{})}),c.jsx(Ce,{path:"/login",element:c.jsx(e4,{})}),c.jsx(Ce,{path:"/id/verification",element:c.jsx($W,{})}),c.jsx(Ce,{path:"/id/verification/step2",element:c.jsx(UW,{})}),c.jsx(Ce,{path:"/id/verification/step3",element:c.jsx(zW,{})}),c.jsx(Ce,{path:"/id/verification/step4",element:c.jsx(X9,{})}),c.jsx(Ce,{path:"/store/terms",element:c.jsx(DN,{})}),c.jsx(Ce,{path:"/store/email",element:c.jsx(ON,{})}),c.jsx(Ce,{path:"/store/phone",element:c.jsx(FN,{})}),c.jsx(Ce,{path:"/store/phone/verification",element:c.jsx(BN,{})}),c.jsx(Ce,{path:"/store/register",element:c.jsx(W9,{})}),c.jsx(Ce,{path:"/store/register/info",element:c.jsx(H6,{})}),c.jsxs(Ce,{element:c.jsx(eq,{}),children:[c.jsx(Ce,{path:"/user/my",element:c.jsx(LN,{})}),c.jsx(Ce,{path:"/user/my/edit",element:c.jsx(B3,{})}),c.jsx(Ce,{path:"/store/my",element:c.jsx(LN,{})}),c.jsx(Ce,{path:"/store/my/settlement-report",element:c.jsx(H3,{})}),c.jsx(Ce,{path:"/store/my/edit",element:c.jsx(pV,{})}),c.jsx(Ce,{path:"/store/manage",element:c.jsx(G6,{})}),c.jsx(Ce,{path:"/store/menu/add",element:c.jsx(K9,{})}),c.jsx(Ce,{path:"/store/menu/edit/:menuId",element:c.jsx(q9,{})}),c.jsx(Ce,{path:"/store",element:c.jsx(uV,{})}),c.jsx(Ce,{path:"/mall",element:c.jsx(NW,{})}),c.jsx(Ce,{path:"/mall/store/:id",element:c.jsx(hV,{})}),c.jsx(Ce,{path:"/mall/store/cart",element:c.jsx(vW,{})}),c.jsx(Ce,{path:"/mall/store/order",element:c.jsx(mW,{})}),c.jsx(Ce,{path:"/mall/store/order-pending",element:c.jsx(K6,{})}),c.jsx(Ce,{path:"/mall/store/pay-complete/:orderId",element:c.jsx(CW,{})}),c.jsx(Ce,{path:"/my/orders",element:c.jsx(BW,{})}),c.jsx(Ce,{path:"/my/coin",element:c.jsx(DV,{})}),c.jsx(Ce,{path:"/coin-detail/:symbol",element:c.jsx(oV,{})}),c.jsx(Ce,{path:"/coin/address/:symbol",element:c.jsx(EV,{})}),c.jsx(Ce,{path:"/coin/transaction/:symbol",element:c.jsx(jV,{})}),c.jsx(Ce,{path:"/coin/address/add",element:c.jsx(gV,{})}),c.jsx(Ce,{path:"/settlement",element:c.jsx(bV,{})}),c.jsx(Ce,{path:"/my/payments",element:c.jsx(tq,{})}),c.jsx(Ce,{path:"/token/product/detail/:subscribeId",element:c.jsx(GW,{})}),c.jsx(Ce,{path:"/token/product/deposit/:subscribeId",element:c.jsx(MW,{})}),c.jsx(Ce,{path:"/token/product/cancel/:subscribeId",element:c.jsx(DW,{})}),c.jsx(Ce,{path:"/token/detail/:bank",element:c.jsx(jW,{})}),c.jsx(Ce,{path:"/token/exchange/:bank",element:c.jsx(RW,{})}),c.jsx(Ce,{path:"/token/exchange/complete",element:c.jsx(LW,{})}),c.jsx(Ce,{path:"/token/onsale/products/:productId",element:c.jsx(eG,{})}),c.jsx(Ce,{path:"/token/onsale/products/:productId/signup",element:c.jsx(B9,{})}),c.jsx(Ce,{path:"/token/onsale/products/:productId/signup-complete",element:c.jsx(Z9,{})}),c.jsx(Ce,{path:"/token/onsale/products",element:c.jsx(H9,{})}),c.jsx(Ce,{path:"/under-development",element:c.jsx(Y9,{})}),c.jsx(Ce,{path:"/otp/setup",element:c.jsx(nq,{})}),c.jsx(Ce,{path:"*",element:c.jsx(Ny,{to:"/",replace:!0})})]})]})})}const rq=new vO({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,throwOnError:!0}}});function iq(){const[n,e]=A.useState("blue"),t=()=>{e(n==="blue"?"gray":"blue")};return c.jsx(CO,{client:rq,children:c.jsx(I3,{children:c.jsx(rV,{children:c.jsx(sq,{buttonColor:n,toggleButtonColor:t})})})})}tO.createRoot(document.getElementById("root")).render(c.jsx(ps.StrictMode,{children:c.jsx(iq,{})}));
